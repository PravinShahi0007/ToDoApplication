/*!
* RadiantQ jQuery Gantt
* @author RadiantQ
* @version 4.5
* http://www.radiantq.com
*
* Copyright RadiantQ
*/
(function(a,b){function c(c){var d=c||window.event,f=[].slice.call(arguments,1),e=0,g=0,q=0;c=a.event.fix(d);c.type="mousewheel";d.wheelDelta&&(e=d.wheelDelta/120);d.detail&&(e=-d.detail/3);q=e;d.axis!==b&&d.axis===d.HORIZONTAL_AXIS&&(q=0,g=-1*e);d.wheelDeltaY!==b&&(q=d.wheelDeltaY/120);d.wheelDeltaX!==b&&(g=-1*d.wheelDeltaX/120);f.unshift(c,e,g,q);return(a.event.dispatch||a.event.handle).apply(this,f)}var d=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var e=d.length;e;)a.event.fixHooks[d[--e]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=d.length;a;)this.addEventListener(d[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=d.length;a;)this.removeEventListener(d[--a],c,!1);else this.onmousewheel=null}};a.fn.mousewheel==b&&a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});if(a.observable==
b){a.observable=function(a){return new g(a)};var f=[].splice,g=a.observable.Observable=function(a){this.data=a};g.prototype={data:null,_set:function(a,b){var c=a.split("."),d=c.pop();this._get(c)[d]=b},_get:function(b){b="string"===a.type(b)?b.split("."):b;var c,d=this.data;if(0===b.length)return d;for(;1<b.length;)c=b.shift(),d=d[c];return d[b[0]]},property:function(b,c){if("object"===a.type(b)){var d={},f={},e=!1,g;for(g in b){var n=this._get(g);n!=b[g]&&(e=!0,d[g]=n,f[g]=b[g])}if(e)return this._property(d,
f)}else{if(1==arguments.length)return this._get(b);n=this._get(b);if(n!=c)return d={},d[b]=n,f={},f[b]=c,this._property(d,f)}return this},_property:function(b,c){var d=this;a.each(c,function(a,b){d._set(a,b)});return this._trigger("change",{oldValues:b,newValues:c})},insert:function(b,c){"object"===a.type(b)?(c=[b],b=this.data.length):a.isArray(c)||(c=[c]);return this._insert(b,c)},_insert:function(a,b){this.data.splice.apply(this.data,[a,0].concat(b));return this._trigger("insert",{index:a,items:b})},
remove:function(b,c){var d=!1;if("array"===a.type(b)){var f,e,g,n,d=[],r=b;f=0;for(g=this.data.length;f<g;f++)for(e=0,n=r.length;e<n;e++)if(r[e]===this.data[f]){d.push({index:f,item:this.data[e]});break}f=e=0;for(g=d.length;f<g;f++)this.data.splice(d[f].index-e,1),e+=1;return this._trigger("remove",{items:d})}"number"===a.type(b)&&b<=this.data.length-1&&(d=!0);if("object"===a.type(b))for(f=0,g=this.data.length;f<g;f++)if(this.data[f]===b){b=f;d=!0;break}c||(c=1);return this._remove(b,c,d)},_remove:function(a,
b,c){if(!0==c)return c=this.data.slice(a,a+b),this.data.splice(a,b),this._trigger("remove",{index:a,items:c})},replaceAll:function(a){var b={oldItems:this.data.slice(0),newItems:a};f.apply(this.data,[0,this.data.length].concat(a));return this._trigger("replaceAll",b)}};a.each({bind:"bind",unbind:"unbind",_trigger:"triggerHandler"},function(b,c){g.prototype[b]=function(){var b=a([this.data]);b[c].apply(b,arguments);return this}})}})(jQuery);void 0==window.RadiantQ&&(window.RadiantQ={});
RadiantQ.RQ_CollectionChangeNotifier=function(){Array.call(this);this.CollectionChanged=new ObjectEvent("CollectionChanged")};RadiantQ.RQ_CollectionChangeNotifier.prototype=[];RadiantQ.RQ_CollectionChangeNotifier.prototype.add=function(a){this.push(a)};RadiantQ.RQ_CollectionChangeNotifier.prototype.contains=function(a){return-1!=$.inArray(a,this)};
RadiantQ.RQ_CollectionChangeNotifier.prototype.push=function(a){Array.prototype.push.call(this,a);args={Action:"Add",NewItems:[a],index:this.length-1};this.triggerCollectionChanged(args)};RadiantQ.RQ_CollectionChangeNotifier.prototype.insert=function(a,b){"number"==typeof a?this.splice(a,0,b):this.add(a)};
RadiantQ.RQ_CollectionChangeNotifier.prototype.splice=function(a,b,c){var d=[],d=void 0==c?Array.prototype.splice.call(this,a,b):Array.prototype.splice.call(this,a,b,c);if(c){var e={Action:"Add"};e.index=a;e.NewItems=c instanceof Array?c:[c];this.triggerCollectionChanged(e)}b&&0<b&&(e={Action:"Remove"},e.index=a,e.OldItems=d,this.triggerCollectionChanged(e))};
RadiantQ.RQ_CollectionChangeNotifier.prototype.pop=function(){var a=Array.prototype.pop.call(this);args={};a&&(args.Action="Remove",args.index=this.length,args.OldItems=[a]);this.triggerCollectionChanged(args);return a};RadiantQ.RQ_CollectionChangeNotifier.prototype.remove=function(a){if("number"==typeof a)return this.splice(a,1);a=this.indexOf(a);if(-1!=a)return this.splice(a,1)};RadiantQ.RQ_CollectionChangeNotifier.prototype.clear=function(){this.splice(0,this.length)};
RadiantQ.RQ_CollectionChangeNotifier.prototype.triggerCollectionChanged=function(a){var b={type:"",sender:this,target:this};"Add"==a.Action?(b.type="insert",a.items=a.NewItems):(b.type="remove",a.items=a.OldItems);this.CollectionChanged.raise(b,a)};
(function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g,f=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:[.,]\d+)?Z/i,g=/\/Date\((\d+)(?:-\d+)?\)\//i,h=/\/Date\((-\d+)(?:-\d+)?\)\//i,k=/"(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:[.,](\d+))?Z"/gi,l=/"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/gi,p=/^(\d*.\d{2}:\d{2}:\d{2})$/,m=/^(\d{2}:\d{2}:\d{2})/,q=window.JSON&&window.JSON.parse?!0:!1,n=q&&"Y"===
window.JSON.parse('{"x":9}',function(a,b){return"Y"});a.extend({parseJSON:function(r,t,s,u){if("string"!==typeof r||!r)return null;null!=Date.prototype._toString&&-1==Date.prototype._toString.toString().indexOf("[native code]")&&console.error("Multiple references to 'date.js' is found. Correct this and ensure that there is only a single reference.");r=a.trim(r);this.jsonDateConverter=function(a,b){if("string"===typeof b){if(p.test(b)||m.test(b))return RQTimeSpan.parse(b);if(f.test(b)){var c=new Date(b);
if(isNaN(c)){var d=/^(\d{4})-(\d{2})-(\d{2})((T)(\d{2}):(\d{2})(:(\d{2})(\.\d*)?)?)?(Z)?$/;(d="string"===typeof b&&b.match(d))&&(c=new Date(+d[1],+d[2]-1,+d[3],+d[6]||0,+d[7]||0,+d[9]||0,parseInt(1E3*+d[10])||0))}if("Invalid Date"==c)return b;!0==s&&c.addMinutes(c.getTimezoneOffset());return c}if(g.test(b))return new Date(parseInt(g.exec(b)[1],10));if(h.test(b))return Date.MinValue}return u&&(c=u.apply(this,arguments),null!=c)?c:b};if(b.test(r.replace(c,"@").replace(d,"]").replace(e,""))){if(n||q&&
!0!==t)return window.JSON.parse(r,!0===t?this.jsonDateConverter:void 0);r=!0===t?r.replace(k,"new Date(parseInt('$1',10),parseInt('$2',10)-1,parseInt('$3',10),parseInt('$4',10),parseInt('$5',10),parseInt('$6',10),(function(s){return parseInt(s,10)||0;})('$7'))").replace(l,"new Date($1)"):r;return(new Function("return "+r))()}a.error("Invalid JSON: "+r)}})})(jQuery);
(function(a){a.extend(!0,{i18n:{properties:function(b){b=a.extend({name:"Messages",language:"",path:"",mode:"vars",cache:!1,encoding:"UTF-8",callback:null,ApplyOptimizedLookup:!0},b);if(null===b.language||""==b.language)b.language=a.i18n.browserLang();null===b.language&&(b.language="");var c=getFiles(b.name);for(i=0;i<c.length;i++){var d=!1;!0==b.ApplyOptimizedLookup?(5<=b.language.length&&(loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,5)+".txt",b),d=!0),2<=b.language.length&&!1==d&&(d=
!0,loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,2)+".txt",b)),!1==d&&loadAndParseFile(b.path+c[i]+".txt",b)):(loadAndParseFile(b.path+c[i]+".txt",b),2<=b.language.length&&loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,2)+".txt",b),5<=b.language.length&&loadAndParseFile(b.path+c[i]+"_"+b.language.substring(0,5)+".txt",b))}b.callback&&b.callback()}}})})(jQuery);
function loadAndParseFile(a,b){var c=2<arguments.length?arguments[2]:!1;$.ajax({url:a,async:!1,cache:b.cache,contentType:"text/plain;charset="+b.encoding,dataType:"text",success:function(a,c){parseData(a,b.mode)},error:function(){c&&window.console?console.error('The specified "String Resource file" is not found. Make sure that the path reference to this file is correct.'):(window.console&&console.log('The culture file "'+a+'".txt specified is not found, trying to load the default culture file.'),
loadAndParseFile(a.split("_")[0]+".txt",b,"failed"))}})}
function parseData(a,b){for(var c="",d=a.split(/\n/),e=/(\{\d+\})/g,f=/\{(\d+)\}/g,g=/(\\u.{4})/ig,h=0;h<d.length;h++)if(d[h]=d[h].replace(/^\s\s*/,"").replace(/\s\s*$/,""),0<d[h].length&&"#"!=d[h].match("^#")){var k=d[h].split("=");if(0<k.length){for(var l=unescape(k[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),p=1==k.length?"":k[1];"\\"==p.match(/\\$/);)p=p.substring(0,p.length-1),p+=d[++h].replace(/\s\s*$/,"");for(var m=2;m<k.length;m++)p+="="+k[m];p=p.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
if("map"==b||"both"==b){if(k=p.match(g))for(m=0;m<k.length;m++)p=p.replace(k[m],unescapeUnicode(k[m]));$.i18n.map[l]=p}if("vars"==b||"both"==b)if(p=p.replace(/"/g,'\\"'),checkKeyNamespace(l),e.test(p)){for(var k=p.split(e),m=!0,q="",n=[],r=0;r<k.length;r++)!e.test(k[r])||0!=n.length&&-1!=n.indexOf(k[r])||(m||(q+=","),q+=k[r].replace(f,"v$1"),n.push(k[r]),m=!1);c+=l+"=function("+q+"){";l='"'+p.replace(f,'"+v$1+"')+'"';c+="return "+l+";};"}else c+=l+'="'+p+'";'}}eval(c)}
function checkKeyNamespace(a){if(/\./.test(a)){var b="";a=a.split(/\./);for(var c=0;c<a.length;c++)0<c&&(b+="."),b+=a[c],eval("typeof "+b+' == "undefined"')&&eval(b+"={};")}}function getFiles(a){return a&&a.constructor==Array?a:[a]}function normaliseLanguageCode(a){a=a.toLowerCase();3<a.length&&(a=a.substring(0,3)+a.substring(3).toUpperCase());return a}
function unescapeUnicode(a){var b=[];a=parseInt(a.substr(2),16);0<=a&&a<Math.pow(2,16)&&b.push(a);a="";for(var c=0;c<b.length;++c)a+=String.fromCharCode(b[c]);return a}function ObjectEvent(a,b){this.type=a;this.fn=[];this._thisArgs=[];"function"==typeof b&&(this.fn[0]=b)}ObjectEvent.prototype.isSubscribed=function(a){return a?-1==$.inArray(a,this.fn)?!1:!0:0<this.fn.length?!0:!1};
ObjectEvent.prototype.raise=function(a,b){for(var c=this.fn.slice(0),d=this._thisArgs.slice(0),e=0;e<c.length;e++)"function"==typeof c[e]&&c[e].apply(d[e],arguments)};ObjectEvent.prototype.subscribe=function(a,b){b?this._thisArgs.push(b):this._callee?this._thisArgs.push(this._callee):this._thisArgs.push(this);this.fn[this.fn.length]=a};
ObjectEvent.prototype.unsubscribe=function(a,b){if(b)for(var c=0;c<this._thisArgs.length;c++){if(this._thisArgs[c]===b&&this.fn[c]==a){this.fn.splice(c,1);this._thisArgs.splice(c,1);break}}else for(c=0;c<this.fn.length;c++)if(this.fn[c]===a){this.fn.splice(c,1);this._thisArgs.splice(c,1);break}};ObjectEvent.prototype.clear=function(){ObjectEvent.call(this,this.type)};
ObjectEvent.prototype.IsEqual=function(a){var b=null,c=null;if(!this.isSubscribed()&&a.isSubscribed()||this.isSubscribed()&&!a.isSubscribed())return!1;if(this.isSubscribed()&&a.isSubscribed()){b=this.fn;c=a.fn;if(this.fn.length!=a.fn.length)return!1;for(a=0;a<b.length;a++)if(b[a]!=c[a])return!1}return!0};function NotifyPropertyChanged(){this.PropertyChanged=new ObjectEvent("PropertyChanged")}
NotifyPropertyChanged.prototype.OnPropertyChanged=function(a,b,c){c?this.PropertyChanged.raise(this,{PropertyName:a,value:b,context:c}):this.PropertyChanged.raise(this,{PropertyName:a,value:b})};
function Binding(a,b,c,d,e,f,g){this.source=a;this.sourcePropertyName=b;this.targetPropertyName=d;this.sourceProperty=a[b+"_M"]?b+"_M":b;this.targetProperty=c[d+"_M"]?d+"_M":d;this.converterFn=e;this.ConvertBack=this.Convert=null;this.target=c;this.targetKOSubscriberInstance=this.sourceKOSubscriberInstance=null;this.bindingMode=void 0==f?"OneWay":f;this.ConverterContext=g;null!=this.converterFn&&(this.Convert=e.Convert?e.Convert:null,this.ConvertBack=e.ConvertBack?e.ConvertBack:null);this.targetChanging=
this.sourceChanging=!1;var h=this;this.SourcePropertyChangeListener=function(a,b){b.PropertyName==h.sourcePropertyName&&(h.sourceChanging=!0,!1==h.targetChanging&&h.updateTarget(),h.sourceChanging=!1)};this.TargetPropertyChangeListener=function(a,b){b.PropertyName==h.targetPropertyName&&(h.targetChanging=!0,!1==h.sourceChanging&&h.updateSource(),h.targetChanging=!1)};this.subscribePropchangeNotifier();h.sourceChanging=!0;this.updateTarget.apply(this,arguments);h.sourceChanging=!1;this.Dispose=function(){void 0==
this.sourceKOSubscriberInstance?this.source.PropertyChanged.unsubscribe(this.SourcePropertyChangeListener):this.sourceKOSubscriberInstance.dispose();this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&(void 0==this.targetKOSubscriberInstance?this.target.PropertyChanged.unsubscribe(this.TargetPropertyChangeListener):this.targetKOSubscriberInstance.dispose())}}
Binding.prototype.subscribePropchangeNotifier=function(){var a=this;"function"===typeof this.source[this.sourcePropertyName]&&this.source[this.sourcePropertyName].subscribe&&(this.sourceKOSubscriberInstance=this.source[this.sourcePropertyName].subscribe(function(b){Binding.prototype.updateTarget.apply(a,arguments)}.bind(this)));null==this.sourceKOSubscriberInstance&&this.source.PropertyChanged&&this.source.PropertyChanged.subscribe(this.SourcePropertyChangeListener);if(this.bindingMode==RadiantQ.Gantt.BindingMode.TwoWay){"function"===
typeof this.target[this.targetPropertyName]&&this.target[this.targetPropertyName].subscribe&&(this.targetKOSubscriberInstance=this.target[this.targetPropertyName].subscribe(function(b){Binding.prototype.updateSource.apply(a,arguments)}.bind(this)));if(this.target.PropertyChanged)null==this.targetKOSubscriberInstance&&this.target.PropertyChanged.subscribe(this.TargetPropertyChangeListener);else throw Error("Binding should be used with a source that is of type NotifyPropertyChanged");if(!this.ConvertBack&&
this.Convert)throw Error("Two Way binding requires ConvertBack");}};Binding.prototype.updateTarget=function(){this.updateValue(this.source,this.sourceProperty,this.target,this.targetProperty,this.Convert)};Binding.prototype.updateSource=function(){this.updateValue(this.target,this.targetProperty,this.source,this.sourceProperty,this.ConvertBack)};
Binding.prototype.updateValue=function(a,b,c,d,e){var f=null,g=this.ConverterContext||this,f="function"===typeof a[b]?a[b]():a[b];null!=e&&(f=e.call(g,f,a,c));if("function"===typeof c[d])c[d](f);else c[d]=f};void 0==window.RadiantQ&&(window.RadiantQ={});"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(a,b){return void 0==b?$.proxy(this,a):$.proxy(this,a,b)});
if(Object.defineProperty){RadiantQ.CanUseDefineProperty=!0;try{Object.defineProperty({},"test",{get:function(){return!0}})}catch(e$$12){RadiantQ.CanUseDefineProperty=!1}}else RadiantQ.CanUseDefineProperty=!1;RadiantQ.Gantt={};RadiantQ.Gantt.Widget={};RadiantQ.Gantt.Utils={};RadiantQ.Gantt.ContextMenuImpl={};var rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;RadiantQ.Gantt.TimeScaleType={Minutes:90,Hours:180,Days:270,Weeks:360,Months:450,Years:540,Custom:630};
RadiantQ.Gantt.RoundToOptions={None:"None",Auto:"Auto",Minute:"Minute",FifteenMinutes:"FifteenMinutes",ThirtyMinutes:"ThirtyMinutes",Hour:"Hour",HalfDay:"HalfDay",Day:"Day"};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};
RadiantQ.Gantt.TimeUnitsCache=function(){this._timeUnitsByRange=new RadiantQ.Gantt.Dictionary;this.GetRangeString=function(a,b){return a.toString()+"-"+b.toString()};this.SetTimeUnitsCacheForRange=function(a,b,c){a=this.GetRangeString(a,b);4<this._timeUnitsByRange.Keys.length&&(this._timeUnitsByRange.Keys.First(),this._timeUnitsByRange.Remove(this._timeUnitsByRange.Keys.First()));this._timeUnitsByRange.Add(a,c)};this.GetTimeUnitsCacheForRange=function(a,b){var c=this.GetRangeString(a,b);return this._timeUnitsByRange.GetItemByKey(c)};
this.ClearTimeUnitsCacheForRange=function(a,b){var c=this.GetRangeString(a,b);this._timeUnitsByRange.Remove(c)}};
RadiantQ.Gantt.CustomTimeScaleTypeHint=function(a,b){this.EquivalentUnits=a;this.EquivalentType=b;this.Clone=function(){var a=new RadiantQ.Gantt.CustomTimeScaleTypeHint;a.EquivalentType=this.EquivalentType;a.EquivalentUnits=this.EquivalentUnits;return a};this.IsEqual=function(a){if(this instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint&&a instanceof RadiantQ.Gantt.CustomTimeScaleTypeHint)return null==this&&null==a?!0:null==this||null==a||this.EquivalentType!=a.EquivalentType||this.EquivalentUnits!=
a.EquivalentUnits?!1:!0}};
RadiantQ.Gantt.ContextMenuImpl.ContextMenu=function(a,b){this.ItemClicked=new ObjectEvent("ItemClicked");this.BeforeContextMenu=new ObjectEvent("BeforeContextMenu");this.selector=a;var c=this;this._position={x:0,y:0};this.Items=new RadiantQ.Gantt.Dictionary;$.contextMenu&&$.contextMenu({selector:a,position:function(a,b,f){var g=$(document.body).width(),h=$(document.body).height(),k=b+a.$menu.width(),l=f+a.$menu.height();k>g&&(b=g-a.$menu.width()-10);l>h&&(f=h-a.$menu.height()-10);c._position={x:b,
y:f};"function"==typeof c.position&&c.position(c._position);a.$menu.css({top:c._position.y,left:c._position.x})},build:function(a,b){if(c.Items&&0<c.Items.length){b.Cancel=!1;c.BeforeContextMenu.raise(a,b);if(!0==b.Cancel)return!1;for(var f=c.Items.asArray,g=0;g<f.length;g++){var h=f[g].keyName||f[g].name;!0==f[g].separator?b.data.items["separator"+g]="separator"+g:b.data.items[h]={name:f[g].name,icon:f[g].icon,callback:f[g].callback,disabled:f[g].disabled}}}return void 0==b.data.items||$.isEmptyObject(b.data.items)?
!1:{GetPosition:function(){return c._position},callback:function(a,b){c.ItemClicked.raise(a,b.$trigger)}}}});this.AddNewItems=function(a,b){if(!1==b){this.Items=new RadiantQ.Gantt.Dictionary;var c=0}else c=0;for(;c<a.length;c++)this.Items.Add(a[c].keyName,a[c])};return this};
RadiantQ.Gantt.TimeScaleHeaderDefinition=function(){NotifyPropertyChanged.apply(this,arguments);this.ProvideCustomTimeIntervals=new ObjectEvent("ProvideCustomTimeIntervals");this.ProvideCustomHeaderText=new ObjectEvent("ProvideCustomHeaderText");this.RenderCallBack=new ObjectEvent("RenderCallBack");this.TimeUnitsCache=new RadiantQ.Gantt.TimeUnitsCache;this._name=null;this.Type=RadiantQ.Gantt.TimeScaleType.Days;this.CustomTimeScaleTypeHint=null;this.BaseTimeUnitWidth=25;this.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;
this.textFormat="";this.TextFormat_M=function(a){if(0==arguments.length)return this._textFormat;this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))};RadiantQ.CanUseDefineProperty?Object.defineProperty(this,"TextFormat",{get:function(){return this._textFormat},set:function(a){this._textFormat!=a&&(this._textFormat=a,this.OnPropertyChanged("TextFormat",a))},enumerable:!0,configurable:!0}):this.TextFormat="";this.HeaderHeight=22;this.name=function(a){if(void 0==a)if(null==
this._name||""==this._name)if(this.Type!=RadiantQ.Gantt.TimeScaleType.Custom)for(key in RadiantQ.Gantt.TimeScaleType){if(RadiantQ.Gantt.TimeScaleType[key]==this.Type)return key.toString()}else return new String;else return this._name;else this._name=a};this.Clone=function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.CustomTimeScaleTypeHint=this.CustomTimeScaleTypeHint;a.HeaderHeight=this.HeaderHeight;a.TextFormat=this.TextFormat;a.Type=this.Type;a.TimeUnitTemplate=this.TimeUnitTemplate;
if(this.ProvideCustomHeaderText.isSubscribed())for(var b=0;b<this.ProvideCustomHeaderText.fn.length;b++)a.ProvideCustomHeaderText.subscribe(this.ProvideCustomHeaderText.fn[b]);if(this.ProvideCustomTimeIntervals.isSubscribed())for(b=0;b<this.ProvideCustomTimeIntervals.fn.length;b++)a.ProvideCustomTimeIntervals.subscribe(this.ProvideCustomTimeIntervals.fn[b]);return a};this.IsEqual=function(a){var b=null,c=null;if(null==this&&null==a)return!0;if(null==this||null==a)return!1;if(null!=this.CustomTimeScaleTypeHint&&
null!=a.CustomTimeScaleTypeHint){if(!this.CustomTimeScaleTypeHint.IsEqual(a.CustomTimeScaleTypeHint))return!1}else{if(this.HeaderHeight!=a.HeaderHeight||this.TextFormat!=a.TextFormat||this.Type!=a.Type||this.TimeUnitTemplate!=a.TimeUnitTemplate||!this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText))return!1;if(this.ProvideCustomHeaderText.IsEqual(a.ProvideCustomHeaderText)){b=this.ProvideCustomHeaderText.fn;c=a.ProvideCustomHeaderText.fn;if(this.ProvideCustomHeaderText.fn.length!=a.ProvideCustomHeaderText.fn.length)return!1;
for(var d=0;d<b.length;d++)if(b[d]!=c[d])return!1}}if(!this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals))return!1;if(this.ProvideCustomTimeIntervals.IsEqual(a.ProvideCustomTimeIntervals)){b=this.ProvideCustomTimeIntervals.fn;c=a.ProvideCustomTimeIntervals.fn;if(this.ProvideCustomTimeIntervals.fn.length!=a.ProvideCustomTimeIntervals.fn.length)return!1;for(d=0;d<b.length;d++)if(b[d]!=c[d])return!1}return!0};this.IsGreater=function(a){var b=this.Type,c=a.Type;if(b==RadiantQ.Gantt.TimeScaleType.Custom){if(null==
this.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";b=this.CustomTimeScaleTypeHint.EquivalentType}if(c==RadiantQ.Gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"Encountered a Custom TimeScaleType header with CustomTimeScaleTypeHint not set in TimeScaleHeaderDefinition's > operator.";c=a.CustomTimeScaleTypeHint.EquivalentType}return b>c?!0:b!=c||this.Type!=RadiantQ.Gantt.TimeScaleType.Custom&&
a.Type!=RadiantQ.Gantt.TimeScaleType.Custom?!1:(this.Type==RadiantQ.Gantt.TimeScaleType.Custom?this.CustomTimeScaleTypeHint.EquivalentUnits:1)>(a.Type==RadiantQ.Gantt.TimeScaleType.Custom?a.CustomTimeScaleTypeHint.EquivalentUnits:1)?!0:!1}};RadiantQ.Gantt.TimeScaleHeaderDefinition.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs=function(a){this.dateTime=a;this.tooltipText=this.text=null};
RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs=function(a,b){this.ViewStartTime=a;this.ViewEndTime=b;this.TimeIntervals=[]};RadiantQ.Gantt.RoundDownDuration=function(a){var b=Date.today();a=b.addTimeSpan(a);a=this.RoundTimeDown(a,this.GetActualRoundToOption());return rqTCUtils.GetTimeSpan(b,a)};RadiantQ.Gantt.RoundDown=function(a){return this.RoundTimeDown(a,this.GetActualRoundToOption())};
RadiantQ.Gantt.RoundTimeDown=function(a,b){var c=a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d==a||d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>c?a.Date():a.Date().addHours(12);case RadiantQ.Gantt.RoundToOptions.Day:return a.Date();case RadiantQ.Gantt.RoundToOptions.Hour:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,0,0);case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:if(d=
a.getMinutes(),!(0==d||30>d)&&(30==d||59>=d))return d=30,new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:d=a.getMinutes();if(0==d||15>d)d=0;else if(15==d||30>d)d=15;else if(30==d||45>d)d=30;else if(45==d||59>=d)d=45;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0,DateTimeKind.Utc);case RadiantQ.Gantt.RoundToOptions.Minute:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,a.Minute,0,DateTimeKind.Utc)}return a};
RadiantQ.Gantt.TimeSpanHeaderMouseTracker=function(a){this.Headers=function(){return a};this.LatestPos=function(a){if(void 0==a){if(null!=this.xLatestPos)return this.xLatestPos}else this.xLatestPos=a};this.IsDragging=function(a){if(void 0==a){if(null!=this._isDragging)return this._isDragging}else this._isDragging=a,RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=a,this._isDragging||this.OnDoneDragging()}};RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal=!1;
RadiantQ.Gantt.TimeSpanHeaderZoomTracker=function(){this.StartDragging=function(a,b){this.LatestPos(a);this.StartBTUW=b;this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,b){if(this.IsDragging()){var c=this.LatestPos()-a;b._trigger("zoomed",this,this.StartBTUW-c/5)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderZoomTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;
RadiantQ.Gantt.TimeSpanHeaderScrollTracker=function(){this.StartDragging=function(a,b,c){this.LatestPos(a);this.StartBTUW=b;c.StartPanning();this.IsDragging(!0);return!0};this.MouseMovedTo=function(a,b){if(this.IsDragging()){var c=this.LatestPos()-a;b.ScrollBy(c);this.LatestPos(a)}};this.OnDoneDragging=function(){}};RadiantQ.Gantt.TimeSpanHeaderScrollTracker.prototype=new RadiantQ.Gantt.TimeSpanHeaderMouseTracker;RadiantQ.Gantt.AnchorTimeToStartTimeConverter=function(){};
RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime=function(a,b){b>RadiantQ.Gantt.TimeScaleType.Hours&&(a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)).clone());return a.clone()};
RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert=function(a){if(!0==a.options.ResizeToFit)return a.options.AnchorTime.clone();var b=a.options.AnchorTime.clone(),c=a.options.BaseTimeScaleType,d=0,d=RadiantQ.Gantt.TimeSpanHeaderMouseTracker.IsDraggingGlobal?a.options.ViewWidth/2/a.options.BaseTimeUnitWidth:Math.ceil(a.options.ViewWidth/2/a.options.BaseTimeUnitWidth);a=rqTCUtils.ConvertTimeUnitsToTimeSpan(c,d);b=b.clone().add({millisecond:-a.millisecond||a.milliseconds_M(),seconds:-a.seconds_M(),
minutes:-a.minutes_M(),hours:-a.hours_M(),days:-a.days_M()});return b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(b,c)};RadiantQ.Gantt.AnchorTimeToEndTimeConverter=function(){};
RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert=function(a){var b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(a),c=a.options.BaseTimeScaleType;a=Math.ceil(a.options.ViewWidth/a.options.BaseTimeUnitWidth);a=rqTCUtils.ConvertTimeUnitsToTimeSpan(c,a);b=b.addTimeSpan(a);return b=c==RadiantQ.Gantt.TimeScaleType.Minutes?rqTCUtils.CeilToNextMinute(b):c==RadiantQ.Gantt.TimeScaleType.Hours?rqTCUtils.CeilToNextHour(b):rqTCUtils.CeilToNextDay(b)};
RadiantQ.Gantt.GanttChartPanningUtil=function(a,b,c){this.IntermediateAnchorTime=a.clone();this.CurAnchorTime=a.clone();this.BaseTimeScaleType=b;this.BaseTimeUnitWidth=c;this.AnchorTimeChanged=new ObjectEvent("AnchorTimeChanged");this.ApplyXChange=function(a){a=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.BaseTimeScaleType,a/this.BaseTimeUnitWidth);this.IntermediateAnchorTime=this.IntermediateAnchorTime.addTimeSpan(a);a=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.RoundAnchorTime(this.IntermediateAnchorTime,
this.BaseTimeScaleType);a.equals(this.CurAnchorTime)||(this.CurAnchorTime=a.clone(),this.AnchorTimeChanged.raise(this,null))}};RadiantQ.Gantt.ChartZoomOptions={None:0,ShowZoomSliderInHeader:1,MouseWheelZoomOnTimeScaleHeaders:2,MouseWheelZoomOnGanttChart:4,LeftMouseButtonDownDrag:8};RadiantQ.Gantt.ChartScrollOptions={None:0,LeftMouseButtonDownDrag:1,CtrlAndLeftMouseButtonDownDrag:2};
RadiantQ.Gantt.CustomRangeInformationEventArgs=function(a,b){this.ViewStartTime=a;this.ViewEndTime=b;this.CustomRanges=[]};RadiantQ.Gantt.CustomRangeInfo=function(a,b,c){this.StartTime=a;this.EndTime=b;if(b<a)throw"endTime cannot be earlier than startTime in a call to CustomRangeInfo constructor.";this.DataTemplate=c};
RadiantQ.Gantt.CustomRangesInfos=function(){this.ProvideRepeatingCustomRanges=new ObjectEvent("ProvideRepeatingCustomRanges");this.DiscreetCustomRanges=new RadiantQ.RQ_CollectionChangeNotifier;this.RaiseProvideRepeatingCustomRanges=function(a){this.ProvideRepeatingCustomRanges.raise(this,a)}};RadiantQ.Gantt.CustomRangeTimeUnit=function(a,b,c){this.Width=a;this.CanvasLeft=b;this.CustomRangeInfo=c};
RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings=function(a){this.AutoHidingTimeScaleHeaders=!0;this.MaximumTimeScaleHeadersCount=2;this.DefaultBottomHeaderWidth=-1;this.BottomHeaderMaxWidth=35;this.TopHeaderMinWidth=40;this.ResizeToFit=!1;var b=a,c=a;this.IsProjectGantt=!1;this.TimeScaleHeaders=function(a){if(void 0==a)return c;c=a};var d=null;this.BoundGantt=function(a){if(void 0==a)return d;if(d!=a){if(!$(a).hasClass("rq-ganttBase"))throw"Invalid Selector";d=$(a);this.IsProjectGantt=null!=
d.data("GanttControl");null!=d&&this.ApplySettingsOnGantt()}};this.SelectedHeaders=function(a){if(void 0==a)return b;b=a};this.Clone=function(){var a=new RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings(this.SelectedHeaders);a.AutoHidingTimeScaleHeaders=this.AutoHidingTimeScaleHeaders;a.TimeScaleHeaders(this.TimeScaleHeaders().Clone());a.BottomHeaderMaxWidth=this.BottomHeaderMaxWidth;a.DefaultBottomHeaderWidth=this.DefaultBottomHeaderWidth;a.MaximumTimeScaleHeadersCount=this.MaximumTimeScaleHeadersCount;
a.TopHeaderMinWidth=this.TopHeaderMinWidth;a.ResizeToFit=this.ResizeToFit;return a};this.IsEqual=function(a){if(null==this&&null==a)return!0;if(null==this||null==a||this.AutoHidingTimeScaleHeaders!=a.AutoHidingTimeScaleHeaders||this.BottomHeaderMaxWidth!=a.BottomHeaderMaxWidth||this.DefaultBottomHeaderWidth!=a.DefaultBottomHeaderWidth||this.MaximumTimeScaleHeadersCount!=a.MaximumTimeScaleHeadersCount||this.TopHeaderMinWidth!=a.TopHeaderMinWidth||this.ResizeToFit!=a.ResizeToFit||!this.TimeScaleHeaders().IsEqual(a.TimeScaleHeaders())||
this.SelectedHeaders().length!=a.SelectedHeaders().length)return!1;for(var b=0;b<this.SelectedHeaders().length;b++)if(-1==$.inArray(this.SelectedHeaders()[b],a.SelectedHeaders()))return!1;return!0};this.ConvertWidths=function(a,b,c){if(a==b)return c;switch(a){case RadiantQ.Gantt.TimeScaleType.Minutes:return b==RadiantQ.Gantt.TimeScaleType.Years?c/525600:b==RadiantQ.Gantt.TimeScaleType.Months?c/43200:b==RadiantQ.Gantt.TimeScaleType.Weeks?c/10080:b==RadiantQ.Gantt.TimeScaleType.Days?c/1440:c/60;case RadiantQ.Gantt.TimeScaleType.Hours:return b==
RadiantQ.Gantt.TimeScaleType.Years?c/8760:b==RadiantQ.Gantt.TimeScaleType.Months?c/720:b==RadiantQ.Gantt.TimeScaleType.Weeks?c/168:c/24;case RadiantQ.Gantt.TimeScaleType.Days:return b==RadiantQ.Gantt.TimeScaleType.Years?c/365:b==RadiantQ.Gantt.TimeScaleType.Months?c/30:c/7}return c};this.GetDefaultBottomHeaderWidth=function(){if(-1==this.DefaultBottomHeaderWidth){var a=RadiantQ.Gantt.TimeScaleType.Days;0<this.SelectedHeaders().length&&(a=this.SelectedHeaders().Last().BaseTimeScaleType);switch(a){default:return 25;
case TimeScaleType.Months:return 50;case TimeScaleType.Weeks:return 65;case TimeScaleType.Years:return 100}}else return this.DefaultBottomHeaderWidth};this.GetDefaultBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return this.GetDefaultBottomHeaderWidth();var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.Last().Type;return this.ConvertWidths(b,a,this.GetDefaultBottomHeaderWidth())};this.GetPreferredMaximumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();
if(0==a.length)return 40;var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.Last().Type;return this.ConvertWidths(b,a,this.BottomHeaderMaxWidth)};this.GetPreferredMinimumBaseTimeUnitWidth=function(){var a=this.SelectedHeaders();if(0==a.length)return 20;var b=a.Last().BaseTimeScaleType,b=RadiantQ.Gantt.AdjustBaseScaleType(b),a=a.First().Type;return this.ConvertWidths(b,a,this.TopHeaderMinWidth)};this.UpdateHeadersOnZoom=function(){var a=this.SelectedHeaders();if(0!=a.lenght){var b=
this.getGanttChartProperty("TimeScaleHeaders"),c=this.getGanttChartProperty("BaseTimeScaleType"),d=this.getGanttChartProperty("BaseTimeUnitWidth"),k=this.getGanttChartProperty("MinTimeUnitWidthForHeaderVisibility");if(!(null==a.Last()||a.lenght<=this.MaximumTimeScaleHeadersCount))for(var l=0,p=a.length-1;0<=p;p--)l<this.MaximumTimeScaleHeadersCount?(-1==$.inArray(a[p],b)&&b.insertInOrder(a[p]),RadiantQ.Gantt.IsHeaderViewable(a[p],c,d,k)&&l++):b.remove(a[p])}};this.ApplyTimeScaleHeaderSettings=function(){for(var a=
new RadiantQ.Gantt.TimeScaleHeaderDefinitions,b=this.SelectedHeaders(),c=0;c<b.length;c++)a.insertInOrder(b[c]);this.BeginUpdate();this.setGanttChartProperty("TimeScaleHeaders",a)};this.ApplySettingsOnGantt=function(){if(1>=this.MaximumTimeScaleHeadersCount)throw"MaximumTimeScaleHeadersCount cannot be less than 2.";if(10>this.BottomHeaderMaxWidth||100<this.BottomHeaderMaxWidth)throw"BottomHeaderMaxWidth cannot be less than 10 or greater than 100.";if(10>this.TopHeaderMinWidth||200<this.TopHeaderMinWidth)throw"TopHeaderMinWidth cannot be less than 10 or greater than 200.";
if(-1>this.DefaultBottomHeaderWidth||100<this.DefaultBottomHeaderWidth)throw"DefaultBottomHeaderWidth cannot be less than -1 or greater than 100.";if(null==this.TimeScaleHeaders())throw"TimeScaleHeaders in GanttChartTimeScaleHeaderSettings cannot be null when BoundGantt property is set.";if(0==this.SelectedHeaders().length)throw"There are no selected TimeScaleHeaders to apply on the gantt in the call to ApplySettingsOnGantt.";this.ApplyTimeScaleHeaderSettings();var a=this.GetPreferredMinimumBaseTimeUnitWidth(),
b=this.GetPreferredMaximumBaseTimeUnitWidth(),c=this.GetDefaultBaseTimeUnitWidth();c<a&&(c=a);c>b&&(c=b);this.BeginUpdate();this.setGanttChartProperty("BaseTimeUnitWidthMinimum",a);this.setGanttChartProperty("BaseTimeUnitWidthMaximum",b);this.setGanttChartProperty("BaseTimeUnitWidth",c);this.setGanttChartProperty("ResizeToFit",this.ResizeToFit);this.EndUpdate();var d=this;this.AutoHidingTimeScaleHeaders&&(!1==this.IsProjectGantt?$(this.BoundGantt()).bind("flexyganttbeforezooming",function(a,b){d.UpdateHeadersOnZoom()}):
$(this.BoundGantt()).bind("ganttcontrolbeforezooming",function(a,b){d.UpdateHeadersOnZoom()}));this.UpdateHeadersOnZoom()};this.BeginUpdate=function(){this.CallGanttMethod("BeginUpdate")};this.EndUpdate=function(){this.CallGanttMethod("EndUpdate")}};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.getGanttChartProperty=function(a){var b=this.BoundGantt();return!1==this.IsProjectGantt?b.FlexyGantt("option",a):b.GanttControl("option",a)};
RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.CallGanttMethod=function(a){var b=this.BoundGantt();!1==this.IsProjectGantt?b.FlexyGantt(a):b.GanttControl(a)};RadiantQ.Gantt.Utils.GanttChartTimeScaleHeaderSettings.prototype.setGanttChartProperty=function(a,b){var c=this.BoundGantt();!1==this.IsProjectGantt?c.FlexyGantt("option",a,b):c.GanttControl("option",a,b)};
ObservableCollection=function(){Array.apply(this,arguments);this.CollectionChanged=new ObjectEvent("CollectionChanged");$.observable(this).unbind("insert remove replaceAll",this.collectionChanged);$.observable(this).bind("insert remove replaceAll",this.collectionChanged)};ObservableCollection.prototype=[];ObservableCollection.prototype.OnCollectionChanged=function(a,b){this.CollectionChanged.raise(a,b)};
ObservableCollection.prototype.collectionChanged=function(a,b){a.target.OnCollectionChanged(a,b)};ObservableCollection.prototype.remove=function(a,b){var c=!1;if("number"===$.type(a))if(b){if("number"===$.type(b))for(var d=a;d<b;d++)if(void 0!=this[d])c=!0;else{c=!1;break}}else void 0!=this[a]&&(c=!0);else"string"===$.type(a)?(d=$.inArray(a,this),-1!=d&&(c=!0,a=d)):-1!=$.inArray(a,this)&&(c=!0);c&&b?$.observable(this).remove(a,b):c&&$.observable(this).remove(a)};
ObservableCollection.prototype.insert=function(a,b){$.observable(this).insert(a,b)};ObservableCollection.prototype.contains=function(a){return-1!=$.inArray(a,this)};ObservableCollection.prototype.replaceAll=function(a){$.observable(this).replaceAll(a)};ObservableCollection.prototype.clear=function(){0!=this.length&&this.remove(0,this.length)};ObservableCollection.prototype.add=function(a){$.observable(this).insert(this.length,a)};
ObservableCollection.prototype.indexOf=function(a,b){var c=this.length,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1};
RadiantQ.Gantt.TimeScaleHeaderDefinitions=function(){RadiantQ.RQ_CollectionChangeNotifier.apply(this,arguments);this.getById=function(a){if(this.isValidateIndex(a))return this[a]};this.getByType=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.Type==a)return c}};this.insertInOrder=function(a){for(var b=0;b<this.length;b++)if(!this[b].IsGreater(a)){this.insert(b,a);return}this.add(a)};this.removeType=function(a){if(a==RadiantQ.Gantt.TimeScaleType)throw"RemoveType is not supported for TimeScaleType.Custom type.";
for(var b=0;b<this.length;b++){var c=this.getById(b);if(c.Type==a){this.remove(c);break}}};this.IsContentEqual=function(a){if(null==this&&null==a)return!0;if(null==this&&null!=a||null!=this&&null==a||this.length!=a.length)return!1;for(var b=0;b<this.length;b++)if(!this.getById(b).IsEqual(a.getById(b)))return!1;return!0};this.Clone=function(){for(var a=new RadiantQ.Gantt.TimeScaleHeaderDefinitions,b=0;b<this.length;b++){var c=this[b].Clone();a.add(c)}return a};this.IsEqual=function(a){if(null==this&&
null==a)return!0;if(null==this||null==a||this.length!=a.length)return!1;for(var b=0;b<this.length;b++)if(!this.getById(b).IsEqual(a.getById(b)))return!1;return!0};this.isValidateIndex=function(a){return this.length>a}};RadiantQ.Gantt.TimeScaleHeaderDefinitions.prototype=new RadiantQ.RQ_CollectionChangeNotifier;
RadiantQ.Gantt.BottomTwoHeaderDefinitions=function(){RadiantQ.Gantt.TimeScaleHeaderDefinitions.apply(this,arguments);this.UpdateIndexProperties=function(){for(var a=0,c=0;c<this.length;c++)this.SetIndex(this[c],a++)};var a=this;this.collectionChanged=function(b,c){"insert"==b.type?a.UpdateIndexProperties():a.remove(c.items[0])};this.CollectionChanged.isSubscribed()?this.CollectionChanged.unsubscribe(this.collectionChanged):this.CollectionChanged.subscribe(this.collectionChanged);this.SetIndex=function(a,
c){a.IndexProperty=c};this.remove=function(a){a.IndexProperty=-1}};RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex=function(a){return a.IndexProperty};RadiantQ.Gantt.BottomTwoHeaderDefinitions.prototype=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;
RadiantQ.Gantt.IsHeaderViewable=function(a,b,c,d){var e=a.Type,f=1;if(e==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw new "CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";e=a.CustomTimeScaleTypeHint.EquivalentType;f=a.CustomTimeScaleTypeHint.EquivalentUnits}a=rqTCUtils.ConvertToApproxUnitsOfBaseType(b,e,f)*c;return Math.round(a)<d?!1:!0};
RadiantQ.Gantt.AdjustBaseScaleType=function(a){return a>RadiantQ.Gantt.TimeScaleType.Days?RadiantQ.Gantt.TimeScaleType.Days:a};Array.prototype.Last=function(){return this[this.length-1]};Array.prototype.First=function(){return this[0]};Array.prototype.remove=function(a){a=this.indexOf(a);this.splice(a,1)};RadiantQ.Gantt.isModifierKeyIsPresed=function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey};
RadiantQ.Gantt.addMethod=function(a,b,c){var d=a[b];a[b]=d?function(){if(c.length==arguments.length)return c.apply(this,arguments);if("function"==typeof d)return d.apply(this,arguments)}:c};
RadiantQ.Gantt.TimeUnit=function(){this.Type=this.Width=this.ToolTipText=this.TextFormat=this.Text=this.Tag=0;this.IsWorkingTime=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this._binding=null;this.BindingObject=function(a){if(void 0==a||null==a)return this._binding;null!=this._binding&&this._binding.Dispose();this._binding=a};this._isHighlighted=!1;this.IsHighlighted=function(a){if(void 0==a||null==a)return this._isHighlighted;this._isHighlighted!=a&&(this._isHighlighted=a,this.OnPropertyChanged("IsHighlighted",
a))};this.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,value:b})}};RadiantQ.Gantt.TimeUnit.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.SpecialLineInfo=function(){this.ToolTipText="";this.LineColor=void 0;this.LineDateTime=new Date};RadiantQ.Gantt.ActivityTimeChangedEventArgs=function(a,b,c){this.Activity=a;this.Type=b;this.UserSpecifiedTime=c};RadiantQ.Gantt.CancellableActivityEventArgs=function(a){this._cancel=!0;this._activity=a};
RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.CancellableActivityEventArgs.prototype.Cancel_M=function(a){if(0==arguments.length)return this._cancel;this._cancel=a};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Activity",{get:function(){return this._activity}}),Object.defineProperty(RadiantQ.Gantt.CancellableActivityEventArgs.prototype,"Cancel",{get:function(){return this._cancel},set:function(a){this._cancel=a}}));RadiantQ.Gantt.TimeRangeHighlightBehavior={None:0,HighlightInChartOnHeaderMouseHover:1};RadiantQ.Gantt.ActivityTimeChangeType={StartTimeChanged:"StartTimeChanged",DurationResized:"DurationResized"};
RadiantQ.Gantt.SelectionMode={Multiple:"Multiple",Single:"Single"};RadiantQ.Gantt.TimeIndicatorLines={None:0,Always:1,OnHover:2,OnResize:3};RadiantQ.Gantt.SelectionChanged=function(a,b){this.AddedItems=a;this.RemovedItems=b};RadiantQ.Gantt.DefaultStyles={};var style=RadiantQ.Gantt.DefaultStyles;style.direction=["top","bottom","right","left"];
style.CreateCssTxt=function(a,b,c){var d=$.isArray(b);2==b.length&&(b.splice.apply(b,[1,0].concat(b[0])),b.push(b[b.length-1]));return $.map(style.direction,function(e,f){var g=void 0==c?a+"-"+e+":":a+"-"+e+"-"+c+":";return d?g+b[f]+";":g+b+";"}).toString().replace(/,/g,"")};style.ZeroMargin=function(){return style.CreateCss("margin","0px").toString()};
style.init=function(){var a=RadiantQ.Gantt.DefaultStyles;style.GanttTableTRStyleTxt=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width");style.GanttTableTDStyleTxt=a.CreateCssTxt("padding",["0.2em","0.4em"])+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border",["0px","1px","1px","0px"],"width");style.ZeroStyle=a.CreateCssTxt("padding","0px")+a.CreateCssTxt("margin","0px")+a.CreateCssTxt("border","0px","width")+"border-collapse: collapse;border-spacing: 0;width:100%;height:100%;"};
document.mouseButtonPressed=!1;var EXPANDER_WIDTH=12;RadiantQ.Gantt.LevelToIndentWidth=function(a,b){var c=0;0<a&&(c+=a*EXPANDER_WIDTH);!1==b&&(c+=EXPANDER_WIDTH);return c};function Expander(){this._isExpanded=!1}Expander.prototype=new NotifyPropertyChanged;Expander.prototype.IsExpanded=function(a){if(null==a)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded"))};RadiantQ.FlexyGantt={};var rqFG=RadiantQ.FlexyGantt;
rqFG.FlexyNodeData=function(a){NotifyPropertyChanged.apply(this,arguments);this._data=a.data;this.HierarchicalItem=a;var b=1;this._displayIndex=-1;this._guid=RadiantQ.Gantt.guidGenerator();var c,d;this.MaxOverlappingBlocksRowCount=function(a){if(void 0==a||null==a)return b;b=a;this.OnPropertyChanged("MaxOverlappingBlocksRowCount",a,null,!1)};this.TableRow=function(a){if(void 0==a||null==a)return c;if(!this.IsSelected)return 0;if(void 0!=c){this.IsSelected()&&this.addSelectionClassToTable(a);this.IsMouseIn()&&
this.addHoverClassToTable(a);var b=$(c).height();this.RowHeight&&(b=this.RowHeight);$(a).height(b)}c=a;this.OnPropertyChanged("TableRow",a,null,!1)};this.ChartRow=function(a){if(void 0==a||null==a)return d;if(void 0!=d){var b=$(d).height();$(a).height(b)}d=a;this.OnPropertyChanged("ChartRow",a,null,!1)};this._isSelected=!1;this.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a,null,!1),this.UpdateSelection(a))};
this._isMouseIn=!1;this.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};this.DataPropertyChangeListener=function(a){this.OnPropertyChanged("Data")};this._data.PropertyChanged&&this._data.PropertyChanged.subscribe();this.Dispose=function(){this.DisplayIndex(-1);this._data.PropertyChanged&&this._data.PropertyChanged.unsubscribe(this.DataPropertyChangeListener)};return this};rqFG.FlexyNodeData.prototype=new NotifyPropertyChanged;
rqFG.FlexyNodeData.prototype.UpdateHoverStyle=function(a){if(!0==a&&void 0!=a)$(this.TableRow()).addClass("rq-row-hover ui-state-hover"),$(this.ChartRow()).find("td").addClass("rq-row-hover ui-state-hover");else if(!1==a||void 0==a)$(this.TableRow()).removeClass("rq-row-hover ui-state-hover"),$(this.ChartRow()).find("td").removeClass("rq-row-hover ui-state-hover")};rqFG.FlexyNodeData.prototype.addSelectionClassToTable=function(a){a.addClass("rq-row-selected ui-state-active")};
rqFG.FlexyNodeData.prototype.addHoverClassToTable=function(a){a.addClass("rq-row-hover ui-state-hover")};rqFG.FlexyNodeData.prototype.UpdateSelection=function(a){if(!0==a&&void 0!=a)$(this.TableRow()).addClass("rq-row-selected ui-state-active"),$(this.ChartRow()).find("td").addClass("rq-row-selected ui-state-active");else if(!1==a||void 0==a)$(this.TableRow()).removeClass("rq-row-selected ui-state-active"),$(this.ChartRow()).find("td").removeClass("rq-row-selected ui-state-active")};
rqFG.FlexyNodeData.prototype.IsParentType=function(){var a=this.HierarchicalItem.GetChildList();return null==a||void 0==a?!1:0<a.length||!1==this.HierarchicalItem._parent._fxGantt.ForceParentTemplateEvenIfChildless?!0:!1};rqFG.FlexyNodeData.prototype.IsExpandable=function(){return null!=this.HierarchicalItem._childItems&&0<this.HierarchicalItem._childItems.length};rqFG.FlexyNodeData.prototype.Data=function(){return this._data};
rqFG.FlexyNodeData.prototype.DisplayIndex=function(a){if(null==a)return this._displayIndex;this._displayIndex!=a&&(this._displayIndex=a,this.OnPropertyChanged("DisplayIndex",a,null,!1))};rqFG.FlexyNodeData.prototype.Level=function(){return this.HierarchicalItem._level};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});rqFG=RadiantQ.FlexyGantt;
rqFG.HierarchicalItem=function(a,b,c,d){NotifyPropertyChanged.apply(this,arguments);this.isExpanded=!1;this.data=c;this._level=d;this._childListResolved=!1;this._resolvedChildList=null;this._parent=a;this._parentItem=b;this._childItems=new ObservableCollection;this._forceToCreateNewChildList=!1;this._chartRow=this._tableRow=null;var e=this;this.notifyChange=function(a,b,c){e.OnPropertyChanged("Data."+a,c,b)};this.subscribChangeListener=function(a){for(var b in a){var c=a[b];if(!c)break;if(c.subscribe&&
void 0!=c.getSubscriptionsCount&&0==c.getSubscriptionsCount())if($.isArray(c())&&!this.isExpandable())for(var d=0;d<c().length;d++)this.subscribChangeListener(c()[d]);else c.subscribe(this.notifyChange.bind(c,b,a))}};this.subscribChangeListener(this.data);this.listenChanges&&this.listenChanges(this.data);_canShow=null;this.CanShowCue=function(a){if(void 0==a||null==a)return _canShow;_canShow!=a&&(_canShow=a,this.OnPropertyChanged("CanShowCue",a))};this.isSelected=!1;this.IsSelected=function(a){if(!0==
a&&void 0!=a)$(this.TableRow).addClass("rq-row-selected ui-state-active"),$(this.ChartRow).addClass("rq-row-selected ui-state-active"),this.isSelected=!0;else if(!1==a&&void 0!=a)$(this.TableRow).removeClass("rq-row-selected ui-state-active"),$(this.ChartRow).removeClass("rq-row-selected ui-state-active"),this.isSelected=!1;else if(void 0==a)return this.isSelected};this.isExpanding=!1;return this};rqFG.HierarchicalItem.prototype=new NotifyPropertyChanged;
rqFG.HierarchicalItem.prototype.FlatItemsSource=function(){return this._parent.FlatItemsSource};rqFG.HierarchicalItem.prototype.FlatHierarchicalItemsList=function(){return this._parent.FlatHierarchicalItemsList};rqFG.HierarchicalItem.prototype.isExpandable=function(){var a=this.GetChildList();return void 0==a||null==a?!1:!0};
rqFG.HierarchicalItem.prototype.GetChildList=function(){!1==this._childListResolved?(this._childListResolved=!0,this._resolvedChildList=null,null!=this._parent._fnChildListResolver&&(this._resolvedChildList=this._parent._fnChildListResolver(this.data,this))):null!=this._parent.dynamicResolver&&!0==this._forceToCreateNewChildList&&(this._forceToCreateNewChildList=!1,this._resolvedChildList=this._parent.dynamicResolver(this.data));return this._resolvedChildList};
rqFG.HierarchicalItem.prototype.IsExpanded=function(a){if(null==a)return this._parent.IsCollapsed.raise(this),this.isExpanded;this.isExpanded!=a&&(!0==a?this.PrepareChildrenHierarchicalList():(this._parent.ClearHierarchyFromList(this,!1),this.isExpanded=!1,this.OnPropertyChanged("IsExpanded",!1)),0!=this._parent.NodeExpansionStateChanged.fn.length&&this._parent.NodeExpansionStateChanged.raise(this));this._parent.IsCollapsed.raise(this)};
rqFG.HierarchicalItem.prototype.PrepareChildrenHierarchicalList=function(){this.isExpandable()&&(this.isExpanding=this.isExpanded=!0,0==this._childItems.length?this.CreateChildList():this.PrepareChildren(),this.isExpanding=!1,this.OnPropertyChanged("IsExpanded",!0))};
rqFG.HierarchicalItem.prototype.CreateChildList=function(){var a=this.GetChildList(),b=this;$.observable(a).bind("insert remove replaceAll",function(a,c){if("insert"==a.type)b.AddItemToChildList(c.index,c.items[0]);else if("remove"==a.type){var f=b._parent.GetFlatHierarchicalItemByData(c.items[0]);b._childItems.remove(f);b._parent.ClearHierarchyFromList(f,!0)}b.CanShowCue(0<b._childItems.length)});for(var c=0;c<a.length;c++)null!=a[c]&&this.AddItemToChildList(c,a[c]);b.CanShowCue(0<b._childItems.length)};
rqFG.HierarchicalItem.prototype.AddItemToChildList=function(a,b){b=new rqFG.HierarchicalItem(this._parent,this,b,this._level+1);this._childItems.insert(a,b);this.isExpanded&&this.PrepareNewFlexyTreeViewItem(b)};rqFG.HierarchicalItem.prototype.PrepareChildren=function(){if(this.isExpanded){this.isExpanding=!0;for(var a=0;a<this._childItems.length;a++)this.PrepareNewFlexyTreeViewItem(this._childItems[a]);this.isExpanding=!1}};
rqFG.HierarchicalItem.prototype.PrepareNewFlexyTreeViewItem=function(a){if(0==this._childItems.indexOf(a)){var b=this.FlatHierarchicalItemsList().indexOf(this);this.FlatHierarchicalItemsList().insert(b+1,a);var c=new rqFG.FlexyNodeData(a);this.FlatItemsSource().insert(b+1,c)}else{c=a;b=-1;do if(b=-1,c=this.GetNextItem(c),null==c)break;else b=this.FlatHierarchicalItemsList().indexOf(c);while(null!=c&&-1==b);null!=c?(this.FlatHierarchicalItemsList().insert(b,a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource().insert(b,
c)):(this.FlatHierarchicalItemsList().add(a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource().add(c))}a.corrFlexyNodeData=c;a.isExpandable()&&this._parent._fxGantt.AutoExpandNodes&&a.IsExpanded(!0)};rqFG.HierarchicalItem.prototype.GetNextItem=function(a){a=this._childItems.indexOf(a);return!this.isExpanding&&a+1<this._childItems.length?this._childItems[a+1]:null!=this._parentItem?this._parentItem.GetNextItem(this):this._parent.GetNextItem(this)};
rqFG.HierarchicalItem.prototype.ExpandAll=function(){var a=0;if(this.isExpandable()){this.isExpanding=this.isExpanded=!0;if(0==this._childItems.length)for(var b=this.GetChildList(),c=0;c<b.length;c++){var d=new rqFG.HierarchicalItem(this._parent,this,b[c],this._level+1);this._childItems.add(d);this.isExpanded&&(this.PrepareNewFlexyTreeViewItem(d),d=d.ExpandAll(),a+=d)}else this.PrepareChildren();this.isExpanding=!1;this.OnPropertyChanged("IsExpanded")}return++a};
rqFG.HierarchicalItem.prototype.CollapseAll=function(){if(this.isExpandable()){for(var a=0;a<this._childItems.length;a++)this._childItems[a].CollapseAll();this.IsExpanded(!1)}};
rqFG.HierarchyToList=function(a,b,c){if(null==a)return null;this._fnChildListResolver=b;this._fxGantt=c;this.data=a;this.IsCollapsed=new ObjectEvent("IsCollapsed");this.NodeExpansionStateChanged=new ObjectEvent("NodeExpansionStateChanged");this.FlatHierarchicalItemsList=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource=new RadiantQ.RQ_CollectionChangeNotifier;this._topLevelItems=new RadiantQ.RQ_CollectionChangeNotifier;this.FlatItemsSource.CollectionChanged.subscribe(this.FlatItemsSourceCollectionChange);
this.FlatHierarchicalItemsList.CollectionChanged.subscribe(this.FlatHierarchicalItemsListCollectionChange);this.init(a);var d=this;$.observable(a).bind("insert remove replaceAll",function(a,b){if("insert"==a.type){var c=new rqFG.HierarchicalItem(d,null,b.items[0],0);d._topLevelItems.insert(b.index,c);d.createList(c,b.index)}"remove"==a.type&&(c=d.GetFlatHierarchicalItemByData(b.items[0]),d._topLevelItems.remove(c),d.ClearHierarchyFromList(c,!0))})};
rqFG.HierarchyToList.prototype.UpdateDisplayIndex=function(){for(var a=-1,b=0;b<this.FlatItemsSource.length;b++)a++,this.FlatItemsSource[b].DisplayIndex(a)};rqFG.HierarchyToList.prototype.GetItemFromDataSource=function(a){if((a=this.GetFlatHierarchicalItemByData(a))&&a.corrFlexyNodeData)return a.corrFlexyNodeData};rqFG.HierarchyToList.prototype.GetFlatHierarchicalItemByData=function(a){for(var b=this.FlatHierarchicalItemsList,c=0;c<b.length;c++){var d=b[c];if(d.data===a)return d}};
rqFG.HierarchyToList.prototype.isArray=function(a){return a instanceof Array};
rqFG.HierarchyToList.prototype.init=function(a){0<this.FlatItemsSource.length&&0<this.FlatHierarchicalItemsList.length&&(this.FlatItemsSource.remove(0,this.FlatItemsSource.length),this.FlatHierarchicalItemsList.remove(0,this.FlatHierarchicalItemsList.length));if(this.isArray(a))for(var b=0;b<a.length;b++){var c=new rqFG.HierarchicalItem(this,null,a[b],0);this._topLevelItems.add(c);this.createList(c,b)}else a=new rqFG.HierarchicalItem(this,null,a,0),this._topLevelItems.add(a),this.FlatHierarchicalItemsList.add(a),
a=new rqFG.FlexyNodeData(a),this.FlatItemsSource.add(a)};
rqFG.HierarchyToList.prototype.createList=function(a,b){void 0==this._fxGantt.AutoExpandNodes&&(this._fxGantt.AutoExpandNodes=!0);var c=null;if(0==b)this.FlatHierarchicalItemsList.insert(0,a),c=new rqFG.FlexyNodeData(a),this.FlatItemsSource.insert(0,c);else if(c=this.GetNextItem(a),null!=c){var d=this.FlatHierarchicalItemsList.indexOf(c),c=new rqFG.FlexyNodeData(a);this.FlatHierarchicalItemsList.insert(d,a);this.FlatItemsSource.insert(d,c)}else this.FlatHierarchicalItemsList.add(a),c=new rqFG.FlexyNodeData(a),
this.FlatItemsSource.add(c);null!=c&&this._fxGantt.AutoExpandNodes&&c.HierarchicalItem.IsExpanded(!0)};rqFG.HierarchyToList.prototype.FlatHierarchicalItemsListCollectionChange=function(a,b){for(var c=0;c<b.items.length;c++);};rqFG.HierarchyToList.prototype.FlatItemsSourceCollectionChange=function(a,b){if("insert"==a.type)for(var c=0;c<b.items.length;c++)b.items[c].HierarchicalItem.corrFlexyNodeData=b.items[c];else for(c=0;c<b.items.length;c++);};
rqFG.HierarchyToList.prototype.ClearHierarchyFromList=function(a,b){if(b){var c=this.FlatHierarchicalItemsList,d=c.indexOf(a),d=c[d];c.remove(d);c=this.FlatItemsSource;d=c.indexOf(a.corrFlexyNodeData);d=c[d];c.remove(d)}if(a.isExpanded)for(a.isExpanded=!1,c=0;c<a._childItems.length;c++)this.ClearHierarchyFromList(a._childItems[c],!0)};rqFG.HierarchyToList.prototype.GetNextItem=function(a){a=this._topLevelItems.indexOf(a);return this._topLevelItems.length>a+1?this._topLevelItems[a+1]:null};
rqFG.HierarchyToList.prototype.ExpandAll=function(){for(var a=0;a<this.FlatHierarchicalItemsList.length;){var b=this.FlatHierarchicalItemsList[a];b.isExpandable()&&(b=b.ExpandAll(),a+=b-1);a++}};rqFG.HierarchyToList.prototype.CollapseAll=function(){};
rqFG.HierarchicalItem.prototype.TableRow=function(a){if(void 0==a||null==a)return this._tableRow;void 0!=this._tableRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),a=$(this._tableRow).height(),$(newValue).height(a));this._tableRow=newValue};
rqFG.HierarchicalItem.prototype.ChartRow=function(a){if(void 0==a||null==a)return this._chartRow;void 0!=this._chartRow&&(this.IsSelected()&&newValue.addClass("rq-row-selected ui-state-active"),a=$(this._chartRow).height(),$(newValue).height(a));this._chartRow=newValue};RadiantQ.FlexyGantt.ConvertToValidTimes=function(a,b,c,d,e){d.Value=b.clone();e.Value=b.clone().addMilliseconds(c.totalMilliseconds_M())};RadiantQ.FlexyGantt.TaskItemControl={};
RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderTopWidth=1;RadiantQ.FlexyGantt.TaskItemControl.TaskBar_BorderBottomWidth=1;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderTopWidth=0;RadiantQ.FlexyGantt.TaskItemControl.ParentBar_BorderBottomWidth=0;if("Microsoft Internet Explorer"==navigator.appName){var ieVersion=parseInt(navigator.userAgent.split(";")[1].split(" ")[2]);window.msie={version:ieVersion};9>ieVersion&&window.console&&console.error&&console.log("It appears that the gantt is loaded in a IE browser version earlier than IE9. Some features are not supported in earlier than IE9. Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}
!1==RadiantQ.CanUseDefineProperty&&(RadiantQ.FlexyGantt.TaskItemControl.MarginForBars=2);(function(){var a=2;RadiantQ.FlexyGantt.TaskItemControl.MarginForBars_M=function(){if(0==arguments.length)return a;0>value||5<value||(a=value)};if(RadiantQ.CanUseDefineProperty)try{Object.defineProperty(RadiantQ.FlexyGantt.TaskItemControl,"MarginForBars",{get:function(){return a},set:function(b){0>b||5<b||(a=b)}})}catch(b){window.console&&console.error("Gantt will load only in browsers: IE: 9+, FF: 11+, Chrome: 11+, Safari: 4.0.4(531.21.10)+. \n Or you might be running IE 9+ in Compatibility View mode, which is also not supported by the gantt.")}})();
RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};RadiantQ.FlexyGantt.ItemsSourceListening=function(a,b,c,d){ObservableCollection.apply(this,arguments);this._fg=a;this._sourceItems=b;this._startTimeBinding=c;this._endTimeBinding=d;b&&this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype=new ObservableCollection;
RadiantQ.FlexyGantt.ItemsSourceListening.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.SourceItems_M=function(){return this._sourceItems};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.EndTimeBinding_M=function(){return this._endTimeBinding};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"SourceItems",{get:function(){return this._sourceItems}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}}),Object.defineProperty(RadiantQ.FlexyGantt.ItemsSourceListening.prototype,"EndTimeBinding",
{get:function(){return this._endTimeBinding}}));RadiantQ.FlexyGantt.ItemsSourceListening.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(a,b){this.OnSourceItemsCollectionChanged(b)};RadiantQ.FlexyGantt.ItemsSourceListening.prototype.OnSourceItemsCollectionChanged=function(a){};
RadiantQ.FlexyGantt.TimeRangeFilteredItems=function(a,b,c,d){RadiantQ.FlexyGantt.ItemsSourceListening.call(this,a,b,c,d);this._fg=a;this._sourceItems=b;this._startTime=c;this._endTime=d;var e=this;a=$(".rq-ganttChart",this._fg.element);$(a).bind("ganttchartrefreshui",function(a,b){e.Filter()});this.Filter=function(){this.clear();var a=this._fg.RaiseFilterTasksByTimeRange(this._sourceItems);if(a&&0!=a.length)for(var b=0;b<a.length;b++)this.insert(this.length,a[b]);else for(a=0;a<this._sourceItems.length;a++)this.IsInTimeRange(this._sourceItems[a])&&
this.insert(this.length,this._sourceItems[a])};this._fg.GanttChartIsLoaded&&this.Filter();this.GanttChart_Loaded=function(a,b){e._fg.GanttChartLoaded.unsubscribe(this.GanttChart_Loaded);e.Filter()};this.IsInTimeRange=function(a){var b=a.StartTime;a=a.EndTime;var c=RQTimeSpan.parse(this._fg.options.TimeRangeFilteredTasksTimeBuffer),d=new RQTimeSpan(-c.totalMilliseconds_M());return b==DateTime.MinValue||a==DateTime.MinValue||b<$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedStartTime.addTimeSpan(d)&&
a<$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedStartTime.addTimeSpan(d)||b>$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedEndTime.addTimeSpan(c)&&a>$(this._fg.GetGanttChart()).data().radiantqGanttChart.options.ComputedEndTime.addTimeSpan(c)?!1:!0};this.OnSourceItemsCollectionChanged=function(a,b){switch(b.Action){case NotifyCollectionChangedAction.Add:for(var c in b.NewItems)this.IsInTimeRange(c)&&this.add(c);break;case NotifyCollectionChangedAction.Remove:for(c in b.OldItems)this.add(c);
break;case NotifyCollectionChangedAction.Reset:case NotifyCollectionChangedAction.Replace:this.Filter()}}};RadiantQ.FlexyGantt.TimeRangeFilteredItems.prototype=new RadiantQ.FlexyGantt.ItemsSourceListening;
RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs=function(a,b,c){var d=a,e=b,f=c,g=null;this.SourceList_M=function(a){if(0==arguments.length){if(d)return d;d=null}else d=a};this.TimeRangeStart_M=function(a){if(0==arguments.length){if(e)return e;e=null}else e=a};this.TimeRangeEnd_M=function(a){if(0==arguments.length){if(f)return f;f=null}else f=a};this.FilteredList_M=function(a){if(0==arguments.length){if(g)return g;g=null}else g=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this,"SourceList",
{get:function(){if(d)return d;d=null},set:function(a){d=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeStart",{get:function(){if(e)return e;e=null},set:function(a){e=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"TimeRangeEnd",{get:function(){if(f)return f;f=null},set:function(a){f=a},enumerable:!0,configurable:!0}),Object.defineProperty(this,"FilteredList",{get:function(){if(g)return g;g=null},set:function(a){g=a},enumerable:!0,configurable:!0}))};
function RQTimeSpan(a,b,c,d,e){NotifyPropertyChanged.call(this);this._seconds=this._minutes=this._hours=0;this._isInit=!0;if(1==arguments.length){var f=0>a?-1:1;this.milliseconds=Math.abs(a);this.days=Math.floor(this.milliseconds/864E5)*f;this.milliseconds%=864E5;this.hours_M(Math.floor(this.milliseconds/36E5)*f);this.milliseconds%=36E5;this.minutes_M(Math.floor(this.milliseconds/6E4)*f);this.milliseconds%=6E4;this.seconds_M(Math.floor(this.milliseconds/1E3)*f);this.milliseconds%=1E3}else 4==arguments.length?
(this.days=a,this.hours_M(b),this.minutes_M(c),this.seconds_M(d),this.milliseconds=0):5==arguments.length?(this.days=a,this.hours_M(b),this.minutes_M(c),this.seconds_M(d),this.milliseconds=e):this.milliseconds=0;return this}RQTimeSpan.prototype=new NotifyPropertyChanged;
(function(){var a=null,b=null,c=null;RQTimeSpan.MaxValue_M=function(){return a};RQTimeSpan.MinValue_M=function(){return b};RQTimeSpan.Zero_M=function(){return c};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RQTimeSpan,"MaxValue",{get:function(){return a},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"MinValue",{get:function(){return b},set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(RQTimeSpan,"Zero",{get:function(){return c},set:function(){},
enumerable:!0,configurable:!1}));RQTimeSpan.parse=function(a){if(a instanceof RQTimeSpan)return a;if("string"!=typeof a)return RQTimeSpan.Zero;try{var b=a.split(".");if(2==b.length){var c=parseInt(b[0]),g=b[1].split(":"),h=parseInt(g[0]),k=parseInt(g[1]),l=parseInt(g[2]);return new RQTimeSpan(c,h,k,l,0)}g=b[0].split(":");if(1==g.length){var p=g[0];a="";for(var b=null,g="",m=0,q=0,l=k=h=c=0,n=!1,r=!1,t=0;t<=p.length;t++){var s=p.charAt(t);if(isInteger(s))n=!0,a+=s;else{if(""!=g&&!0==n){switch(g){case "PT":g=
"";break;case "P":g="";break;case "Y":g="";m=b;r=!0;break;case "M":g="";r?(q=b,r=!1):k=b;break;case "DT":g="";c=b;break;case "H":g="";h=b;break;case "S":g="",l=b}b=parseInt(a);a=""}g+=s}}return new RQTimeSpan(c+365*m+30*q,h,k,l,0)}h=parseInt(g[0],10);k=parseInt(g[1],10);l=parseInt(g[2],10);return new RQTimeSpan(0,h,k,l,0)}catch(u){return RQTimeSpan.Zero}};isInteger=function(a){return"NaN"!=parseInt(a).toString()?!0:!1};RQTimeSpan.fromTicks=function(a){return new RQTimeSpan(a/1E4)};RQTimeSpan.FromDays=
function(a){if(!a)return RQTimeSpan.Zero;var b=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(b*Math.floor(a),24*b*(a%1),0,0)};RQTimeSpan.FromHours=function(a){if(!a)return RQTimeSpan.Zero;var b=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,b*Math.floor(a),60*b*(a%1),0)};RQTimeSpan.FromMinutes=function(a){if(!a)return RQTimeSpan.Zero;var b=0>a?-1:1;a=Math.abs(a);return new RQTimeSpan(0,0,b*Math.floor(a),60*b*(a%1))};RQTimeSpan.prototype.days_M=function(a){if(0==arguments.length)return this.days;this.days=
a};RQTimeSpan.prototype.hours_M=function(a){if(0==arguments.length)return this._hours;var b=a%1;for(b&&this.minutes_M(60*b);24<=a;)this.days++,a-=24;b=0>a?-1:1;a=Math.abs(a);this._hours=b*Math.floor(a)};RQTimeSpan.prototype.minutes_M=function(a){if(0==arguments.length)return this._minutes;var b=a%1;for(b&&this.seconds_M(60*b);60<=a;)b=this.hours_M(),this.hours_M(++b),a-=60;this._isInit&&(a+=this._minutes);b=0>a?-1:1;a=Math.abs(a);this._minutes=b*Math.floor(a)};RQTimeSpan.prototype.seconds_M=function(a){if(0==
arguments.length)return this._seconds;for(;60<=a;){var b=this.minutes_M();this.minutes_M(b++);a-=60}this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)};RQTimeSpan.prototype.milliseconds_M=function(a){if(0==arguments.length)return this.milliseconds;this.milliseconds=a};RQTimeSpan.prototype.totalMilliseconds_M=function(){return 864E5*this.days+36E5*this._hours+6E4*this._minutes+1E3*this._seconds};RQTimeSpan.prototype.Ticks_M=function(){return 1E4*this.totalMilliseconds_M()};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(RQTimeSpan.prototype,"hours",{get:function(){return this._hours},set:function(a){var b=a%1;b&&(this.minutes=60*b);for(;24<=a;)this.days++,a-=24;b=0>a?-1:1;a=Math.abs(a);this._hours=b*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,"minutes",{get:function(){return this._minutes},set:function(a){var b=a%1;b&&(this.seconds=60*b);for(;60<=a;)this.hours++,a-=60;this._isInit&&(a+=this._minutes);b=0>a?-1:1;a=Math.abs(a);this._minutes=b*Math.floor(a)}}),Object.defineProperty(RQTimeSpan.prototype,
"seconds",{get:function(){return this._seconds},set:function(a){for(;60<=a;)this.minutes++,a-=60;this._isInit&&(a+=this._seconds);this._seconds=Math.round(a)}}),Object.defineProperty(RQTimeSpan.prototype,"totalMilliseconds",{get:function(){return 864E5*this.days+36E5*this._hours+6E4*this._minutes+1E3*this._seconds},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RQTimeSpan.prototype,"Ticks",{get:function(){return 1E4*this.totalMilliseconds},set:function(){},enumerable:!0,configurable:!0}));
RQTimeSpan.prototype.valueOf=function(){return this.totalMilliseconds_M()};RQTimeSpan.prototype.getTotalDays=function(){return this.totalMilliseconds_M()/864E5};RQTimeSpan.prototype.getTotalHours=function(){return this.totalMilliseconds_M()/36E5};RQTimeSpan.prototype.getTotalMinutes=function(){return this.totalMilliseconds_M()/6E4};RQTimeSpan.prototype.getTotalSeconds=function(){return this.totalMilliseconds_M()/1E3};RQTimeSpan.prototype.equals=function(a){return 0===this.compareTo(a)};RQTimeSpan.prototype.add=
function(a){return null===a?this:this.addSeconds(a.totalMilliseconds_M()/1E3)};RQTimeSpan.prototype.subtract=function(a){return null===a?this:this.addSeconds(-a.totalMilliseconds_M()/1E3)};RQTimeSpan.prototype.addDays=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+864E5*a)};RQTimeSpan.prototype.addHours=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+36E5*a)};RQTimeSpan.prototype.addMinutes=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+6E4*a)};RQTimeSpan.prototype.addSeconds=
function(a){return new RQTimeSpan(this.totalMilliseconds_M()+1E3*a)};RQTimeSpan.prototype.addMilliseconds=function(a){return new RQTimeSpan(this.totalMilliseconds_M()+a)};RQTimeSpan.prototype.get12Hour=function(){return 12<this.hours?this.hours-12:0===this.hours?12:this.hours};RQTimeSpan.prototype.getDesignator=function(){return 12>this.hours?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};RQTimeSpan.prototype.isGreaterThan=function(a){return this.totalMilliseconds_M()>a.totalMilliseconds_M()?
!0:!1};RQTimeSpan.prototype.isGreaterThanOrEqualTo=function(a){return this.totalMilliseconds_M()>=a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.isLessThan=function(a){return this.totalMilliseconds_M()<a.totalMilliseconds_M()?!0:!1};RQTimeSpan.prototype.compareTo=function(a){a||(a=RQTimeSpan.Zero_M());return this>a?1:this<a?-1:0};RQTimeSpan.prototype.toString=function(){var a=this.days_M(),b=this.hours_M(),c=this.minutes_M(),g=this.seconds_M(),b=10>b?"0"+b:b,c=10>c?"0"+c:c,g=10>g?"0"+g:g;return 0<
a?""+a+"."+b+":"+c+":"+g+"":""+b+":"+c+":"+g+""};RQTimeSpan.prototype.toJSON=function(){return this.toString()};window.TimeSpan||(TimeSpan=RQTimeSpan);RQTimeSpan.prototype.getEqualNegative=function(){return new RQTimeSpan(-this.totalMilliseconds_M())};a=new RQTimeSpan(10675199,2,48,5,477);b=new RQTimeSpan(-10675199,-2,-48,-5,-477);c=new RQTimeSpan(0)})();RadiantQ.Gantt.Utils.TimeComputingUtils={};
RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime=function(a,b,c){return null==c?a.addTimeSpan(b):b.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?c.GetEnd(a,b):c.GetStart(a,new RQTimeSpan(-b.totalMilliseconds_M()))};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType=function(a,b,c){var d=RadiantQ.Gantt;if(b==d.TimeScaleType.Weeks)switch(a){case d.TimeScaleType.Minutes:return 10080*c;case d.TimeScaleType.Hours:return 168*c;case d.TimeScaleType.Days:return 7*c;case d.TimeScaleType.Weeks:return c;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Days)switch(a){case d.TimeScaleType.Minutes:return 1440*c;case d.TimeScaleType.Hours:return 24*c;case d.TimeScaleType.Days:return c;
case d.TimeScaleType.Weeks:return c/7;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Hours)switch(a){case d.TimeScaleType.Minutes:return 60*c;case d.TimeScaleType.Hours:return c;case d.TimeScaleType.Days:return c/24;case d.TimeScaleType.Weeks:return c/168;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}else if(b==d.TimeScaleType.Minutes)switch(a){case d.TimeScaleType.Minutes:return c;case d.TimeScaleType.Hours:return c/60;case d.TimeScaleType.Days:return c/
1440;case d.TimeScaleType.Weeks:return c/10080;case d.TimeScaleType.Months:case d.TimeScaleType.Years:return 1}throw"Not yet supported 2";};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeSpanToTimeUnits=function(a,b){var c=RadiantQ.Gantt;switch(a){case c.TimeScaleType.Minutes:return b.getTotalMinutes();case c.TimeScaleType.Hours:return b.getTotalHours();case c.TimeScaleType.Days:return b.getTotalDays();case c.TimeScaleType.Months:return b.getTotalDays()/30;case c.TimeScaleType.Weeks:return b.getTotalDays()/7;case c.TimeScaleType.Years:return b.getTotalDays()/365;default:throw"Missing case for TimeScaleType: "+a+" in ConvertTimeSpanToTimeUnits";
}};
RadiantQ.Gantt.Utils.TimeComputingUtils.IsWorkingTime=function(a,b,c){var d=RadiantQ.Gantt;if(null!=c)switch(c=null==c?a:c.ConvertToNextWorkingTime(a),b){case d.TimeScaleType.Minutes:return!a.Date().compareTo(c.Date())&&c.getHours()==a.getHours()&&c.getMinutes()==a.getMinutes();case d.TimeScaleType.Hours:return!a.Date().compareTo(c.Date())&&c.getHours()==a.getHours();case d.TimeScaleType.Days:return!a.Date().compareTo(c.Date());case d.TimeScaleType.Weeks:return this.FirstDayOfWeek(c).equals(this.FirstDayOfWeek(a));case d.TimeScaleType.Months:return c.getFullYear()==
a.getFullYear()&&c.getMonth()==a.getMonth();case d.TimeScaleType.Years:return c.getFullYear()==a.getFullYear()}return!0};RadiantQ.Gantt.Utils.TimeComputingUtils.FirstDayOfWeek=function(a){return a.Date().clone().addDays(-a.getDay())};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek=function(a){var b=a.getDay(),b=b-Date.CultureInfo.firstDayOfWeek;0>b&&(b=7+b);return 7-b-a.getHours()/24-a.getMinutes()/1440};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInMonth=function(a){var b=(new Date(a.getFullYear(),a.getMonth(),1)).addMonths(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,b).getTotalDays()+1};RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInYear=function(a){var b=(new Date(a.getFullYear(),0,1)).clone().addYears(1).addDays(-1);return rqTCUtils.GetTimeSpan(a,b).getTotalDays()+1};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalWorkingDay=function(a,b,c,d){if(b.equals(c))return 0;if(null==d){var e=c.totalMilliseconds_M(),f=b.totalMilliseconds_M();return(new RQTimeSpan(e-f)).getTotalHours()/24}e=new RadiantQ.Gantt.TimePeriod(a.addTimeSpan(b),a.addTimeSpan(c));f=RQTimeSpan.Zero_M();a=d.WorkTimeScheduleProvider(a);if(null!=a){b=a._intervals;for(c=0;c<b.length;c++)(d=b[c].Intersect(e))&&(f=f.add(d.Duration_M()));return isNaN(f.getTotalHours()/a.Duration.getTotalHours())?
0:f.getTotalHours()/a.Duration.getTotalHours()}return(c.Ticks_M()-b.Ticks_M())/RQTimeSpan.FromDays(1).Ticks_M()};RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToFractionalDurationInHours=function(a,b,c){if(null==c)return 24*b;a=c.WorkTimeScheduleProvider(a);return null!=a?a.Duration.getTotalHours()*b:0};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetLeadingNonWorkingHours=function(a,b){if(null==b)return RQTimeSpan.Zero_M();var c=b.WorkTimeScheduleProvider(a.Date());return null!=c?new RQTimeSpan(c.Start-a.Date()):RQTimeSpan.Zero_M()};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType=function(a,b,c){var d=RadiantQ.Gantt;if(b==d.TimeScaleType.Years)switch(a){case d.TimeScaleType.Minutes:return 525600*c;case d.TimeScaleType.Hours:return 8760*c;case d.TimeScaleType.Days:return 365*c;case d.TimeScaleType.Weeks:return 52*c;case d.TimeScaleType.Months:return 12*c;case d.TimeScaleType.Years:return c}else if(b==d.TimeScaleType.Months)switch(a){case d.TimeScaleType.Minutes:return 44640*c;case d.TimeScaleType.Hours:return 744*
c;case d.TimeScaleType.Days:return 31*c;case d.TimeScaleType.Weeks:return 4*c;case d.TimeScaleType.Months:return c;case d.TimeScaleType.Years:return 1}return d.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(a,b,c)};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);return 0<a.compareTo(b)?b.clone().addDays(1):a};
RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextHour=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0);0<a.compareTo(b)&&b.addHours(1);return b};RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextMinute=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0);0<a.compareTo(b)&&b.addMinutes(1);return b};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextYear=function(a){return(new Date(a.getFullYear(),0,1,0,0,0)).addYears(1)};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextWeek=function(a){a=a.addDays(RadiantQ.Gantt.Utils.TimeComputingUtils.GetRemainingDaysInWeek(a));return RadiantQ.Gantt.Utils.TimeComputingUtils.CeilToNextDay(a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetStartOfNextMonth=function(a){return(new Date(a.getFullYear(),a.getMonth(),1,0,0,0)).addMonths(1)};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeBreaks=function(a,b,c,d){if(!1!=a instanceof Date&&!1!=b instanceof Date){d||(d=[]);var e=new RQTimeSpan(b-a);if(e<=RQTimeSpan.Zero_M())return!1;if(null!=c){var f=c.ConvertToNextWorkingTime(a).equals(a)?!0:!1;d.push(a);a=c.ConvertToNextWorkingTimeIntervals(a,e);if(0==a.length)return!1;!f&&a[0].Start_M().isLessThan(b)&&d.push(a[0].Start_M());for(c=1;c<a.length;c++)if(!1==a[c].Start_M().equals(a[c-1].End_M())){if(0<=a[c-1].End_M().compareTo(b))break;d.push(a[c-
1].End_M());if(0<=a[c].Start_M().compareTo(b))break;d.push(a[c].Start_M())}c==a.length&&a[c-1].End_M().isLessThan(b)&&d.push(a[c-1].End_M());d.push(b);return f}d.push(a);d.push(b);return!0}};RadiantQ.Gantt.BindingMode={OneWay:"OneWay",TwoWay:"TwoWay"};
RadiantQ.Gantt.Utils.ValueBinder=function(a,b,c,d,e){if(null==b)this._binding=b,this.IsBound=!1;else return this.model=e,this._isValueUpdating=!1,this.property=b.Property,b.Converter&&(b.Convert=b.Converter.Convert,b.ConvertBack=b.Converter.ConvertBack),this.BindingMode=d,this.boundedObj=a,this._binding=this.OriginalBinding=b,this._isdisposed=!1,this._value=null,this.ValueChanged=new ObjectEvent("ValueChanged"),e&&e.canInsertPropertyChangeTriggeringPropertiesInData&&(this.PropertyChangedTrigger=new InsertPropertyChangedTriggeringProperty(this,
a,this.property)),this._value=b.Convert&&"function"==typeof b.Convert?"function"==typeof a[this.property]?b.Convert.call(a,a[this.property]()):b.Convert.call(a,a[this.property],a):"function"==typeof a[this.property]?a[this.property]():a[this.property],a.PropertyChanged&&!1==a.PropertyChanged.isSubscribed(this.sourcePropertyChanged,this)&&a.PropertyChanged.subscribe(this.sourcePropertyChanged,this),a._boundProps||(a._boundProps={},RadiantQ.CanUseDefineProperty&&Object.defineProperty(a,"_boundProps",
{enumerable:!1,configurable:!1})),a._boundProps[this.property]=this,this};RadiantQ.Gantt.Utils.ValueBinder.prototype.IsBound_M=function(){return null!=this._binding};RadiantQ.Gantt.Utils.ValueBinder.prototype.Binding_M=function(){return this._binding};
RadiantQ.Gantt.Utils.ValueBinder.prototype.Value_M=function(a){if(0==arguments.length)return this._value;if(!1!=this.IsBound_M()&&this._value!==a){this._isValueUpdating=!0;var b=this.boundedObj[this.property];!this._binding.TargetNullValue||null!=b&&void 0!=b||(b=this._binding.TargetNullValue);if(this._binding.Convert)if(this._binding.TargetType&&a instanceof this._binding.TargetType)this._value=this._binding.Convert.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=
a;else if(b&&b.constructor===a.constructor||"function"==typeof b&&b()&&b().constructor===a.constructor)this._value=this._binding.Convert.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a;else{if(this._isValueUpdating=!1,this.BindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&this._binding.ConvertBack){var c=this._binding.ConvertBack.call(this.boundedObj,a,this.boundedObj);"function"==typeof b?b(c):this.boundedObj[this.property]=c}}else{if(null==b||void 0==
b)this.boundedObj[this.property]=a;this._value=a;"function"==typeof b?b(a):this.boundedObj[this.property]=this._value}this._isValueUpdating&&this.ValueChanged&&this.ValueChanged.raise(this,this._value);this._isValueUpdating=!1}};Array.prototype.filter||(Array.prototype.filter=function(a,b){if(void 0===this||null===this)throw new TypeError;var c=Object(this),d=c.length>>>0;if("function"!==typeof a)throw new TypeError;for(var e=[],f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e});
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"IsBound",{get:function(){return null!=this._binding},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"Binding",{get:function(){return this._binding},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Utils.ValueBinder.prototype,"Value",{get:function(){return this._value},set:function(a){if(!1!=this.IsBound&&
this._value!==a){this._isValueUpdating=!0;var b=this.boundedObj[this.property];!this._binding.TargetNullValue||null!=b&&void 0!=b||(b=this._binding.TargetNullValue);if(this._binding.Convert)this._binding.TargetType&&a instanceof this._binding.TargetType?(this._value=this._binding.Convert.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a):b&&b.constructor===a.constructor||"function"==typeof b&&b()&&b().constructor===a.constructor?(this._value=this._binding.Convert.call(this.boundedObj,
a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a):(this._isValueUpdating=!1,this.BindingMode==RadiantQ.Gantt.BindingMode.TwoWay&&this._binding.ConvertBack&&(a=this._binding.ConvertBack.call(this.boundedObj,a,this.boundedObj),"function"==typeof b?b(a):this.boundedObj[this.property]=a));else{if(null==b||void 0==b)this.boundedObj[this.property]=a;this._value=a;"function"==typeof b?b(a):this.boundedObj[this.property]=this._value}this._isValueUpdating&&this.ValueChanged&&this.ValueChanged.raise(this,
this._value);this._isValueUpdating=!1}},enumerable:!0,configurable:!0}));
RadiantQ.Gantt.Utils.ValueBinder.prototype.sourcePropertyChanged=function(a,b){var c=this.boundedObj;if(this.model&&this.model.GetActivityById&&(c=-1,c="function"==typeof a.ID?a.ID():"function"==typeof a.ID_M?a.ID_M():a.ID,c=this.model.GetActivityById(c),null==c||RadiantQ.CanUseDefineProperty&&0<c.ChildActivities_M().length&&("StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Effort"==b.PropertyName)))return;(c=c._boundProps[b.PropertyName])&&!1==c._isValueUpdating&&(value=void 0==b.value?a[b.PropertyName]:
b.value,c.Value_M(value))};RadiantQ.Gantt.Utils.ValueBinder.prototype.Dispose=function(){this._isdisposed=!0;!1!=this.IsBound&&(this.model.canInsertPropertyChangeTriggeringPropertiesInData&&this.UnBindDataWithGantt(),delete this.PropertyChanged,delete this.ValueChanged,delete this.Value)};
RadiantQ.Gantt.Utils.ValueBinder.prototype.UnBindDataWithGantt=function(){var a=this._binding.Property,b=this.boundedObj["Bounded_"+a];delete this.boundedObj[a];delete this[a+"_Binder"];delete this.boundedObj[a+"_Binder"];this.boundedObj[a]=b};
function InsertPropertyChangedTriggeringProperty(a,b,c){var d=b[c];if(void 0===d){var e="function"==typeof b.ID,f=e?{}:b;!0==RadiantQ.CanUseDefineProperty&&Object.defineProperty(f,c,{get:function(){return"function"==typeof d?d():d},set:function(a){"function"==typeof d?d()!=a&&(d(a),this.PropertyChanged.raise(this,{PropertyName:c,Value:a})):d!=a&&(d=a,this.PropertyChanged.raise(this,{PropertyName:c,Value:a}))},enumerable:!0,configurable:!0});e&&(e=ko.mapping.fromJS(f[c]),b[c]=e,e=function(a){b.PropertyChanged.raise(b,
{PropertyName:c,Value:a})},b[c].subscribe(e))}else"function"==typeof d?(e=function(a){b.PropertyChanged.raise(b,{PropertyName:c,Value:a})},b[c].subscribe(e)):RadiantQ.CanUseDefineProperty&&Object.defineProperty(b,c,{get:function(){return"function"==typeof d?d():d},set:function(a){"function"==typeof d?d()!=a&&(d(a),b.PropertyChanged.raise(this,{PropertyName:c,Value:a})):d!=a&&(d=a,b.PropertyChanged.raise(this,{PropertyName:c,Value:a}))},enumerable:!0,configurable:!0});a._isdisposed=!1;a.PropertyChanged=
new ObjectEvent("PropertyChanged");b.PropertyChanged||(b.PropertyChanged=new ObjectEvent("PropertyChanged"),RadiantQ.CanUseDefineProperty&&Object.defineProperty(b,"PropertyChanged",{enumerable:!1}));!1==b.PropertyChanged instanceof ObjectEvent&&(b.PropertyChanged=new ObjectEvent("PropertyChanged"),RadiantQ.CanUseDefineProperty&&Object.defineProperty(b,"PropertyChanged",{enumerable:!1}))}Date.prototype.Date=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0)};
Date.prototype.addTimeSpan=function(a){return a?this.clone().add({millisecond:a.millisecond||a.milliseconds_M(),seconds:a.seconds_M(),minutes:a.minutes_M(),hours:a.hours_M(),days:a.days_M()}):this};Date.MaxValue=new Date(9999,11,30,11,59,59);Date.MinValue=new Date(1E3,0,1,12,0,0);var DateTime={};DateTime.MaxValue=new Date(9999,11,30,11,59,59);DateTime.MinValue=new Date(1E3,0,1,12,0,0);Date.prototype.isGreaterThan=function(a){return 1==this.compareTo(a)?!0:!1};
Date.prototype.isLessThan=function(a){return-1==this.compareTo(a)?!0:!1};Date.prototype.subtract=function(a){return this-a};String.prototype.trim=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");for(var a=this,b=0;b<arguments.length;b++)a=a.replace(arguments[b],"");return a};String.prototype.trimEnd=function(){if(0==arguments.length)return this.replace(/^\s+|\s+$/,"");var a=this.lastIndexOf(arguments[0]),b=this.slice(0,a),a=this.slice(a+1);return b+a};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(String,"trim",{enumerable:!1}),Object.defineProperty(String,"trimEnd",{enumerable:!1}));try{window.JSON.toXML=function(a,b,c){if(a instanceof Array){for(var d="<"+b+">",e=0;e<a.length;e++){var f=a[e],d=d+"\n",g="<"+c+" ",h;for(h in f)void 0!=f[h]&&(g+=h+'="'+f[h]+'" ');g+="/>";d+=g}return'<?xml version="1.0" encoding="utf-8" ?>\n'+(d+("\n</"+b+">"))}}}catch(e$$22){}
RadiantQ.RQ_ObservableCollection=function(a){Array.call(a);a.DataSource=a;a.CollectionChanged=new ObjectEvent("CollectionChanged");a.push=function(a){Array.prototype.push.call(this,a);args={Action:"Add",NewItems:[a]};this.CollectionChanged.raise(this,args)};a.splice=function(a,c,d){var e=[],e=void 0==d?Array.prototype.splice.call(this,a,c):Array.prototype.splice.call(this,a,c,d);args={};d&&(args.Action="Add",args.NewItems=d instanceof Array?d:[d]);c&&0<c&&(args.Action="Remove",args.OldItems=e);this.CollectionChanged.raise(this,
args)};a.pop=function(){var a=Array.prototype.pop.call(this);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);return a};a.remove=function(a){var c=Array.prototype.remove.call(this,a);args={};a&&(args.Action="Remove",args.OldItems=[a]);this.CollectionChanged.raise(this,args);return c};return a};RadiantQ.RQ_ObservableCollection.prototype=[];
window.ko&&(ko.bindingHandlers.GanttControl={init:function(a,b,c,d,e){$(a).GanttControl(b())},update:function(a,b,c,d,e){}},ko.bindingHandlers.FlexyGantt={init:function(a,b,c,d,e){$(a).FlexyGantt(b())},update:function(a,b,c,d,e){}});
RadiantQ.Gantt.Utils.SaveCanvasAsImage=function(a,b){if(a.msToBlob&&window.navigator.msSaveOrOpenBlob)window.ganttBlob=a.msToBlob(),window.navigator.msSaveOrOpenBlob(ganttBlob,b);else if(window.Blob||window.webkitURL){window.readyState=0;var c=document.createElementNS("http://www.w3.org/1999/xhtml","a");c.target="_blank";c.href=a.toDataURL("image/png");c.download=b;var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(d);window.readyState=
2;setTimeout(function(){window.close()},1E3)}};var ns_gantt=RadiantQ.Gantt,rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;RadiantQ.Gantt.Global={};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseScaleType=function(a,b,c,d){var e=b>c,f=0;if(e){var g=c;c=b;b=g}var g=b.Date(),h=c.Date();switch(a){case ns_gantt.TimeScaleType.Minutes:f=rqTCUtils.GetTimeSpan(b,c).getTotalMinutes();break;case ns_gantt.TimeScaleType.Hours:f=rqTCUtils.GetTimeSpan(b,c).getTotalHours();break;case ns_gantt.TimeScaleType.Days:h.equals(g)?f=rqTCUtils.ConvertToFractionalWorkingDay(h,rqTCUtils.GetTimeSpan(g,b),rqTCUtils.GetTimeSpan(h,c),d):(a=rqTCUtils.ConvertToFractionalWorkingDay(g,
rqTCUtils.GetTimeSpan(g,b),new RQTimeSpan(0,24,0,0),d),a+=rqTCUtils.GetTimeSpan(g,c).days-1,f=a+=rqTCUtils.ConvertToFractionalWorkingDay(h,RQTimeSpan.Zero_M(),rqTCUtils.GetTimeSpan(h,c),d));break;case ns_gantt.TimeScaleType.Weeks:f=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,b,c,d)/7;break;case ns_gantt.TimeScaleType.Years:f=rqTCUtils.ConvertToUnitsOfBaseScaleType(ns_gantt.TimeScaleType.Days,b,c,d)/365}e&&(f=-f);return f};
RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan=function(a,b){b=rqTCUtils.GetAdjustEndForDSTChange(a,b);return new RQTimeSpan(b-a)};RadiantQ.Gantt.Utils.TimeComputingUtils.GetAdjustEndForDSTChange=function(a,b){var c=a.getTimezoneOffset(),d=b.getTimezoneOffset();return c!=d?b.clone().addHours((c-d)/60):b};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan=function(a,b){switch(a){case ns_gantt.TimeScaleType.Minutes:return new RQTimeSpan(0,0,b,0);case ns_gantt.TimeScaleType.Hours:return new RQTimeSpan(0,b,0,0);case ns_gantt.TimeScaleType.Days:return new RQTimeSpan(b,0,0,0);case ns_gantt.TimeScaleType.Months:return new RQTimeSpan(30*b,0,0,0);case ns_gantt.TimeScaleType.Weeks:return new RQTimeSpan(7*b,0,0,0);case ns_gantt.TimeScaleType.Years:return new RQTimeSpan(365*b,0,0,0);default:throw"Missing case for TimeScaleType: {0} in ConvertTimeUnitsToTimeSpan"+
a.toString();}};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertUnitsInBaseScaleTypeToDurationInHours=function(a,b,c,d,e){var f=0;if(null!=b)switch(f=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),a){case ns_gantt.TimeScaleType.Minutes:if(null==e)return(d-c)/60;d=b.clone().addTimeSpan(new RQTimeSpan(0,d-c,0,0));e=e.GetEffort(b,d);return e.TotalHours;case ns_gantt.TimeScaleType.Hours:if(null==e)return d-c;d=b.clone().addTimeSpan(new RQTimeSpan(0,d-c,0,0));e=e.GetEffort(b,
d);return e.TotalHours;case ns_gantt.TimeScaleType.Days:var g=Math.floor(c);a=Math.floor(d);if(g==a)return rqTCUtils.ConvertToFractionalDurationInHours(b,d-c,e);if(d>c){b=f;var h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),f=rqTCUtils.ConvertToFractionalDurationInHours(h,1-(c-g),e);c=parseInt(Math.floor(d-g))-1;for(g=1;g<=c;g++)b=b.addDays((new RQTimeSpan(1,0,0,0)).getTotalDays()),h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),
b.getSeconds()),f+=rqTCUtils.ConvertToFractionalDurationInHours(h,1,e);b=b.addDays((new RQTimeSpan(1,0,0,0)).getTotalDays());h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f+=rqTCUtils.ConvertToFractionalDurationInHours(h,d-a,e)}else{b=f;h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f=rqTCUtils.ConvertToFractionalDurationInHours(h,c-g,e);c=Math.abs(parseInt(Math.floor(d-g))-1);for(g=1;g<=c;g++)b=b.addDays(-(new RQTimeSpan(1,
0,0,0)).getTotalDays()),h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),f+=rqTCUtils.ConvertToFractionalDurationInHours(h,1,e);b=b.addDays(-(new RQTimeSpan(1,0,0,0)).getTotalDays());h=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());f+=rqTCUtils.ConvertToFractionalDurationInHours(h,1-(d-a),e);f=-f}break;default:throw new Exception("Not supported yet.");}return f};
RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToEndTimeInBaseScaleType=function(a,b,c,d,e){var f=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);switch(a){case ns_gantt.TimeScaleType.Minutes:if(null==e)return b.addMinutes((new RQTimeSpan(0,d-c,0,0)).getTotalHours());d=new RQTimeSpan(0,0,d-c,0);d=b.addTimeSpan(d);return e.ConvertToNextWorkingTime(d);case ns_gantt.TimeScaleType.Hours:if(null==e)return b.addHours((new RQTimeSpan(0,d-c,0,0)).getTotalHours());d=new RQTimeSpan(0,d-c,0,0);d=b.addTimeSpan(d);
return e.ConvertToNextWorkingTime(d);case ns_gantt.TimeScaleType.Days:var g=Math.floor(c);a=Math.floor(d);if(g==a)return b.addHours((new RQTimeSpan(0,rqTCUtils.ConvertToFractionalDurationInHours(b,d-c,e),0,0)).getTotalHours());d>c?(b=f,c=parseInt(Math.floor(d-g)),b.addDays(c),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())):(b=f,c=parseInt(Math.ceil(g-d)),b.addDays(-c),c=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0));f=rqTCUtils.GetLeadingNonWorkingHours(c,
e);b=b.addHours(rqTCUtils.ConvertToFractionalDurationInHours(c,d-a,e));return b=b.addHours(f.getTotalHours());default:throw"Not supported yet.";}};RadiantQ.Gantt.Print=function(a,b){RadiantQ.Gantt.ConvertHTMLToCanvas(b,a,!0)};
RadiantQ.Gantt.ConvertHTMLToCanvas=function(a,b,c){function d(a,c){var d="";$(".resizer-style",a).remove();$(".rq-gc-progressbar-resizer",a).remove();var f,e;f=$(".ui-grid-body",a);e=$(".ui-grid-head",a);var g=$(".timeSpanHeader",a);if(b.VisibleColumnIndices&&b.VisibleColumnIndices instanceof Array){var h=b.VisibleColumnIndices;$(".gridcols",a).css("display","none");for(var k=0;k<h.length;k++)var l=h[k],d=d+(".rq-grid-col"+l+" {display:table-column !important;}"),d=d+(".rq-grid-column-"+l+" {display:table-cell !important;}")}$("tr.ui-widget-header",
a).height(g.outerHeight());g=$(".rq-grid-head-parent",a);$(".header",g).remove();$("td#gridContainer>:first-child",a);f.css("height","100%");e.css("width","100%");e=$(".ui-grid-body-table",a).height();f.height(e);f=g.height()+e;a.height(f);if(void 0===b.IsChartVisible||!1!==b.IsChartVisible)$(".rq-gc-rowsParent-table",a).height(e),$(".rq-gc-rowsParent",a).css({height:e+"px","margin-top":"0px"}),$(".rq-gc-chartArea-div",a).height(e),$(".rq-gc-chartArea",a).height(f),$(".rq-ganttChart",a)[0].style.setProperty("height",
f+"px","important"),$(".ui-GanttTimeUnitBackground-unit",a).css("height","100%"),$(".rq-gc-customRange-background",a).height(e),$(".ui-GanttChartScaleBackground",a).height(e),$(".rq-gc-dependencysParent",a).height(e),$(a).append("<style>td.rq-fg-gc-row{overflow: inherit !important;}\n"+d+"</style>")}if(!a){var e=$(".rq-ganttBase");a=e.data("FlexyGantt")||e.data("GanttControl")}if(a&&a.widgetName&&!1!=("FlexyGantt"==a.widgetName?!0:"GanttControl"==a.widgetName?!0:!1)){var f=a.element;b=b||{};var e=
$(".ui-gridpanel",f),g=$(".rq-ganttChart",f),h=f.data(),k=h.GanttControl||h.FlexyGantt,l=$.extend(!0,l,g.data("GanttChart").options);l.Parent.UseTimeRangeFilteredTasksInRows?(_useTimeRangeFilteredTasksInRows=l.Parent.UseTimeRangeFilteredTasksInRows(),l.Parent={UseTimeRangeFilteredTasksInRows:function(){return _useTimeRangeFilteredTasksInRows}}):l.Parent={};k.ActivityViews&&(l.Parent.ActivityViews=k.ActivityViews,l.Parent.DependencyViews=k.DependencyViews);l.ResizeToFit=!0;l.IsPrinting=!0;l.UseChartVirtualization=
!1;l.UseVirtualization=!1;l.BaseTimeUnitWidthMinimum=0.1;var p=$("<div id='printableGanttChart'></div>"),m=e.clone(),h=0;void 0==b.IsGridVisible&&(b.IsGridVisible=!0);if(b.VisibleColumnIndices===[]||null===b.VisibleColumnIndices||!1===b.VisibleColumnIndices)b.IsGridVisible=!1;var q=$("div.ui-grid-body",m);if(!1!==b.IsGridVisible){var n=$("tr.ui-widget-header",f),f=$("tr.ui-widget-header>th",f),r=b.VisibleColumnIndices;if(r&&$.isArray(r)&&r.length<f.length)for(n=h=0;n<r.length;n++)h+=$(f[r[n]]).outerWidth(!0);
else void 0==r&&(h=n.outerWidth(!0));n=$("table.ui-grid-body-table",e);f=n.outerWidth(!0)-n.width();h+=f;n=n.data("FlexyTable")||n.data("GanttTable");n.renderRows(n._toArray(),q,!0)}var t=$("tr",q),s=RadiantQ.Gantt.View.IActivityView.prototype.TableRow,u=RadiantQ.Gantt.View.IActivityView.prototype.ChartRow,w=RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow,v=RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow;RadiantQ.Gantt.View.IActivityView.prototype.TableRow=function(){var a=this.DisplayIndex;
return-1==a||a>=t.length?null:$(t[a])};RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=function(){var a=this.corrFlexyNodeData.DisplayIndex();return-1==a||a>=t.length?null:$(t[a])};var x=$(".rq-gc-rowsParent-table",p);RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=function(){0==x.length&&(x=$(".rq-gc-rowsParent-table",p));var a=$("tr",x),b=this.DisplayIndex;return-1==b||b>=a.length?null:$(a[b])};RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=function(){0==x.length&&(x=$(".rq-gc-rowsParent-table",
p));var a=$("tr",x),b=this.corrFlexyNodeData.DisplayIndex();return-1==b||b>=a.length?null:$(a[b])};h=!1===b.IsGridVisible?0:h||$(".ui-grid-body>table",e).width();$tempCont=$("<div id='tempCont'></div>").append(m);!1!==b.IsChartVisible&&($tempCont.append(p),p.css({"margin-left":"6px",width:g.width()-6+"px",height:g.height()+"px",position:"absolute","z-index":0}),l=p.GanttChart(l).data("GanttChart"),b.ViewStartTime?l.SetStartTime(b.ViewStartTime):l.SetStartTime(g.data("GanttChart").VisualStartTime.clone()),
b.ViewEndTime&&l.TrySetEndTime(b.ViewEndTime),l.initializeGanttComponents(),k&&k.options.KnockoutObjectName&&(p.css("display","none"),$(document.body).append(p),g=eval(k.options.KnockoutObjectName),ko.applyBindings(g,p[0]),ko.cleanNode(p[0]),p.remove(),p.css("display","block")));a.element.width();m.css({width:h+"px",position:"absolute"});p.css({left:h+"px"});$("script[src*=jquery]",document);if(0==$("script[src*=html2canvas]",document).length&&void 0==window.html2canvas)window.console?console.error("html2canvas.js file is not found."):
alert("html2canvas.js file is not found.");else{a=$("link",document);for(var g=$("style"),y="",n=0;n<a.length;n++)y+=a[n].outerHTML+"\n";for(n=0;n<g.length;n++)location.href.replace(/([^\/]*$)/,""),y+=g[n].outerHTML;!1===b.IsChartVisible?$('<div id="__gantt__test" style="height:'+$("tbody",e).height()+'px;">\n'+m[0].outerHTML+"\n</div>\n"):$('<div id="__gantt__test" style="height:'+p.height()+'px;">\n'+m[0].outerHTML+"\n"+p[0].outerHTML+"\n</div>\n");var z=function(a,c){var d=void 0==b.Format?"png":
b.Format,f=!0;try{if(b.AfterCanvasGenerated&&"function"==typeof b.AfterCanvasGenerated&&(f=b.AfterCanvasGenerated(a)),!1!=f){var e=a.toDataURL("image/"+d+"");$image=$("<img src="+e+"></img>");$(newWindow.document.body).html("<img id='__RQ_PrintImage' src="+e+" style='width:100%;'></img>").ready(function(){var b=this.document.title;if(c)b=function(){$("#__RQ_iframeCont").remove()},window.__RQ_iframe?(__RQ_iframe.onafterprint=b,setTimeout(function(){"function"==typeof __RQ_iframe.print?(__RQ_iframe.focus(),
__RQ_iframe.print()):(__RQ_iframe.contentWindow.focus(),__RQ_iframe.contentWindow.print())},1)):(this.onafterprint=b,this.print()),this.close();else if(window.Blob)RadiantQ.Gantt.Utils.SaveCanvasAsImage(a,b+"."+d+""),$("#__RQ_iframeCont").remove(),A||alert("Please close this new window when download is complete.");else{var f=window.open("","_blank");f.document.write("<!DOCTYPE html>\n",'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+b+"</title>\n","</head>\n","<body>\n","<img src="+
e+"/>\n","</body>\n","</html>");f.document.close()}}.bind(newWindow))}}catch(g){window.console&&console.error(g.message+" in afterCanvasGenerated.")}},B=b.Title||document.title,A;(function(){window.RadiantQ.Gantt.Utils.AfterIframeContentLoad=function(a){delete window.RadiantQ.Gantt.Utils.AfterIframeContentLoad;var f=$("#__gantt__test",a.document),e=$(".ui-grid",a.document),g=$(".rq-grid-head-parent",a.document).height()+$(".ui-grid-foot",a.document).height()+$(".ui-grid-body",a.document)[0].scrollHeight;
d(f,c);$(a.document).ready(function(){function d(){$(".ui-gridpanel",a.document).css("visibility","hidden");var b=$("#printableGanttChart",a.document).css({left:0});html2canvas(b,{allowTaint:!0,useCORS:!0,onrendered:function(a){a=a.getContext("2d");h.putImageData(a.getImageData(0,0,b.width(),g),k+6,0);z(f,c)}})}var f=document.createElement("canvas");f.width=m.width()+p.width();f.height=g;var h=f.getContext("2d"),k=e.width();b.IsGridVisible?html2canvas(e,{allowTaint:!0,useCORS:!0,onrendered:function(a){a=
a.getContext("2d");h.putImageData(a.getImageData(0,0,k,g),0,0);!1!=b.IsChartVisible?d():z(f,c)}}):!1!=b.IsChartVisible&&d()})};A=document.createElement("iframe");A.id="__RQ_iframe";A.width=window.innerWidth;A.height=window.innerHeight;$("#__RQ_iframeCont").remove();var a=$("<div id='__RQ_iframeCont' style='height: 0px;overflow: hidden;'></div>").append(A);$(document.body).append(a);setTimeout(function(){A.contentWindow.document.open();newWindow=A.contentWindow;A.contentWindow.document.write("<!DOCTYPE html>\n",
'<html xmlns="http://www.w3.org/1999/xhtml">\n',"<head>\n","<title>"+B+"</title>\n",""+y+"\n","<style>\n","div.rq-gc-progressbar, div.progressbarStyle {border-radius: 0px !important;}",".rq-timeUnit-div{overflow:initial !important;}\n",".ui-grid-body {overflow-x: hidden !important; overflow-y: hidden !important;}\n","</style>\n",'<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">\n','<body onload="window.parent.RadiantQ.Gantt.Utils.AfterIframeContentLoad(this)">\n','<div id="__gantt__test" style="height:'+
p.height()+"px; width:"+window.innerWidth+'px;">\n',""+m[0].outerHTML+"\n",""+p[0].outerHTML+"\n","</div>\n","</body>\n","</html>");A.contentWindow.document.close();m.empty();p.empty();p.empty()},0);return A.contentWindow})();setTimeout(function(){RadiantQ.Gantt.View.IActivityView.prototype.TableRow=s;RadiantQ.Gantt.View.IActivityView.prototype.ChartRow=u;RadiantQ.FlexyGantt.HierarchicalItem.prototype.TableRow=w;RadiantQ.FlexyGantt.HierarchicalItem.prototype.ChartRow=v},100)}}};
RadiantQ.Gantt.ExportToImage=function(a,b){RadiantQ.Gantt.ConvertHTMLToCanvas(b,a)};
RadiantQ.Gantt&&(RadiantQ.Gantt.Dictionary=function(){this._collections=[];this.currIndex=-1;this.keys=[];this._asArray=[];this.CollectionChanged=new ObjectEvent("CollectionChanged");this.keys.indexOf=function(a){if(a&&a.equals){for(var b=0;b<this.length;b++)if(this[b].equals(a))return b;return-1}return Array.prototype.indexOf.call(this,a)};this.length=this._collections.length;this.asArray=this._asArray;return this},RadiantQ.Gantt.Dictionary.prototype.Add=function(a,b){null==a||void 0==a?window.console&&
console.log(a+" is not a valid key for Dictionary."):("string"===typeof a||"number"===typeof a?this[a]=b:"function"==typeof a.ID_M?this[a.ID_M()]=b:void 0!=a.ID&&(this[a.ID]=b),this.currIndex=this.keys.indexOf(a),-1==this.currIndex?(this.currIndex=this._asArray.length,this.keys.push(a),this._collections.push({key:a,value:b}),this._asArray.push(b)):(this._collections[this.currIndex].value=b,this._asArray[this.currIndex]=b),this.length=this._collections.length,this.asArray=this._asArray,this.Keys=this.keys,
this.OnCollectionChanged(null,b,this.currIndex))},RadiantQ.Gantt.Dictionary.prototype.Contains=function(a){this.currIndex=this.keys.indexOf(a);return-1==this.currIndex?!1:!0},RadiantQ.Gantt.Dictionary.prototype.indexOf=function(a){return this._asArray.indexOf(a)},RadiantQ.Gantt.Dictionary.prototype.Remove=function(a){"string"===typeof a||"number"===typeof a?delete this[a]:a.ID_M?delete this[a.ID_M()]:a.ID&&delete this[a.ID];a=this.keys.indexOf(a);var b=this._asArray[a];this._collections.splice(a,
1);this.keys.splice(a,1);this._asArray.splice(a,1);this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;this.OnCollectionChanged(b,null,a);return!1},RadiantQ.Gantt.Dictionary.prototype.Clear=function(){var a=this.keys.indexOf;this.keys=[];this.keys.indexOf=a;this._collections=[];this._asArray=[];this.length=this._collections.length;this.asArray=this._asArray;this.Keys=this.keys;this.OnCollectionChanged()},RadiantQ.Gantt.Dictionary.prototype.GetItemByKey=function(a){a=
this.keys.indexOf(a);return-1==a||a>=this.length?null:this._collections[a].value},RadiantQ.Gantt.Dictionary.prototype.GetItemByIndex=function(a){return this._collections.length<=a||0>a?null:this._collections[a].value},RadiantQ.Gantt.Dictionary.prototype.CollectionChanged=new ObjectEvent("CollectionChanged"),RadiantQ.Gantt.Dictionary.prototype.OnCollectionChanged=function(a,b,c){var d={};0<this.CollectionChanged.fn.length&&(a||b?a?d=new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null,c):b&&
(d=new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,b,c)):d=new RadiantQ.Gantt.NotifyCollectionChangedEventArgs,this.CollectionChanged.raise(this.asArray,d))},RadiantQ.Gantt.Dictionary.prototype.subscribe=function(a){this.CollectionChanged.subscribe(a)},RadiantQ.Gantt.NotifyCollectionChangedEventArgs=function(a,b,c){a||b||(this.NewItems=this.OldItems=null,this.type="reset",this.Action=RadiantQ.Gantt.NotifyCollectionChangedAction.Reset);a&&(this.type="remove",this.OldStartingIndex=c,a instanceof
Array?this.OldItems=a.slice(0):(this.OldItems=[],this.OldItems.push(a)));b&&(this.type="insert",this.NewStartingIndex=c,b instanceof Array?this.NewItems=b.slice(0):(this.NewItems=[],this.NewItems.push(b)))},RadiantQ.Gantt.NotifyCollectionChangedAction={Add:0,Remove:1,Replace:2,Reset:4});var Utils=RadiantQ.Gantt.Utils;Utils.DelayUpdateUtil={};Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];Utils.DelayUpdateUtil._isUpdating=!1;
Utils.DelayUpdateUtil.IsUpdating=function(){return Utils.DelayUpdateUtil._isUpdating};Utils.DelayUpdateUtil.BeginUpdate=function(){if(Utils.DelayUpdateUtil.IsUpdating())return!1;Utils.DelayUpdateUtil._dirtyDic.Clear();Utils.DelayUpdateUtil._dirtyList=[];return Utils.DelayUpdateUtil._isUpdating=!0};Utils.DelayUpdateUtil.TryDelayedUpdate=function(a,b,c){Utils.DelayUpdateUtil.IsUpdating()?Utils.DelayUpdateUtil.DelayUpdate(a,b,c):a.PartialUpdate(b)};Utils.DelayUpdateUtil.RemoveUpdates=function(a){Utils.DelayUpdateUtil._dirtyList.remove(a)};
Utils.DelayUpdateUtil.DelayUpdate=function(a,b,c){var d=Utils.DelayUpdateUtil._dirtyList;try{if(!1==Utils.DelayUpdateUtil._dirtyList.containsValue(a)){if(null!=c)for(var e=-1,f=0;f<d.length;f++){if(g=d[f],e++,g instanceof c){d.splice(e,0,a);break}}else d.push(a);null!=b&&Utils.DelayUpdateUtil._dirtyDic.Add(a,b)}else{var g=Utils.DelayUpdateUtil._dirtyDic.GetItemByKey(a);g&&g!=b&&Utils.DelayUpdateUtil._dirtyDic.Remove(a)}}catch(h){window.console&&console.error(h.message+" from Utils.DelayUpdateUtil.DelayUpdate method.")}};
Utils.DelayUpdateUtil.EndUpdate=function(){Utils.DelayUpdateUtil._isUpdating=!1;var a=Utils.DelayUpdateUtil._dirtyList,b=Utils.DelayUpdateUtil._dirtyDic;Utils.DelayUpdateUtil._dirtyDic=new RadiantQ.Gantt.Dictionary;Utils.DelayUpdateUtil._dirtyList=[];for(var c=a.length-1;0<=c;c--){var d=a[c],e=b.GetItemByKey(d);e?d.PartialUpdate(e):d.TotalUpdate()}};Utils.DelayUpdateUtil.CopyDictionary=function(a,b){for(var c=0;c<a.Keys.length;c++){var d=a.Keys[c];b[d]=a[d]}};
Utils.DelayUpdates=function(){this.startedBeginUpdate=Utils.DelayUpdateUtil.BeginUpdate();this.Dispose=function(){this.startedBeginUpdate&&Utils.DelayUpdateUtil.EndUpdate()}};Utils.IUIUpdateable=function(){this.PartialUpdate=function(a){};this.TotalUpdate=function(){}};
RadiantQ.FlexyGantt.TasksPositionTracker=function(a,b,c){this._fg=a;this._sourceItems=b;this._startTimeBinding=c;this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.subscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList=new RadiantQ.FlexyGantt.StartTimesList;this.InitOrderedList()};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.FlexyGantt_M=function(){return this._fg};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.SourceItems_M=function(){return this._sourceItems};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.StartTimeBinding_M=function(){return this._startTimeBinding};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"FlexyGantt",{get:function(){return this._fg}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"SourceItems",{get:function(){return this._sourceItems}}),Object.defineProperty(RadiantQ.FlexyGantt.TasksPositionTracker.prototype,"StartTimeBinding",{get:function(){return this._startTimeBinding}}));
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.UpdateTimes=function(a,b){this._startTimesList.RemoveStartTimeFromList(b);this._startTimesList.AddStartTimeToList(a)};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableBefore=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?!1:a<=this._startTimesList.GetTimeAtIndex(b)&&0<b?!0:a>this._startTimesList.GetTimeAtIndex(b)?!0:!1};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeLeft=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?Date.MinValue:a<=this._startTimesList.GetTimeAtIndex(b)&&0<b?this._startTimesList.GetTimeAtIndex(b-1):a>this._startTimesList.GetTimeAtIndex(b)?this._startTimesList.GetTimeAtIndex(b):Date.MinValue};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.AreTasksAvailableAfter=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?!1:a<=this._startTimesList.GetTimeAtIndex(b)?!0:!1};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetNextTaskStartTimeRight=function(a){var b=this._startTimesList.GetMatchingEntry(a);return-1==b?Date.MinValue:a<=this._startTimesList.GetTimeAtIndex(b)?this._startTimesList.GetTimeAtIndex(b):Date.MinValue};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.GetStartTime=function(a){return null==a?Date.MinValue:(new RadiantQ.Gantt.Utils.ValueBinder(a,this.StartTimeBinding_M(),null,RadiantQ.Gantt.BindingMode.OneWay))._value};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.TimeRangeBasedItemsFilter_CollectionChanged=function(a,b){this.OnSourceItemsCollectionChanged(b)};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.OnSourceItemsCollectionChanged=function(a){if("Add"==a.Action)for(var b=0;b<a.NewItems.length;b++){var c=a.NewItems[b];this._startTimesList.AddStartTimeToList(this.GetStartTime(c))}else if("Remove"==a.Action)for(b=0;b<a.OldItems.length;b++)c=a.OldItems[b],this._startTimesList.RemoveStartTimeFromList(this.GetStartTime(c));else this.InitOrderedList()};
RadiantQ.FlexyGantt.TasksPositionTracker.prototype.InitOrderedList=function(){this._startTimesList.Clear();for(var a=this.SourceItems_M(),b=0;b<a.length;b++)this._startTimesList.AddStartTimeToList(this.GetStartTime(a[b]))};RadiantQ.FlexyGantt.TasksPositionTracker.prototype.Dispose=function(){this._sourceItems.CollectionChanged&&this._sourceItems.CollectionChanged.unsubscribe(this.TimeRangeBasedItemsFilter_CollectionChanged,this);this._startTimesList.Clear()};
RadiantQ.FlexyGantt.StartTimesList=function(){this._orderedStartTimes=[];this._timeVsEntries=new RadiantQ.Gantt.Dictionary};RadiantQ.FlexyGantt.StartTimesList.prototype.GetTimeAtIndex=function(a){return this._orderedStartTimes.length<=a?Date.MinValue:this._orderedStartTimes[a]};
RadiantQ.FlexyGantt.StartTimesList.prototype.AddStartTimeToList=function(a){if(0==this._orderedStartTimes.length)this._orderedStartTimes.push(a),this._timeVsEntries.Add(a,1);else{var b=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a);this._orderedStartTimes[b].equals(a)?(a=this._timeVsEntries.keys.indexOf(a),a=this._timeVsEntries._collections[a],this._timeVsEntries.Add(a.key,++a.value)):this._orderedStartTimes[b]<a?(this._orderedStartTimes.splice(b+1,0,a),this._timeVsEntries.Add(a,
1)):this._orderedStartTimes[b]>a&&(this._orderedStartTimes.splice(b,0,a),this._timeVsEntries.Add(a,1))}};RadiantQ.FlexyGantt.StartTimesList.prototype.RemoveStartTimeFromList=function(a){if(0!=this._orderedStartTimes.length){var b=this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a);if(this._orderedStartTimes[b].equals(a)){var c=this._timeVsEntries.GetItemByKey(a);c--;0==c?(this._orderedStartTimes.splice(b,1),this._timeVsEntries.Remove(a)):this._timeVsEntries.Add(a,c)}}};
RadiantQ.FlexyGantt.StartTimesList.prototype.Clear=function(){this._timeVsEntries.Clear();this._orderedStartTimes=[]};RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntry=function(a){return 0==this._orderedStartTimes.length?-1:this.GetMatchingEntryRecursively(0,this._orderedStartTimes.length-1,a)};
RadiantQ.FlexyGantt.StartTimesList.prototype.GetMatchingEntryRecursively=function(a,b,c){if(c<this._orderedStartTimes[a])return a;if(this._orderedStartTimes[b]<c)return b;if(c.equals(this._orderedStartTimes[a]))return a;if(c.equals(this._orderedStartTimes[b]))return b;var d=Math.floor((b+a)/2);return this._orderedStartTimes[d].equals(c)?d:this._orderedStartTimes[d]<c?this.GetMatchingEntryRecursively(d+1,b,c):this.GetMatchingEntryRecursively(a,d,c)};
(function(){var a=RadiantQ.Gantt;a.TimePeriod={};a.TimePeriod=function(a,c,d,e){if(2>arguments.length)throw Error("Please pass the start and finish date or start and duration as args");this._start=a;c?d=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(a,c):d&&(c=a.addTimeSpan(d));this._end=c;this._duration=d;this.IsReadOnly=e;return this};a.TimePeriod.prototype.notifyChange=function(a,c){"Start"==a?this.UpdateEnd():"End"==a?this.UpdateDuration():"Duration"==a&&this.UpdateEnd()};a.TimePeriod.prototype.Start_M=
function(a){if(0==arguments.length)return this._start;if(!this._start||!this._start.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=a;this.notifyChange("Start",a)}};a.TimePeriod.prototype.End_M=function(a){if(0==arguments.length)return this._end;if(!this._end||!this._end.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=a;this.notifyChange("End",a)}};a.TimePeriod.prototype.Duration_M=function(a){if(0==
arguments.length)return this._duration;if(!this._duration||!this._duration.equals(a)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");this._duration=a;this.notifyChange("Duration",a)}};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.TimePeriod.prototype,"Start",{get:function(){return this._start},set:function(a){if(!this._start||!Start.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Start on a ReadOnly TimePeriod.");this._start=a;this.notifyChange("Start",
a)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.TimePeriod.prototype,"End",{get:function(){return this._end},set:function(a){if(!this._end||!this._end.equals(a)){if(this.IsReadOnly)throw Error("Cannot set Duration on a ReadOnly TimePeriod.");this._end=a;this.notifyChange("End",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.TimePeriod.prototype,"Duration",{get:function(){return this._duration},set:function(a){if(!this._duration||!this._duration.equals(a)){if(this.IsReadOnly)throw Error("Cannot set End on a ReadOnly TimePeriod.");
this._duration=a;this.notifyChange("Duration",a)}},enumerable:!0,configurable:!0}));a.TimePeriod.prototype.UpdateEnd=function(){this._end=this._start.clone().addTimeSpan(this._duration)};a.TimePeriod.prototype.UpdateDuration=function(){this._duration=new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(this._start,this._end)};a.TimePeriod.prototype.Equals=function(a){return this.Start_M().equals(a.Start_M())&&this.Duration_M().equals(a.Duration_M())};a.TimePeriod.prototype.CompareTo=function(a){return this.Start.compareTo(a.Start)};
a.TimePeriod.prototype.clone=function(a){return new TimePeriod(a.Start,a.End,null,a.IsReadOnly)};a.TimePeriod.prototype.Intersect=function(b){if(!b)return null;var c,d,e,f=a.TimePeriod.IsPositiveDuration,g=f(this),f=f(b);try{g?(d=this._start,e=this._end):(d=this._end,e=this._start)}catch(h){window.console&&console(h.message+" Error found at Gantt.TimePeriod.Intersect")}f?(c=b._start,b=b._end):(c=b._end,b=b._start);if(0<=d.compareTo(b)||0>=e.compareTo(c))return null;d=1==d.compareTo(c)?d:c;e=-1==e.compareTo(b)?
e:b;return g==f?new RadiantQ.Gantt.TimePeriod(d,e):new RadiantQ.Gantt.TimePeriod(e,d)};a.TimePeriod.IsPositiveDuration=function(a){return 0<=a.Duration_M().totalMilliseconds_M()};a.TimePeriod.prototype.Union=function(b){if(!b)return this;var c=RQTimeSpan.Zero_M(),d,e,f,g;this.Duration_M()>=c?(f=this.Start_M(),g=this.End_M()):(f=this.End_M(),g=this.Start_M());b.Duration_M()>=c?(d=b.Start_M(),e=b.End_M()):(d=b.End_M(),e=b.Start_M());d=f<d?f:d;e=g>e?g:e;return this.Duration_M()>=c==b.Duration_M()>=c?
new a.TimePeriod(d,e):new a.TimePeriod(e,d)}})();
(function(){var a=RadiantQ.Gantt;a.TimePeriodCollection={};a.TimePeriodCollection=function(a){this._intervals=[];this.Start=Date.MaxValue;this.Duration=RQTimeSpan.Zero_M();this.Finish=Date.MinValue;this.Count=function(){return this._intervals.length};this.length=this._intervals.length;a&&this.AddRange(a);return this};a.TimePeriodCollection.prototype.Add=function(b){b.IsReadOnly=!0;b.Duration_M()<RQTimeSpan.Zero_M()&&(b=new a.TimePeriod(b._end,b._start,!0));this.length=this._intervals.length;if(b._start<
this.Finish)for(var c=0;c<this.length;c++){var d=this._intervals[c];if(b._end<d.Start){this._intervals.splice(c,0,b);this.length=this._intervals.length;b._start<this.Start&&(this.Start=b._start);this.Duration=this.Duration.add(b.Duration_M());return}if(b._start<d.Start){var e=0<c?this._intervals[c-1]:null;if(!e||b._start>e.Value.End){b=d.Union(b);this._intervals[c]=b;b.Start<this.Start&&(this.Start=b.Start);this.Duration=this.Duration.add(b.Duration_M().subtract(d.Duration_M()));b.End>this.Finish&&
(this.Finish=b.End);return}b=d.Union(e.Value);this._intervals.splice(c,1);this.length=this._intervals.length;this._intervals[c-1]=b;this.Duration=this.Duration.add(b.Duration.subtract(d.Duration));b.End>this.Finish&&(this.Finish=b.End);return}if(b._start<d.End){if((e=c<this.length-1?this._intervals[c+1]:null)&&b._end<e.Start){b=d.Union(b);this._intervals[c]=b;this.Duration=this.Duration.add(b.Duration.subtract(d.Duration));b.End>this.Finish&&(this.Finish=b.End);return}b=d.Union(e);this._intervals.splice(c,
1);this.length=this._intervals.length;this._intervals[c]=b;this.Duration=this.Duration.add(b.Duration.subtract(d.Duration));b.End>this.Finish&&(this.Finish=b.End);return}}this._intervals.push(b);b._start<this.Start&&(this.Start=b._start);this.Finish=b._end;this.Duration=this.Duration.add(b.Duration_M())};a.TimePeriodCollection.prototype.AddRange=function(a){for(var c=0;c<a.length;c++)this.Add(a[c])};a.TimePeriodCollection.prototype.Ascending=function(){return this._intervals.sort};a.TimePeriodCollection.prototype.Descending=
function(){this._intervals.sort();return this._intervals.sort()};a.TimePeriodCollection.prototype.getItemByIndex=function(a){return this._intervals[a]};a.TimePeriodCollection.prototype.Count=function(){return this._intervals.length}})();
(function(){var a=RadiantQ.Gantt;a.WorkTimeSchedule={};a.WorkTimeSchedule.TaskResolutionInfo={};RadiantQ.Gantt.guidGenerator=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};a.WorkTimeSchedule=function(b,c){this.IsCachingEnabled=!0;this._guid=RadiantQ.Gantt.guidGenerator();this._cachedResolvedIntervals=new a.WorkTimeSchedule.CachedResolvedIntervals;if(null==c)throw Error("dayCalendarProvider","The specified CalendarProvider delegate cannot be null.");
this.Name=b;this.scheduleProvider=c;this.WorkTimeScheduleProvider=function(a){return this.scheduleProvider(a)};return this};a.WorkTimeSchedule.prototype.ClearCache=function(){this._cachedResolvedIntervals=new a.WorkTimeSchedule.CachedResolvedIntervals};a.WorkTimeSchedule.CachedResolvedIntervals=function(){this._cachedResolvedIntervals={}};a.WorkTimeSchedule.CachedResolvedIntervals.prototype.Add=function(a,c,d){this._cachedResolvedIntervals[a._testName]||(this._cachedResolvedIntervals[a._testName]=
c)};a.WorkTimeSchedule.CachedResolvedIntervals.prototype.ContainsKey=function(a,c){return this._cachedResolvedIntervals[a._testName]?!0:!1};a.WorkTimeSchedule.CachedResolvedIntervals.prototype.GetIntervalsFromCache=function(a,c){var d=this._cachedResolvedIntervals[a._testName];return d?d:null};a.WorkTimeSchedule.CachedContWorkingTimes=function(){this._cachedContWorkingTimes={}};a.WorkTimeSchedule.CachedContWorkingTimes.prototype.Add=function(a,c){this._cachedContWorkingTimes[a]||(this._cachedContWorkingTimes[a]=
c)};a.WorkTimeSchedule.CachedContWorkingTimes.prototype.ContainsKey=function(a){return this._cachedContWorkingTimes[a]?!0:!1};a.WorkTimeSchedule.CachedContWorkingTimes.prototype.GetIntervalsFromCache=function(a){return(a=this._cachedContWorkingTimes[a])?a:null};a.WorkTimeSchedule._cachedStdWorkingTimes=new a.WorkTimeSchedule.CachedContWorkingTimes;a.WorkTimeSchedule._continuousSchedule=null;a.WorkTimeSchedule.cachedContWorkingTimes=new a.WorkTimeSchedule.CachedContWorkingTimes;a.WorkTimeSchedule.prototype.GetResolvedIntervals=
function(b,c,d,e,f){var g=RQTimeSpan.Zero_M();c<g&&window.console&&console.error("requiredWorkEffort: Required work effort must be a positive TimeSpan.");e<g&&window.console&&console.error("maxSearchEffort: Maximum search effort must be a positive TimeSpan.");var h=this.IsCachingEnabled?new a.WorkTimeSchedule.TaskResolutionInfo(b,c,d,e,f):null;if(h){var k=this._cachedResolvedIntervals.GetIntervalsFromCache(h,f);if(k)return k}var k=[],l=c;searchRange=new RadiantQ.Gantt.TimePeriod(b,null,f?e:g.subtract(e));
var p=!1,m=Date.MaxValue.clone();if(f&&b<m||!f&&b>Date.MinValue)for(var q=b.Date();l>=g&&!p&&!(f&&q>m.addDays(-1)||!f&&q==Date.MinValue||f&&new RQTimeSpan(q-b)>e||!f&&new RQTimeSpan(b-q.clone().addDays(1))>e);q=q.addDays(f?1:-1)){var n=this.WorkTimeScheduleProvider(q);if(null!=n){if(q>m.addDays(-1))break;if(n.Start<q||n.Finish>q.clone().addDays(1))throw Error("CalendarProvider must provide time intervals that start and finish on the specified date.");for(var n=n._intervals,r=0;r<n.length&&!p;r++)if(workingTime=
n[r],(!f||workingTime._end>searchRange._start)&&(f||workingTime._start<searchRange._start)){var t=workingTime.Intersect(searchRange);if(!t){p=!0;break}var s=[];s.push(t);t=s;if(null!=d)for(var u=0;u<d.length&&!p;u++)if(schedule=d[u],null!=schedule){for(var w=[],s=0;s<t.length;s++)for(var v=t[s],v=schedule.GetResolvedIntervals(v.Start,RQTimeSpan.MaxValue_M(),null,v.Duration_M()>=g?v.Duration:new RQTimeSpan(-v.Duration.totalMilliseconds_M()),f),x=0;x<v.length;x++)w.push(v[x]);t=w}for(s=0;s<t.length&&
!p;s++)if(u=t[s],u.Duration_M()!=g||c<=g)if(w=l.getEqualNegative(),(f&&u.Duration_M()>l||!f&&u.Duration_M()<w)&&u.Duration_M(u.Duration_M()>=g?l:w),u.Duration_M().equals(g)&&!c.equals(g)||k.push(u),l=f?l.subtract(u.Duration_M()):l.add(u.Duration_M()),0==c.totalMilliseconds_M()||0==l.totalMilliseconds_M()){p=!0;break}}}}void 0!=h&&this._cachedResolvedIntervals.Add(h,k,f);return k};a.WorkTimeSchedule.TwentyFourByFiveScheduleProvider=function(b){b||(b=new Date);_cachedContWorkingTimes=a.WorkTimeSchedule.cachedContWorkingTimes;
b=b.Date();if(!_cachedContWorkingTimes.ContainsKey(b)){var c=b.getDay();if(0<c&&5>=c)return intervals=new a.TimePeriodCollection,intervals.Add(new a.TimePeriod(b.Date(),null,new RQTimeSpan(1,0,0,0,0))),_cachedContWorkingTimes.Add(b,intervals),intervals;_cachedContWorkingTimes.Add(b,null)}return _cachedContWorkingTimes.GetIntervalsFromCache(b)};a.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider=function(b){b=b.Date();if(!a.WorkTimeSchedule._cachedStdWorkingTimes.ContainsKey(b)){var c=b.getDay();
if(0<c&&5>=c)return c=new a.TimePeriodCollection,c.Add(new a.TimePeriod(b.clone().addHours(8),null,new RQTimeSpan(0,8,0,0,0))),a.WorkTimeSchedule._cachedStdWorkingTimes.Add(b,c),c;a.WorkTimeSchedule._cachedStdWorkingTimes.Add(b,null);return null}return a.WorkTimeSchedule._cachedStdWorkingTimes.GetIntervalsFromCache(b)};a.WorkTimeSchedule.SearchBreakTimeSpan=new RQTimeSpan(3650,0,0,0,0);a.WorkTimeSchedule.prototype.GetEffort=function(b,c,d){c=a.Utils.TimeComputingUtils.GetTimeSpan(b,c);return(new a.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(b,
RQTimeSpan.MaxValue_M(),d,c))).Duration};a.WorkTimeSchedule.prototype.GetStart=function(b,c,d){return(new a.TimePeriodCollection(this.ConvertToPreviousWorkingTimeIntervals(b,c,d))).Start};a.WorkTimeSchedule.prototype.GetEnd=function(b,c,d){return(new a.TimePeriodCollection(this.ConvertToNextWorkingTimeIntervals(b,c,d))).Finish};a.WorkTimeSchedule.prototype.ConvertToNextWorkingTime=function(a,c){var d=this.ConvertToNextWorkingTimeIntervals(a,RQTimeSpan.Zero_M(),c);return 0<d.length?d[0]._start:Date.MaxValue};
a.WorkTimeSchedule.prototype.ConvertToNextWorkingTimeIntervals=function(b,c,d,e){return e?this.GetResolvedIntervals(b,c,d,e,!0):this.GetResolvedIntervals(b,c,d,a.WorkTimeSchedule.SearchBreakTimeSpan,!0)};a.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTime=function(a,c){var d=this.ConvertToPreviousWorkingTimeIntervals(a,RQTimeSpan.Zero_M(),c);return 0<d.length?d[0].Start_M():Date.MinValue};a.WorkTimeSchedule.prototype.ConvertToPreviousWorkingTimeIntervals=function(b,c,d,e){return e?this.GetResolvedIntervals(b,
c,d,e,!1):this.GetResolvedIntervals(b,c,d,a.WorkTimeSchedule.SearchBreakTimeSpan,!1)};a.WorkTimeSchedule.prototype.toString=function(){return null==this.Name?"":this.Name};a.WorkTimeSchedule._continuousSchedule||(a.WorkTimeSchedule._continuousSchedule=new a.WorkTimeSchedule("24X5 Schedule",a.WorkTimeSchedule.TwentyFourByFiveScheduleProvider));a.WorkTimeSchedule.Schedule24X5=a.WorkTimeSchedule._continuousSchedule;null==a.WorkTimeSchedule._cached8X5ScheduleTimes&&(a.WorkTimeSchedule._cached8X5ScheduleTimes=
new a.WorkTimeSchedule("8X5 Schedule",a.WorkTimeSchedule.EightHoursByFiveDaysScheduleProvider));a.WorkTimeSchedule.Schedule8X5=a.WorkTimeSchedule._cached8X5ScheduleTimes;a.WorkTimeSchedule.TaskResolutionInfo=function(a,c,d,e,f){this._start=a;a||(this._start=Date.MinValue);this._duration=c;c||(this._duration=RQTimeSpan.Zero_M());this._calenders=d;this._searchDuration=e;this.isForward=f;this._testName="start="+a.toString()+", duration="+c.toString()+", searchDuration="+e.toString()+", isForward="+f};
a.WorkTimeSchedule.TaskResolutionInfo.prototype.CompareTo=function(a){var c=0;0==c&&(c=this._start.compareTo(a._start));0==c&&(c=this._duration.compareTo(a._duration));if(0==c&&null!=this._calenders&&null!=a._calenders&&(c=this._calenders.length-a._calenders.length,c=0<c?1:0>c?-1:0,0==c))for(var d=0;d<this._calenders.length;d++){var e=this._calenders[d],f=a._calenders[d];if(e!=f&&(null!=e&&null!=f?(c=e._guid-f._guid,c=0<c?1:0>c?-1:0):c=null==e?-1:1,0!=c))break}0==c&&(c=this._searchDuration.compareTo(a._searchDuration));
0==c&&this.isForward==a.isForward&&(c=0);return c};a.WorkTimeSchedule.TaskResolutionInfo.prototype.equals=function(a){if(this._testName!=a._testName||this.isForward!=a.isForward)return!1;var c=0;if(0==c&&null!=this._calenders&&null!=a._calenders&&(c=this._calenders.length-a._calenders.length,c=0<c?1:0>c?-1:0,0==c))for(var d=0;d<this._calenders.length;d++){var e=this._calenders[d],f=a._calenders[d];if(e!=f&&(null!=e&&null!=f?(c=e._guid-f._guid,c=0<c?1:0>c?-1:0):c=null==e?-1:1,0!=c))break}return 0==
c?!0:!1};RadiantQ.Gantt.Calendar={};RadiantQ.Gantt.Calendar=function(a,c,d){this.id=a;this.Name=this.WeekDays=null;this.HolidayList=new RadiantQ.Gantt.Dictionary;this._schedule=null;3==arguments.length?(this.WeekDays=c,this.id=a,this.Name=d):1==arguments.length?(this.WeekDays=this.CreateWeekDayList(arguments[0]),this.CreateCalendarFromScheduleString(arguments[0]),this.id=-1,this.Name=""):2==arguments.length&&(this.WeekDays=this.CreateWeekDayList(arguments[1]),this.CreateCalendarFromScheduleString(arguments[1]),
this.id=-1,this.Name=arguments[0])};RadiantQ.Gantt.Calendar.prototype.Schedule_M=function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));return this._schedule};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Calendar.prototype,"Schedule",{get:function(){null==this._schedule&&(this._schedule=RadiantQ.Gantt.Calendar.CreateSchedule(this));return this._schedule}});a.Calendar.prototype.CreateCalendarFromScheduleString=function(b){var c=b.split("HOL"),
d=null;c[0].replace(/[ ,;]+$/,"").split(";");-1!=b.indexOf("HOL")&&(d=c[1].trim().replace(/[ ,;]+$/,"").split(";"));if(null!=d)try{for(c=0;c<d.length;c++){var e=a.ExceptionDay.ParseExceptionDay(d[c]),f=e.Date.getTime();!1==this.HolidayList.Contains(f)&&this.HolidayList.Add(f,e)}}catch(g){throw Error("Invalid  Date value encountered in this Calendar definition string: "+b);}};a.Calendar.prototype.CreateWeekDayList=function(b){b=b.split("HOL");return a.Calendar.ParseWeekDays(b[0])};a.Calendar.CreateSchedule=
function(b){if(b instanceof a.Calendar)return this.scheduleProvider=function(a){return b.GetWorkingTimes(a)},new a.WorkTimeSchedule(b.Name,this.scheduleProvider);if("string"===typeof b){var c=new a.Calendar(b);return a.Calendar.CreateSchedule(c)}};a.Calendar.prototype.GetWorkingTimes=function(b){var c=this.WeekDays[parseInt(Date.getDayNumberFromName(b.getDayName()))];if(this.IsHoliday(b))return null;for(var d=new a.TimePeriodCollection,e=0;e<c.WorkingTimes.length;e++){var f=c.WorkingTimes[e],g=b.clone().Date();
d.Add(new a.TimePeriod(g.addTimeSpan(f.From),g.addTimeSpan(f.To)))}return d};a.Calendar.prototype.IsHoliday=function(a){return!1==this.WeekDays[parseInt(Date.getDayNumberFromName(a.getDayName()))].IsWorkingDay||!0==this.HolidayList.Contains(a.getTime())};a.Calendar.prototype.GetWorkDayWorkingTimes=function(b){b=this.WeekDays[b];return 0<b.WorkingTimes.length?b.WorkingTimes:[new a.WorkDayWorkingTime(RQTimeSpan.Zero_M(),new RQTimeSpan(0,24,0,0))]};a.Calendar.ParseWeekDays=function(b){for(var c=b.replace(/[ ,;]+$/,
"").split(";"),d=[],e=0;7>e;e++)d.push(new a.WeekDay(!1));if(0==b.length)return d;for(e=0;e<c.length;e++)if(b=c[e],0!=b.length){b=b.trim();if(3>b.length)throw Error("Encoutered a day value string: '"+b.toString()+"' that is smaller than 3 days.");var f=b.substring(0,3);switch(f.toLowerCase()){case "sun":d[0]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;case "mon":d[1]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;case "tue":d[2]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));
break;case "wed":d[3]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;case "thu":d[4]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;case "fri":d[5]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;case "sat":d[6]=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(b.substring(3)));break;default:throw Error("Invalid day name encountered: '"+f+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}return d};a.Calendar.GetWorkingTimes=function(b){var c=
[];if(b){b=b.trim();for(var d=b.split(","),e=0;e<d.length;e++){var f=d[e].trim(),g=f.split(" ");if(2>g.length)throw Error("Expected 2 time span strings of the form '09:00:00 17:00:00'. Encountered string '"+f+"'");try{var h=g[0].split(":");if(3>h.length)throw Error();var k=new RQTimeSpan(0,h[0],h[1],h[2])}catch(l){throw Error("Cannot parse working time string '"+g[0]+"'. Should be of the format 09:00:00.");}try{h=g[1].split(":");if(3>h.length)throw Error();var p=new RQTimeSpan(0,h[0],h[1],h[2])}catch(m){throw Error("Cannot parse working time string '"+
g[1]+"'. Should be of the format 09:00:00.");}if(p.isLessThan(k))throw Error(string.Format("Error in '{0}' syntax. The end time for a day is earlier than the start time.",b));c.push(new a.WorkDayWorkingTime(k,p))}}else c.push(new a.WorkDayWorkingTime(new RQTimeSpan(0,0,0,0),new RQTimeSpan(0,24,0,0)));return c};a.Calendar.prototype.getWorkingTimesString=function(a){for(var c="",d=0;d<a.length;d++)c+=a[d].toString()+",";return c.replace(/[ ,]+$/,"")};a.Calendar.prototype.toString=function(){for(var a=
"",c=0;c<this.WeekDays.length;c++){var d=this.WeekDays[c];if(!0==d.IsWorkingDay)switch(c){case 0:a+="SUN "+this.getWorkingTimesString(d.WorkingTimes)+";";break;case 1:a+="MON "+this.getWorkingTimesString(d.WorkingTimes)+";";break;case 2:a+="TUE "+this.getWorkingTimesString(d.WorkingTimes)+";";break;case 3:a+="WED "+this.getWorkingTimesString(d.WorkingTimes)+";";break;case 4:a+="THU "+this.getWorkingTimesString(d.WorkingTimes)+";";break;case 5:a+="FRI "+this.getWorkingTimesString(d.WorkingTimes)+";";
break;case 6:a+="SAT "+this.getWorkingTimesString(d.WorkingTimes)+";"}}if(0<this.HolidayList.length){a+="HOL ";for(c=0;c<this.HolidayList.asArray.length;c++)a+=this.HolidayList.asArray[c].toString("yyyy-M-d")+";";a=a.replace(/[;]+$/,"").trim()}return a.trim()};a.StringToWorkTimeScheduleConverter={Convert:function(b,c,d,e){return b?a.Calendar.CreateSchedule(b):null}};a.WeekDay=function(a,c){this.IsWorkingDay=a;this.WorkingTimes=c?c:[];this.IsUndefined=!1};a.WeekDay.Undefined=new a.WeekDay(!0);a.WeekDay.Undefined.IsUndefined=
!0;a.WeekDay.prototype.clone=function(){for(var a=new WeekDay(this.IsWorkingDay),c=0;c<this.WorkingTimes.length;c++)workingTime=this.WorkingTimes[c],a.WorkingTimes.Add(workingTime.clone());return a};a.WorkDayWorkingTime=function(a,c){this.From=a;this.To=c};a.WorkDayWorkingTime.clone=function(){return new a.WorkDayWorkingTime(this.From,this.To)};a.WorkDayWorkingTime.prototype.toString=function(){return this.From.toString()+" "+this.To.toString()};a.ExceptionDay=function(a,c,d){this.Name=a;this.Date=
c.Date();this.TimePeriods=d?d:[]};a.ExceptionDay.ParseExceptionDay=function(b){var c=null,d="",e=Date.MinValue;b=b.split("TimePeriod");var f=b[0].split(":");2==f.length?(e=Date.parse(f[1]).Date(),d=f[0],c=new a.ExceptionDay(d,e)):1==f.length&&(e=Date.parse(f[0]).Date(),c=new a.ExceptionDay("",e));2==b.length&&(c=new a.ExceptionDay(d,e,a.Calendar.GetWorkingTimes(b[1])));return c};a.ExceptionDay.prototype.toString=function(){var a="",a="";if(null!=this.TimePeriods&&0<this.TimePeriods.length){for(var c=
0;c<this.TimePeriods.length;c++)a+=this.TimePeriods[c].toString()+",";a=" TimePeriod "+a.replace(/[,]+$/,"").trim()}c=this.Date.toString("yyyy-M-d");return a=""===this.Name?c+" "+a:this.Name+":"+c+" "+a};RadiantQ.Gantt.CalendarWithExceptions={};RadiantQ.Gantt.CalendarWithExceptions=function(b,c){this.WorkingDayExceptions=new RadiantQ.Gantt.Dictionary;this.NonWorkingdayExceptions=new a.Dictionary;this.ExceptionWeekDays=[];this.BaseCalendar=b;this.Tag=null;a.CalendarWithExceptions.ParseExceptionsList(c,
this.WorkingDayExceptions,this.NonWorkingdayExceptions,this.ExceptionWeekDays)};a.CalendarWithExceptions.ParseExceptionDays=function(b,c){for(var d=0;d<b.length;d++){var e=a.ExceptionDay.ParseExceptionDay(b[d]);if(null!=e){var f=e.Date.getTime();!1==c.Contains(f)&&c.Add(f,e)}}return c};a.CalendarWithExceptions.ParseExceptionsList=function(b,c,d,e){var f=[];a.CalendarWithExceptions.splitString(b,f);try{null!=f.WorkDaySpecific&&a.CalendarWithExceptions.ParseExceptionDays(f.WorkDaySpecific,c),null!=
f.NonWorkDaySpecific&&a.CalendarWithExceptions.ParseExceptionDays(f.NonWorkDaySpecific,d)}catch(g){throw Error("Invalid Date format encountered in this CalendarWithException definition string: "+b);}for(b=0;b<d.asArray.length;b++){var h=d.asArray[b].Date.getTime();null!=c.Contains(h)&&c.Remove(h)}if(null!=f.WeekDaySpecific)a.CalendarWithExceptions.ParseWeekDays(f.WeekDaySpecific,e);else for(b=0;7>b;b++)e.push(a.WeekDay.Undefined)};a.CalendarWithExceptions.splitString=function(a,c){var d=[],e=a.indexOf("WeekDaySpecific"),
f=a.indexOf("NonWorkDaySpecific"),g=a;-1!=f&&(g=a.replace("NonWorkDaySpecific",""));g=g.indexOf("WorkDaySpecific");g>f&&(g+=18);-1!=e&&d.push(e);-1!=f&&d.push(f);-1!=g&&d.push(g);d.sort();for(e=0;e<d.length;e++)e+1<=d.length&&(f=a.substring(d[e],d[e+1]),-1!=f.indexOf("WeekDaySpecific")?c.WeekDaySpecific=f.replace("WeekDaySpecific","").replace(/[ ; ]+$/,"").trim():-1!=f.indexOf("NonWorkDaySpecific")?c.NonWorkDaySpecific=f.replace("NonWorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";"):-1!=
f.indexOf("WorkDaySpecific")&&-1==f.indexOf("NonWorkDaySpecific")&&(c.WorkDaySpecific=f.replace("WorkDaySpecific","").replace(/[ ; ]+$/,"").trim().split(";")))};a.CalendarWithExceptions.prototype.IsHoliday=function(a){if(this.WorkingDayExceptions.Contains(a.getTime()))return!1;if(this.NonWorkingdayExceptions.Contains(a.getTime()))return!0;var c=this.ExceptionWeekDays[parseInt(Date.getDayNumberFromName(a.getDayName()))];return!1==c.IsUndefined?!1==c.IsWorkingDay?!0:!1:this.BaseCalendar.IsHoliday(a)};
a.CalendarWithExceptions.prototype.GetWorkingTimes=function(a){var c=this.WorkingDayExceptions.GetItemByKey(a.getTime());if(null!=c&&c.TimePeriods&&0<c.TimePeriods.length)return c.TimePeriods;a=parseInt(Date.getDayNumberFromName(a.getDayName()));return!1==this.ExceptionWeekDays[a].IsUndefined&&(c=this.ExceptionWeekDays[a].WorkingTimes,0<c.Count)?c:this.BaseCalendar.GetWorkDayWorkingTimes(a)};a.CalendarWithExceptions.ParseWeekDays=function(b,c){for(var d=b.replace(/[ ,;]+$/,"").split(";"),e=0;7>e;e++)c.push(a.WeekDay.Undefined);
if(0==b.length)return c;for(e=0;e<d.length;e++){var f=d[e];if(0!=f.length){var g=f.trim();if(3>g.length)throw Error("Encoutered a day value string: '"+g.toString()+"' that is smaller than 3 days.");f=g.substring(0,3);g=g.substring(3);"nwork"==g.trim().toLowerCase()?g=new a.WeekDay(!1):(""===g&&(g="00:00:00 1.00:00:00"),g=new a.WeekDay(!0,a.Calendar.GetWorkingTimes(g)));switch(f.toLowerCase()){case "sun":c[0]=g;break;case "mon":c[1]=g;break;case "tue":c[2]=g;break;case "wed":c[3]=g;break;case "thu":c[4]=
g;break;case "fri":c[5]=g;break;case "sat":c[6]=g;break;default:throw Error("Invalid day name encountered: '"+f+"'. Expected a day name of the form 'SUN', 'MON', etc.");}}}return c};a.CalendarWithExceptions.CreateWorkTimeSchedule=function(b){this.scheduleProvider=function(c){if(!0==b.IsHoliday(c.Date()))return null;for(var d=new a.TimePeriodCollection,e=b.GetWorkingTimes(c.Date()),f=0;f<e.length;f++){var g=e[f];d.Add(new a.TimePeriod(c.Date().addTimeSpan(g.From),c.Date().addTimeSpan(g.To),!1))}return d};
return new a.WorkTimeSchedule(b.BaseCalendar.Name,this.scheduleProvider)};a.CalendarWithExceptions.prototype.toString=function(){for(var a="",c="",d="",e="",f=0;f<this.WorkingDayExceptions.asArray.length;f++)a+=this.WorkingDayExceptions.asArray[f].toString()+";";a.trim();for(f=0;f<this.NonWorkingdayExceptions.asArray.length;f++)c+=this.NonWorkingdayExceptions.asArray[f].toString()+";";c.trim();for(var g=!0,f=0;f<this.ExceptionWeekDays.length&&(g=this.ExceptionWeekDays[f].IsUndefined,g);f++);if(!1==
g)for(d+=" WeekDaySpecific ",f=0;f<this.ExceptionWeekDays.length;f++){var g=this.ExceptionWeekDays[f],h=Date.CultureInfo.dayNames[f].substring(0,3);if(!1==g.IsUndefined)if(!0==g.IsWorkingDay){for(var k="",l=0;l<g.WorkingTimes.length;l++)k+=g.WorkingTimes[l].toString()+",";k=k.replace(/[,]+$/,"").trim();d+=h+" "+k+";"}else d+=h+" NWork;"}""!=a&&(e+="WorkDaySpecific "+a);""!=c&&(e+=" NonWorkDaySpecific "+c);""!=d&&(e+=d);return e.trim()}})();
(function(){var a=RadiantQ.Gantt.DependencyType;RadiantQ.Gantt.ValueConverters={};RadiantQ.Gantt.ValueConverters.ConverterUtils={};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText=function(a,c,d){for(var e="",f=0;f<a.length;f++)var g=a[f],h=g.Resource_M(),h=c?h.ResourceID_M():h.ResourceName_M(),e=e+(h+" "+RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText(g,d)),e=e.trim(),e=e+",";return e.trimEnd(",")};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetAssignedResourceInstances=
function(a){for(var c=[],d=0;d<a.length;d++){var e=e[d];c.push(e.Resource_M())}return c};RadiantQ.Gantt.ValueConverters.ConverterUtils.AllocationUnitText=function(a,c){var d=a.AllocationUnits_M();if(100==d)return"";d=100*(d/100);return"["+(c?Math.round(d).toString():d.toString())+"%]"};RadiantQ.Gantt.ValueConverters.ConverterUtils.GetMissingResourceKeys=function(a,c){var d=[];if(void 0!=a&&null!=a&&""!=a)for(var e=a.split(","),f=e.length,g=0;g<f;g++){var h=e[g],k=h;-1!=k.indexOf("[")&&(this.ParseAllocUnitsString(k.substring(h.indexOf("["))),
k=h.substring(0,k.indexOf("[")));k=k.trim();h=c[k];null==h&&(h=c.GetResourceByName(k.trim()));null==h&&0<k.length&&d.push(k)}return d};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertResourceTextToAssignments=function(a,c,d){var e=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);if(a){var f=a.split(",");for(a=0;a<f.length;a++){var g=f[a],h=g,k=100;-1!=h.indexOf("[")&&(k=this.ParseAllocUnitsString(h.substring(g.indexOf("["))),h=g.substring(0,h.indexOf("[")));g=c._resByID[h.trim()];
null==g&&(g=c.GetResourceByName(h.trim()));g&&!1==e.ContainsResource(g)&&e.add(new RadiantQ.Gantt.Model.ResourceAssignment(g,k))}}if(!1==this.IsContentEqual(e,d)){c=new RadiantQ.Gantt.Utils.DelayUpdates;d.clear();for(a=0;a<e.length;a++)d.add(e[a]);c.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments=function(a,c){for(var d=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null),e=0;e<a.length;e++){var f=a[e];!1==d.ContainsResource(f)&&d.add(new RadiantQ.Gantt.Model.ResourceAssignment(f))}if(!1==
this.IsContentEqual(d,c)){f=new RadiantQ.Gantt.Utils.DelayUpdates;c.clear();for(e=0;e<d.length;e++)c.add(d[e]);f.Dispose()}};RadiantQ.Gantt.ValueConverters.ConverterUtils.IsContentEqual=function(a,c){if(a.length!=c.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!=c[d]||a[d].AllocationUnits_M()!=c[d].AllocationUnits_M())return!1;return!0};RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString=function(a){a=a.trim(" ","[","]","%");var c=100;return c=parseFloat(a)};RadiantQ.Gantt.ValueConverters.ConverterUtils.AddAssignmentToActivity=
function(a,c){var d=a.Assignments_M(),e=a.Model.GanttResources_M().getResourceByID(c);e&&!1==d.ContainsResource(e)&&d.add(new RadiantQ.Gantt.Model.ResourceAssignment(e))};RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter={Convert:function(a,c,d){return null==a?0:a+1},ConvertBack:function(){throw Error("Not Implemented");}};RadiantQ.Gantt.ValueConverters.SortIDAsPredIDConverter={GC:null,Convert:function(a,c,d){if(null==a)return a;c=[];d=[];var e=[],f=this.GC.options.LagStringUnitsInHours;
RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a,f,c,d,e,[]);a="";if(0<c.length)for(var g=0;g<c.length;g++){var h=this.GC.Model.GetActivityById(c[g]),h=this.CreateDepStringFor(h.SortOrder_M(),d[g],e[g],f);a+=h;a+=","}return a.trimEnd(",")},ConvertBack:function(a,c,d){c=[];d=[];var e=[],f=this.GC.options.LagStringUnitsInHours;RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a.toString(),f,c,d,e,"");a="";if(0<c.length)for(var g=0;g<c.length;g++){var h=this.GetActivityFromSortID(c[g]);
null!=h&&(h=this.CreateDepStringFor(h.ID_M(),d[g],e[g],f),a+=h,a+=",")}return a.trimEnd(",")},CreateDepStringFor:function(b,c,d,e){var f=RQTimeSpan.Zero_M();b=b.toString();switch(c){case a.FinishToFinish:b+="FF";break;case a.StartToFinish:b+="SF";break;case a.StartToStart:b+="SS"}d.isGreaterThan(f)?b+="+"+(d.getTotalHours()/e).toString():d.isLessThan(f)&&(b+="-"+(-(d.getTotalHours()/e)).toString());return b},GetActivityFromSortID:function(a){return this.RecursivelyFindSortID(this.GC.Model.Activities_M(),
a)},RecursivelyFindSortID:function(a,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.SortOrder_M()==c)return e;e=e.ChildActivities_M();if(null!=e&&0<e.length&&(e=this.RecursivelyFindSortID(e,c),null!=e))return e}return null}}})();
(function(){var a=RadiantQ.Gantt.Model={};RadiantQ.Gantt.Model.IGanttModel=function(){this.OnPropertyChanged=function(a,c){"Start"==a&&UpdateEnd()};this.GetNewID||(this.GetNewID=function(){});this._lagStringUnitsInHours=null;this.canShiftInProgressTasks=this.autoCalculateSummaryTaskTimes=!1;return this};RadiantQ.Gantt.Model.IGanttModel.prototype.LagStringUnitsInHours_M=function(a){if(0==arguments.length)return this._lagStringUnitsInHours;this._lagStringUnitsInHours!=a&&(this._lagStringUnitsInHours=
a)};RadiantQ.Gantt.Model.IGanttModel.prototype.AllActivities_M=function(){return this._dictActivityById};RadiantQ.Gantt.Model.IGanttModel.prototype.Activities_M=function(){return this._activities};RadiantQ.Gantt.Model.IGanttModel.prototype.Dependencies_M=function(){return this._dependencies};RadiantQ.Gantt.Model.IGanttModel.prototype.GanttResources_M=function(){return this._resources};RadiantQ.Gantt.Model.IGanttModel.prototype.WorkTimeSchedule_M=function(a){if(0==arguments.length)return this._schedule;
this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("WorkTimeSchedule"))};RadiantQ.Gantt.Model.IGanttModel.prototype.EnforceDependencyConstraints_M=function(a){if(0==arguments.length)return this.enforceDependencyConstraints;a!=this.enforceDependencyConstraints&&(this.enforceDependencyConstraints=a,this.OnPropertyChanged("EnforceDependencyConstraints",a))};RadiantQ.Gantt.Model.IGanttModel.prototype.ValidateDependencySetting_M=function(a){if(0==arguments.length)return this.validateDependencySetting;
a!=this.validateDependencySetting&&(this.validateDependencySetting=a,this.OnPropertyChanged("ValidateDependencySetting",a))};RadiantQ.Gantt.Model.IGanttModel.prototype.AutoCalculateSummaryTaskTimes_M=function(a){if(0==arguments.length)return this.autoCalculateSummaryTaskTimes;a!=this.autoCalculateSummaryTaskTimes&&(this.autoCalculateSummaryTaskTimes=a,this.OnPropertyChanged("AutoCalculateSummaryTaskTimes",a))};RadiantQ.Gantt.Model.IGanttModel.prototype.CanShiftInProgressTasks_M=function(a){if(0==
arguments.length)return this.canShiftInProgressTasks;a!=this.canShiftInProgressTasks&&(this.canShiftInProgressTasks=a,this.OnPropertyChanged("CanShiftInProgressTasks",a))};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustDurationOnAssignment_M=function(a){if(0==arguments.length)return this.adjustDurationOnAssignment;a!=this.adjustDurationOnAssignment&&(this.adjustDurationOnAssignment=a,this.OnPropertyChanged("AdjustDurationOnAssignment",a))};RadiantQ.Gantt.Model.IGanttModel.prototype.CustomProgressCalculation_M=
function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"LagStringUnitsInHours",{get:function(){return this._lagStringUnitsInHours},set:function(a){this._lagStringUnitsInHours!=a&&(this._lagStringUnitsInHours=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AllActivities",{get:function(){return this._dictActivityById},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"Activities",{get:function(){return this._activities},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"Dependencies",{get:function(){return this._dependencies},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"GanttResources",{get:function(){return this._resources},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"WorkTimeSchedule",{get:function(){return this._schedule},set:function(a){this._schedule!=a&&(this._schedule=a,this.OnPropertyChanged("WorkTimeSchedule"))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"EnforceDependencyConstraints",{get:function(){return this.enforceDependencyConstraints},set:function(a){a!=this.enforceDependencyConstraints&&(this.enforceDependencyConstraints=a,this.OnPropertyChanged("EnforceDependencyConstraints",
a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"ValidateDependencySetting",{get:function(){return this.validateDependencySetting},set:function(a){a!=this.validateDependencySetting&&(this.validateDependencySetting=a,this.OnPropertyChanged("ValidateDependencySetting",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"AutoCalculateSummaryTaskTimes",{get:function(){return this.autoCalculateSummaryTaskTimes},
set:function(a){a!=this.autoCalculateSummaryTaskTimes&&(this.autoCalculateSummaryTaskTimes=a,this.OnPropertyChanged("AutoCalculateSummaryTaskTimes",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CanShiftInProgressTasks",{get:function(){return this.canShiftInProgressTasks},set:function(a){a!=this.canShiftInProgressTasks&&(this.canShiftInProgressTasks=a,this.OnPropertyChanged("CanShiftInProgressTasks",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,
"AdjustDurationOnAssignment",{get:function(){return this.adjustDurationOnAssignment},set:function(a){a!=this.adjustDurationOnAssignment&&(this.adjustDurationOnAssignment=a,this.OnPropertyChanged("AdjustDurationOnAssignment",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this._customProgressCalculation},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IGanttModel.prototype.GetNewSortOrder=
function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewActivity=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.CreateNewDependency=function(a,c,d,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.RemoveActivity=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.CanAddNewDependency=function(a,c,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.PrepareParenting=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidTimes=function(a,c,d,e){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertToValidStartTime=
function(a,c,d){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetStart=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTimeWithEffort=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustStartTime=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.AdjustEffort=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEndTime=function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeDuration=
function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.ComputeEffort=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.ConvertDurationToEffort=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrderFrom=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.UpdateSortOrders=function(){};RadiantQ.Gantt.Model.IGanttModel.prototype.GetCriticalActivities=function(a){};RadiantQ.Gantt.Model.IGanttModel.prototype.LevelResources=function(a,c){};RadiantQ.Gantt.Model.IGanttModel.prototype.Filter=
function(a){};RadiantQ.Gantt.Model.IActivity=function(){NotifyPropertyChanged.call(this);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.VerticalPositionChanged=new ObjectEvent("VerticalPositionChanged");this._assignments=[];this.propertiesDict=[];this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.isIActivity=!0;this.id=0;this._sortOrder=-1;this._prefStartTime=this._startTime=Date.MinValue;
this._effort=RQTimeSpan.Zero_M();this._cumEffort=RQTimeSpan.Zero_M();this._progressPercent=0;this._isMilestone=!1;this._isVisible=this._isExpanded=!0;this._isFilteredOut=!1;this._displayIndex=-1;return this};RadiantQ.Gantt.Model.IActivity.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.Model.IActivity.prototype.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,Value:c})};RadiantQ.Gantt.Model.IActivity.prototype.OnVerticalPositionChanged=function(){this.VerticalPositionChanged.raise(this,
{})};RadiantQ.Gantt.Model.IActivity.prototype.ID_M=function(a){if(0==arguments.length)return this.id;this.id!=a&&(this.id=a,this.OnPropertyChanged("ID",a))};RadiantQ.Gantt.Model.IActivity.prototype.ActivityName_M=function(a){if(0==arguments.length)return this._name;this._name=a;this.OnPropertyChanged("ActivityName",a)};RadiantQ.Gantt.Model.IActivity.prototype.SortOrder_M=function(a){if(0==arguments.length)return this._sortOrder;a&&this._sortOrder!=a&&(this._sortOrder=a,this.OnPropertyChanged("SortOrder",
a))};RadiantQ.Gantt.Model.IActivity.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime.equals(a)||(this._startTime=a)};RadiantQ.Gantt.Model.IActivity.prototype.PreferredStartTime_M=function(a){if(0==arguments.length)return null==this._prefStartTime||void 0==this._prefStartTime?this.Model.ProjectStartDate:this._prefStartTime;if(!(this._prefStartTime&&a&&this._prefStartTime.equals(a))){var c=this._prefStartTime;this._prefStartTime=a;this.OnPropertyChanged("PreferredStartTime",
c,a)}};RadiantQ.Gantt.Model.IActivity.prototype.Effort_M=function(a){if(0==arguments.length)return this._effort;this._effort!=a&&(this._effort=a)};RadiantQ.Gantt.Model.IActivity.prototype.Times_M=function(){var a=this.Parent_M();return null==a?!0:a.IsExpanded_M()};RadiantQ.Gantt.Model.IActivity.prototype.PredecessorIndexString_M=function(a){if(0==arguments.length)return this._predecssorIndexString;if(this._predecssorIndexString!=a){var c=this._predecssorIndexString;this._predecssorIndexString=a;this.OnPropertyChanged("PredecessorIndexString",
c,a)}};RadiantQ.Gantt.Model.IActivity.prototype.CumulativeEffort_M=function(a){if(0==arguments.length){var c=this.ChildActivities_M();return c&&0!=c.length?this._cumEffort:this._effort}this._cumEffort!=a&&(c=this._cumEffort,this._cumEffort=a,this.OnPropertyChanged("CumulativeEffort",c,a))};RadiantQ.Gantt.Model.IActivity.prototype.ProgressPercent_M=function(a){if(0==arguments.length)return this._progressPercent||(this._progressPercent=0),this._progressPercent;if(this._progressPercent!=a){0>a&&(a=0);
100<a&&(a=100);var c=parseInt(a);this._progressPercent=isNaN(c)?0:c;this.OnPropertyChanged("ProgressPercent",a)}};RadiantQ.Gantt.Model.IActivity.prototype.ProgressEndTime_M=function(){var b=this.StartTime_M();if(b==Date.MaxValue||b==Date.MinValue)return b;var c=this.ProgressPercent_M();if(0>=c)return b;var d=this.GetWorkingHoursTimeSpan(),c=new RQTimeSpan(0,0,c/100*d.getTotalMinutes(),0);return a.BaseGanttModel.ComputeEndTime(b,c,this.Model.WorkTimeSchedule_M())};RadiantQ.Gantt.Model.IActivity.prototype.Description_M=
function(a){if(0==arguments.length)return this._description;a!=this._description&&(this._description=a,this.OnPropertyChanged("Description",a))};RadiantQ.Gantt.Model.IActivity.prototype.Parent_M=function(a){if(0==arguments.length)return this._parent;this._parent!=a&&(this._parent=a,this.IsVisible_M(this.IsParentExpanded_M()&&this.IsParentVisible_M()),this.OnPropertyChanged("Parent",a))};RadiantQ.Gantt.Model.IActivity.prototype.IsMilestone_M=function(a){if(0==arguments.length)return this._isMilestone;
this._isMilestone!=a&&(this._isMilestone=a,this.OnPropertyChanged("IsMilestone",a))};RadiantQ.Gantt.Model.IActivity.prototype.IsExpanded_M=function(a){if(0==arguments.length)return this._isExpanded;if(this._isExpanded!=a){var c=this._isExpanded;this._isExpanded=a;for(var d=this.ChildActivities_M(),e=this.IsVisible_M(),f=0;f<d.length;f++)d[f].IsVisible_M(this._isExpanded&&e);this.OnPropertyChanged("IsExpanded",c,a)}};RadiantQ.Gantt.Model.IActivity.prototype.IsVisible_M=function(a){if(0==arguments.length)return this._isVisible&
!this._isFilteredOut;if(this._isVisible!=a){this._isVisible=a;for(var c=this.ChildActivities_M(),d=this.IsVisible_M(),e=0;e<c.length;e++)c[e].IsVisible_M(this._isExpanded&&d);this.OnPropertyChanged("IsVisible",a)}};RadiantQ.Gantt.Model.IActivity.prototype.IsFilteredOut_M=function(a){if(0==arguments.length)return this._isFilteredOut;this._isFilteredOut!=a&&(this._isFilteredOut=a,this.OnPropertyChanged("IsFilteredOut",a),this.OnPropertyChanged("IsVisible",a))};RadiantQ.Gantt.Model.IActivity.prototype.DisplayIndex_M=
function(a){if(0==arguments.length)return this._displayIndex;this._displayIndex!=a&&(this._displayIndex=a,this.OnVerticalPositionChanged(),this.OnPropertyChanged("DisplayIndex",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ID",{get:function(){return this.id},set:function(a){this.id!=a&&(this.id=a,this.OnPropertyChanged("ID",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ActivityName",{get:function(){return this._name},
set:function(a){this._name=a;this.OnPropertyChanged("ActivityName",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(a){a&&this._sortOrder!=a&&(this._sortOrder=a,this.OnPropertyChanged("SortOrder",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){this._startTime.equals(a)||
(this._startTime=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PreferredStartTime",{get:function(){return null==this._prefStartTime||void 0==this._prefStartTime?this.Model.ProjectStartDate:this._prefStartTime},set:function(a){if(!(this._prefStartTime&&a&&this._prefStartTime.equals(a))){var c=this._prefStartTime;this._prefStartTime=a;this.OnPropertyChanged("PreferredStartTime",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"Effort",{get:function(){return this._effort},set:function(a){this._effort!=a&&(this._effort=a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Times",{get:function(){return null==this.Parent_M()?!0:this.Parent_M().IsExpanded_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"PredecessorIndexString",{get:function(){return this._predecssorIndexString},set:function(a){if(this._predecssorIndexString!=
a){var c=this._predecssorIndexString;this._predecssorIndexString=a;this.OnPropertyChanged("PredecessorIndexString",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"CumulativeEffort",{get:function(){var a=this.ChildActivities_M();return a&&0!=a.length?this._cumEffort:this.Effort},set:function(a){if(this._cumEffort!=a){var c=this._cumEffort;this._cumEffort=a;this.OnPropertyChanged("CumulativeEffort",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"ProgressPercent",{get:function(){this._progressPercent||(this._progressPercent=0);return this._progressPercent},set:function(a){if(this.ProgressPercent_M()!=a){0>a&&(a=0);100<a&&(a=100);var c=parseInt(a);this._progressPercent=isNaN(c)?0:c;this.OnPropertyChanged("ProgressPercent",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"ProgressEndTime",{get:function(){if(this.StartTime==Date.MaxValue||this.StartTime==Date.MinValue||0>=this.ProgressPercent)return this.StartTime;
var b=this.GetWorkingHoursTimeSpan(),b=new RQTimeSpan(0,0,this.ProgressPercent/100*b.getTotalMinutes(),0);return a.BaseGanttModel.ComputeEndTime(this.StartTime,b,this.Model.WorkTimeSchedule_M())},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"Description",{get:function(){return this._description},set:function(a){a!=this._description&&(this._description=a,this.OnPropertyChanged("Description",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"Parent",{get:function(){return this._parent},set:function(a){this._parent!=a&&(this._parent=a,this.IsVisible=this.IsParentExpanded&&this.IsParentVisible,this.OnPropertyChanged("Parent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsMilestone",{get:function(){return this._isMilestone},set:function(a){this._isMilestone!=a&&(this._isMilestone=a,this.OnPropertyChanged("IsMilestone",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"IsExpanded",{get:function(){return this._isExpanded},set:function(a){if(this._isExpanded!=a){var c=this._isExpanded;this._isExpanded=a;for(var d=this.ChildActivities_M(),e=0;e<d.length;e++)d[e].IsVisible=this.IsExpanded&&this.IsVisible;this.OnPropertyChanged("IsExpanded",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsVisible",{get:function(){return this._isVisible&!this._isFilteredOut},set:function(a){if(this._isVisible!=a){this._isVisible=
a;for(var c=this.ChildActivities_M(),d=0;d<c.length;d++)c[d].IsVisible=this.IsExpanded&&this.IsVisible;this.OnPropertyChanged("IsVisible",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,"IsFilteredOut",{get:function(){return this._isFilteredOut},set:function(a){this._isFilteredOut!=a&&(this._isFilteredOut=a,this.OnPropertyChanged("IsFilteredOut",a),this.OnPropertyChanged("IsVisible",a))},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivity.prototype,
"DisplayIndex",{get:function(){return this._displayIndex},set:function(a){this._displayIndex!=a&&(this._displayIndex=a,this.OnVerticalPositionChanged(),this.OnPropertyChanged("DisplayIndex",a))},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivity.prototype.GetWorkingHoursTimeSpan=function(){};RadiantQ.Gantt.Model.IActivity.prototype.ShiftForwardTo=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.CreateNewChildActivity=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.OnAddedPredecessorDependency=
function(a){};RadiantQ.Gantt.Model.IActivity.prototype.OnRemovedPredecessorDependency=function(a){};RadiantQ.Gantt.Model.IActivity.prototype.IsCritical=function(a,c,d){};RadiantQ.Gantt.Model.IActivityDependency=function(){this.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,Value:c})};return this};RadiantQ.Gantt.Model.IActivityDependency.prototype.FromActivity_M=function(){return this._fromActivity};RadiantQ.Gantt.Model.IActivityDependency.prototype.ToActivity_M=function(){return this._toActivity};
RadiantQ.Gantt.Model.IActivityDependency.prototype.Type_M=function(a){if(0==arguments.length)return this._type;this._type=a;this.OnPropertyChanged("Type",a)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Lag_M=function(a){if(0==arguments.length)return this._lag;this._lag=a;this.OnPropertyChanged("Lag",a)};RadiantQ.Gantt.Model.IActivityDependency.prototype.Tag_M=function(a){if(0==arguments.length)return this._tag;this._tag=a;this.OnPropertyChanged("Tag",a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"FromActivity",{get:function(){return this._fromActivity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"ToActivity",{get:function(){return this._toActivity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Type",{get:function(){return this._type},set:function(a){this._type=a;this.OnPropertyChanged("Type",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,
"Lag",{get:function(){return this._lag},set:function(a){this._lag=a;this.OnPropertyChanged("Lag",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IActivityDependency.prototype,"Tag",{get:function(){return this._tag},set:function(a){this._tag=a;this.OnPropertyChanged("Tag",a)},enumerable:!0,configurable:!0}));RadiantQ.Gantt.Model.IActivityDependency.prototype.ComputeLatestToActivityStartTime=function(){};RadiantQ.Gantt.Model.IActivityDependency.prototype.EnsureActivityOrder=
function(){};RadiantQ.Gantt.Model.IGanttResource=function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");return this};RadiantQ.Gantt.Model.IGanttResource.prototype.ResourceName_M=function(a){if(0==arguments.length)return this._resNamebinder?this._resNamebinder.Value_M():this._resIDbinder?this._resIDbinder.Value_M():this._boundObj?this._boundObj.toString():"";this.ResourceName_M()!=a&&null!=this._resNamebinder&&this._resNamebinder.Value_M(a)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.Model.IGanttResource.prototype,
"ResourceName",{get:function(){return this._resNamebinder?this._resNamebinder.Value:this._resIDbinder?this._resIDbinder.Value:this._boundObj?this._boundObj.toString():""},set:function(a){this.ResourceName!=a&&null!=this._resNamebinder&&(this._resNamebinder.Value=a)},enumerable:!0,configurable:!0});RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs=function(a,c,d,e){this._activity=a||null;this.NewWBSID_M(c||"");this._collection=e||[];this.childIndex=d||-1};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.Activity_M=
function(){return this._activity};RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.NewWBSID_M=function(a){if(0==arguments.length)return this.newWbs;this.newWbs=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"Activity",{get:function(){return this._activity}}),Object.defineProperty(RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype,"NewWBSID",{get:function(){return this.newWbs},set:function(a){this.newWbs=a}}));
RadiantQ.Gantt.Model.ProvideDefaultWBSIDEventArgs.prototype.GetActivityChildIndex=function(){return-1!=this.childIndex?this.childIndex:this._collection.indexOf(this._activity)};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs=function(a){this._enforce=!0;this._activity=a};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype.Enforce_M=function(a){if(0==arguments.length)return this._enforce;
this._enforce=a};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Activity",{get:function(){return this._activity}}),Object.defineProperty(RadiantQ.Gantt.Model.EnforceDependencyConstraintsEventArgs.prototype,"Enforce",{get:function(){return this._enforce},set:function(a){this._enforce=a}}))})();
(function(){var a=RadiantQ.Gantt.Model;a.ResourceLoadTracker=function(b,c){this._resourceLoadLists=this._model=null;this._enableRoundingToDays=!0;this._enableRoundingToDays=c;null==b&&alert("model cannot be null in ResourceLoadTracker constructor.");this._model=b;this._resourceLoadLists=new RadiantQ.Gantt.Dictionary;for(var d=this._model.GanttResources_M(),e=0;e<d.length;e++){var f=d[e],g=new a.ResourceLoadList(f,this._model,this._dispatcher,this._enableRoundingToDays);this._resourceLoadLists.Add(f,
g)}};a.ResourceLoadTracker.prototype.ResourceLoadLists_M=function(){return this._resourceLoadLists};RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.ResourceLoadTracker.prototype,"ResourceLoadLists",{get:function(){return this._resourceLoadLists},set:function(){},enumerable:!0,configurable:!0});a.LoadInfo=function(a,c,d){this.TimePeriod=new RadiantQ.Gantt.TimePeriod(a,null,new RQTimeSpan(c-a));this.LoadPerc=d};a.LoadInfo.prototype.ToString=function(){return"Start: "+this.TimePeriod.Start_M()+
", End: "+this.TimePeriod.End_M()+", Load: "+this.LoadPerc};a.ResourceLoadList=function(a,c,d,e){this._enableRoundToDays=e;this._model=c;this._resource=a;this._orderedLoadInfos=new RadiantQ.RQ_ObservableCollection([]);this._temLoadLists=new RadiantQ.RQ_ObservableCollection([]);this.refreshTimer=null;this._dispatcher=d;this._activities=c.GetResourceActivityList(a.DataSource);$.observable(this._activities).bind("insert remove replaceAll",this._activities_CollectionChanged.bind(this));for(a=0;a<this._activities.length;a++)this._activities[a].PropertyChanged.subscribe(this.activity_PropertyChanged,
this);this.LoadInfos=this._orderedLoadInfos;this.AssignedActivities=this._activities;this.Resource=this._resource;this.initLoadInfo()};a.ResourceLoadList.prototype.activity_PropertyChanged=function(a,c){"Times"==c.PropertyName&&this.delayedRefresh()};a.ResourceLoadList.prototype._activities_CollectionChanged=function(a,c){if("insert"==a.type)for(var d=0;d<c.items.length;d++)c.items[d].PropertyChanged.subscribe(this.activity_PropertyChanged,this);if("remove"==a.type)for(d=0;d<c.items.length;d++)c.items[d].PropertyChanged.unsubscribe(this.activity_PropertyChanged,
this);this.delayedRefresh()};a.ResourceLoadList.prototype.delayedRefresh=function(){var a=this;null!=this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=setTimeout(function(){a.refresh()},200)};a.ResourceLoadList.prototype.refresh=function(){this._orderedLoadInfos.splice(0,this._orderedLoadInfos.length);this.initLoadInfo()};a.ResourceLoadList.prototype.initLoadInfo=function(){for(var b=[],c=0;c<this.AssignedActivities.length;c++){var d=this.AssignedActivities[c],e=d.Assignments_M(),
f=e.GetAssignmentForResource(this.Resource),g=f.AllocationUnits_M(),h=d.StartTime_M(),d=d.Effort_M();this._model.AdjustDurationOnAssignment&&d!=TimeSpan.Zero&&(e=d.Ticks_M()/e.length,e*=100/f.AllocationUnits,d=TimeSpan.fromTicks(e));f=null!=this.Resource.Schedule?this.Resource.Schedule:this._model.WorkTimeSchedule;if(null!=f)for(h=f.ConvertToNextWorkingTimeIntervals(h,d),e=0;e<h.length;e++){var d=h[e],k=f.ConvertToPreviousWorkingTime(d.Start_M().clone().addMinutes(-1));k.equals(d.Start_M().clone().addMinutes(-1))?
k=d.Start_M():k.Date().equals(d.Start_M().Date())||(k=d.Start_M().Date());var l=f.ConvertToNextWorkingTime(d.End_M().clone().addMinutes(1));l.equals(d.End_M().clone().addMinutes(1))?l=d.End_M():l.Date().equals(d.End_M().Date())||(l=d.End_M().Date().clone().addDays(1));b.push(new a.LoadInfo(k,l,g))}else b.push(new a.LoadInfo(h,h+d,g))}this.addLoadInfos(b)};a.ResourceLoadList.prototype.addLoadInfos=function(a){for(var c=0;c<a.length;c++)this.addLoadInfo(a[c]);for(a=0;a<this._temLoadLists.length;a++)this._orderedLoadInfos.push(this._temLoadLists[a]);
this._temLoadLists=new RadiantQ.RQ_ObservableCollection([])};a.ResourceLoadList.prototype.addLoadInfo=function(b){var c=this._temLoadLists.length;if(0!=c)for(var d=0;d<=c-1;d++){var e=this._temLoadLists[d];if(b.TimePeriod.End_M()<=e.TimePeriod.Start_M()){this.combineOrInsert(d,b);return}if(d==c-1&&e.TimePeriod.End_M()<=b.TimePeriod.Start_M()){this.combineWithPrevOrInsert(d+1,b);return}var f=e.TimePeriod.Intersect(b.TimePeriod);if(null!=f)if(e.TimePeriod.Equals(f)){e.LoadPerc+=b.LoadPerc;if(b.TimePeriod.Start_M().isLessThan(f.Start_M()))var g=
this.combineWithPrevOrInsert(d,new a.LoadInfo(b.TimePeriod.Start_M(),f.Start_M(),b.LoadPerc)),d=d+1-g;if(f.End_M().isLessThan(b.TimePeriod.End_M()))b=new a.LoadInfo(f.End_M(),b.TimePeriod.End_M(),b.LoadPerc);else return}else if(b.TimePeriod.Equals(f)){if(e.TimePeriod.Start_M().isLessThan(b.TimePeriod.Start_M())){this._temLoadLists.splice(d,0,new a.LoadInfo(e.TimePeriod.Start_M(),b.TimePeriod.Start_M(),e.LoadPerc));e=new a.LoadInfo(f.Start_M(),e.TimePeriod.End_M(),e.LoadPerc+b.LoadPerc);this._temLoadLists.splice(d+
1,1);this._temLoadLists.splice(d+1,0,e);e.TimePeriod.End_M().isGreaterThan(b.TimePeriod.End_M())&&this._temLoadLists.splice(d+2,0,new a.LoadInfo(f.End_M(),e.TimePeriod.End_M(),e.LoadPerc));return}if(e.TimePeriod.End_M().isGreaterThan(b.TimePeriod.End_M()))g=new a.LoadInfo(f.End_M(),e.TimePeriod.End_M(),e.LoadPerc),e=new a.LoadInfo(f.Start_M(),f.End_M(),e.LoadPerc+b.LoadPerc),this._temLoadLists.splice(d,1),this._temLoadLists.splice(d,0,e),b=g;else{e.LoadPerc+=b.LoadPerc;return}}else{if(b.TimePeriod.Start_M().isLessThan(f.Start_M())){g=
this.combineWithPrevOrInsert(d,new a.LoadInfo(b.TimePeriod.Start_M(),f.Start_M(),b.LoadPerc));d=d+1-g;this._temLoadLists.splice(d,0,new a.LoadInfo(f.Start_M(),f.End_M(),e.LoadPerc+b.LoadPerc));d++;this._temLoadLists.splice(d,1);this._temLoadLists.splice(d,0,new a.LoadInfo(f.End_M(),e.TimePeriod.End_M(),e.LoadPerc));return}this._temLoadLists.splice(d,1);g=this.combineWithPrevOrInsert(d,new a.LoadInfo(e.TimePeriod.Start_M(),f.Start_M(),e.LoadPerc));d=d+1-g;this._temLoadLists.splice(d,0,new a.LoadInfo(f.Start_M(),
f.End_M(),e.LoadPerc+b.LoadPerc));b=new a.LoadInfo(f.End_M(),b.TimePeriod.End_M(),b.LoadPerc)}}this._temLoadLists.push(b)};a.ResourceLoadList.prototype.combineWithPrevOrInsert=function(b,c){var d=0;if(0<b){var e=this._temLoadLists[b-1];e.TimePeriod.End_M().equals(c.TimePeriod.Start_M())&&e.LoadPerc==c.LoadPerc&&(this._temLoadLists.splice(b-1,1),b--,c=new a.LoadInfo(e.TimePeriod.Start_M(),c.TimePeriod.End_M(),c.LoadPerc),d++)}this._temLoadLists.splice(b,0,c);return d};a.ResourceLoadList.prototype.combineOrInsert=
function(b,c){var d=0;if(0<b){var e=this._temLoadLists[b-1];e.TimePeriod.End_M().equals(c.TimePeriod.Start_M())&&e.LoadPerc==c.LoadPerc&&(this._temLoadLists.splice(b-1,1),b--,c=new a.LoadInfo(e.TimePeriod.Start_M(),c.TimePeriod.End_M(),c.LoadPerc),d++)}b<this._temLoadLists.Count-1&&(e=this._temLoadLists[b],c.TimePeriod.End_M().equals(e.TimePeriod.Start_M())&&c.LoadPerc==e.LoadPerc&&(this._temLoadLists.splice(b,1),c=new a.LoadInfo(c.TimePeriod.Start_M(),e.TimePeriod.End_M(),c.LoadPerc),d++));this._temLoadLists.splice(b,
0,c);return d}})();
(function(){var a=RadiantQ.Gantt.Model;RadiantQ.Gantt.Model.Dependency=function(a,c,d,e){RadiantQ.Gantt.Model.IActivityDependency.call(this);RadiantQ.Gantt.Utils.IUIUpdateable.call(this);e||(e=RadiantQ.Gantt.DependencyType.FinishToStart);this.PropertyChanged=new ObjectEvent("PropertyChanged");this.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a);this.MonitorThisChanges(a)};this.PartialUpdate=function(a){this.TotalUpdate()};this.TotalUpdate=function(){this.EnsureActivityOrder()};
this.ensuringActivityOrder=!1;this.Model=null;a&&c&&d&&e&&(this.Model=a,this._fromActivity=c,this._toActivity=d,this.Type_M(e),this.Lag_M(RQTimeSpan.Zero_M()),this.FromActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.ToActivity_M().PropertyChanged.subscribe(this.Activity_PropertyChanged,this),this.TryUpdate());return this};RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;RadiantQ.Gantt.Model.Dependency.prototype=new RadiantQ.Gantt.Model.IActivityDependency;
RadiantQ.Gantt.Model.Dependency.prototype.ComputeErrorTimeSpan=function(a,c,d,e){var f=RQTimeSpan.Zero_M();switch(this.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:f=e-c;break;case RadiantQ.Gantt.DependencyType.StartToFinish:f=e-a;break;case RadiantQ.Gantt.DependencyType.StartToStart:f=d-a;break;default:d.equals(c)||(f=d-c)}return f};RadiantQ.Gantt.Model.Dependency.prototype.TryUpdate=function(){!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,
null)};RadiantQ.Gantt.Model.Dependency.prototype.MonitorThisChanges=function(a){"Type"!=a&&"Lag"!=a||this.TryUpdate()};RadiantQ.Gantt.Model.Dependency.prototype.Activity_PropertyChanged=function(b,c){if("StartTime"==c.PropertyName||"EndTime"==c.PropertyName)this.TryUpdate();else if(b==this.FromActivity_M()&&"SortOrder"==c.PropertyName){var d=this.ToActivity_M();(d instanceof a.BaseActivity||!0==this.isBaseActivity)&&d.OnPropertyChanged("PredecessorIndexString")}};RadiantQ.Gantt.Model.Dependency.prototype.toString=
function(){return this.FromActivity_M().ActivityName_M()+" / "+this.ToActivity_M().ActivityName_M()+"; "+this.Type_M()};RadiantQ.Gantt.Model.Dependency.prototype.Dispose=function(){var a=this.ToActivity_M();this.FromActivity_M().PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);a.PropertyChanged.unsubscribe(this.Activity_PropertyChanged,this);RadiantQ.Gantt.Utils.DelayUpdateUtil.RemoveUpdates(this);this.Model.ApplyPreferredStartTimeOnActivity(a,a.PreferredStartTime_M())};RadiantQ.Gantt.Model.Dependency.prototype.CanMoveActivityTo=
function(a,c){if(a==this.ToActivity_M()){var d=Date.MinValue,d=this.Model.ConvertToValidTimes(c,a.Effort_M(),c,d);c=d.adjustedStart;var d=d.adjustedEnd,e=this.FromActivity_M(),d=this.ComputeErrorTimeSpan(e.StartTime_M(),e.EndTime_M(),c,d);if(d<RQTimeSpan.Zero_M())return!1;d=this.Model.ConvertToValidStartTime(c-d,this.Lag_M(),a.Effort_M());if(c<d)return!1}return!0};RadiantQ.Gantt.Model.Dependency.prototype.ComputeLatestToActivityStartTime=function(){var a=Date.MinValue,a=this.FromActivity_M(),c=this.ToActivity_M(),
d=this.Lag_M();switch(this.Type_M()){default:case RadiantQ.Gantt.DependencyType.None:case RadiantQ.Gantt.DependencyType.FinishToStart:return this.Model.ConvertToValidStartTime(a.EndTime_M(),d,c.Effort_M());case RadiantQ.Gantt.DependencyType.StartToStart:return this.Model.ConvertToValidStartTime(a.StartTime_M(),d,c.Effort_M());case RadiantQ.Gantt.DependencyType.FinishToFinish:return a=this.Model.GetStart(a.EndTime_M(),c.Effort_M()),this.Model.ConvertToValidStartTime(a,d,c.Effort_M());case RadiantQ.Gantt.DependencyType.StartToFinish:return a=
this.Model.GetStart(a.StartTime_M(),c.Effort_M()),this.Model.ConvertToValidStartTime(a,d,c.Effort_M())}};RadiantQ.Gantt.Model.Dependency.prototype.EnsureActivityOrder=function(){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!this.ensuringActivityOrder)try{if(this.ensuringActivityOrder=!0,!1!=a.BaseGanttModel.ShouldEnforceDependency(this.ToActivity,this.Model)){var b=this.FromActivity_M(),c=this.ToActivity_M(),d=new RQTimeSpan(this.ComputeErrorTimeSpan(b.StartTime_M(),b.EndTime_M(),c.StartTime_M(),
c.EndTime_M())),e=this.ComputeLatestToActivityStartTime();c.StartTime_M()<e?(d=d.getEqualNegative(),d.isLessThan(RQTimeSpan.Zero_M())&&RQTimeSpan.Zero_M(),c.ShiftForwardTo(e)):c.StartTime_M()>e&&!1==RadiantQ.Gantt.Model.DataBoundGanttModel.IsBuildingModel&&this.Model.ApplyPreferredStartTimeOnActivity(c,e)}}finally{this.ensuringActivityOrder=!1}};RadiantQ.Gantt.Model.DependenciesCollection=function(){this._depByActivities=new RadiantQ.Gantt.Dictionary;this._predsByActivity=new RadiantQ.Gantt.Dictionary;
this._succsByActivity=new RadiantQ.Gantt.Dictionary;this._fromActs={};this._toActs={};this._directPredActsByAct={};Array.call(this);this.CollectionChanged=new ObjectEvent("CollectionChanged");this._inCollectionChanged=!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype=[];RadiantQ.Gantt.Model.DependenciesCollection.prototype.add=function(a){this.push(a);this.updatePredsAndSuccessors(a);this.updateBaseActsAndDepActsCollection(a);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,
a,this.length-1))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updatePredsAndSuccessors=function(a,c){var d=a.FromActivity_M(),e=a.ToActivity_M(),f=this._predsByActivity[e.ID_M()],g=this._succsByActivity[d.ID_M()];c?(f&&1<f.length?(e=f.indexOf(a),-1!=e&&f.splice(e,1)):this._predsByActivity.Remove(e),g&&1<g.length?(e=g.indexOf(a),-1!=e&&g.splice(e,1)):this._succsByActivity.Remove(d)):(f||(f=[],this._predsByActivity.Add(e,f)),f.push(a),g||(g=[],this._succsByActivity.Add(d,g)),g.push(a))};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateFromAndToActs=function(a,c){var d=a.ID_M(),e=c.ID_M(),f=this._fromActs[d];f?void 0!=f._repeatingCnt[e]?f._repeatingCnt[e]++:(f.push(c),f._repeatingCnt[e]=0):(this._fromActs[d]=[c],this._fromActs[d]._repeatingCnt={},this._fromActs[d]._repeatingCnt[e]=0);(f=this._toActs[e])?void 0!=f._repeatingCnt[d]?f._repeatingCnt[d]++:(f.push(a),f._repeatingCnt[d]=0):(this._toActs[e]=[a],this._toActs[e]._repeatingCnt={},this._toActs[e]._repeatingCnt[d]=
0)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.updateBaseActsAndDepActsCollection=function(a){var c=a.FromActivity_M();a=a.ToActivity_M();var d=c.ID_M(),e=a.ID_M(),f=this._directPredActsByAct[d];f?f.push(a):this._directPredActsByAct[d]=[a];this.updateFromAndToActs(c,a);d=this._toActs[d];e=this._fromActs[e];if(d)for(f=0;f<d.length;f++){if(d[f].ID_M(),this.updateFromAndToActs(d[f],a),e)for(var g=0;g<e.length;g++)e[g].ID_M(),this.updateFromAndToActs(c,e[g]),this.updateFromAndToActs(d[f],e[g])}else if(e)for(g=
0;g<e.length;g++)e[g].ID_M(),this.updateFromAndToActs(c,e[g])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.remove=function(b){if(b instanceof a.IActivity)return this.removeDependenciesOf(b);this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,null))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeDependenciesOf=function(b){b&&b instanceof a.IActivity&&(b=this._depByActivities[b.ID_M()],this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(b,
null)))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.removeBaseActsAndDepActsCollection=function(a){var c=a.FromActivity_M();a=a.ToActivity_M();var d=c.ID_M(),e=a.ID_M(),f=this._directPredActsByAct[c.ID_M()];if(1<f.length){var g=f.indexOf(a);f.splice(g,1)}else delete this._directPredActsByAct[c.ID_M()];var f=this._toActs[d],h=this._fromActs[e];if(f)for(var k=0;k<f.length;k++){var l=f[k].ID_M();0==this._fromActs[l]._repeatingCnt[e]?1<this._fromActs[l].length?(delete this._fromActs[l]._repeatingCnt[e],
g=this._fromActs[l].indexOf(a),this._fromActs[l].splice(g,1)):delete this._fromActs[l]:0<this._fromActs[l]._repeatingCnt[e]&&this._fromActs[l]._repeatingCnt[e]--;0==this._toActs[e]._repeatingCnt[l]?1<this._toActs[e].length?(delete this._toActs[e]._repeatingCnt[l],g=this._toActs[e].indexOf(f[k]),this._toActs[e].splice(g,1)):delete this._toActs[e]:0<this._toActs[e]._repeatingCnt[l]&&this._toActs[e]._repeatingCnt[l]--;if(h)for(var p=0;p<h.length;p++){var m=h[p].ID_M();0==this._fromActs[d]._repeatingCnt[m]?
1<this._fromActs[d].length?(delete this._fromActs[d]._repeatingCnt[m],g=this._fromActs[d].indexOf(h[p]),this._fromActs[d].splice(g,1)):delete this._fromActs[d]:0<this._fromActs[d]._repeatingCnt[m]&&this._fromActs[d]._repeatingCnt[m]--;0==this._toActs[m]._repeatingCnt[d]?1<this._toActs[m].length?(delete this._toActs[m]._repeatingCnt[d],g=this._toActs[m].indexOf(c),this._toActs[m].splice(g,1)):delete this._toActs[m]:0<this._toActs[m]._repeatingCnt[d]&&this._toActs[m]._repeatingCnt[d]--;0==this._fromActs[l]._repeatingCnt[m]?
1<this._fromActs[l].length?(delete this._fromActs[l]._repeatingCnt[m],g=this._fromActs[l].indexOf(h[p]),this._fromActs[l].splice(g,1)):delete this._fromActs[l]:0<this._fromActs[l]._repeatingCnt[m]&&this._fromActs[l]._repeatingCnt[m]--;0==this._toActs[m]._repeatingCnt[l]?1<this._toActs[m].length?(delete this._toActs[m]._repeatingCnt[l],g=this._toActs[m].indexOf(f[k]),this._toActs[m].splice(g,1)):delete this._toActs[m]:0<this._toActs[m]._repeatingCnt[l]&&this._toActs[m]._repeatingCnt[l]--}}else if(h)for(p=
0;p<h.length;p++)m=h[p].ID_M(),0==this._fromActs[d]._repeatingCnt[m]?1<this._fromActs[d].length?(delete this._fromActs[d]._repeatingCnt[m],g=this._fromActs[d].indexOf(h[p]),this._fromActs[d].splice(g,1)):delete this._fromActs[d]:0<this._fromActs[d]._repeatingCnt[m]&&this._fromActs[d]._repeatingCnt[m]--,0==this._toActs[m]._repeatingCnt[d]?1<this._toActs[m].length?(delete this._toActs[m]._repeatingCnt[d],g=this._toActs[m].indexOf(c),this._toActs[m].splice(g,1)):delete this._toActs[m]:0<this._toActs[m]._repeatingCnt[d]&&
this._toActs[m]._repeatingCnt[d]--;f=this._fromActs[d];h=this._toActs[e];f&&(0==f._repeatingCnt[e]?(delete f._repeatingCnt[e],g=f.indexOf(a),f.splice(g,1)):0<f._repeatingCnt[e]&&f._repeatingCnt[e]--,0==f.length&&delete this._fromActs[d]);h&&(0==h._repeatingCnt[d]?(delete h._repeatingCnt[d],g=h.indexOf(c),h.splice(g,1)):0<h._repeatingCnt[d]&&h._repeatingCnt[d]--,0==h.length&&delete this._toActs[e])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.contains=function(a){return this._depByActivities.Contains(a)};
RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearItems=function(){for(var a=0;a<this.length;a++)this[a].Dispose();this.splice(0,this.length);this._depByActivities=new RadiantQ.Gantt.Dictionary};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDependenciesByActivity=function(a){return this._depByActivities[a.ID_M()]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetDepenedenciesByIndex=function(a){return a<this.length?this._depByActivities.GetItemByIndex(a):null};RadiantQ.Gantt.Model.DependenciesCollection.prototype.OnCollectionChanged=
function(a){if(null!=a.OldItems)for(var c=0;c<a.OldItems.length;c++){var d=a.OldItems[c];this.UnsubscribeToChildEvents(d);this.ClearDependencyCacheInfo(d);this.removeBaseActsAndDepActsCollection(d);this.updatePredsAndSuccessors(d,!0);d.Dispose()}if(null!=a.NewItems)for(c=0;c<a.NewItems.length;c++)d=a.NewItems[c],this.CacheDependencyInfo(d),this.SubscribeToChildEvents(d);try{this._inCollectionChanged=!0,this.CollectionChanged&&this.CollectionChanged.raise(this,a)}finally{this._inCollectionChanged=
!1}};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SubscribeToChildEvents=function(a){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.UnsubscribeToChildEvents=function(a){};RadiantQ.Gantt.Model.DependenciesCollection.prototype.SetItem=function(a,c){this.ClearDependencyCacheInfo(this[a]);this[a].Dispose();this.CacheDependencyInfo(this[a])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.CacheDependencyInfo=function(a){var c=a.FromActivity_M(),d=a.ToActivity_M(),e=this._depByActivities[c.ID_M()];
if(e){if(e.containsValue(a))return;e.push(a)}else this._depByActivities.Add(c,Array(a));(e=this._depByActivities[d.ID_M()])?e.containsValue(a)||e.push(a):this._depByActivities.Add(d,Array(a))};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencyCacheInfo=function(a){var c=a.FromActivity_M(),d=a.ToActivity_M(),e=this._depByActivities[c.ID_M()];if(e){var f=e.indexOf(a);e.splice(f,1)}0==e.length&&this._depByActivities.Remove(c);if(e=this._depByActivities[d.ID_M()])f=e.indexOf(a),e.splice(f,
1);0==e.length&&this._depByActivities.Remove(d);f=this.indexOf(a);this.splice(f,1)};RadiantQ.Gantt.Model.DependenciesCollection.prototype.IsActivityFinishDependentOnAnother=function(a){var c=this._depByActivities[a.ID_M()];if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e.ToActivity_M()==a&&(e.Type_M()==RadiantQ.Gantt.DependencyType.FinishToFinish||e.Type_M()==RadiantQ.Gantt.DependencyType.StartToFinish))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesDependencyExist=function(a,
c,d){return this.DoesConstraintExist(a,c,d)||this.DoesConstraintExist(c,a,d)?!0:!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.DoesConstraintExist=function(a,c,d){if(0==this.length)return!1;var e=this._predsByActivity[c.ID_M()];if(d){if(e){if((d=this._directPredActsByAct[a.ID_M()])&&-1!=d.indexOf(c))return!0;for(c=0;c<e.length;c++)if(e[c].FromActivity_M()==a)return!0}}else{if((e=this._fromActs[a.ID_M()])&&-1!=e.indexOf(c)||(e=this._toActs[c.ID_M()])&&-1!=e.indexOf(a))return!0;if(a.Parent_M()){if(c.Parent_M()){if((e=
this.DoesConstraintExist(a.Parent_M(),c,d))||(e=this.DoesConstraintExist(a,c.Parent_M(),d)))return!0;e=this.DoesConstraintExist(a.Parent_M(),c.Parent_M(),d)}else e=this.DoesConstraintExist(a.Parent_M(),c,d);if(e)return!0}else if(c.Parent_M()&&(e=this.DoesConstraintExist(a,c.Parent_M(),d)))return!0}return!1};RadiantQ.Gantt.Model.DependenciesCollection.prototype.ClearDependencies=function(a){a=(this._predsByActivity[a.ID_M()]||[]).slice();for(var c=0;c<a.length;c++)this.remove(a[c])};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetPredecessors=
function(a){return(a=this._predsByActivity[a.ID_M()])?a:[]};RadiantQ.Gantt.Model.DependenciesCollection.prototype.GetSuccessors=function(a){return(a=this._succsByActivity[a.ID_M()])?a:[]}})();
(function(){var a=RadiantQ.Gantt.Model,b=RadiantQ.Gantt.DependencyType;a.BaseGanttModel=function(b,c,d){this.isBaseGanttModel=!0;a.IGanttModel.call(this);a.BaseGanttModel.IdCounter=1;this.topID=-1;this.AdjustDurationOnAssignment_M(null);this.EnforceDependencyConstraints_M(null);this.ResourceCapacityProvider=null;this.GetActivityById=function(a){return this._dictActivityById.GetItemByKey(a)};this._topSortOrder=0;this.BeforeEffortChanging=new ObjectEvent("BeforeEffortChanging");this.PropertyChanged=
new ObjectEvent("PropertyChanged");this.NewActivityAdded=new ObjectEvent("NewActivityAdded");this.ActivityEventHandler=new ObjectEvent("ActivityEventHandler");this.ActivityRemoved=new ObjectEvent("ActivityRemoved");this.BeforeStartTimeChanging=new ObjectEvent("BeforeStartTimeChanging");this._dictActivityById=new RadiantQ.Gantt.Dictionary;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ProvideDefaultWBSID=new ObjectEvent("ProvideDefaultWBSID");
if(this)return this.ValidateDependencySetting_M(!0),this.EnforceDependencyConstraints_M(!0),this.AutoCalculateSummaryTaskTimes_M(!0),this.CanShiftInProgressTasks_M(!0),this.AdjustDurationOnAssignment_M(!0),this.LagStringUnitsInHours_M(1),this._dictActivityById=new RadiantQ.Gantt.Dictionary,this._activities=this.CreateActivitiesCollection(),this._dependencies=new RadiantQ.Gantt.Model.DependenciesCollection,this._resources=new a.GanttResourcesCollection,this._activities.ChildCollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,
this),this._activities.CollectionChanged.subscribe(this.actitivites_ChildCollectionChanged,this),this._dependencies.CollectionChanged.subscribe(this._dependencies_CollectionChanged,this),this.WorkTimeSchedule_M(b),c&&("function"==typeof c?this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c,this):"function"==typeof c.Handler&&this.ShouldEnforceDependencyConstraintsOnActivity.subscribe(c.Handler,c.Context||this)),d&&("function"==typeof d?this.ProvideDefaultWBSID.subscribe(d,this):"function"==
typeof d.Handler&&this.ProvideDefaultWBSID.subscribe(d.Handler,d.Context||this)),this};a.BaseGanttModel.prototype=new a.IGanttModel;RadiantQ.Gantt.addMethod(a.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a){a=this.Activities_M();0<a.length&&this.UpdateSortOrderFrom(a[0],1)});RadiantQ.Gantt.addMethod(a.BaseGanttModel.prototype,"UpdateSortOrderFrom",function(a,b){for(var c=a.Parent_M(),c=null!=c?c.ChildActivities_M():this.Activities_M(),d=c.indexOf(a);d<c.length;d++){0>d&&(d=0);c[d].SortOrder_M(b);
b++;var e=c[d].ChildActivities_M();0<e.length&&(b=this.UpdateSortOrderFrom(e[0],b))}return b});a.BaseGanttModel.prototype._depTestResults=new RadiantQ.Gantt.Dictionary;a.BaseGanttModel.prototype._depInParents=new RadiantQ.Gantt.Dictionary;a.BaseGanttModel.prototype.ActivitiesCount_M=function(){return this._dictActivityById.length};a.BaseGanttModel.prototype.ActivityById_M=function(){return this._dictActivityById};a.BaseGanttModel.prototype.ResourceAssignmentTracker_M=function(){this._resourceAssignmentTracker||
(this._resourceAssignmentTracker=this.CreateResourceAssignmentTracker(this));return this._resourceAssignmentTracker};a.BaseGanttModel.prototype.CustomProgressCalculation_M=function(){return this._customProgressCalculation};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.BaseGanttModel.prototype,"ActivitiesCount",{get:function(){return this._dictActivityById.length},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseGanttModel.prototype,"ActivityById",{get:function(){return this._dictActivityById},
set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseGanttModel.prototype,"ResourceAssignmentTracker",{get:function(){this._resourceAssignmentTracker||(this._resourceAssignmentTracker=this.CreateResourceAssignmentTracker(this));return this._resourceAssignmentTracker},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.Model.IGanttModel.prototype,"CustomProgressCalculation",{get:function(){return this._customProgressCalculation},enumerable:!0,
configurable:!0}));a.BaseGanttModel.prototype.OnShouldEnforceDependencyConstraints=function(a){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,a)};a.BaseGanttModel.ShouldEnforceDependency=function(b,c){if(!1==c.CanShiftInProgressTasks_M()&&0<b.ProgressPercent_M())return!1;var d=new a.EnforceDependencyConstraintsEventArgs(b);return c?(c.OnShouldEnforceDependencyConstraints(d),d.Enforce_M()):!0};a.BaseGanttModel.prototype.CanProvideWBSID=
function(a,b){0<this.ProvideDefaultWBSID.fn.length};a.BaseGanttModel.prototype.RaiseProvideWBSID=function(a){0<this.ProvideDefaultWBSID.fn.length&&this.ProvideDefaultWBSID.raise(this,a)};a.BaseGanttModel.prototype._dependencies_CollectionChanged=function(a,b){if(null!=b.OldItems)for(var c=0;c<b.OldItems.length;c++){var d=b.OldItems[c];d.ToActivity_M().OnRemovedPredecessorDependency(d)}if(null!=b.NewItems)for(c=0;c<b.NewItems.length;c++)d=b.NewItems[c],d.ToActivity_M().OnAddedPredecessorDependency(d)};
a.BaseGanttModel.prototype.GetPredecessorsHierarchy=function(a){var b=[];a=this.Dependencies_M().GetPredecessors(a);for(var c=0;c<a.length;c++)dep=a[c],this.AddActivityHierarchyToList(b,dep.FromActivity_M());return b};a.BaseGanttModel.prototype.AddActivityHierarchyToList=function(a,b){var c=b.ChildActivities_M();if(0==c.length)a.containsValue(b)||a.push(b);else for(var d=0;d<c.length;d++)this.AddActivityHierarchyToList(a,c[d])};a.BaseGanttModel.prototype.GetResourcesDictionary=function(a){var b=new RadiantQ.Gantt.Dictionary;
a=a.Assignments_M();for(var c=0;c<a.length;c++){var d=a[c];b.Add(d.Resource_M(),d.AllocationUnits_M())}return b};a.BaseGanttModel.prototype.GetActivitiesWithConflictingAssignments=function(){var a=[],b=this.AllActivities_M();if(0<b.length){for(var c=new RadiantQ.Gantt.Dictionary,d=0;d<b.length;d++){var e=b[d],p=e.Assignments_M();if(0==e.ChildActivities_M().length&&null!=p&&0!=p.length)for(var m=0;m<p.length;m++){var q=p[m].Resource_M(),n=c.GetItemByKey(q);n||(n=[],c.Add(q,n));n.push(e)}}for(b=0;b<
c.Keys.length;b++)for(e=c.GetItemByKey(c.Keys[d]),d=0;d<e.length-1;){p=!1;q=e[d];n=new TimePeriod(q.StartTime_M(),q.EndTime_M());for(m=d+1;m<e.length;){var r=e[m],t=new TimePeriod(r.StartTime_M(),r.EndTime_M()),t=n.Intersect(t);null!=t&&t.Value.Duration_M()>RQTimeSpan.Zero_M()?(p=!0,a.push(r),e.RemoveAt(m)):m++}p?(a.push(q),e.RemoveAt(d)):d++}}return a};a.BaseGanttModel.GetEndTimeForAssignmentInActivity=function(a,b,c,d){if(b.equals(RQTimeSpan.Zero_M()))return a.StartTime_M();b=b.Ticks_M()/a.Assignments_M().length;
b*=100/c.AllocationUnits_M();c=c.Resource_M().Schedule_M();c=null==c?d:c;return null!=c?c.GetEnd(a.StartTime_M(),RQTimeSpan.fromTicks(b)):a.StartTime_M().addTimeSpan(RQTimeSpan.fromTicks(b))};a.BaseGanttModel.prototype.OnBeforeEffortChanging=function(b,c){if(this.BeforeEffortChanging&&0<this.BeforeEffortChanging.fn.length){var d=new a.BeforeEffortChangingEventArgs(b,c);this.BeforeEffortChanging.raise(this,d);return d.NewEffort}return c};a.BaseGanttModel.ConvertEffortToDuration=function(a,b,c,d){a=
a.Assignments_M();if(!1==c||0==a.length)return b;for(d=c=0;d<a.length;d++){var e=a[d];c+=e.AllocationUnits_M();e.Resource_M().Schedule_M()}b=b.Ticks_M();b=Math.ceil(b/(c/100));return RQTimeSpan.fromTicks(b)};a.BaseGanttModel.prototype.OnBeforeStartTimeChanging=function(b,c){if(this.BeforeStartTimeChanging&&0<this.BeforeStartTimeChanging.fn.length){var d=new a.BeforeStartTimeChangingEventArgs(b,c);this.BeforeStartTimeChanging.raise(this,d);return d.NewStartTime}return c};a.BaseGanttModel.prototype.actitivites_ChildCollectionChanged=
function(a,b){if(null!=b.NewItems)for(var c=0;c<b.NewItems.length;c++){var d=b.NewItems[c];(a instanceof RadiantQ.Gantt.Model.IActivity||a.isIActivity)&&this.RemoveAnyParentChildDependencies(a,d);this.RecursivelyRegisterActivities(d)}else if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],this.RecursivelyUnRegisterActivities(d)};a.BaseGanttModel.prototype.RemoveActivity=function(b,c){this.RecursivelyClearDependencies(c);null!=b?b.ChildActivities_M().remove(c):this.Activities_M().remove(c);
this.OnActivityRemoved(new a.ActivityEventArgs(c))};a.BaseGanttModel.prototype.RecursivelyClearDependencies=function(a){var b=this._dependencies.GetDependenciesByActivity(a);if(null!=b)for(var c=b.length-1;0<=c;c--){var d=b[c];this.Dependencies_M().remove(d)}a=a.ChildActivities_M();for(c=0;c<a.length;c++)this.RecursivelyClearDependencies(a[c])};a.BaseGanttModel.prototype.RecursivelyRegisterActivities=function(a){var b=a.ID_M(),c=this._dictActivityById.GetItemByKey(b);if(null!=c&&c!=a)throw Error("A new activity () with the ID ("+
b+") same as another activity ("+c.ActivityName_M()+") was added. This is not supported.");this._dictActivityById.Add(b,a);this.topID<b&&(this.topID=b);a=a.ChildActivities_M();for(b=0;b<a.length;b++)this.RecursivelyRegisterActivities(a[b])};a.BaseGanttModel.prototype.RecursivelyUnRegisterActivities=function(a){var b=null,c=a.ID_M();this._dictActivityById.Contains(c)&&(b=this.GetActivityById(c));null!=b&&b==a&&this._dictActivityById.Remove(c);a=a.ChildActivities_M();for(b=0;b<a.length;b++)this.RecursivelyUnRegisterActivities(a[b])};
a.BaseGanttModel.prototype.RemoveAnyParentChildDependencies=function(a,b){var c=this._dependencies.GetDependenciesByActivity(b);if(null!=c)for(var d=c.length-1;0<=d;d--){var e=c[d];e.FromActivity_M()!=a&&e.ToActivity_M()!=a||this.Dependencies_M().remove(e)}c=b.ChildActivities_M();for(d=0;d<c.length;d++)this.RemoveAnyParentChildDependencies(a,c[d])};a.BaseGanttModel.prototype.CreateNewDependencyInternal=function(b,c,d,e,l){!1==l&&!1==this.CanAddNewDependency(b,c,a.NewDependencyAddScenarioType.None)&&
(l="Cannot add a dependency between activities "+b.ActivityName_M()+" and "+c.ActivityName_M()+". They are either already directly or indirectly dependent or one of them is, directly or indirectly, a summary task of another. Use the Model.CanAddNewDependency method to determine if dependencies can be added between two tasks, before adding a new dependency.",window.console&&console.log(l));try{var p=new RadiantQ.Gantt.Utils.DelayUpdates,m=new RadiantQ.Gantt.Model.Dependency(this,b,c,d);m.Lag_M(e);
this.Dependencies_M().add(m);return m}finally{p.Dispose()}};a.BaseGanttModel.prototype.RemoveDependenciesLeadingTo=function(a,b){var c=this.Dependencies_M(),d=a.ToActivity_M();if(d==b)c.remove(a);else{for(var e=c.GetSuccessors(d),p=0;p<e.length;p++)this.RemoveDependenciesLeadingTo(e[p],b);d=d.ChildActivities_M();for(p=0;p<d.length;p++){e=d[p];if(this.IsAncestor(e,b)){c.Remove(a);break}for(var e=c.GetSuccessors(e),m=0;m<e.length;m++)this.RemoveDependenciesLeadingTo(e[m],b)}d=b.ChildActivities_M();
for(p=0;p<d.length;p++)e=d[p],this.RemoveDependenciesLeadingTo(a,e)}};a.BaseGanttModel.prototype.InitDepResultsCache=function(){this._depTestResults=new RadiantQ.Gantt.Dictionary};a.BaseGanttModel.prototype.ClearDepResultsCache=function(){this._depTestResults.Clear();this._depTestResults=new RadiantQ.Gantt.Dictionary};a.BaseGanttModel.prototype.AddToDepResultsCache=function(a,b){this._depTestResults.Add(a.ID_M()+"+"+b.ID_M(),!0)};a.BaseGanttModel.prototype.IsInDepResultsCache=function(a,b){return this._depTestResults.Contains(a.ID_M()+
"+"+b.ID_M())?!0:!1};a.BaseGanttModel.prototype.InitDepInParentsResultsCache=function(){this._depInParents=new RadiantQ.Gantt.Dictionary};a.BaseGanttModel.prototype.ClearDepInParentsResultsCache=function(){this._depInParents.Clear();this._depInParents=null};a.BaseGanttModel.prototype.AddToDepInParentsResultsCache=function(a,b){this._depInParents.Add(a.ID_M()+"+"+b.ID_M(),!0)};a.BaseGanttModel.prototype.IsInDepInParentsResultsCache=function(a,b){return this._depInParents.Contains(a.ID_M()+"+"+b.ID_M())?
!0:!1};a.BaseGanttModel.prototype.CanAddNewDependencyRecursive=function(a,b,c){function d(a,b){var c=b.ID_M();if(m[c]&&m.Dependencies==a)return m[c];for(var f=[],e=a._fromActs[c]||[],g=0;g<e.length;g++){var h=e[g],l=h.ChildActivities_M();if(l.length)for(var p=0;p<l.length;p++)var n=d(a,l[p]),f=f.concat(n);f.push(h)}return m[c]=f}function e(a){var b=[];for(a=a.Parent_M();a;)b.push(a),a=a.Parent_M();return b.reverse()}function p(a){var b=a.ID_M();if(q[b])return q[b];var c=[];a=a.ChildActivities_M();
for(var d=0;d<a.length;d++){var f=a[d];c.push(f);f=p(f);c=c.concat(f)}return q[b]=c}if(!1==this.ValidateDependencySetting_M())return!0;if(0==c)this.InitDepResultsCache();else if(this.IsInDepResultsCache(a,b))return!0;if(this.IsAncestor(a,b)||this.IsAncestor(b,a))return!1;var m={Dependencies:this._dependencies},q={};if(function(a,b){var c=this._fromActs[a.ID_M()];return c&&-1!=c.indexOf(b)?!0:(c=this._toActs[b.ID_M()])&&-1!=c.indexOf(a)?!0:!1}.call(this._dependencies,b,a))return!1;var n=a.Parent_M(),
r=b.Parent_M();n&&r&&n==r?(n=a,r=b):(n=a.Parent_M()?e(a)[0]:a,r=b.Parent_M()&&b.Parent_M()!=a.Parent_M()?e(b)[0]:b);fromChilds=p(n);toChilds=p(r);var t=d(this._dependencies,b);if(-1!=t.indexOf(a)||-1!=t.indexOf(n))return!1;r=d(this._dependencies,r);if(-1!=r.indexOf(a)||-1!=r.indexOf(n))return!1;if(fromChilds.length&&fromChilds!=toChilds)for(var s=0;s<fromChilds.length;s++){var u=fromChilds[s];if(-1!=t.indexOf(u)||-1!=r.indexOf(u))return!1;for(var w=0;w<toChilds.length;w++){var v=toChilds[w];if(u!=
v&&(v=d(this._dependencies,v),-1!=v.indexOf(a)||-1!=v.indexOf(n)||-1!=v.indexOf(u)))return!1}}else for(toChilds=p(b),s=0;s<toChilds.length;s++)if(v=toChilds[s],v=d(this._dependencies,v),-1!=v.indexOf(a)||-1!=v.indexOf(n))return!1;this.AddToDepResultsCache(a,b);0==c&&this.ClearDepResultsCache();return!0};a.BaseGanttModel.prototype.HasDependencyInParentsRecursive=function(a,b,c,d){if(0==d)this.InitDepInParentsResultsCache();else if(this.IsInDepInParentsResultsCache(a,b))return!1;var e=this.Dependencies_M();
if(0==e.length)return!1;if(c&&e.DoesDependencyExist(a,b,!0))return!0;c=a.Parent_M();e=b.Parent_M();if(null!=c&&void 0!=c&&this.HasDependencyInParentsRecursive(c,b,!0,d+1)||null!=e&&void 0!=e&&this.HasDependencyInParentsRecursive(a,e,!0,d+1))return!0;this.AddToDepInParentsResultsCache(a,b);return!1};a.BaseGanttModel.prototype.OnNewActivityAdded=function(a){null!=this.NewActivityAdded&&this.NewActivityAdded.raise(this,a)};a.BaseGanttModel.prototype.OnActivityRemoved=function(a){null!=this.ActivityRemoved&&
this.ActivityRemoved.raise(this,a);a.Dispose()};a.BaseGanttModel.prototype.OnPropertyChanged=function(a,b){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,{propertyName:a,value:b})};a.BaseGanttModel.prototype.CreateResourceAssignmentTracker=function(b){return new a.ResourceAssignmentTracker(b)};a.BaseGanttModel.prototype.CreateActivitiesCollection=function(){return new a.ActivitiesCollection(null,this)};a.BaseGanttModel.prototype.GetActivityById=function(a){return this._dictActivityById.ContainsKey(a)?
this._dictActivityById[a]:null};a.BaseGanttModel.prototype.Dispose=function(){for(var a=this.AllActivities_M(),b=0;b<a.length;b++)a.asArray[b].Dispose();this._dictActivityById=new RadiantQ.Gantt.Dictionary;this._activities&&(this._activities.ChildCollectionChanged.unsubscribe(this.activities_ChildCollectionChanged,this),this._activities.CollectionChanged.unsubscribe(this.activities_ChildCollectionChanged,this));this._resources=this._dependencies=this._activities=null};a.BaseGanttModel.prototype.GetCriticalActivities=
function(a){for(var b=Date.MinValue,c=this.AllActivities_M()._collections,d=0;d<c.length;d++){var e=c[d].value,e=e.EndTime_M();e>b&&(b=e)}for(var p=[],d=0;d<c.length;d++)e=c[d].value,e.IsCritical(b,a,null)&&p.push(e);return p};a.BaseGanttModel.prototype.LevelResources=function(b,c){var d=this.AllActivities_M();if(0<d.length){for(var e=new RadiantQ.Gantt.Dictionary,l=new RadiantQ.Gantt.Dictionary,p=0;p<d.length;p++){var m=d.GetItemByIndex(p),q=m.Assignments_M();0==m.ChildActivities_M().length&&null!=
q&&0!=q.length&&(e.Add(m,this.GetPredecessorsHierarchy(m)),l.Add(m,this.GetResourcesDictionary(m)))}d=new RadiantQ.Gantt.Dictionary;for(p=e.length;0<p;p=e.length){for(var q=[],n=0;n<e.length;n++){for(var m=e._collections[n].key,r=!0,t=e.GetItemByKey(m),s=0;s<t.length;s++){var u=t[s];if(e.Contains(u)&&!q.containsValue(u)){r=!1;break}}if(r){r=c;t=l.GetItemByKey(m);for(s=0;s<t.length;s++){var u=t._collections[s],w=u.key,v=u.value,x=d.GetItemByKey(w);if(x)for(u=0;u<x.length;u++){var y=x._collections[u],
z=y.key,y=this.GetResourceCapacity(w);z+v>y&&(z=x.GetItemByKey(z),z.isGreaterThan(r)&&(r=z))}}!b&&0!=m.ProgressPercent_M()||r==m.StartTime_M()||(m.PreferredStartTime_M(r),m.StartTime_M(r));v=this.AdjustDurationOnAssignment_M();for(s=0;s<t.length;s++){u=t._collections[s];w=u.key;y=u.value;d.Contains(w)||d.Add(w,new RadiantQ.Gantt.Dictionary);var x=d.GetItemByKey(w),z=new RadiantQ.Gantt.Dictionary,B=v?a.BaseGanttModel.GetEndTimeForAssignmentInActivity(m,m.Effort_M(),m.Assignments_M().GetAssignmentForResource(w),
this.WorkTimeSchedule_M()):m.EndTime_M();z.Add(y,B);for(u=0;u<x.length;u++){var w=x._collections[u].key,A=x.GetItemByKey(w);A.isGreaterThan(r)&&(A.isLessThan(B)?z.Add(w+y,A):z.Add(w+y,B))}for(u=0;u<z.length;u++)y=z._collections[u],w=y.key,y=y.value,B=x.indexOf(w),-1==B?x.Add(w,y):y>x._collections[B].value&&(x._collections[B].value=y)}q.push(m)}}for(u=0;u<q.length;u++)e.Remove(q[u]);if(e.length==p)break}}};a.BaseGanttModel.prototype.GetResourceCapacity=function(a){return this.ResourceCapacityProvider?
this.ResourceCapacityProvider(a):100};a.BaseGanttModel.prototype.ConvertToValidTimes=function(a,b,c,e){b||(b=RQTimeSpan.Zero_M());c=a;c.addTimeSpan(b);c=this.AdjustStartTimeWithEffort(c,b);e=d(c,b,this.WorkTimeSchedule_M());return{adjustedStart:c,adjustedEnd:e}};a.BaseGanttModel.prototype.ConvertToValidStartTime=function(a,b,d){return b.equals(RQTimeSpan.Zero_M())&&c(a,d,this.WorkTimeSchedule_M())?a:RadiantQ.Gantt.Utils.TimeComputingUtils.AddLagToStartTime(a,b,this.WorkTimeSchedule_M())};var c=a.BaseGanttModel.ApplyMilestoneExceptionToStartTime=
function(a,b,c){b||(b=RQTimeSpan.Zero_M());return b.equals(RQTimeSpan.Zero_M())&&(null==c?a:c.GetStart(a,RQTimeSpan.Zero_M())).equals(a)?!0:!1},d=a.BaseGanttModel.ComputeEndTime=function(b,c,d,e,l){if(!(b.isBaseActivity||b instanceof a.IActivity))return _computeEndTime(b,c,d,e);var p=b.ChildActivities_M();if(0<p.length&&l)return p.EndTime_M();l=b.Assignments_M();if(!1==e||0==l.length)return _computeEndTime(b.StartTime_M(),c,d);e=Date.MinValue;for(p=0;p<l.length;p++){var m=a.BaseGanttModel.GetEndTimeForAssignmentInActivity(b,
c,l[p],d);m>e&&(e=m)}return e};_computeEndTime=function(a,b,d){var e=RQTimeSpan.Zero_M();b||(b=e);return b.equals(e)&&c(a,e,d)?a:null==d?a.addTimeSpan(b):d.GetEnd(a,b)};a.BaseGanttModel.prototype.ComputeEndTime=function(a){return d(a,a.Effort_M(),this.WorkTimeSchedule_M(),this.AdjustDurationOnAssignment_M(),this.AutoCalculateSummaryTaskTimes_M())};a.BaseGanttModel.prototype.ComputeEffort=function(a,b){var c=a.StartTime_M();if(c==Date.MinValue||c==Date.MaxValue)return RQTimeSpan.Zero_M();var d=a.Assignments_M(),
e=this.WorkTimeSchedule_M();if(!1==this.AdjustDurationOnAssignment_M()||0==d.length||0<a.ChildActivities_M().length)return null==e?new RadiantQ.Gantt.Utils.TimeComputingUtils.GetTimeSpan(c,b):e.GetEffort(c,b);for(var p=RQTimeSpan.MaxValue_M(),m=0;m<d.length;m++){var q=d[m],n=q.Resource_M().Schedule_M(),n=null==n?e:n,r=RQTimeSpan.MinValue_M();n?(r=n.GetEffort(c,b),r=RQTimeSpan.fromTicks(r.Ticks_M()*(q.AllocationUnits_M()/100))):r=new RQTimeSpan(b-c);r.isLessThan(p)&&(p=r)}return RQTimeSpan.fromTicks(p.Ticks_M()*
d.length)};a.BaseGanttModel.prototype.AdjustEffort=function(a,b){return this.OnBeforeEffortChanging(a,b)};a.BaseGanttModel.prototype.ConvertDurationToEffort=function(a,b){var c=b.Assignments_M();if(!1==this.AdjustDurationOnAssignment_M()||0==c.length)return a;for(var d=0,e=0;e<c.length;e++)d+=c[e].AllocationUnits_M();c=Math.ceil(a.Ticks_M()*(d/100));return RQTimeSpan.fromTicks(c)};a.BaseGanttModel.prototype.ComputeDuration=function(a){return e(a,a.Effort_M(),this.AdjustDurationOnAssignment_M())};
var e=a.BaseGanttModel.ComputeDuration=function(b,c,d){return!1==d||0==b.Assignments_M().length?b.Effort_M():a.BaseGanttModel.ConvertEffortToDuration(b,c,d,!1)};a.BaseGanttModel.prototype.GetStart=function(a,b){var c=this.WorkTimeSchedule_M();return null==c?a.addTimeSpan(RQTimeSpan.Zero_M().subtract(b)):c.GetStart(a,b)};a.BaseGanttModel.prototype.AdjustStartTime=function(a,b){b=this.AdjustStartTimeWithEffort(b,a.Effort_M());return this.OnBeforeStartTimeChanging(a,b)};a.BaseGanttModel.prototype.AdjustStartTimeWithEffort=
function(b,c){return a.BaseGanttModel.AdjustStartTime(b,c,this.WorkTimeSchedule_M())};a.BaseGanttModel.AdjustStartTime=function(a,b,d){return a==Date.MinValue||a==Date.MaxValue||c(a,b,d)?a:null==d?a:d.ConvertToNextWorkingTime(a)};a.BaseGanttModel.prototype.RemoveActivity=function(a,b){this.RecursivelyClearDependencies(b);null!=a?a.ChildActivities_M().remove(b):this.Activities_M().remove(b);this.OnActivityRemoved(b)};a.BaseGanttModel.prototype.GetNewID=function(){return this.topID+1};a.BaseGanttModel.prototype.SetTopSortOrder=
function(a){var b=this.ActivitiesCount_M();this._topSortOrder<b-1&&(this._topSortOrder=b-1);this._topSortOrder<a&&(this._topSortOrder=a)};a.BaseGanttModel.prototype.GetNewSortOrder=function(){return this.ActivitiesCount_M()+1};a.BaseGanttModel.prototype.UpdateSortOrders=function(){this.UpdateSortOrderFrom(null)};a.BaseGanttModel.prototype.IsAncestor=function(a,b){for(var c=a.ChildActivities_M(),d=0;d<c.length;d++){var e=c[d];if(e==b||this.IsAncestor(e,b))return!0}return!1};a.BaseGanttModel.prototype.CreateNewActivity=
function(a,b){};a.BaseGanttModel.prototype.CreateNewDependency=function(a,b,c,d){c||(c=RadiantQ.Gantt.DependencyType.FinishToStart);d||(d=RQTimeSpan.Zero_M());return this.CreateNewDependencyInternal(a,b,c,d,!1)};a.BaseGanttModel.prototype.PrepareParenting=function(a,b){var c=this.Dependencies_M();this.RemoveAnyParentChildDependencies(a,b);for(var d=c.GetSuccessors(a),e=0;e<d.length;e++)this.RemoveDependenciesLeadingTo(d[e],b);c.GetSuccessors(b);for(e=0;e<d.length;e++)this.RemoveDependenciesLeadingTo(d[e],
a);c=b.ChildActivities_M();for(e=0;e<c.length;e++)this.PrepareParenting(a,c[e])};a.BaseGanttModel.prototype.CanAddNewDependency=function(b,c,d){d||(d=a.NewDependencyAddScenarioType.None);if(!1==this.ValidateDependencySetting_M())return!0;var e=this.Dependencies_M();return b==c||!0==e.DoesConstraintExist(b,c,!0)||!0==e.DoesConstraintExist(c,b,!1)||!1==this.CanAddNewDependencyRecursive(b,c,0)?!1:null!=this.NewDependencyValidator&&"function"==typeof this.NewDependencyValidator?this.NewDependencyValidator(b,
c,d):!0};a.BaseGanttModel.prototype.NewDependencyValidator=null;a.BaseGanttModel.prototype.ApplyPreferredStartTimeOnActivity=function(a,b){var c=a.ChildActivities_M();if(0<c.length&&this.AutoCalculateSummaryTaskTimes_M())for(var d=0;d<c.length;d++)this.ApplyPreferredStartTimeOnActivity(c[d],b);else c=a.PreferredStartTime_M(),c>b&&(b=c),a.StartTime_M(b)};a.BaseGanttModel.prototype.GetEnumerator=function(){return null!=this._actitivites?this._actitivites.GetEnumerator():null};a.BaseGanttModel.prototype.GetResourceActivityList=
function(a){return this.ResourceAssignmentTracker_M().GetResourceActivityList(a)};a.BaseGanttModel.prototype.Filter=function(a){for(var b=this.Activities_M(),c=0;c<b.length;c++)this.ApplyFilterOnActivity(b[c],a)};a.BaseGanttModel.prototype.ApplyFilterOnActivity=function(a,b){var c=a.ChildActivities_M();if(0<c.length){for(var d=!1,e=0;e<c.length;e++)var p=!this.ApplyFilterOnActivity(c[e],b),d=d|p;a.IsFilteredOut_M(!d)}else null!=b?(c=!b(a),a.IsFilteredOut_M(c)):a.IsFilteredOut_M(!1);return a.IsFilteredOut_M()};
a.ActivitiesCollection=function(a,b){this.isActivitiesCollection=!0;this._actColl=[];this.isRecalculatingTimes=!1;this.AdjustStartTimeForConstraints=new ObjectEvent("AdjustStartTimeForConstraints");this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.ChildCollectionChanged=new ObjectEvent("ChildCollectionChanged");this.base=RadiantQ.Gantt.Utils.IUIUpdateable;this.base();Array.call(this);this._parent=a;this._model=b;this._progressPercent=
0;this._startTime=Date.MaxValue;this._endTime=Date.MinValue;this._cumEffort=RQTimeSpan.Zero_M();this._prefStartTime=Date.MinValue;null!=this._parent&&this._parent.PropertyChanged.subscribe(this._parent_PropertyChanged,this);this.OnAdjustStartTimeForConstraints=function(a){null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,a)};this.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&this.ChildCollectionChanged.raise(a,b)};this.OnPropertyChanged=
function(a){this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,{PropertyName:a})};this.PartialUpdate=function(a){this._disposed||(a&&(!0==a.isIActivity||a instanceof RadiantQ.Gantt.Model.IActivity)?this.UpdateTimes(a):this.TotalUpdate())};this.TotalUpdate=function(){this._disposed||(this.RecalculateTimes(),this.UpdateProgressPercent())};this._disposed=!1;this.Dispose=function(){this._disposed=!0;null!=this._parent&&this._parent.PropertyChanged.unsubscribe(this._parent_PropertyChanged,
this)};return this};a.ActivitiesCollection.prototype=new RadiantQ.Gantt.Utils.IUIUpdateable;a.ActivitiesCollection.prototype=[];a.ActivitiesCollection.prototype.Model_M=function(){return this._model};a.ActivitiesCollection.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;!1==this._startTime.equals(a)&&(this._startTime=a,this.OnPropertyChanged("StartTime",a))};a.ActivitiesCollection.prototype.PreferredStartTime_M=function(a){if(0==arguments.length)return this._prefStartTime;
!1==this._prefStartTime.equals(a)&&(this._prefStartTime=a,this.OnPropertyChanged("PreferredStartTime",a))};a.ActivitiesCollection.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;!1==this._endTime.equals(a)&&(this._endTime=a,this.OnPropertyChanged("EndTime",a))};a.ActivitiesCollection.prototype.CumulativeEffort_M=function(){if(0==arguments.length)return this._cumEffort};a.ActivitiesCollection.prototype.ProgressPercent_M=function(a){if(0==arguments.length)return this._progressPercent;
this._progressPercent!=a&&(this._progressPercent=a,this.OnPropertyChanged("ProgressPercent",a))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ActivitiesCollection.prototype,"Model",{get:function(){return this._model},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.ActivitiesCollection.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){!1==this._startTime.equals(a)&&(this._startTime=a,this.OnPropertyChanged("StartTime",a))},enumerable:!0,
configurable:!0}),Object.defineProperty(a.ActivitiesCollection.prototype,"PreferredStartTime",{get:function(){return this._prefStartTime},set:function(a){!1==this._prefStartTime.equals(a)&&(this._prefStartTime=a,this.OnPropertyChanged("PreferredStartTime",a))},enumerable:!0,configurable:!0}),Object.defineProperty(a.ActivitiesCollection.prototype,"EndTime",{get:function(){return this._endTime},set:function(a){!1==this._endTime.equals(a)&&(this._endTime=a,this.OnPropertyChanged("EndTime",a))},enumerable:!0,
configurable:!0}),Object.defineProperty(a.ActivitiesCollection.prototype,"CumulativeEffort",{get:function(){return this._cumEffort},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.ActivitiesCollection.prototype,"ProgressPercent",{get:function(){return this._progressPercent},set:function(a){this._progressPercent!=a&&(this._progressPercent=a,this.OnPropertyChanged("ProgressPercent",a))},enumerable:!0,configurable:!0}));a.ActivitiesCollection.prototype._parent_PropertyChanged=
function(a,b){"DefaultWBSID"==b.PropertyName&&this.UpdateChildWBSIDs()};a.ActivitiesCollection.prototype.UpdateChildWBSIDs=function(){if(!1!=this.IsWBSCalcEnabled())for(var a=0;a<this.length;a++)this.UpdateChildWBSID(a)};a.ActivitiesCollection.prototype.UpdateChildWBSID=function(b){var c=this[b];b=new a.ProvideDefaultWBSIDEventArgs(c,c.WBSID_M(),b,this);this._model.RaiseProvideWBSID(b);c.DefaultWBSID_M(b.NewWBSID_M())};a.ActivitiesCollection.prototype.IsWBSCalcEnabled=function(){var a=this._model;
return null==a||!1==a.CanProvideWBSID()?!1:!0};a.ActivitiesCollection.prototype.add=function(a){0<=this.indexOf(a)||(this.push(a),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a,this.length-1)))};a.ActivitiesCollection.prototype.insert=function(a,b){if(a<=this.length||0==a)this.splice(a,0,b),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,b,a))};a.ActivitiesCollection.prototype.remove=function(a){var b=this.indexOf(a);
0>b||(this.splice(b,1),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null,b)))};a.ActivitiesCollection.prototype.indexOf=function(a){return $.inArray(a,this)};a.ActivitiesCollection.prototype.contains=function(a){return-1===this.indexOf(a)?!0:!1};a.ActivitiesCollection.prototype.ClearItems=function(){if(a.AutoCalculateSummaryTaskTimes_M())for(var b=0;b<this.collections.length;b++){var c=this.collections.GetItemByIndex(b);this.UnsubscribeToChildEvents(c)}this.splice(0,
this._length)};a.ActivitiesCollection.prototype.OnCollectionChanged=function(a,b){this.CollectionChanged.raise(this,b);var c=2147483647;if(null!=b.OldItems)for(var c=b.OldStartingIndex,d=0;d<b.OldItems.length;d++){var e=b.OldItems[d];this.UnsubscribeToChildEvents(e)}if(null!=b.NewItems)for(c=c<b.NewStartingIndex?c:b.NewStartingIndex,d=0;d<b.NewItems.length;d++)e=b.NewItems[d],this.SubscribeToChildEvents(e);if(2147483647!=c&&this.IsWBSCalcEnabled())for(d=c;d<this.length;d++)this.UpdateChildWBSID(d);
"remove"==b.type&&0==this.length&&this._model.AutoCalculateSummaryTaskTimes_M()&&(this.StartTime_M(Date.MaxValue),this.EndTime_M(Date.MinValue),this.PreferredStartTime_M(Date.MaxValue))};RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents=function(b){a.DataBoundGanttModel.IsBuildingModel||this.UpdateProgressPercentForChild(b,!0);(!0==b.isBaseActivity||b instanceof RadiantQ.Gantt.Model.BaseActivity)&&b.Parent_M(this._parent);b.ChildCollectionChanged.subscribe(this.activity_ChildCollectionChanged,
this);var c=this._model;!1!=c.AutoCalculateSummaryTaskTimes_M()&&(b.PropertyChanged.subscribe(this.activity_PropertyChanged,this),b.AdjustStartTimeForConstraints.subscribe(this.activity_AdjustStartTimeForConstraints,this),!1==b.isBaseActivity&&!1==b instanceof RadiantQ.Gantt.Model.BaseActivity&&RadiantQ.Gantt.Model.BaseActivity.call(b,c),c=b.ComputeConstrainedStartTime(),b.StartTime<=c&&b.ShiftForwardTo(c),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,b),(b=b.CumulativeEffort_M())&&this.UpdateEffort(RQTimeSpan.Zero_M(),
b))};a.ActivitiesCollection.prototype.UnsubscribeToChildEvents=RadiantQ.Gantt.Model.ActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){(a instanceof RadiantQ.Gantt.Model.BaseActivity||a.isBaseActivity)&&a.Parent_M(null);a.ChildCollectionChanged.unsubscribe(this.activity_ChildCollectionChanged,this);!1!=this._model.AutoCalculateSummaryTaskTimes_M()&&(a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this),a.AdjustStartTimeForConstraints.unsubscribe(this.activity_AdjustStartTimeForConstraints,
this),RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null),this.UpdateEffort(a.CumulativeEffort_M(),RQTimeSpan.Zero_M()))};a.ActivitiesCollection.prototype.activity_PropertyChanged=function(a,b){this.OnChildPropertyChanged(a,b)};a.ActivitiesCollection.prototype.OnChildPropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName&&"PreferredStartTime"!=b.PropertyName||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a);"CumulativeEffort"==b.PropertyName&&
(RadiantQ.Gantt.Utils.DelayUpdateUtil.IsUpdating()||this.UpdateEffort(b.OldValue,a.CumulativeEffort_M()));if("ProgressPercent"==b.PropertyName||null!=this._model.CustomProgressCalculation_M()&&("Effort"==b.PropertyName||"CumulativeEffort"==b.PropertyName))RadiantQ.Gantt.Utils.DelayUpdateUtil.IsUpdating()||this.UpdateProgressPercent()};a.ActivitiesCollection.prototype.DelayUpdate=function(a){RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,a)};a.ActivitiesCollection.prototype.UpdateEffort=
function(a,b){var c=this.CumulativeEffort_M();b&&c&&(c=c.add(b));a&&c&&(c=c.subtract(a));c&&b||(c=b);this._cumEffort!=c&&(this._cumEffort=c,this.OnPropertyChanged("CumulativeEffort",a,b))};a.ActivitiesCollection.prototype.UpdateTimes=function(a){if(!1!=this._model.AutoCalculateSummaryTaskTimes_M()){this.isRecalculatingTimes=!0;var b=!1,c=this.StartTime_M(),d=a.StartTime_M();d<=c?this.StartTime_M(d):b=!0;c=a.PreferredStartTime_M();c<=this.PreferredStartTime_M()?this.PreferredStartTime_M(c):b=!0;!1==
b&&(a=a.EndTime_M(),a>=this.EndTime_M()?this.EndTime_M(a):b=!0);this.isRecalculatingTimes=!1;b&&this.RecalculateTimes()}};a.ActivitiesCollection.prototype.UpdateProgressPercent=function(){if(null!=this._parent&&!1!=this._model.AutoCalculateSummaryTaskTimes_M())if(0==this.length)this.ProgressPercent_M(0);else{var a=this._model.CustomProgressCalculation_M();if(null!=a)this.ProgressPercent_M(a(this._parent));else{for(var b=a=0;b<this.length;b++)a+=this[b].ProgressPercent_M();this.ProgressPercent_M(a/
this.length)}}};a.ActivitiesCollection.prototype.UpdateProgressPercentForChild=function(a,b){var c=this._model.CustomProgressCalculation_M();null!=c&&null!=this._parent?this.ProgressPercent_M(c(this._parent)):b?(c=this.ProgressPercent_M()*(this.length-1),c+=a.ProgressPercent_M(),this.ProgressPercent_M(c/this.length)):0==this.length?this.ProgressPercent_M(0):(c=this.ProgressPercent_M()*(this.length+1),c-=a.ProgressPercent_M(),this.ProgressPercent_M(c/this.length))};a.ActivitiesCollection.prototype.activity_AdjustStartTimeForConstraints=
function(a,b){this.OnAdjustStartTimeForConstraints(b)};a.ActivitiesCollection.prototype.activity_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};a.ActivitiesCollection.prototype.RecalculateTimes=function(){if(!1!=this._model.autoCalculateSummaryTaskTimes){this.isRecalculatingTimes=!0;if(0<this.length){for(var a=Date.MaxValue,b=Date.MinValue,c=Date.MaxValue,d=0;d<this.length;d++){var e=this[d];e._startTime<a&&(a=e._startTime);var p=e.PreferredStartTime_M();p<c&&(c=p);e=e.EndTime_M();
e>b&&(b=e)}d=new RadiantQ.Gantt.Utils.DelayUpdates;this.StartTime_M(a);this.EndTime_M(b);this.PreferredStartTime_M(c);d.Dispose()}this.isRecalculatingTimes=!1}};a.BaseActivity=function(b){this.processingPredString=!1;this.isBaseActivity=!0;RadiantQ.Gantt.Model.IActivity.call(this);this.Model=b;this._assignments=new a.ResourceAssignmentCollection(this);this.propertiesDict=null;0==arguments.length&&(RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0);this.OnTimesChanged=function(){this.cachedEndTime=
null;this.UpdateIsMileStone()};this.cachedEndTime=null;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled=!0;this.CreateChildActivitiesCollection||(a.BaseActivity.prototype.CreateChildActivitiesCollection=function(){return new a.ActivitiesCollection(this,this.Model)});this._childActivities=this.CreateChildActivitiesCollection();this.PartialUpdate=function(a){"AssignmentsCollectionChanged"==a?(this.OnPropertyChanged("Assignments"),
this.OnPropertyChanged("EndTime")):this.TotalUpdate()};this.TotalUpdate=function(){var a=this.ChildActivities_M();if(0<a.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){var b=this.StartTime_M(),c=this.EndTime_M(),d=a.StartTime_M(),e=a.EndTime_M();this.StartTime_M(d);!1==a.PreferredStartTime_M().equals(Date.MinValue)&&this.PreferredStartTime_M(a.PreferredStartTime_M());!0==a.isRecalculatingTimes&&!1==b.equals(d)&&!1==c.equals(Date.MinValue)&&c.equals(e)?this.UpdateEndTime(c):this.EndTime_M(e)}};
this._defWbsID=this._wbsID="";this._isAutoWBSID=!0;b&&(this.Model=b,a.BaseGanttModel.IdCounter++,this.propertiesDict=[],this._childActivities=this.CreateChildActivitiesCollection(),this._childActivities.PropertyChanged.subscribe(this.childActivities_PropertyChanged,this),this._childActivities.CollectionChanged.subscribe(this.childActivities_CollectionChanged,this),this._childActivities.ChildCollectionChanged.subscribe(this.childActivities_ChildCollectionChanged,this),this._childActivities.AdjustStartTimeForConstraints.subscribe(this._childActivities_AdjustStartTimeForConstraints,
this),this._assignments.CollectionChanged.subscribe(this._assignments_CollectionChanged,this),this._assignments.PropertyChanged.subscribe(this.Assignments_PropertyChanged,this),this._startTime=b.AdjustStartTimeWithEffort(Date.today(),new RQTimeSpan(1,0,0,0,0)),this._prefStartTime=this.GetDefaultStartTime());return this};a.BaseActivity.prototype=new RadiantQ.Gantt.Model.IActivity;a.BaseActivity.prototype.UpdateIsMileStone=function(){this.StartTime_M().equals(this.EndTime_M())?this.IsMilestone_M(!0):
this.IsMilestone_M(!1)};a.BaseActivity.prototype.Dispose=function(){this._childActivities.PropertyChanged.unsubscribe(this.childActivities_PropertyChanged,this);this._childActivities.CollectionChanged.unsubscribe(this.childActivities_CollectionChanged,this);this._childActivities.ChildCollectionChanged.unsubscribe(this.childActivities_ChildCollectionChanged,this);this._childActivities.AdjustStartTimeForConstraints.unsubscribe(this._childActivities_AdjustStartTimeForConstraints,this);this._childActivities.Dispose();
this._childActivities=null;this._assignments.CollectionChanged.unsubscribe(this._assignments_CollectionChanged,this);this._assignments.PropertyChanged.unsubscribe(this.Assignments_PropertyChanged,this);this._assignments=null};a.BaseActivity.prototype.IsParentExpanded_M=function(){var a=this.Parent_M();return null==a?!0:a.IsExpanded_M()};a.BaseActivity.prototype.IsParentVisible_M=function(){var a=this.Parent_M();return null==a?!0:a.IsVisible_M()};a.BaseActivity.prototype.StartTime_M=function(b){if(0==
arguments.length)return this._startTime;if(!this._startTime.equals(b)){var c=new a.AdjustStartTimeEventArgs(this,b);this.OnAdjustStartTimeForConstraints(c);b=c.StartTime;c=this.Model.AdjustStartTime(this,b);if(this._startTime.equals(c))b!=c&&this.OnPropertyChanged("StartTime",b);else{this._startTime=c.clone();var d=new RadiantQ.Gantt.Utils.DelayUpdates;this.OnPropertyChanged("EndTime");this.OnPropertyChanged("StartTime",c);d.Dispose()}}};a.BaseActivity.prototype.EndTime_M=function(a){if(0==arguments.length)return RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled?
(null==this.cachedEndTime&&(this.cachedEndTime=this.Model.ComputeEndTime(this)),this.cachedEndTime):this.Model.ComputeEndTime(this);var b=this.EndTime_M();b&&a&&b.equals(a)||(null===a?this.cachedEndTime=a:0<=a.compareTo(this.StartTime_M())&&this.UpdateEndTime(a))};a.BaseActivity.prototype.Effort_M=function(a){if(0==arguments.length)return this._effort?this._effort:RQTimeSpan.ZeroM();"string"==typeof a&&(a=RQTimeSpan.parse(a));if(!1==this._effort.equals(a)){var b=this._effort,c=this.CumulativeEffort_M(),
d=this.Model.AdjustEffort(this,a);this._effort=d;this._isUpdating=!0;this.OnPropertyChanged("Effort",b,d);this.OnPropertyChanged("Duration");this._isUpdating=!1;this.OnPropertyChanged("EndTime");this.OnPropertyChanged("CumulativeEffort",c,d)}};a.BaseActivity.prototype.Duration_M=function(a){if(0==arguments.length)return this.Model.ComputeDuration(this);this.DurationM()!=a&&this.Effort_M(this.Model.ConvertDurationToEffort(a,this))};a.BaseActivity.prototype.Properties_M=function(){return this.propertiesDict};
a.BaseActivity.prototype.Assignments_M=function(a){if(0==arguments.length)return this._assignments;this._assignments=a};a.BaseActivity.prototype.ChildActivities_M=function(){return this._childActivities};a.BaseActivity.prototype.WBSID_M=function(a){if(0==arguments.length)return this.IsAutoWBSID_M()?this._defWbsID:this._wbsID;this.IsAutoWBSID_M(null==a||void 0==a||""==a);this._wbsID!=a&&(this._wbsID=a,this.OnPropertyChanged("WBSID"))};a.BaseActivity.prototype.DefaultWBSID_M=function(a){if(0==arguments.length)return this._defWbsID;
this._defWbsID!=a&&(this._defWbsID=a,this.OnPropertyChanged("DefaultWBSID"),this.IsAutoWBSID_M()&&this.OnPropertyChanged("WBSID"))};a.BaseActivity.prototype.IsAutoWBSID_M=function(a){if(0==arguments.length)return this._isAutoWBSID;this._isAutoWBSID!=a&&(this._isAutoWBSID=a,this.OnPropertyChanged("IsAutoWBSID"))};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.BaseActivity.prototype,"IsParentExpanded",{get:function(){return null==this.Parent_M()?!0:this.Parent_M().IsExpanded_M()},set:function(){},
enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"IsParentVisible",{get:function(){return null==this.Parent_M()?!0:this.Parent_M().IsVisible_M()},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"StartTime",{get:function(){return this._startTime},set:function(b){if(!this._startTime.equals(b)){var c=new a.AdjustStartTimeEventArgs(this,b);this.OnAdjustStartTimeForConstraints(c);b=c.StartTime;c=this.Model.AdjustStartTime(this,
b);this._startTime.equals(c)?b!=c&&this.OnPropertyChanged("StartTime",b):(this._startTime=c.clone(),b=new RadiantQ.Gantt.Utils.DelayUpdates,this.OnPropertyChanged("EndTime"),this.OnPropertyChanged("StartTime",c),b.Dispose())}},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"EndTime",{get:function(){return RadiantQ.Gantt.Model.BaseActivity.IsEndTimeCachingEnabled?(null==this.cachedEndTime&&(this.cachedEndTime=this.Model.ComputeEndTime(this)),this.cachedEndTime):this._model.ComputeEndTime(this)},
set:function(a){this.EndTime_M()&&a&&this.EndTime_M().equals(a)||(null===a?this.cachedEndTime=a:0<=a.compareTo(this.StartTime_M())&&this.UpdateEndTime(a))},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"Effort",{get:function(){return this._effort?this._effort:RQTimeSpan.Zero_M()},set:function(a){"string"==typeof a&&(a=RQTimeSpan.parse(a));if(!1==this._effort.equals(a)){var b=this._effort,c=this.CumulativeEffort_M();this._effort=a=this.Model.AdjustEffort(this,a);this._isUpdating=
!0;this.OnPropertyChanged("Effort",b,a);this.OnPropertyChanged("Duration");this._isUpdating=!1;this.OnPropertyChanged("EndTime");this.OnPropertyChanged("CumulativeEffort",c,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"Duration",{get:function(){return this.Model.ComputeDuration(this)},set:function(a){this.Duration!=a&&(this.Effort=this.Model.ConvertDurationToEffort(a,this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"Properties",
{get:function(){return this.propertiesDict},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"Assignments",{get:function(){return this._assignments},set:function(a){this._assignments=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"ChildActivities",{get:function(){return this._childActivities},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"WBSID",{get:function(){return this.IsAutoWBSID_M()?
this._defWbsID:this._wbsID},set:function(a){this.IsAutoWBSID_M(null==a||void 0==a||""==a);this._wbsID!=a&&(this._wbsID=a,this.OnPropertyChanged("WBSID"))},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,"DefaultWBSID",{get:function(){return this._defWbsID},set:function(a){this._defWbsID!=a&&(this._defWbsID=a,this.OnPropertyChanged("DefaultWBSID"),this.IsAutoWBSID_M()&&this.OnPropertyChanged("WBSID"))},enumerable:!0,configurable:!0}),Object.defineProperty(a.BaseActivity.prototype,
"IsAutoWBSID",{get:function(){return this._isAutoWBSID},set:function(a){this._isAutoWBSID!=a&&(this._isAutoWBSID=a,this.OnPropertyChanged("IsAutoWBSID"))},enumerable:!0,configurable:!0}));a.BaseActivity.prototype.UpdateEndTime=function(a){this.cachedEndTime=null;var b=this.Model.ComputeEffort(this,a);!1==this.Effort_M().equals(b)?this.Effort_M(b):this.OnPropertyChanged("EndTime",a)};a.BaseActivity.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this,
null)};a.BaseActivity.prototype.AdjustFinishForLag=function(a,b,c){if(null==c)return a.addTimeSpan(b);a=b.isGreaterThanOrEqualTo(RQTimeSpan.Zero_M())?(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToNextWorkingTimeIntervals(a,b))).Finish:(new RadiantQ.Gantt.TimePeriodCollection(c.ConvertToPreviousWorkingTimeIntervals(a,new RQTimeSpan(-b.totalMilliseconds_M())))).Finish;return c.ConvertToNextWorkingTime(a)};a.BaseActivity.prototype._childActivities_AdjustStartTimeForConstraints=function(a,b){this.OnAdjustStartTimeForConstraints(b)};
a.BaseActivity.prototype.childActivities_ChildCollectionChanged=function(a,b){this.OnChildCollectionChanged(a,b)};a.BaseActivity.prototype.childActivities_CollectionChanged=function(a,b){this.OnChildCollectionChanged(this,b);var c=this.ChildActivities_M();"remove"==b.type&&0==c.length?this.Model.ApplyPreferredStartTimeOnActivity(this,this.PreferredStartTime_M()):"insert"==b.type&&1==c.length&&this.OnPropertyChanged("CumulativeEffort",this.Effort_M())};a.BaseActivity.prototype.childActivities_PropertyChanged=
function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Effort"==b.PropertyName?this.Model.AutoCalculateSummaryTaskTimes_M()&&RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,null):"ProgressPercent"==b.PropertyName?this.ProgressPercent_M(this.ChildActivities_M().ProgressPercent_M()):"CumulativeEffort"==b.PropertyName&&this.CumulativeEffort_M(this.ChildActivities_M().CumulativeEffort_M())};a.BaseActivity.prototype.OnChildCollectionChanged=function(a,b){null!=this.ChildCollectionChanged&&
this.ChildCollectionChanged.raise(a,b)};a.BaseActivity.prototype.OnPropertyChanged=function(a,b){if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a||"IsMilestone"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b);"Assignments"==a&&this.OnPropertyChanged("EndTime");null!=this.PropertyChanged&&this.PropertyChanged.raise(_baseActivity,a,b)};a.BaseActivity.prototype.Assignments_PropertyChanged=function(a,b){"ResourceInfo"==b.PropertyName&&this.OnPropertyChanged("Assignments")};
a.BaseActivity.prototype._assignments_CollectionChanged=function(a,b){null==b.NewItems&&null==b.OldItems&&b.Action!=RadiantQ.Gantt.NotifyCollectionChangedAction.Reset||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this,"AssignmentsCollectionChanged")};a.BaseActivity.prototype.dependency_PropertyChanged=function(a,b){this.UpdatePredecessorString()};a.BaseActivity.prototype.processingPredString=!1;a.BaseActivity.prototype.UpdatePredecessorString=function(){if(this.Model&&!0!=this.processingPredString){var b=
this.Model.Dependencies_M().GetPredecessors(this),b=a.DataBoundGanttModel.ConstructPredecessorString(b,this.Model.LagStringUnitsInHours_M());this.PredecessorIndexString_M(b)}};a.BaseActivity.prototype.OnPropertyChanged=function(a,b,c){if(!1==this.Model._onInit)switch(a){case "Times":case "StartTime":case "EndTime":case "PreferredStartTime":case "Effort":case "Parent":case "PredecessorIndexString":case "ProgressPercent":case "ID":case "ActivityName":case "SortOrder":case "Description":case "Assignments":this._propertyChangeTimer&&
clearTimeout(this._propertyChangeTimer),this._propertyChangeTimer=setTimeout(function(){var b=this.Parent_M(),b=b?b:this.Model._activities;this.Model.ActivityUpdated.raise(b._childActivities,this);this.triggerEvent&&this.triggerEvent(a)}.bind(this),0)}if("EndTime"==a||"StartTime"==a||"Effort"==a||"Duration"==a||"Assignments"==a)this.OnTimesChanged(),this.OnPropertyChanged("Times",b,c);"Assignments"==a&&this.OnPropertyChanged("EndTime");this.PropertyChanged&&0<this.PropertyChanged.fn.length&&this.PropertyChanged.raise(this,
{PropertyName:a,OldValue:b,value:c})};a.BaseActivity.prototype.ComputeConstrainedStartTime=function(){var b=new a.AdjustStartTimeEventArgs(this,this.StartTime_M());this.OnAdjustStartTimeForConstraints(b);return b.StartTime};a.BaseActivity.prototype.OnAdjustStartTimeForConstraints=function(b){if(!1!=this.Model.EnforceDependencyConstraints_M()&&!1!=a.BaseGanttModel.ShouldEnforceDependency(this,this.Model)){for(var c=b.StartTime,d=0<this.Model.Dependencies_M().length?this.Model.Dependencies_M().GetPredecessors(this):
[],e=0;e<d.length;e++){var l=d[e];l.FromActivity_M()!=this&&(l=l.ComputeLatestToActivityStartTime(),l>c&&(c=l))}b.StartTime=c;null!=this.AdjustStartTimeForConstraints&&this.AdjustStartTimeForConstraints.raise(this,b)}};a.BaseActivity.prototype.GetDefaultStartTime=function(){return Date.today()};a.BaseActivity.prototype.CreateNewChildActivity=function(a){};a.BaseActivity.prototype.IsCritical=function(a,c,d){if(null!=this.Model){var e=this.Model.AllActivities_M().asArray,l=this.Model.WorkTimeSchedule_M(),
p=null==l?this.EndTime_M().addTimeSpan(c):(new RadiantQ.Gantt.TimePeriodCollection(l.ConvertToNextWorkingTimeIntervals(this.EndTime_M(),c))).Finish;if(p>=a||null!=d&&d.ContainsKey(this)&&p>=d[this])return!0;if(0==this.ChildActivities_M().length)for(var m=this;null!=m;m=m.Parent_M())for(var q=0;q<e.length;q++){var n=e[q];if(m!=n)for(var r=this.Model.Dependencies_M().GetPredecessors(n),t=0;t<r.length;t++){var s=r[t];if(s.FromActivity_M()==m&&(s.Type_M()==b.FinishToStart||s.Type_M()==b.StartToStart)&&
this.AdjustFinishForLag(p,s.Lag_M(),l)>=n.StartTime_M()&&n.IsCritical(a,c,d))return!0}}else for(e=this.ChildActivities_M(),q=0;q<e.length;q++)if(e[q].IsCritical(a,c,d))return!0}return!1};a.BaseActivity.prototype.GetWorkingHoursTimeSpan=function(){var a=this.Effort_M();0<this.Assignments_M().length&&null!=this.Model.WorkTimeSchedule_M()&&(a=this.Model.WorkTimeSchedule_M().GetEffort(this.StartTime_M(),this.EndTime_M()));return a};a.BaseActivity.prototype.OnAddedPredecessorDependency=function(a){a.ToActivity_M()==
this&&(a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this),this.UpdatePredecessorString())};a.BaseActivity.prototype.OnRemovedPredecessorDependency=function(a){a.PropertyChanged.unsubscribe(this.dependency_PropertyChanged,this);this.UpdatePredecessorString()};a.BaseActivity.prototype.ShiftForwardTo=function(a){var b=this.StartTime_M();if(!b.equals(Date.MinValue)&&b>a)throw new Exception("Shifting activity and children backward is not allowed in BaseActivity.ShiftForwardTo.");b=this.ChildActivities_M();
if(0<b.length&&this.Model.AutoCalculateSummaryTaskTimes_M()){for(var c=new RadiantQ.Gantt.Utils.DelayUpdates,d=0;d<b.length;d++){var e=b[d];e.StartTime_M()<a&&e.ShiftForwardTo(a)}c.Dispose()}else this.Model&&(a=this.Model.ConvertToValidStartTime(a,RQTimeSpan.Zero_M(),this.Effort_M()),this.StartTime_M(a))};a.BaseActivity.prototype.toString=function(){return this.ID_M()+"; "+this.ActivityName_M()+"; "+this.StartTime_M().Date()+"/"+(this.Effort_M()?this.Effort_M().hours_M():void 0)+"hrs; ChildCount: "+
this.ChildActivities_M().length+" "};a.BaseGanttResource=function(){this.BaseGanttResource=!0;this.base=a.IGanttResource;this.base();return this};a.BaseGanttResource.prototype=new a.IGanttResource;a.BaseGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};a.BaseGanttResource.prototype.toString=function(){return this.ResourceName_M()};a.BaseGanttResource.prototype.Dispose=function(){};a.ResourceAssignment=function(a,b){this.ResourceAssignment=
!0;this._allocUnits=0;b||(b=100);this._allocUnits=b;a&&(this._resource=a,this._allocUnits=1E5>b?this._allocUnits:1E5);return this};a.ResourceAssignment.prototype.Resource_M=function(){return this._resource};a.ResourceAssignment.prototype.AllocationUnits_M=function(){return this._allocUnits};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ResourceAssignment.prototype,"Resource",{get:function(){return this._resource},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.ResourceAssignment.prototype,
"AllocationUnits",{get:function(){return this._allocUnits},set:function(){},enumerable:!0,configurable:!0}));a.ResourceAssignmentCollection=function(a){this.base=Array;this.base();this.parentActivity=a;this.CollectionChanged=new ObjectEvent("CollectionChanged");this.PropertyChanged=new ObjectEvent("PropertyChanged");this.schedules=[];return this};a.ResourceAssignmentCollection.prototype=[];a.ResourceAssignmentCollection.prototype.ParentActivity_M=function(){return this.parentActivity};RadiantQ.CanUseDefineProperty&&
Object.defineProperty(a.ResourceAssignmentCollection.prototype,"ParentActivity",{get:function(){return this.parentActivity},set:function(){},enumerable:!0,configurable:!0});a.ResourceAssignmentCollection.prototype.add=function(a){if(a){var b=a.Resource_M().Schedule_M();b&&this.schedules.push(b);this.push(a);this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a))}};a.ResourceAssignmentCollection.prototype.remove=function(a){var b=this.indexOf(a);if(!(0>b)){var c=
a.Resource_M().Schedule_M();if(c){c=this.schedules.indexOf(c);if(0>c)return;this.schedules.splice(c,1)}this.splice(b,1);this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null))}};a.ResourceAssignmentCollection.prototype.clear=function(){0!=this.length&&(this.splice(0,this.length),this.OnCollectionChanged(this,new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,null)))};a.ResourceAssignmentCollection.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===
a)return b;return-1};a.ResourceAssignmentCollection.prototype.ContainsResource=function(a){return null!=this.GetAssignmentForResource(a)?!0:!1};a.ResourceAssignmentCollection.prototype.GetAssignmentForResource=function(a){for(var b=0;b<this.length;b++){var c=this[b],d=c.Resource_M();if(d==a||d._boundObj==a)return c}return null};a.ResourceAssignmentCollection.prototype.OnCollectionChanged=function(a,b){if(null!=b.NewItems)for(var c=0;c<b.NewItems.length;c++){var d=b.NewItems[c];d.Resource_M().PropertyChanged.subscribe(this.Resource_PropertyChanged,
this)}if(null!=b.OldItems)for(c=0;c<b.OldItems.length;c++)d=b.OldItems[c],d.Resource_M().PropertyChanged.unsubscribe(this.Resource_PropertyChanged,this);this.CollectionChanged.raise(a,b)};a.ResourceAssignmentCollection.prototype.Resource_PropertyChanged=function(a,b){this.OnPropertyChanged("ResourceInfo")};a.GanttResourcesCollection=function(){this.CollectionChanged=new ObjectEvent("CollectionChanged");Array.call(this);this._resByID=new RadiantQ.Gantt.Dictionary;this._resByName=new RadiantQ.Gantt.Dictionary;
this.getResourceByID=function(a){return this._resByID[a]};return this};a.GanttResourcesCollection.prototype=[];a.GanttResourcesCollection.prototype.ClearItems=function(){0!=this.length&&(this.splice(0,this.length),this._resByID=new RadiantQ.Gantt.Dictionary,this._resByName=new RadiantQ.Gantt.Dictionary)};a.GanttResourcesCollection.prototype.OnCollectionChanged=function(a){if(null!=a.OldItems)for(var b=0;b<a.OldItems.length;b++){var c=a.OldItems[b];this._resByID.Remove(c.ResourceID_M());var d=c.ResourceName_M();
!1==(""==d||null==d)&&this._resByName.Remove(c.ResourceName_M());c.Dispose()}if(null!=a.NewItems)for(b=0;b<a.NewItems.length;b++)c=a.NewItems[b],this._resByID.Add(c.ResourceID_M(),c),!1==(""==d||null==d)&&this._resByName.Add(c.ResourceName_M(),c)};a.GanttResourcesCollection.prototype.SetItem=function(a,b){if(a>this.length)alert("Can't add the item to the "+a+"index which is greater than the length");else if(-1!=a){var c=this[a],d=c.ResourceName_M();this._resByID.Remove(c.ResourceID_M());!1==(""==
d||null==d)&&this._resByName.Remove(d);c.Dispose();this.splice(a,1,b);c=b.ResourceName_M();this._resByID[b.ResourceID_M()]=b;!1==(""==c||null==c)&&(this._resByName[c]=b)}};a.GanttResourcesCollection.prototype.Add=function(a){var b=a.ResourceID_M();if(this._resByID[b]){var c=this.indexOf(a);this.splice(c,0,a)}else this.push(a);this._resByID[b]=a;this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(null,a))};a.GanttResourcesCollection.prototype.Remove=function(a){var b=this.indexOf(a);
-1!=b&&(this.splice(b,1),delete this._resByID[a.ResourceID_M()],this.OnCollectionChanged(new RadiantQ.Gantt.NotifyCollectionChangedEventArgs(a,null)))};a.GanttResourcesCollection.prototype.GetResourceByName=function(a){return this._resByName.Contains(a)?this._resByName[a]:null};a.AdjustStartTimeEventArgs=function(a,b){this.StartTime=this.Activity=null;a&&b&&(this.Activity=a,this.StartTime=b);return this};a.ActivityEventHandler=function(a,b){};a.ActivityEventArgs=function(a){a&&(this._activity=a);
return this};a.ActivityEventArgs.prototype.Activity_M=function(){return this._activity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.ActivityEventArgs.prototype,"Activity",{get:function(){return this._activity},set:function(){},enumerable:!0,configurable:!0});a.NewActivityAddedEventArgs=function(a,b,c){a&&(this._activity=a,this._parent=b,this._childIndex=c);return this};a.NewActivityAddedEventArgs.prototype.NewActivity_M=function(){return this._activity};a.NewActivityAddedEventArgs.prototype.Parent_M=
function(){return this._parent};a.NewActivityAddedEventArgs.prototype.ChildIndex_M=function(){return this._childIndex};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.NewActivityAddedEventArgs.prototype,"NewActivity",{get:function(){return this._activity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.NewActivityAddedEventArgs.prototype,"Parent",{get:function(){return this._parent},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.NewActivityAddedEventArgs.prototype,
"ChildIndex",{get:function(){return this._childIndex},set:function(){},enumerable:!0,configurable:!0}));a.BeforeStartTimeChangingEventArgs=function(a,b){this.NewStartTime=null;a&&b&&(this.Activity=a,this.NewStartTime=b);return this};a.BeforeEffortChangingEventArgs=function(a,b){this.NewEffort=null;a&&b&&(this.Activity=a,this.NewEffort=b);return this};a.ResourceAssignmentTracker=function(a){this.activitiesByResources=new RadiantQ.Gantt.Dictionary;this.OnActivityAdded=function(a){a.PropertyChanged.subscribe(this.activity_PropertyChanged,
this);for(var b=a.Assignments_M(),c=0;c<b.length;c++){var d=this.GetResourceActivityList(b[c].Resource_M()._boundObj);$.observable(d).insert(a)}};if(a){this.Model=a;a.NewActivityAdded.subscribe(this.model_NewActivityAdded,this);a.ActivityRemoved.subscribe(this.model_ActivityRemoved,this);a=a.AllActivities_M();for(var b=0;b<a.length;b++){var c=a.GetItemByIndex(b);this.OnActivityAdded(c)}}};a.ResourceAssignmentTracker.prototype.model_ActivityRemoved=function(a,b){this.ProcessActivityRemovedRecursively(b)};
a.ResourceAssignmentTracker.prototype.model_NewActivityAdded=function(a,b){this.OnActivityAdded(b.NewActivity_M())};a.ResourceAssignmentTracker.prototype.GetResourceActivityList=function(a){var b=this.activitiesByResources.GetItemByKey(a);b||(b=[],this.activitiesByResources.Add(a,b));return b};a.ResourceAssignmentTracker.prototype.activity_PropertyChanged=function(a,b){"Assignments"==b.PropertyName&&(this.OnActivityRemoved(a),this.OnActivityAdded(a))};a.ResourceAssignmentTracker.prototype.ProcessActivityRemovedRecursively=
function(a){if(a){this.OnActivityRemoved(a);a=a.ChildActivities_M();for(var b=0;b<a.length;b++)this.ProcessActivityRemovedRecursively(a[b])}};a.ResourceAssignmentTracker.prototype.OnActivityRemoved=function(a){for(var b=this.Model.GanttResources_M(),c=0;c<b.length;c++){var d=this.GetResourceActivityList(b[c]._boundObj),e=d.indexOf(a);-1!=e&&($.observable(d).remove(e,1),a.PropertyChanged.unsubscribe(this.activity_PropertyChanged,this))}};a.ResourceToActivitiesListConverter=function(){this.Model=null;
this.Convert=function(a,b,c,d){if(null==this.Model)throw Error("ResourceToActivitiesListConverter's Convert is called before setting it's Model property.");if(null==a)throw Error("value passed to ResourceToActivitiesListConverter's Convert method must be of type IGanttResource.");return this.Model.GetResourceActivityList(a)}};a.PropertyChangedWithOldValueEventArgs=function(a,b){b&&(this._oldValue=b);return this};a.PropertyChangedWithOldValueEventArgs.prototype.OldValue=function(){return this._oldValue};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.PropertyChangedWithOldValueEventArgs.prototype,"OldValue",{get:function(){return this._oldValue},set:function(){},enumerable:!0,configurable:!0});a.NewDependencyAddScenarioType={None:"None",UserDragOver:"UserDragOver",UserDragDrop:"UserDragDrop",UserGridEdit:"UserGridEdit"}})();
(function(){function a(a,b){this.ResourceText=a;this._assignments=new RadiantQ.Gantt.Model.ResourceAssignmentCollection(null);this.ConvertBack=!1;b&&(this.ConvertBack=b);return this}function b(a){this._dict=new RadiantQ.Gantt.Dictionary;this._cachedItem={};this.last=this.first=null;if(a){this._deps=a;for(var b=0;b<a.length;b++)this.ProcessDependency(a[b])}this.GetEnumerator=function(){return new d(this)};return this}function c(a){this.Next=this.Previous=null;this.Activity=a;this._index=-1;return this}
function d(a){this._list=a;this.current=null;return this}var e=RadiantQ.Gantt,f=RadiantQ.Gantt.Model,g=RadiantQ.Gantt.Utils.ValueBinder;f.DataBoundGanttModel=function(a,c,d,p,m,q,n,r,t,s,u,w,v,x,y,z,B,A,H,C,E,I,F,J,K,R,S,T,U,V,N,W){if(!a)return null;this.CreateActivitiesCollection=function(){return new f.DataBoundActivitiesCollection(null,this)};f.BaseGanttModel.prototype.CreateActivitiesCollection=this.CreateActivitiesCollection;this.base=f.BaseGanttModel;this.base(S,T,U);this._boundColl=a;this.canInsertPropertyChangeTriggeringPropertiesInData=
!1;this.ScheduleFrom=this.ProjectEndDate=this.ProjectStartDate=this._resAssgnStringConverter=null;this._onInit=!0;this.ProcessPredecessorString=f.DataBoundGanttModel.ProcessPredecessorString;this.ActivityUpdated=new ObjectEvent("ActivityUpdated");this.canInsertPropertyChangeTriggeringPropertiesInData=V?!0:!1;this.ScheduleFrom=p;this.ProjectStartDate=c;this.ProjectEndDate=d;this.ValidateDependencySetting_M(m);this.EnforceDependencyConstraints_M(q);this.AutoCalculateSummaryTaskTimes_M(n);this._customProgressCalculation=
R;this.AutoExpandNodes=N;this._resAssgnStringConverter=W;RadiantQ.Gantt.WorkTimeSchedule._cachedStdWorkingTimes=new e.WorkTimeSchedule.CachedContWorkingTimes;RadiantQ.Gantt.WorkTimeSchedule._continuousSchedule=null;RadiantQ.Gantt.WorkTimeSchedule.cachedContWorkingTimes=new e.WorkTimeSchedule.CachedContWorkingTimes;this._resList=C;this.AdjustDurationOnAssignment_M(r);this.LagStringUnitsInHours_M(t);this.parentActivities=[];a=null;c=0;this.IDBinding=s;this.NameBinding=w;this.SortOrderBinding=u;this.IndentLevelBinding=
v;this.StartTimeBinding=x;this.PrefStartTimeBinding=y;this.EffortBinding=z;this.PredecessorBinding=B;this.ProgressPercentBinding=A;this.DescBinding=H;this.ResourceNameBinding=E;this.ResourceIDBinding=I;this.ResourceScheduleBinding=F;this.AssignedResourcesBinding=J;this.WBSIDBinding=K;this.DataBoundActivities_M().ConvertResourceListFromResourceString.subscribe(this.DataBoundGanttModel_ConvertResourceListFromResourceString,this);s=[];u=new RadiantQ.Gantt.Utils.DelayUpdates;try{f.DataBoundGanttModel.IsBuildingModel=
!0;if(null!=this._resList)for(var X=this.GanttResources_M(),D=0;D<this._resList.length;D++)X.Add(new f.DataBoundGanttResource(this._resList[D],E,I,F));for(D=0;D<this._boundColl.length;D++){var L=this._boundColl[D];L[v.Property]||(L[v.Property]=0);var M=(new g(L,v,null,RadiantQ.Gantt.BindingMode.TwoWay,this))._value;if(0>M)throw new NotSupportedException("Specified Indent is < 0 and not supported.");var G=this.CreateNewDataBoundActivity(L,N);G.TransferIDFromBoundToSelf();G.TransferWBSFromBoundToSelf();
if(0==M||null==a)this._activities.add(G),a=G,c=0,this.parentActivities=[];else if(M>c)a.ChildActivities_M().add(G),this.parentActivities.push(a),a=G,c++;else{E=c-M;for(I=1;I<=E;I++)this.parentActivities.pop();this.parentActivities[this.parentActivities.length-1].ChildActivities_M().add(G);a=G;c-=E}G.TransferDataFromBoundToSelf();G.PredecessorIndexString_M()&&s.push(G)}this.Activities_M().UpdateChildWBSIDs()}catch(O){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+
O),Error(O);}finally{f.DataBoundGanttModel.IsBuildingModel=!1}u.Dispose();v=new RadiantQ.Gantt.Utils.DelayUpdates;try{f.DataBoundGanttModel.IsBuildingModel=!0;for(D=0;D<s.length;D++)this.ProcessPredecessorsAndAddDependencies(s[D]);if(!0==this.EnforceDependencyConstraints_M())for(var P=new b(this.Dependencies_M()),D=0;D<P.length_M();D++){var Y=P.GetItemByIndex(D);this.ApplyDependencyConstraints(Y.Activity)}}catch(Q){throw window.console&&window.console.error&&window.console.error("DataBoundGanttModel constructor throws "+
Q),Error(Q);}finally{f.DataBoundGanttModel.IsBuildingModel=!1}v.Dispose();this._onInit=!1;return this};f.DataBoundGanttModel.IsBuildingModel=!1;f.DataBoundGanttModel.prototype=new f.BaseGanttModel;f.DataBoundGanttModel.prototype.BoundCollAsList_M=function(){return this._boundColl};f.DataBoundGanttModel.prototype.DataBoundActivities_M=function(){return this.Activities_M()};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.DataBoundGanttModel.prototype,"BoundCollAsList",{get:function(){return this._boundColl},
set:function(){},enumerable:!0,configurable:!1}),Object.defineProperty(f.DataBoundGanttModel.prototype,"DataBoundActivities",{get:function(){return this.Activities},set:function(){},enumerable:!0,configurable:!0}));f.DataBoundGanttModel.prototype.ApplyDependencyConstraints=function(a){if(a=this.Dependencies_M()._predsByActivity[a.ID_M()])for(var b=0;b<a.length;b++)a[b].EnsureActivityOrder()};f.DataBoundGanttModel.prototype.CreateNewDataBoundActivity=function(a,b){return new f.DataBoundActivity(this,
a,this.IDBinding,this.SortOrderBinding,this.NameBinding,this.IndentLevelBinding,this.StartTimeBinding,this.PrefStartTimeBinding,this.EffortBinding,this.PredecessorBinding,this.ProgressPercentBinding,this.DescBinding,this.AssignedResourcesBinding,this.WBSIDBinding,this.AutoExpandNodes)};f.DataBoundGanttModel.prototype.DataBoundGanttModel_ConvertResourceListFromResourceString=function(a,b){var c=e.ValueConverters.ConverterUtils;if(!1==b.ConvertBack)if(null!=this._resAssgnStringConverter)this._resAssgnStringConverter.Convert(b,
null,this,null);else{var d=b.Assignments_M();d.clear();c.ConvertResourceTextToAssignments(b.ResourceText,this.GanttResources_M(),d)}else null!=this._resAssgnStringConverter?this._resAssgnStringConverter.ConvertBack(b,null,this,null):b.ResourceText=c.GetResourcesText(b.Assignments_M(),!0,!1)};f.DataBoundGanttModel.prototype.ProcessPredecessorsAndAddDependencies=function(a){var b=a.PredecessorIndexString_M();if(b){var c=[],d=[],e=[],f=this.ProcessPredecessorString(b,this.LagStringUnitsInHours_M(),c,
d,e,f);a.processingPredString=!0;for(b=0;b<c.length;b++)f=this.GetActivityById(c[b]),null!=f&&this.CanAddNewDependency(f,a)&&this.CreateNewDependencyInternal(f,a,d[b],e[b],!0);a.processingPredString=!1;a.UpdatePredecessorString()}};f.DataBoundGanttModel.prototype.ValidatePredecessorString=function(a,b,c){if(a){b=[];if(c=this.ProcessPredecessorString(a,b,[],[],c))return!1;for(a=0;a<b.Length;a++)if(null==this[b[a]])return!1}return!0};f.DataBoundGanttModel.ProcessPredecessorString=function(a,b,c,d,e,
g){g="";if(a){a=a.split(",");for(var n=0;n<a.length;n++){var r=a[n].trim();if(0!=r.length){var t=null,s=!0;-1!=r.indexOf("-")?(t=r.split("-"),s=!1):t=r.split("+");var r=-1,u=RadiantQ.Gantt.DependencyType.FinishToStart,w=RQTimeSpan.Zero_M(),v=t[0].trim(),r=parseInt(v),x=v.toLowerCase().search("s"),y=v.toLowerCase().search("f");if(0<x||0<y)if(2>v.length){g+="Unexpected string encountered: "+v+". (Valid examples: 10, 10SS, 5FS, etc.)";continue}else x=v.substring(v.length-2,v.length),v=v.substring(0,
v.length-2),r=parseInt(v),void 0==r||-1==r?(r=-1,g+=v+" is not a valid ID (number)."):void 0!=r&&-1!=r&&(y=f.DataBoundGanttModel.TryParse(x,u),u=y.Type,!1==y.status&&(g+=x+" is not a valid Dependency Type"));void 0!=r&&-1!=r?(1<t.length&&(w=0,w=parseFloat(t[1].trim()),!1==w&&(g+=t[1].trim()+" is not a valid lag string. Specify a valid number."),w=new RQTimeSpan(0,w*b,0,0,0),!1==s&&(w=w.getEqualNegative())),-1==c.indexOf(r)&&(c.push(r),d.push(u),e.push(w))):g+="Unexpected string encountered: "+v+". (Valid examples: 10, 10SS, 5FS, etc.)"}}}return g};
f.DataBoundGanttModel.ConstructPredecessorString=function(a,b){var c=RQTimeSpan.Zero_M(),d="";if(null!=a)for(var e=0;e<a.length;e++){var f=a[e],g=f.FromActivity_M().ID_M().toString();switch(f.Type_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:g+="FF";break;case RadiantQ.Gantt.DependencyType.StartToFinish:g+="SF";break;case RadiantQ.Gantt.DependencyType.StartToStart:g+="SS"}f=f.Lag_M();f>c?g+="+"+(f.getTotalHours()/b).toString():f<c&&(g+="-"+-(f.getTotalHours()/b).toString());d+=g;d+=","}return d?
d.slice(0,d.length-1):d};f.DataBoundGanttModel.TryParse=function(a,b){a=a.toLowerCase();switch(a){case "ss":return{Type:RadiantQ.Gantt.DependencyType.StartToStart,status:!0};case "sf":return{Type:RadiantQ.Gantt.DependencyType.StartToFinish,status:!0};case "fs":return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!0};case "ff":return{Type:RadiantQ.Gantt.DependencyType.FinishToFinish,status:!0}}return{Type:RadiantQ.Gantt.DependencyType.FinishToStart,status:!1}};f.DataBoundGanttModel.prototype.GetIndent=
function(a,b){return ModelExtensions.GetValue(a,b,new StringToIntConverter)};f.DataBoundGanttModel.prototype.CreateNewActivity=function(a,b){null==b&&(b=!0);if(b)if(null!=this._boundColl)a&&$.observable(this._boundColl).insert(this._boundColl.length,a);else throw new NotSupportedException("The bound ItemsSource should be of type IList to be able to add the new item into it.");var c=this.GetNewSortOrder(),d=this.CreateNewDataBoundActivity(a,this.AutoExpandNodes);d.TransferIDFromBoundToSelf();d.TransferWBSFromBoundToSelf();
this.Activities_M().add(d);this._isNewActInit=!0;d.TransferDataFromBoundToSelf();this._isNewActInit=!1;d.SortOrder_M(c);this.OnNewActivityAdded(new f.NewActivityAddedEventArgs(d,null,-1));this.ProcessPredecessorsAndAddDependencies(d);return d};f.DataBoundGanttModel.prototype.CreateNewDependency=function(a,b,c,d){a=f.BaseGanttModel.prototype.CreateNewDependency.call(this,a,b,c,d);b.OnAddedPredecessorDependency(a);return a};f.DataBoundActivitiesCollection=function(a,b){f.ActivitiesCollection.call(this,
a,b);this._model=b;this._parent=a;!1==this.isActivitiesCollection&&!1==this instanceof f.ActivitiesCollection&&f.ActivitiesCollection.call(this,a,b);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this.OnChildPropertyChanged=function(a,b){f.ActivitiesCollection.prototype.OnChildPropertyChanged.call(this,a,b);if("ID"==b.PropertyName){var c=this._idByActivity.GetItemByKey(a);c&&(this._activityByID.Remove(c),this._idByActivity.Remove(a));c=a.ID_M();
this._activityByID.Add(c,a);this._idByActivity.Add(a,c)}};this._indentLevel=0;return this};f.DataBoundActivitiesCollection.prototype=new f.ActivitiesCollection;f.DataBoundActivitiesCollection.prototype._activityByID=new RadiantQ.Gantt.Dictionary;f.DataBoundActivitiesCollection.prototype._idByActivity=new RadiantQ.Gantt.Dictionary;f.DataBoundActivitiesCollection.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;if(this._indentLevel!=a){this._indentLevel=a;this.OnPropertyChanged("IndentLevel");
for(var b=0;b<this.length;b++)this[b].IndentLevel_M(a)}};RadiantQ.CanUseDefineProperty&&Object.defineProperty(f.DataBoundActivitiesCollection.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){if(this._indentLevel!=a){this._indentLevel=a;this.OnPropertyChanged("IndentLevel");for(var b=0;b<this.length;b++)this[b].IndentLevel_M(a)}},enumerable:!0,configurable:!0});f.DataBoundActivitiesCollection.prototype.SubscribeToChildEvents=function(a){a.ConvertResourceListFromResourceString.subscribe(this.dbActivity_ConvertResourceListFromResourceString,
this);a.IndentLevel_M(this.IndentLevel_M());RadiantQ.Gantt.Model.ActivitiesCollection.prototype.SubscribeToChildEvents.call(this,a)};f.DataBoundActivitiesCollection.prototype.dbActivity_ConvertResourceListFromResourceString=function(a,b){this.OnConvertResourceListFromResourceString(b)};f.DataBoundActivitiesCollection.prototype.UnsubscribeToChildEvents=function(a){a.ConvertResourceListFromResourceString.unsubscribe(this.dbActivity_ConvertResourceListFromResourceString,this);f.ActivitiesCollection.prototype.UnsubscribeToChildEvents.call(this,
a)};f.DataBoundActivitiesCollection.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&this.ConvertResourceListFromResourceString.raise(this,a)};f.DataBoundActivitiesCollection.prototype.GetActivityById=function(a){return this._activityByID.GetItemByKey(a)};f.DataBoundActivitiesCollection.prototype.GetIdByActivity=function(a){a=this._idByActivity.GetItemByKey(a);return null==a||void 0==a?-1:a};f.DataBoundActivity=function(a,b,c,d,e,q,n,
r,t,s,u,w,v,x,y){this.CreateChildActivitiesCollection=function(){return new f.DataBoundActivitiesCollection(this,this.Model)};f.BaseActivity.call(this,a);this.ConvertResourceListFromResourceString=new ObjectEvent("ConvertResourceListFromResourceString");this._indentLevel=-1;this._isExpanded=y;this._isOverlapping=!1;a&&b&&(this._boundObject=b,this._boundProps={},this._ignoreSelfUpdates=this.IgnoreBDUpdates=!1,this._idBinder=new g(this._boundObject,c,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._nameBinder=
new g(this._boundObject,e,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._sortOrderBinder=new g(this._boundObject,d,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._indentBinder=new g(this._boundObject,q,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._startTimeBinder=new g(this._boundObject,n,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._prefStartTimeBinder=new g(this._boundObject,r,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._effortBinder=new g(this._boundObject,t,null,RadiantQ.Gantt.BindingMode.TwoWay,
a),this._predIndexBinder=new g(this._boundObject,s,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._progressPercentBinder=new g(this._boundObject,u,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._descBinder=new g(this._boundObject,w,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._assignedResourcesBinder=new g(this._boundObject,v,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._wbsIdBinder=new g(this._boundObject,x,null,RadiantQ.Gantt.BindingMode.TwoWay,a),this._idBinder.IsBound_M()&&(this._boundProps[this._idBinder._binding.Property]=
this._idBinder,this._idBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._nameBinder.IsBound_M()&&(this._boundProps[this._nameBinder._binding.Property]=this._nameBinder,this._nameBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._sortOrderBinder.IsBound_M()&&(this._boundProps[this._sortOrderBinder._binding.Property]=this._sortOrderBinder,this._sortOrderBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._indentBinder.IsBound_M()&&(this._boundProps[this._indentBinder._binding.Property]=
this._indentBinder,this._indentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._startTimeBinder.IsBound_M()&&(this._boundProps[this._startTimeBinder._binding.Property]=this._startTimeBinder,this._startTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._prefStartTimeBinder.IsBound_M()&&(this._boundProps[this._prefStartTimeBinder._binding.Property]=this._prefStartTimeBinder,this._prefStartTimeBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),
this._effortBinder.IsBound_M()&&(this._boundProps[this._effortBinder._binding.Property]=this._effortBinder,this._effortBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._predIndexBinder.IsBound_M()&&(this._boundProps[this._predIndexBinder._binding.Property]=this._predIndexBinder,this._predIndexBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._progressPercentBinder.IsBound_M()&&(this._boundProps[this._progressPercentBinder._binding.Property]=this._progressPercentBinder,
this._progressPercentBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._descBinder.IsBound_M()&&(this._boundProps[this._descBinder._binding.Property]=this._descBinder,this._descBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._assignedResourcesBinder.IsBound_M()&&(this._boundProps[this._assignedResourcesBinder._binding.Property]=this._assignedResourcesBinder,this._assignedResourcesBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._wbsIdBinder.IsBound_M()&&
(this._boundProps[this._wbsIdBinder._binding.Property]=this._wbsIdBinder,this._wbsIdBinder.ValueChanged.subscribe(this.BoundData_ValueChanged,this)),this._childActivities.ConvertResourceListFromResourceString.subscribe(this.ChildActivity_ConvertResourceListFromResourceString,this));this._ignoreSelfUpdates=!1;this.OnPropertyChanged=function(a,b,c){if(!1==this._ignoreSelfUpdates)try{switch(this.IgnoreBDUpdates=!0,a){case "ActivityName":this._nameBinder.Value_M(this.ActivityName_M());break;case "IndentLevel":this._indentBinder&&
this._indentBinder.Value_M(this.IndentLevel_M());break;case "StartTime":this._startTimeBinder.Value_M(this.StartTime_M());break;case "PreferredStartTime":this._prefStartTimeBinder.Value_M(c);break;case "Effort":this._effortBinder.Value_M(this.Effort_M());break;case "ProgressPercent":this._progressPercentBinder.Value_M(this.ProgressPercent_M());break;case "Description":this._descBinder.Value_M(this.Description_M());break;case "ID":this._idBinder.Value_M(this.ID_M());break;case "SortOrder":this._sortOrderBinder.Value_M(this.SortOrder_M());
break;case "PredecessorIndexString":this._predIndexBinder.Value_M(this.PredecessorIndexString_M());break;case "Assignments":this.UpdateResourcesString();break;case "DefaultWBSID":case "WBSID":case "IsAutoWBSID":this.PersistWBSInData();break}}finally{this.IgnoreBDUpdates=!1}f.BaseActivity.prototype.OnPropertyChanged.call(this,a,b,c)};return this};f.DataBoundActivity.prototype=new f.BaseActivity;f.DataBoundActivity.prototype.DataSource_M=function(){return this._boundObject};f.DataBoundActivity.prototype.IndentLevel_M=
function(a){if(0==arguments.length)return this._indentLevel;this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel"),this._childActivities.IndentLevel_M(a+1))};f.DataBoundActivity.prototype.IgnoreSelfUpdates_M=function(){return this._ignoreSelfUpdates};f.DataBoundActivity.prototype.IsOverlapping_M=function(a){if(0==arguments.length)return this._isOverlapping;this._isOverlapping!=a&&(this._isOverlapping=a,this.OnPropertyChanged("IsOverlapping"))};RadiantQ.CanUseDefineProperty&&
(Object.defineProperty(f.DataBoundActivity.prototype,"DataSource",{get:function(){return this._boundObject},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.DataBoundActivity.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel"),this._childActivities.IndentLevel_M(a+1))},enumerable:!1,configurable:!0}),Object.defineProperty(f.DataBoundActivity.prototype,"IgnoreSelfUpdates",
{get:function(){return this._ignoreSelfUpdates},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(f.DataBoundActivity.prototype,"IsOverlapping",{get:function(){return this._isOverlapping},set:function(a){this._isOverlapping!=a&&(this._isOverlapping=a,this.OnPropertyChanged("IsOverlapping"))},enumerable:!0,configurable:!0}));f.DataBoundActivity.prototype.BoundData_ValueChanged=function(a,b){if(!this.IgnoreBDUpdates)try{switch(this._ignoreSelfUpdates=!0,a){case this._idBinder:this.ID_M(parseInt(this._idBinder._value));
break;case this._sortOrderBinder:this.SortOrder_M(this._sortOrderBinder._value);break;case this._nameBinder:this.ActivityName_M(this._nameBinder._value);break;case this._startTimeBinder:this._startTimeBinder._value&&this._startTimeBinder._value!=Date.MinValue?(this.StartTime_M(this._startTimeBinder._value),!1==this._prefStartTimeBinder.IsBound_M()&&this.PreferredStartTime_M(this.StartTime_M())):this.StartTime_M(this.GetDefaultStartTime());break;case this._prefStartTimeBinder:this._prefStartTimeBinder._value!=
Date.MinValue&&this._prefStartTimeBinder._value?this.PreferredStartTime_M(this._prefStartTimeBinder._value):this.PreferredStartTime_M(this.GetDefaultStartTime());break;case this._indentBinder:this.IndentLevel_M(this._indentBinder._value);break;case this._progressPercentBinder:var c=parseInt(this._progressPercentBinder._value);this.ProgressPercent_M(isNaN(c)?0:c);break;case this._effortBinder:this.Effort_M(this._effortBinder._value);break;case this._descBinder:this._description=this._descBinder._value;
break;case this._predIndexBinder:this.PredecessorIndexString_M(this._predIndexBinder._value);break;case this._assignedResourcesBinder:this.UpdateResourcesCollection(this._assignedResourcesBinder._value);break;case this._wbsIdBinder:this.ProcessWBSIDInData(this._wbsIdBinder._value);break}}finally{this._ignoreSelfUpdates=!1}};f.DataBoundActivity.prototype.ProcessWBSIDInData=function(a){var b=!0;!1==(null==a||void 0==a||""==a)&&"*"==a[0]&&1<a.Length&&(this.WBSID_M(a.Substring(1)),b=!1);this.IsAutoWBSID_M(b)};
f.DataBoundActivity.prototype.Dispose=function(){f.BaseActivity.prototype.Dispose.call(this);this._idBinder.Dispose();this._nameBinder.Dispose();this._sortOrderBinder.Dispose();this._indentBinder.Dispose();this._startTimeBinder.Dispose();this._prefStartTimeBinder.Dispose();this._effortBinder.Dispose();this._predIndexBinder.Dispose();this._progressPercentBinder.Dispose();this._descBinder.Dispose();this._assignedResourcesBinder.Dispose();this._wbsIdBinder.Dispose();delete this._boundObject.PropertyChanged};
f.DataBoundActivity.prototype.GetDefaultStartTime=function(){f.BaseActivity.prototype.GetDefaultStartTime=this.GetDefaultStartTime;return this.Model.ScheduleFrom==f.ScheduleFrom.ProjectStartDate?this.Model.ProjectStartDate:this.Model.WorkTimeSchedule_M().GetStart(this.Model.ProjectEndDate,this.Effort_M())};f.DataBoundActivity.prototype.ChildActivity_ConvertResourceListFromResourceString=function(a,b){this.OnConvertResourceListFromResourceString(b)};f.DataBoundActivity.prototype.TransferIDFromBoundToSelf=
function(){this._idBinder.IsBound_M()&&this.BoundData_ValueChanged(this._idBinder)};f.DataBoundActivity.prototype.TransferWBSFromBoundToSelf=function(){this._wbsIdBinder.IsBound_M()&&this.BoundData_ValueChanged(this._wbsIdBinder)};f.DataBoundActivity.prototype.TransferDataFromBoundToSelf=function(){this._sortOrderBinder.IsBound_M()&&this.BoundData_ValueChanged(this._sortOrderBinder);this._nameBinder.IsBound_M()&&this.BoundData_ValueChanged(this._nameBinder);this._descBinder.IsBound_M()&&this.BoundData_ValueChanged(this._descBinder);
this._effortBinder.IsBound_M()&&(this.BoundData_ValueChanged(this._effortBinder),this.UpdateIsMileStone());this._startTimeBinder.IsBound_M()&&(this.BoundData_ValueChanged(this._startTimeBinder),this.UpdateIsMileStone());this._prefStartTimeBinder.IsBound_M()&&this.BoundData_ValueChanged(this._prefStartTimeBinder);this._indentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._indentBinder);this._progressPercentBinder.IsBound_M()&&this.BoundData_ValueChanged(this._progressPercentBinder);this._predIndexBinder.IsBound_M()&&
this.BoundData_ValueChanged(this._predIndexBinder);this._assignedResourcesBinder.IsBound_M()&&this.BoundData_ValueChanged(this._assignedResourcesBinder);this._wbsIdBinder.IsBound_M()&&this.BoundData_ValueChanged(this._wbsIdBinder);this.Model.SetTopSortOrder(this.SortOrder_M())};f.DataBoundActivity.prototype.UpdateResourcesString=function(){var b=this.Assignments_M();if(0==b.length)this._assignedResourcesBinder.Value_M(null);else{for(var c=new a(null,!0),d=c.Assignments_M(),e=0;e<b.length;e++)d.add(b[e]);
this.OnConvertResourceListFromResourceString(c);this._assignedResourcesBinder.Value_M(c.ResourceText)}};f.DataBoundActivity.prototype.UpdateResourcesCollection=function(b){if(b){b=new a(b,!1);this.OnConvertResourceListFromResourceString(b);this._assignments.clear();for(var c=0;c<b._assignments.length;c++)this._assignments.add(b._assignments[c])}else this.Assignments_M().clear()};f.DataBoundActivity.prototype.OnConvertResourceListFromResourceString=function(a){null!=this.ConvertResourceListFromResourceString&&
this.ConvertResourceListFromResourceString.raise(this,a)};f.DataBoundActivity.prototype.PersistWBSInData=function(){var a=this.WBSID_M();!1==this.IsAutoWBSID_M()&&(a="*"+a);this._wbsIdBinder.Value_M(a)};f.DataBoundActivity.prototype.CreateNewChildActivity=function(a){a=new RadiantQ.Gantt.Model.DataBoundActivity(this.Model,a,this._idBinder.OriginalBinding,this._sortOrderBinder.OriginalBinding,this._nameBinder.OriginalBinding,this._indentBinder.OriginalBinding,this._startTimeBinder.OriginalBinding,
this._prefStartTimeBinder.OriginalBinding,this._effortBinder.OriginalBinding,this._predIndexBinder.OriginalBinding,_progressPercentBinder.OriginalBinding,this._descBinder.OriginalBinding,this._assignedResourcesBinder.OriginalBinding,this._wbsIdBinder.OriginalBinding);a.TransferIDFromBoundToSelf();a.TransferWBSFromBoundToSelf();this.ChildActivities_M().Add(a);a.TransferDataFromBoundToSelf();return a};f.ConvertResourceListFromResourceStringEventArgs=a;a.prototype.Assignments_M=function(){return this._assignments};
RadiantQ.CanUseDefineProperty&&Object.defineProperty(a.prototype,"Assignments",{get:function(){return this._assignments},set:function(){},enumerable:!0,configurable:!0});f.DataBoundGanttResource=function(a,b,c,d){this.base=f.BaseGanttResource;this.base();this._resScheduleBinder=null;this.DataSource=this._boundObj=a;null!=c&&(this._resIDbinder=new g(a,c));null!=b&&(this._resNamebinder=new g(a,b),this._resNamebinder.ValueChanged.subscribe(this._resNamebinder_ValueChanged,this));null!=d&&(this._resScheduleBinder=
new g(a,d),this._resScheduleBinder.ValueChanged.subscribe(this._resScheduleBinder_ValueChanged));return this};f.DataBoundGanttResource.prototype=new f.BaseGanttResource;f.DataBoundGanttResource.prototype.ResourceID_M=function(){if(0==arguments.length)return this._resIDbinder?this._resIDbinder._value:this.ResourceName;window.console&&console.error&&console.error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");
};f.DataBoundGanttResource.prototype.Schedule_M=function(){if(0==arguments.length)return null!=this._resScheduleBinder?this._resScheduleBinder.Value_M():null;window.console&&console.error&&console.error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");throw Error("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(f.DataBoundGanttResource.prototype,
"ResourceID",{get:function(){return this._resIDbinder?this._resIDbinder._value:this.ResourceName},set:function(a){throw Error("Changing the bound resource's ID via DataBoundGanttResource.ResourceID property is not supported.");},enumerable:!0,configurable:!0}),Object.defineProperty(f.DataBoundGanttResource.prototype,"Schedule",{get:function(){return null!=this._resScheduleBinder?this._resScheduleBinder._value:null},set:function(){throw new Exception("Chaging the bound resource's schedule via DataBoundGanttResource.Schedule property is not supported.");
},enumerable:!0,configurable:!0}));f.DataBoundGanttResource.prototype.OnPropertyChanged=function(a){null!=this.PropertyChanged&&this.PropertyChanged.raise(this,a)};f.DataBoundGanttResource.prototype.toString=function(){return this.ResourceName_M()};f.DataBoundGanttResource.prototype._resNamebinder_ValueChanged=function(a,b){this.OnPropertyChanged("ResourceName")};f.DataBoundGanttResource.prototype._resScheduleBinder_ValueChanged=function(a,b){this.OnPropertyChanged("Schedule")};f.DataBoundGanttResource.prototype.Dispose=
function(){};f.ScheduleFrom={ProjectStartDate:"ProjectStartDate",ProjectEndDate:"ProjectEndDate"};b.prototype.ProcessDependency=function(a){this._cachedItem={};var b=a.FromActivity_M(),d=a.ToActivity_M(),e=this._dict[b.ID_M()],f=this._dict[d.ID_M()];if(null==e)null==f?(a=new c(b),this._dict.Add(b,a),this.Append(a),a=new c(d),this._dict.Add(d,a),this.Append(a)):(a=new c(b),this._dict.Add(b,a),this.InsertBefore(a,f));else if(null==f)a=new c(d),this._dict.Add(d,a),this.InsertAfter(a,e);else if(f.Index<
e.Index)for(this.InsertBefore(e,f),b=this._deps.GetPredecessors(e.Activity),d=0;d<b.length;d++)e=b[d],e!=a&&this.ProcessDependency(e)};b.prototype.InsertBefore=function(a,b){null!=a.Previous&&(a.Previous.Next=a.Next);null!=a.Next&&(a.Next.Previous=a.Previous);a==this.last&&(this.last=a.Previous);a.Next=b;a.Previous=b.Previous;null!=b.Previous&&(b.Previous.Next=a);b.Previous=a;null!=a.Previous?a.Index_M(a.Previous.Index_M()+1):(this.first=a,a.Index_M(0))};b.prototype.InsertAfter=function(a,b){a.Next=
b.Next;a.Previous=b;null!=b.Next&&(b.Next.Previous=a);b.Next=a;null==a.Next&&(this.last=a);a.Index_M(a.Previous.Index_M()+1)};b.prototype.Append=function(a){null==this.first?(this.first=this.last=a,a.Index_M(0)):(this.last.Next=a,a.Previous=this.last,a.Index_M(this.last.Index_M()+1),this.last=a)};b.prototype.GetItemByIndex=function(a){for(var b=0;b<this._dict.asArray.length;b++){var c=this._dict.asArray[b];if(this._cachedItem[a])return this._cachedItem[a];this._cachedItem[c._index]=c;if(c._index===
a)return c}return null};b.prototype.length_M=function(){return this._dict.length};RadiantQ.CanUseDefineProperty&&Object.defineProperty(b.prototype,"length",{get:function(){return this._dict.length},set:function(){},configurable:!0});c.prototype.Index_M=function(a){if(0==arguments.length)return this._index;this._index!==a&&(this._index=a,null!=this.Next&&this.Next.Index_M(this._index+1))};RadiantQ.CanUseDefineProperty&&Object.defineProperty(c.prototype,"Index",{get:function(){return this._index},set:function(a){this._index!==
a&&(this._index=a,null!=this.Next&&(this.Next.Index=this._index+1))},enumerable:!0,configurable:!0});d.prototype.Current_M=function(){return this.current.Activity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(d.prototype,"Current",{get:function(){return this.current.Activity},set:function(){},enumerable:!0,configurable:!0});d.prototype.MoveNext=function(){this.current=null==this.current?this._list.first:this.current.Next;return null!=this.current};d.prototype.Reset=function(){this.current=
null}})();RadiantQ.Gantt.View={};RadiantQ.Gantt.DependencyType={FinishToStart:"FinishToStart",StartToStart:"StartToStart",FinishToFinish:"FinishToFinish",StartToFinish:"StartToFinish",None:"None"};var RQGantt=RadiantQ.Gantt;
RadiantQ.Gantt.View.IDependencyView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._endTime=this._startTime=this.Dependency=null;this.EndItemYPosAdjustment=this.StartItemYPosAdjustment=0;this.VerticalPositionChanged=null};RadiantQ.Gantt.View.IDependencyView.prototype=new NotifyPropertyChanged;RadiantQ.Gantt.View.IGanttControlDependencyView=function(){this.GanttControl=this.Dependency=null};
RadiantQ.Gantt.View.GanttDependencyView=function(a,b,c){RadiantQ.Gantt.View.IDependencyView.call(this,arguments);this._onInit=!0;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.notifyChange=function(a,b){!0!=this._onInit&&this.PropertyChanged.raise(this,{PropertyName:a,value:b})};this.GanttControl=c;this._startTime=new Date;this._endTime=new Date;this.Dependency=this.Dependency=a;this.StartActivity=a.FromActivity_M();this.EndActivity=a.ToActivity_M();this.ActivityViewsCollection=b;this.UpdateTimes();
a.PropertyChanged.subscribe(this.dependency_PropertyChanged,this);this.StartActivity.PropertyChanged.subscribe(this.StartActivity_PropertyChanged,this);this.EndActivity.PropertyChanged.subscribe(this.EndActivity_PropertyChanged,this);this.StartActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this.EndActivity.VerticalPositionChanged.subscribe(this.Activity_VerticalPositionChanged,this);this._visibility=this._fromVisibility=this._toVisibility=this._workTimeSchedule=
null;new Binding(this.StartActivity,"IsVisible",this,"FromVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);new Binding(this.EndActivity,"IsVisible",this,"ToVisibility",null,RadiantQ.Gantt.BindingMode.TwoWay);new Binding(this.GanttControl.options,"WorkTimeSchedule",this,"WorkTimeSchedule",null,RadiantQ.Gantt.BindingMode.OneWay);this.UpdateVisibility();this._onInit=!1};RadiantQ.Gantt.View.GanttDependencyView.prototype=new RadiantQ.Gantt.View.IDependencyView;
RadiantQ.Gantt.View.GanttDependencyView.prototype.StartTime_M=function(a){if(0==arguments.length)return this._startTime;this._startTime=a;this.notifyChange("StartTime",a)};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndTime_M=function(a){if(0==arguments.length)return this._endTime;this._endTime=a;this.notifyChange("EndTime",a)};RadiantQ.Gantt.View.GanttDependencyView.prototype.DataSource_M=function(){return this.Dependency};
RadiantQ.Gantt.View.GanttDependencyView.prototype.DependencyType_M=function(){return this.Dependency.Type_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsEndFixedShape_M=function(){return this.EndActivity.IsMilestone_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.IsStartFixedShape_M=function(){return this.StartActivity.IsMilestone_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartRowIndex_M=function(){return this.StartActivity.DisplayIndex_M()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.EndRowIndex_M=function(){return this.EndActivity.DisplayIndex_M()};RadiantQ.Gantt.View.GanttDependencyView.prototype.WorkTimeSchedule_M=function(a){if(0==arguments.length)return this._workTimeSchedule;this._workTimeSchedule=a;this.notifyChange("WorkTimeSchedule",a);this.UpdateTimes()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.ToVisibility_M=function(a){if(0==arguments.length)return this._toVisibility;this._toVisibility=a;this.notifyChange("ToVisibility",a);this.UpdateTimes();this.UpdateVisibility()};RadiantQ.Gantt.View.GanttDependencyView.prototype.FromVisibility_M=function(a){if(0==arguments.length)return this._fromVisibility;this._fromVisibility=a;this.notifyChange("FromVisibility",a);this.UpdateVisibility()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.Visibility_M=function(a){if(0==arguments.length)return this._visibility;this._visibility=a;this.notifyChange("Visibility",a)};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartTime",{get:function(){return this._startTime},set:function(a){this._startTime=a;this.notifyChange("StartTime",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndTime",{get:function(){return this._endTime},set:function(a){this._endTime=a;this.notifyChange("EndTime",a)},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"DataSource",{get:function(){return this.Dependency},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"DependencyType",{get:function(){return this.Dependency.Type},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"IsEndFixedShape",{get:function(){return this.EndActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,
"IsStartFixedShape",{get:function(){return this.StartActivity.IsMilestone},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"StartRowIndex",{get:function(){return this.StartActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"EndRowIndex",{get:function(){return this.EndActivity.DisplayIndex},set:function(){},enumerable:!0,configurable:!0}),
Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"WorkTimeSchedule",{get:function(){return this._workTimeSchedule},set:function(a){this._workTimeSchedule=a;this.notifyChange("WorkTimeSchedule",a);this.UpdateTimes()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"ToVisibility",{get:function(){return this._toVisibility},set:function(a){this._toVisibility=a;this.notifyChange("ToVisibility",a);this.UpdateTimes();this.UpdateVisibility()},
enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"FromVisibility",{get:function(){return this._fromVisibility},set:function(a){this._fromVisibility=a;this.notifyChange("FromVisibility",a);this.UpdateVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.GanttDependencyView.prototype,"Visibility",{get:function(){return this._visibility},set:function(a){this._visibility=a;this.notifyChange("Visibility",a)},enumerable:!0,
configurable:!0}));RadiantQ.Gantt.View.GanttDependencyView.prototype.dependency_PropertyChanged=function(){this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.StartActivity_PropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName||this.UpdateTimes()};RadiantQ.Gantt.View.GanttDependencyView.prototype.EndActivity_PropertyChanged=function(a,b){"StartTime"!=b.PropertyName&&"EndTime"!=b.PropertyName||this.UpdateTimes()};
RadiantQ.Gantt.View.GanttDependencyView.prototype.Activity_VerticalPositionChanged=function(){};RadiantQ.Gantt.View.GanttDependencyView.prototype.OnVerticalPositionChanged=function(){null!=this.VerticalPositionChanged&&this.VerticalPositionChanged.raise(this)};
RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateTimes=function(){switch(this.Dependency.Type_M()){case RQGantt.DependencyType.FinishToFinish:this.StartTime_M(this.Dependency._fromActivity.EndTime_M());this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case RQGantt.DependencyType.StartToFinish:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());this.EndTime_M(this.Dependency._toActivity.EndTime_M());break;case RQGantt.DependencyType.StartToStart:this.StartTime_M(this.Dependency._fromActivity.StartTime_M());
this.EndTime_M(this.Dependency._toActivity.StartTime_M());break;default:this.StartTime_M(this.Dependency.FromActivity_M().EndTime_M()),this.EndTime_M(this.Dependency._toActivity.StartTime_M())}};RadiantQ.Gantt.View.GanttDependencyView.prototype.UpdateVisibility=function(){!0==this.ToVisibility_M()&&!0==this.FromVisibility_M()?this.Visibility_M(!0):this.Visibility_M(!1)};RadiantQ.Gantt.View.IParentData=function(){};RadiantQ.Gantt.View.IParentData.prototype.HasParent_M=function(){return this};
RadiantQ.Gantt.View.IParentData.prototype.Parent_M=function(){return this};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,"HasParent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(RadiantQ.Gantt.View.IParentData.prototype,"Parent",{get:function(){return this},set:function(){},enumerable:!0,configurable:!0}));CollectionOFIDependencyView=function(){};CollectionOFIDependencyView.prototype=new RadiantQ.RQ_CollectionChangeNotifier;
RadiantQ.Gantt.GanttFlatDependenciesList=function(a,b,c){this.activityViewsList=b;this.chart=c;this.model=a;this.model.Dependencies.CollectionChanged.subscribe(this.model_NewActivityAdded)};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateFromModel=function(a){this.Clear();for(var b=0;b<a.Dependencies.length;b++)this.add(this.CreateNew(dependency))};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.CreateNew=function(a){return new GanttDependencyView(a,this.activityViewsList,this.chart)};
RadiantQ.Gantt.GanttFlatDependenciesList.prototype.FindView=function(a){for(var b=0;b<this.length;b++)if(this[b].DataSource==a)return b;return-1};RadiantQ.Gantt.GanttFlatDependenciesList.prototype.model_NewActivityAdded=function(a,b){if("remove"==a.type||"replaceAll"==a.type)for(var c=0;c<b.items.length;c++){var d=this.FindView(b.items[c]);-1!=d&&this.remove(d)}if("insert"==a.type)for(c=0;c<b.items.length;c++)this.add(this.CreateNew(b.items[c]))};View=RadiantQ.Gantt.View;
View.IActivityView=function(){NotifyPropertyChanged.apply(this,arguments);this.OnPropertyChanged=NotifyPropertyChanged.prototype.OnPropertyChanged;this._indentLevel=0;this._isExpanded=!0;this._isParent=this._isReadOnly=this._isMouseIn=this._isSelected=!1;this._isRegularTask=!0;ReparentView=function(a){};this.ExpandedChanged=new ObjectEvent("ExpandedChanged");this.$chartRow=this.$tableRow=null;return this};View.IActivityView.prototype=new NotifyPropertyChanged;
View.IActivityView.prototype.Activity_M=function(a){if(0==arguments.length)return this._activity;this._activity!=a&&(this._activity=a,this.OnPropertyChanged("Activity",a))};View.IActivityView.prototype.ParentView_M=function(a){if(0==arguments.length)return this._parentView;this._parentView!=a&&(this._parentView=a,this.OnPropertyChanged("ParentView",a))};
View.IActivityView.prototype.ParentActivity_M=function(a){if(0==arguments.length)return this._activity.Parent_M();this._activity.Parent_M()!=a&&(this._activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))};View.IActivityView.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel",a))};
View.IActivityView.prototype.IsExpanded_M=function(a){if(0==arguments.length)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded",a))};View.IActivityView.prototype.IsReadOnly_M=function(a){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))};
View.IActivityView.prototype.IsParent_M=function(a){if(0==arguments.length)return this._isParent;this._isParent!=a&&(this._isParent=a,this.OnPropertyChanged("IsParent",a))};View.IActivityView.prototype.IsRegularTask_M=function(a){if(0==arguments.length)return this._isRegularTask;this._isRegularTask!=a&&(this._isRegularTask=a,this.OnPropertyChanged("IsRegularTask",a))};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.IActivityView.prototype,"Activity",{get:function(){return this._activity},set:function(a){this._activity!=a&&(this._activity=a,this.OnPropertyChanged("Activity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=a&&(this._parentView=a,this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,
"ParentActivity",{get:function(){return this._activity.Parent_M()},set:function(a){this._activity.Parent_M()!=a&&(this._activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,
"IsExpanded",{get:function(){return this._isExpanded},set:function(a){this._isExpanded!=a&&(this._isExpanded=a,this.OnPropertyChanged("IsExpanded",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsParent",{get:function(){return this._isParent},
set:function(a){this._isParent!=a&&(this._isParent=a,this.OnPropertyChanged("IsParent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.IActivityView.prototype,"IsRegularTask",{get:function(){return this._isRegularTask},set:function(a){this._isRegularTask!=a&&(this._isRegularTask=a,this.OnPropertyChanged("IsRegularTask",a))},enumerable:!0,configurable:!0}),ReparentView=function(a){});
View.IActivityView.prototype.IsSelected=function(a){if(void 0==a||null==a)return this._isSelected;this._isSelected!=a&&(this._isSelected=a,this.OnPropertyChanged("IsSelected",a,null,!1),this.UpdateSelection(a))};
View.IActivityView.prototype.TableRow=function(a){if(void 0==a||null==a)return this.$tableRow;a=a instanceof jQuery?a:$(a);if(!this.IsSelected)return 0;if(void 0!=this.$tableRow){this.IsSelected()&&this.addSelectionClassToTable(a);this.IsMouseIn()&&this.addHoverClassToTable(a);var b=this.$tableRow.height();a.height(b)}this.$tableRow=a;!0==this._isParent?this.$tableRow.css("font-weight","bolder"):this.$tableRow.css("font-weight","normal")};
View.IActivityView.prototype.ChartRow=function(a){if(void 0==a||null==a)return this.$chartRow;a=a instanceof jQuery?a:$(a);if(void 0!=this.$chartRow){var b=this.$chartRow.height();a.height(b)}this.$chartRow=a};View.IActivityView.prototype.IsMouseIn=function(a){if(void 0==a||null==a)return this._isMouseIn;this._isMouseIn!=a&&(this._isMouseIn=a,this.UpdateHoverStyle(a))};
View.IActivityView.prototype.UpdateHoverStyle=function(a){if(!0==a&&void 0!=a)this.TableRow().addClass("rq-row-hover ui-state-hover"),this.ChartRow()&&this.ChartRow().find("td").addClass("rq-row-hover ui-state-hover");else if(!1==a||void 0==a)this.TableRow().removeClass("rq-row-hover ui-state-hover"),this.ChartRow()&&this.ChartRow().find("td").removeClass("rq-row-hover ui-state-hover")};View.IActivityView.prototype.addSelectionClassToTable=function(a){a.addClass("rq-row-selected ui-state-active")};
View.IActivityView.prototype.addHoverClassToTable=function(a){a.addClass("rq-row-hover ui-state-hover")};View.IActivityView.prototype.UpdateSelection=function(a){if(!0==a&&void 0!=a)a=this.TableRow(),null!=a&&a.addClass("rq-row-selected ui-state-active"),a=this.ChartRow(),null!=a&&a.find("td").addClass("rq-row-selected ui-state-active");else if(!1==a||void 0==a)a=this.TableRow(),null!=a&&a.removeClass("rq-row-selected ui-state-active"),a=this.ChartRow(),null!=a&&a.find("td").removeClass("rq-row-selected ui-state-active")};
View.GanttActivityView=function(a,b,c,d){View.IActivityView.apply(this,arguments);this.IndentLevelBinding=this.ParentActivityBinding=null;this._activity=this.activity=a;this._isExpanded=a.IsExpanded_M();this.Model=c;this.GC=d;this._isParent=this._ignorePredUpdates=!1;this._indentLevel=0;this._isReadOnly=!1;this.ParentView_M(b);this.activity.ChildActivities_M().CollectionChanged.subscribe(this.ChildActivities_CollectionChanged,this);this.activity.PropertyChanged.subscribe(this.activity_PropertyChanged,
this);this.listenChanges();this.OnChildListChanged();this.OnTimesChanged();if(null!=this.GC.options.IsTaskReadOnlyBinding){var e=this.GC.options.IsTaskReadOnlyBinding,f=e.Property,e=e.Converter,g=f.split("."),h=null;1<g.length?(h=this[g[0]],f=g[1]):h=this;this.IsTaskReadOnlyBinding=new Binding(h,f,this,"IsReadOnly",{Convert:e})}this.RefreshPredString(!0);this.UpdateIndentWidth();return this};View.GanttActivityView.prototype=new View.IActivityView;
View.GanttActivityView.prototype.IndentWidth_M=function(a){if(0==arguments.length)return this._indentWidth;this._indentWidth!=a&&(this._indentWidth=a,this.OnPropertyChanged("IndentWidth",a))};View.GanttActivityView.prototype.Background_M=function(a){if(0==arguments.length)return this._background;this._background!=a&&(this._background=a,this.OnPropertyChanged("Background",a))};
View.GanttActivityView.prototype.ParentView_M=function(a){if(0==arguments.length)return this._parentView;this._parentView!=a&&(this._parentView=a,null!=a?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",a))};
View.GanttActivityView.prototype.ParentActivity_M=function(a){if(0==arguments.length)return this.activity.Parent_M();this.activity.Parent_M()!=a&&(this.activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))};View.GanttActivityView.prototype.SelectionFill_M=function(a){if(0==arguments.length)return this._selectionFill;this._selectionFill!=a&&(this._selectionFill=a,this.OnPropertyChanged("SelectionFill",a))};
View.GanttActivityView.prototype.SelectionFillOpacity_M=function(a){if(0==arguments.length)return this._selectionFillOpacity;this._selectionFillOpacity!=a&&(this._selectionFillOpacity=a,this.OnPropertyChanged("SelectionFillOpacity",a))};
View.GanttActivityView.prototype.PredecessorIndexString_M=function(a){if(0==arguments.length)return this._predecessorIndexString;if(this._predecessorIndexString!=a){var b=this._predecessorIndexString;this._predecessorIndexString=a;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=b,this.activity.PredecessorIndexString_M(b)):this.OnPropertyChanged("PredecessorIndexString",a)}};View.GanttActivityView.prototype.Activity_M=function(){return this.activity};
View.GanttActivityView.prototype.IndentLevel_M=function(a){if(0==arguments.length)return this._indentLevel;this._indentLevel!=a&&(this._indentLevel=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",a))};
View.GanttActivityView.prototype.IsParent_M=function(a){if(0==arguments.length)return this._isParent;var b=this.TableRow();null!=b&&(!0==a?b.css("font-weight","bolder"):b.css("font-weight","normal"));this._isParent!=a&&(this._isParent=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",a))};
View.GanttActivityView.prototype.IsExpanded_M=function(a){if(0==arguments.length)return this._isExpanded;this._isExpanded!=a&&(this._isExpanded=a,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",a,null,!1))};View.GanttActivityView.prototype.DisplayIndex_M=function(a){if(0==arguments.length)return this.activity.DisplayIndex_M();this.activity.DisplayIndex_M()!=a&&(this.activity.DisplayIndex_M(a),this.OnPropertyChanged("DisplayIndex",a,null,!1))};
View.GanttActivityView.prototype.HasParent_M=function(){return null!=this._parentView};View.GanttActivityView.prototype.Parent_M=function(){return this._parentView};View.GanttActivityView.prototype.IsReadOnly_M=function(a){if(0==arguments.length)return this._isReadOnly;this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))};
RadiantQ.CanUseDefineProperty&&(Object.defineProperty(View.GanttActivityView.prototype,"IndentWidth",{get:function(){return this._indentWidth},set:function(a){this._indentWidth!=a&&(this._indentWidth=a,this.OnPropertyChanged("IndentWidth",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Background",{get:function(){return this._background},set:function(a){this._background!=a&&(this._background=a,this.OnPropertyChanged("Background",a))},enumerable:!0,configurable:!0}),
Object.defineProperty(View.GanttActivityView.prototype,"ParentView",{get:function(){return this._parentView},set:function(a){this._parentView!=a&&(this._parentView=a,null!=a?(this.updateParentViewActivityBinding(),this.updateParentViewIndentLevelBinding()):(this.ParentActivityBinding.Dispose(),this.IndentLevelBinding.Dispose(),this.IndentLevel_M(0)),this.OnPropertyChanged("ParentView",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"ParentActivity",{get:function(){return this.activity.Parent_M()},
set:function(a){this.activity.Parent_M()!=a&&(this.activity.Parent_M(a),this.OnPropertyChanged("ParentActivity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFill",{get:function(){return this._selectionFill},set:function(a){this._selectionFill!=a&&(this._selectionFill=a,this.OnPropertyChanged("SelectionFill",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"SelectionFillOpacity",{get:function(){return this._selectionFillOpacity},
set:function(a){this._selectionFillOpacity!=a&&(this._selectionFillOpacity=a,this.OnPropertyChanged("SelectionFillOpacity",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"PredecessorIndexString",{get:function(){return this._predecessorIndexString},set:function(a){if(this._predecessorIndexString!=a){var b=this._predecessorIndexString;this._predecessorIndexString=a;!1==this.UpdateActivityDependencies()?(this._predecessorIndexString=b,this.activity.PredecessorIndexString_M(b)):
this.OnPropertyChanged("PredecessorIndexString",a)}},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Activity",{get:function(){return this.activity},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IndentLevel",{get:function(){return this._indentLevel},set:function(a){this._indentLevel!=a&&(this._indentLevel=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IndentLevel",a))},enumerable:!0,configurable:!0}),
Object.defineProperty(View.GanttActivityView.prototype,"IsParent",{get:function(){return this._isParent},set:function(a){var b=this.TableRow();null!=b&&(!0==a?b.css("font-weight","bolder"):b.css("font-weight","normal"));this._isParent!=a&&(this._isParent=a,this.UpdateIndentWidth(),this.OnPropertyChanged("IsParent",a))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsExpanded",{get:function(){return this._isExpanded},set:function(a){this._isExpanded!=a&&(this._isExpanded=
a,this.OnExpandedChanged(),this.OnPropertyChanged("IsExpanded",a,null,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"DisplayIndex",{get:function(){return this.activity.DisplayIndex_M()},set:function(a){this.activity.DisplayIndex_M(a);this.OnPropertyChanged("DisplayIndex",a,null,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"HasParent",{get:function(){return null!=this.ParentView},set:function(){},enumerable:!0,
configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"Parent",{get:function(){return this.ParentView},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(View.GanttActivityView.prototype,"IsReadOnly",{get:function(){return this._isReadOnly},set:function(a){this._isReadOnly!=a&&(this._isReadOnly=a,this.OnPropertyChanged("IsReadOnly",a))},enumerable:!0,configurable:!0}));View.GanttActivityView.prototype.listenChanges=function(){};
View.GanttActivityView.prototype.updateParentViewActivityBinding=function(){this.ParentActivityBinding=new Binding(this.ParentView_M(),"Activity",this,"ParentActivity",null,null)};View.GanttActivityView.prototype.updateParentViewIndentLevelBinding=function(){this.IndentLevelBinding=new Binding(this.ParentView_M(),"IndentLevel",this,"IndentLevel",RadiantQ.Gantt.ValueConverters.ParentViewToIndentConverter,null)};
View.GanttActivityView.prototype.UpdateIsRegularTask=function(){this.IsParent_M()||this.activity.IsMilestone_M()?this.IsRegularTask_M(!1):this.IsRegularTask_M(!0)};View.GanttActivityView.prototype.OnChildListChanged=function(){this.IsParent_M(0<this.activity.ChildActivities_M().length);this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ChildActivities_CollectionChanged=function(a,b){this.OnChildListChanged()};
View.GanttActivityView.prototype.UpdateIndentWidth=function(){this.IndentWidth_M(RadiantQ.Gantt.LevelToIndentWidth(this._indentLevel,this._isParent))};View.GanttActivityView.prototype.RefreshPredString=function(a){try{this._ignorePredUpdates=a,this.PredecessorIndexString_M(this.activity.PredecessorIndexString_M())}finally{this._ignorePredUpdates=!1}};
View.GanttActivityView.prototype.OnExpandedChanged=function(){var a=new RadiantQ.Gantt.Utils.DelayUpdates;this.ExpandedChanged.isSubscribed()&&this.ExpandedChanged.raise(this,this);a.Dispose()};View.GanttActivityView.prototype.activity_PropertyChanged=function(a,b){"StartTime"==b.PropertyName||"EndTime"==b.PropertyName||"Assignments"==b.PropertyName?this.OnTimesChanged():"PredecessorIndexString"==b.PropertyName&&this.RefreshPredString(this.Model._dependencies._inCollectionChanged)};
View.GanttActivityView.prototype.OnTimesChanged=function(){this.UpdateIsRegularTask()};View.GanttActivityView.prototype.ConvertToMilestone=function(a){a.EndTime_M(a.StartTime_M())};View.GanttActivityView.prototype.ConvertToNormalTask=function(a,b){var c=b.BottomTwoHeaders;null!=c&&(c=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(c[0].BaseTimeScaleType,1),a.EndTime_M(a.StartTime_M().addTimeSpan(c)))};
View.GanttActivityView.prototype.ReparentView=function(a){a!=this.ParentView_M()&&(this.ParentView_M(null),this.ParentView_M(a),null!=a&&!1==a.IsExpanded_M()&&(a.IsExpanded_M(!0),a.IsExpanded_M(!1)))};
View.GanttActivityView.prototype.UpdateActivityDependencies=function(){if(!this._ignorePredUpdates){var a=this.PredecessorIndexString_M(),b=this.Model,c=this.activity,d=new ObservableCollection,e=new ObservableCollection,f=new ObservableCollection,g=RadiantQ.Gantt.Model.DataBoundGanttModel.ProcessPredecessorString(a,b.LagStringUnitsInHours_M(),d,e,f,g);if(g)return alert(g),!1;a=new RadiantQ.Gantt.Utils.DelayUpdates;b.Dependencies_M().ClearDependencies(c);for(var g=new RadiantQ.Gantt.Utils.DelayUpdates,
h=0;h<d.length;h++){var k=b.GetActivityById(d[h]);null!=k&&b.CanAddNewDependency(k,c)&&b.CreateNewDependency(k,c,e[h],f[h])}g.Dispose();a.Dispose();this.RefreshPredString(!0)}};View.GanttActivityView.prototype.toString=function(){var a=this.ParentActivity_M();return""+this.activity.ActivityName_M()+", Parent: "+(a?a.ActivityName_M():"null")+", Indent:"+this.IndentLevel_M()+", IsParent:"+this.IsParent_M()+""};var IHierarchicalList=function(){},IUIUpdateable=function(){};
View.GanttFlatActivitiesList=function(a,b){RadiantQ.RQ_CollectionChangeNotifier.apply(this,arguments);this._dictActivityVsView=new RadiantQ.Gantt.Dictionary;this.model=a;this.gantt=b;this.CollectionChanged.subscribe(this.OnCollectionChanged,this);this.RowVisiblityChanged=new ObjectEvent("RowVisiblityChanged");this._ignoreRemove=!1;var c=this;this.view_ExpandedChanged=function(a,b){c.HoldtriggeringChange=!0;!1==a._isExpanded?c.ClearHierarchyFromList(a):c.AddHierarchyToList(a);c.gantt.RefreshDisplayIndex();
c.OnRowVisiblityChanged();c.HoldtriggeringChange=!1};this.CreateFromModel();this.ListenToModelChanges();this._init=!0};View.GanttFlatActivitiesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatActivitiesList.prototype.OnCollectionChanged=function(a,b){if("remove"==a.type||"replaceAll"==a.type)for(var c=0;c<b.items.length;c++)this.UnsubscribeToActivityView(b.items[c]);if("insert"==a.type)for(c=0;c<b.items.length;c++)this.SubscribeToActivityView(b.items[c]);this._init&&this.gantt.RefreshDisplayIndex()};
View.GanttFlatActivitiesList.prototype.GetActivityViewByID=function(a){a=this.model.GetActivityById(a);return this.GetIActivityView(a)};View.GanttFlatActivitiesList.prototype.CreateFromModel=function(){this.clear();for(var a=0;a<this.model._activities.length;a++)!1==this.model._activities[a].IsFilteredOut_M()&&this.AddActivities(this.model._activities[a],null,this.model,0)};
View.GanttFlatActivitiesList.prototype.AddActivities=function(a,b,c,d){b=new View.GanttActivityView(a,b,c,this.gantt);this.add(b);if(b.IsParent_M()&&a.IsExpanded_M()){a=a.ChildActivities_M();for(var e=0;e<a.length;e++)!1==a[e].IsFilteredOut_M()&&this.AddActivities(a[e],b,c,d+1)}};
View.GanttFlatActivitiesList.prototype.model_NewActivityAdded=function(a,b){var c=b.NewActivity_M(),d=0;if(0<c.ChildActivities_M().length)throw"Encountered a newly added activity which already has children. This is not supported.";var e=null,f=b.Parent_M();if(null!=f){e=this[f];if(null==e)throw"Encountered a new activity whose parent activity is not already in the view.";d=e._indentLevel+1}this.AddActivities(c,e,this.model,d)};
View.GanttFlatActivitiesList.prototype.ListenToModelChanges=function(){this.model.NewActivityAdded.subscribe(this.model_NewActivityAdded,this)};View.GanttFlatActivitiesList.prototype.remove=function(a){this[a].DisplayIndex_M(-1);RadiantQ.RQ_CollectionChangeNotifier.prototype.remove.apply(this,arguments)};
View.GanttFlatActivitiesList.prototype.Move=function(a,b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,e,f;try{this._ignoreRemove=!0;if(c>a){e=a;for(var g=0;g<b;g++){var h=this[a];this.remove(a);this.insert(c-1,h)}f=c-b}else{e=c;for(g=0;g<b;g++)h=this[a+g],this.remove(a+g),this.insert(c+g,h);f=c}this.gantt.Model.UpdateSortOrderFrom(this[e].activity);return f}finally{this._ignoreRemove=!1}d.Dispose()};
View.GanttFlatActivitiesList.prototype.ClearHierarchyFromList=function(a){var b=this.indexOf(a);this.ClearHierarchyFromListRecursive(a,b);a.activity.IsExpanded_M(!1)};View.GanttFlatActivitiesList.prototype.ClearHierarchyFromListRecursive=function(a,b){if(a.activity.IsExpanded_M()){var c=this.length;for(b++;b<c;)if(c=this[b],c.ParentView_M()==a)this.ClearHierarchyFromListRecursive(c,b),this.RemoveAndDispose(b),c=this.length;else break}};
View.GanttFlatActivitiesList.prototype.RemoveAndDispose=function(a){var b=0,b="number"===$.type(a)?a:this.indexOf(a);this.remove(b)};RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(a){a.activity.IsExpanded_M(!0);this.AddHierarchyToList(a,{value:-1})});
RadiantQ.Gantt.addMethod(View.GanttFlatActivitiesList.prototype,"AddHierarchyToList",function(a,b){-1==b.value&&(b.value=this.indexOf(a));if(a.activity.IsExpanded_M())for(var c=a.Activity_M().ChildActivities_M(),d=0;d<c.length;d++)if(!1==c[d].IsFilteredOut_M()){var e=new RadiantQ.Gantt.View.GanttActivityView(c[d],a,this.model,this.gantt);b.value++;this.insert(b.value,e);this.AddHierarchyToList(e,b)}});View.GanttFlatActivitiesList.prototype.GetIActivityView=function(a){return this._dictActivityVsView.GetItemByKey(a)};
View.GanttFlatActivitiesList.prototype.clear=function(a){for(a=0;a<this.length;a++)this.UnsubscribeToActivityView(this[a]),RadiantQ.RQ_CollectionChangeNotifier.prototype.splice.apply(this,a,1)};View.GanttFlatActivitiesList.prototype.Contains=function(a){return this._dictActivityVsView.Contains(a)};View.GanttFlatActivitiesList.prototype.SubscribeToActivityView=function(a){this._dictActivityVsView.Add(a.activity,a);a.ExpandedChanged.subscribe(this.view_ExpandedChanged)};
View.GanttFlatActivitiesList.prototype.UnsubscribeToActivityView=function(a){this._dictActivityVsView.Remove(a.activity);a.ExpandedChanged.unsubscribe(this.view_ExpandedChanged)};var ots=this;View.GanttFlatActivitiesList.prototype.OnRowVisiblityChanged=function(){this.RowVisiblityChanged.isSubscribed()&&this.RowVisiblityChanged.raise(this,EventArgs.Empty)};View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildren=function(){this.RefreshDisplayIndexOfChildrenPrivate()};
View.GanttFlatActivitiesList.prototype.RefreshDisplayIndexOfChildrenPrivate=function(){for(var a=-1,b=0;b<this.length;b++)a++,this[b].DisplayIndex_M(a)};View.GanttFlatActivitiesList.prototype.VisibleIndexOf=function(a){return a.DisplayIndex_M()};View.GanttFlatActivitiesList.prototype.Dispose=function(){this.CollectionChanged.unsubscribe(this.OnCollectionChanged,this)};
View.GanttFlatDependenciesList=function(a,b,c){RadiantQ.RQ_CollectionChangeNotifier.call(this);this.model=a;this.activityViewsList=b;this.gantt=c;this._depViewByActivity={};this.model._dependencies.CollectionChanged.subscribe(this.model_NewDependencyAdded,this);this.CreateFromModel(a)};View.GanttFlatDependenciesList.prototype=new RadiantQ.RQ_CollectionChangeNotifier;View.GanttFlatDependenciesList.prototype.CreateFromModel=function(a){for(var b=0;b<a._dependencies.length;b++)this.add(this.CreateNew(a._dependencies[b]))};
View.GanttFlatDependenciesList.prototype.DependencyViewByActivityID_M=function(){return this._depViewByActivity};RadiantQ.CanUseDefineProperty&&Object.defineProperty(View.GanttFlatDependenciesList.prototype,"DependencyViewByActivityID",{get:function(){return this._depViewByActivity}});View.GanttFlatDependenciesList.prototype._depViewByActivity={};
View.GanttFlatDependenciesList.prototype.CreateNew=function(a){var b=new RadiantQ.Gantt.View.GanttDependencyView(a,this.activityViewsList,this.gantt),c=a._fromActivity.ID_M();a=a._toActivity.ID_M();var d=this._depViewByActivity[c];d?-1==d.indexOf(b)&&d.push(b):this._depViewByActivity[c]=[b];(c=this._depViewByActivity[a])?-1==c.indexOf(b)&&c.push(b):this._depViewByActivity[a]=[b];return b};
View.GanttFlatDependenciesList.prototype.FindView=function(a){for(var b=0;b<this.length;b++)if(this[b].Dependency==a)return b;return-1};
View.GanttFlatDependenciesList.prototype.model_NewDependencyAdded=function(a,b){if("remove"==b.type||"replaceAll"==b.type)for(var c=0;c<b.OldItems.length;c++){var d=b.OldItems[c],e=this.FindView(d);if(-1!=e){var f=this[e];this.splice(e,1);var g=d._fromActivity.ID_M(),h=this._depViewByActivity[g];h&&(e=h.indexOf(f),-1!=e&&h.splice(e,1),0==h.length&&delete this._depViewByActivity[g]);d=d._toActivity.ID_M();if(g=this._depViewByActivity[d])e=g.indexOf(f),-1!=e&&g.splice(e,1),0==g.length&&delete this._depViewByActivity[d]}}if("insert"==
b.type)for(c=0;c<b.NewItems.length;c++)d=b.NewItems[c],f=this.CreateNew(d),this.add(f)};View.GanttFlatDependenciesList.prototype.Dispose=function(){this.model.Dependencies&&this.model.Dependencies.CollectionChanged.unsubscribe(this.model_NewDependencyAdded,this);this.model.NewActivityAdded.unsubscribe(this.model_NewActivityAdded,this)};
RadiantQ.Gantt.FGDependencyViewList=function(a,b){this.DependencyViewList=[];this.FlexyGantt=a;this.HiddenList=null;this.Data=[];this.UpdateList=function(){if(null!=this.Data)for(var a=0;a<this.Data.length;a++)this.OnAddItem(this.Data[a])};this.OnAddItem=function(a){a=new RadiantQ.Gantt.FGDependencyView(this.FlexyGantt,a);this.DependencyViewList.push(a)};var c=this;$.observable(this.Data).bind("insert remove replaceAll",function(a,b){switch(a.type){case "insert":c.OnItemsAdded(a.NewItems);break;case "remove":c.OnItemsRemoved(a.OldItems);
break;case "replaceAll":c.UpdateList()}});$.observable(this.Data).replaceAll(b);this.depView_VerticalPositionChanged=function(a,b){-1==a.StartRowIndex&&-1==a.EndRowIndex?(null==this.HiddenList[a.DataSource]&&this.HiddenList.push(a),this.DependencyViewList.removeByValue(a)):null!=this.HiddenList[a.DataSource]&&(this.HiddenList.removeByValue(a),this.DependencyViewList.push(a))}};
RadiantQ.Gantt.FGDependencyView=function(a,b){this.StartRowIndex=this.EndTime=this.StartTime=this.EndRowItem=this.StartRowItem=this.IsEndFixedShape=this.IsStartFixedShape=this.EndItem=this.StartItem=this.DependencyType=null;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.StartRowIndex_M=function(a){if(0==arguments.length)return this._startRowIndex;this._startRowIndex=a;this.OnPropertyChanged("StartRowIndex",a)};RadiantQ.CanUseDefineProperty&&Object.defineProperty(this,"StartRowIndex",
{get:function(){return this._startRowIndex},set:function(a){this._startRowIndex=a;this.OnPropertyChanged("StartRowIndex",a)},enumerable:!0,configurable:!0});this.EndRowIndex=null;this.FlexyGantt=a;this.Data=b;this.DependencyTypeChanged=new ObjectEvent("DependencyTypeChanged");this.StartRowItemChanged=new ObjectEvent("StartRowItemChanged");this.EndRowItemChanged=new ObjectEvent("EndRowItemChanged");this.OnPropertyChanged=function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,value:b})};this.SetupStartTimeBinding=
function(){var a=null,a=this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToStart||this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToFinish?this.FlexyGantt.options.TaskEndTime:this.FlexyGantt.options.TaskStartTime;this.StartItem&&(a=this.StartItem[a],$.isFunction(a)?this.StartTime=a():this.StartTime=a)};this.SetupEndTimeBinding=function(){var a=null,a=this.DependencyType==RadiantQ.Gantt.DependencyType.FinishToStart||this.DependencyType==RadiantQ.Gantt.DependencyType.StartToStart?this.FlexyGantt.options.TaskStartTime:
this.FlexyGantt.options.TaskEndTime;null!=this.EndItem&&(a=this.EndItem[a],$.isFunction(a)?this.EndTime=a():this.EndTime=a)};this.DisplayIndexConverter={Convert:function(a,b,c){return null==a?0:a+1},ConvertBack:function(){throw"Not Implemented";}};this.SetupStartIndexBinding=function(){if(null!=this.StartRowItem){for(var a=0;a<this.FlexyGantt.options.FlatItemsSource.length;a++)if(this.FlexyGantt.options.FlatItemsSource[a]._data==this.StartRowItem){var b=this.FlexyGantt.options.FlatItemsSource[a];
break}this.StartRowIndex=null==b?-1:b.DisplayIndex()}};this.SetupEndIndexBinding=function(){if(null!=this.EndRowItem){for(var a=0;a<this.FlexyGantt.options.FlatItemsSource.length;a++)if(this.FlexyGantt.options.FlatItemsSource[a]._data==this.EndRowItem)var b=this.FlexyGantt.options.FlatItemsSource[a];this.EndRowIndex=null==b?-1:b.DisplayIndex()}};var c=this;this.DependencyNotifyChanged=function(a,b){};this.StartRowNotifyChanged=function(a,b){c.SetupStartIndexBinding()};this.EndRowNotifyChanged=function(a,
b){c.SetupEndIndexBinding()};this.FlexyGantt.options.DependencyLineType&&(this.DependencyType=this.Data[this.FlexyGantt.options.DependencyLineType],this.DependencyTypeChanged.subscribe(this.DependencyNotifyChanged),this.DependencyTypeChanged.raise(this.DependencyType,this));this.FlexyGantt.options.DependencyLineStartItem&&(this.StartItem=this.Data[this.FlexyGantt.options.DependencyLineStartItem]);this.FlexyGantt.options.DependencyLineEndItem&&(this.EndItem=this.Data[this.FlexyGantt.options.DependencyLineEndItem]);
this.FlexyGantt.options.DependencyLineStartRowItem&&(this.StartRowItem=this.Data[this.FlexyGantt.options.DependencyLineStartRowItem],this.StartRowItemChanged.subscribe(this.StartRowNotifyChanged),this.StartRowItemChanged.raise(this.StartRowItem,this));this.FlexyGantt.options.DependencyLineEndRowItem&&(this.EndRowItem=this.Data[this.FlexyGantt.options.DependencyLineEndRowItem],this.EndRowItemChanged.subscribe(this.EndRowNotifyChanged),this.EndRowItemChanged.raise(this.EndRowItem,this));this.FlatTreeItemsSource_CollectionChanged=
function(a,b){if(null!=b.NewItems)for(var c;c<b.NewItems.length;c++){var g=b.NewItems[c];g.Data==this.StartRowItem&&this.OnStartRowItemChanged();g.Data==this.EndRowItem&&this.OnEndRowItemChanged()}if(null!=b.OldItems)for(var h;h<b.OldItems.length;h++)g=b.OldItems[h],g.Data==this.StartRowItem&&this.OnStartRowItemChanged(),g.Data==this.EndRowItem&&this.OnEndRowItemChanged()};this.SetupStartTimeBinding();this.SetupEndTimeBinding();return this};var gantt=RadiantQ.Gantt;
RadiantQ.Gantt.OverlappedTasksRenderingOptimization={None:"None",ShrinkHeight:"ShrinkHeight"};Array.max=function(a,b){return null!=b||b?($.each(a,function(a,d){if(0==a||max<d.options[b])max=d.options[b]}),max):Math.max.apply(Math,a)};Array.min=function(a,b){return null!=b?($.each(a,function(a,d){if(0==a||min>d.options[b])min=d.options[b]}),min):Math.min.apply(Math,a)};Array.prototype.findByPropertyValue=function(a,b){var c=-1;$.each(this,function(d,e){this[a]===b&&(c=d)});return c};
Array.prototype.removeByValue=function(a){for(var b=0;b<this.length;b++)if(this[b]===a){this.splice(b,1);break}};Array.prototype.containsValue=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return!0;return!1};Array.prototype.FirstOrDefaultEndity=function(a){for(var b=0;b<this.length;b++)if(this[b].options.Data===a)return this[b];return null};
OverlappingBlock=function(a){this.StartTime=a.options.StartTime;this.EndTime=a.options.EndTime;this.entities=[];this.entities.push(a);this.IsOverlappingWithExcludeCurrentItem=function(a){for(var c=0;c<this.entities.length;c++){var d=this.entities[c];if(d!=a&&(d.options&&(d=d.options),a.StartTime>=d.StartTime&&a.StartTime<d.EndTime||a.EndTime>d.StartTime&&a.EndTime<=d.EndTime||d.StartTime>a.StartTime&&d.EndTime<a.EndTime))return!0}return!1};this.IsOverlapping=function(a,c){a.options&&(a=a.options);
if(c){if(a.StartTime>=this.StartTime&&a.StartTime<this.EndTime||a.EndTime>this.StartTime&&a.EndTime<=this.EndTime||this.StartTime>a.StartTime&&this.EndTime<a.EndTime)return!0}else for(index=0;index<this.entities.length;index++){var d=this.entities[index].options;if(a.Parent.element.options.Data==d.Parent.element.options.Data&&(a.StartTime>=d.StartTime&&a.StartTime<d.EndTime||a.EndTime>d.StartTime&&a.EndTime<=d.EndTime||d.StartTime>a.StartTime&&d.EndTime<a.EndTime))return!0}return!1};this.AddEntity=
function(a){this.entities.push(a);this.UpdateTimeLength()};this.RemoveEntity=function(a){(a=this.entities.Remove(a))&&0<this.entities.length&&this.UpdateTimeLength();return a};this.UpdateTimeLength=function(){0<this.entities.length&&(this.StartTime=Array.min(this.entities,"StartTime"),this.EndTime=Array.max(this.entities,"EndTime"))};this.ComputeIndicesAndHeight=function(){var a=this.GetBlocksFromEntities();for(i=0;i<a.length;i++){var c=a[i];for(index=0;index<c.entities.length;index++){var d=c.entities[index],
e=RadiantQ.FlexyGantt.TaskItemControl,e=d.Height-2*e.MarginForBars-(e.TaskBar_BorderTopWidth+e.TaskBar_BorderBottomWidth),f=a.length>e&&e?e:a.length;void 0!=d.element.attr("heightSetBySrc")||isNaN(parseInt(d.element[0].style.height))?d._updateTaskItem(i,e/f,1<a.length,f):d._updateTaskItem(i,parseInt(d.element[0].style.height),1<a.length)}}};this.GetBlocksFromEntities=function(){for(var a=[],c=0;c<this.entities.length;c++){for(var d=this.entities[c],e=!1,f=0;f<a.length;f++){var g=a[f];if(!1==g.IsOverlapping(d,
!1)){g.AddEntity(d);e=!0;break}}!1==e&&a.push(new OverlappingBlock(d))}return a};this.GetRowCount=function(){return this.GetBlocksFromEntities().length};return this};
$.fn.ExpandableTextBlock=function(a){this.options=a;this.parentElem=this.PropertyChanged=null;this.holdUpdateElement=!1;this._create=function(){this.PropertyChanged=new ObjectEvent("PropertyChanged");var a=this.closest("tr")[0]["data-grid-item"];this.options.isFG=a instanceof RadiantQ.FlexyGantt.FlexyNodeData?!0:!1;this.addClass("rq-grid-expander-text");this.options.Data=a;this.parentElem=this.parent();this.options.Data&&this.init();this.append(this.options.Text)};this.init=function(){var a=this.parentElem,
c=this.options;c.Converter&&(c.Text=c.Converter(c.Data));var d=0;c.Data.IndentWidth_M&&null!=c.Data.IndentWidth_M()&&(d=c.Data.IndentWidth_M());this.border=$('<div class= "rq-grid-expand-indentWidth" style="height:1px;width:'+d+'px" ></div>');d=c.Data;d.HierarchicalItem?(c=d.HierarchicalItem.CanShowCue(),null==c&&(c=d.IsParentType())):c=d.IsParent_M();this.Cue=$('<div style="width:12px;display:'+(c?"block":"none")+'" class="arrowContainer"/>');c=this.border.add(this.Cue);a.prepend(c);this.options.isFG?
this.flexyGanttExpanderCue():this.projectGanttexpanderCue()};this._cueVisiblity=null;this.CueVisiblity=function(a){if(void 0==a||null==a)return this._cueVisiblity;a!=this._CueVisiblity&&(this._cueVisiblity=a,!1==this.holdUpdateElement&&(this.UpdateCueVisiblity(a),this.OnPropertyChanged("CueVisiblity",a)))};this._IndentWidth=null;this.IndentWidth=function(a){if(void 0==a||null==a)return this._indentWidth;a!=this._indentWidth&&(this._indentWidth=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IndentWidth",
a),this.UpdateBorderWidth(a)))};this._IsExpand=null;this.IsExpand=function(a){if(void 0==a||null==a)return this._IsExpand;a!=this._IsExpand&&(this._IsExpand=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IsExpand",a),this.UpdateCue(a)))};this.flexyGanttExpanderCue=function(){if(this.options.Data.IsParentType()){var a=this.options.Data.HierarchicalItem;this.createExpanderCue(this.Cue);this.holdUpdateElement=!0;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"CanShowCue",
this,"CueVisiblity",null,"OneWay");this.IsExpand(a.IsExpanded());this.CueVisiblity(a.CanShowCue());this.holdUpdateElement=!1}this.ApplyWidth()};this.ApplyWidth=function(){if(null!=this.options.Data.Level()&&null!=this.options.Data.IsParentType()){var a=RadiantQ.Gantt.LevelToIndentWidth(this.options.Data.Level(),this.options.Data.IsParentType());this.border.width(a)}};this.projectGanttexpanderCue=function(){this.createExpanderCue(this.Cue);var a=this.options.Data;this.holdUpdateElement=!0;new Binding(a,
"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"IsParent",this,"CueVisiblity",null,"OneWay");new Binding(a,"IndentWidth",this,"IndentWidth",null,"OneWay");this.IsExpand(a.activity.IsExpanded_M());this.CueVisiblity(a.IsParent_M());this.IndentWidth(a.IndentWidth_M());this.holdUpdateElement=!1};this.createExpanderCue=function(b){var c="rq-grid-expand-arrow ",d=null,d=a.Data;(d=null!=d.HierarchicalItem?d.HierarchicalItem.IsExpanded():d.IsExpanded_M())&&(c+="rq-grid-collapse-arrow");this.arrow=
$('<div id="arrow" class="'+c+'"></div>');b.append(this.arrow);var e=this;b.click(function(a,b){a.stopPropagation();!0==e.options.isFG?(e.options.Data.HierarchicalItem._forceToCreateNewChildList=!0,e.IsExpand(!e.IsExpand()),e.options.Data.HierarchicalItem._forceToCreateNewChildList=!1):e.IsExpand(!e.IsExpand());return!1})};this.UpdateBorderWidth=function(a){this.border.width(a)};this.UpdateCueVisiblity=function(a){!0==a&&this.Cue.show();!1==a&&this.Cue.hide()};this.UpdateCue=function(a){this.arrow&&
(a?this.arrow.addClass("rq-grid-collapse-arrow"):this.arrow.removeClass("rq-grid-collapse-arrow"))};this.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,value:c})};this._create()};
$.fn.ExpandableTextBox=function(a){this.options=a;this.parentElem=this.PropertyChanged=null;this.holdUpdateElement=!1;this._create=function(){var a=this;this.options.isFG=null;this.PropertyChanged=new ObjectEvent("PropertyChanged");var c=this.closest("tr")[0]["data-grid-item"];this.options.isFG=c instanceof RadiantQ.FlexyGantt.FlexyNodeData?!0:!1;this.addClass("rq-grid-expander-editor");this.container=$("<div  ></div>");this.wrap(this.container);this.options.Data=c;this.parentElem=this.parent();this.options.Data&&
this.init();this.val(this.options.Text);this.change(function(){a.options.ConverterBack&&a.options.ConverterBack($(this).val(),a.options.Data)});this.parent().css("width","auto");this.data("ExpandableTextBox",this)};this.init=function(){var a=this.parentElem,c=this.options;c.Converter&&(c.Text=c.Converter(c.Data));var d=0;null!=c.Data.IndentWidth&&(d=c.Data.IndentWidth);this.border=$('<div class= "rq-grid-expand-indentWidth" style="height:1px;width:'+d+'px" ></div>');var e=c.Data;e.HierarchicalItem?
(c=e.HierarchicalItem.CanShowCue(),null==c&&(c=e.IsParentType())):c=e.IsParent;e=this.parents("td").width();c?this.css("width",e-d-17+"px"):this.css("width",e-d-4+"px");this.Cue=$('<div style="width:12px;display:'+(c?"block":"none")+'" class="arrowContainer"/>');d=this.border.add(this.Cue);a.prepend(d);this.options.isFG?this.flexyGanttExpanderCue():this.projectGanttexpanderCue()};this._cueVisiblity=null;this.CueVisiblity=function(a){if(void 0==a||null==a)return this._cueVisiblity;a!=this._CueVisiblity&&
(this._cueVisiblity=a,!1==this.holdUpdateElement&&(this.UpdateCueVisiblity(a),this.OnPropertyChanged("CueVisiblity",a)))};this._IndentWidth=null;this.IndentWidth=function(a){if(void 0==a||null==a)return this._indentWidth;a!=this._indentWidth&&(this._indentWidth=a,!1==this.holdUpdateElement&&(this.OnPropertyChanged("IndentWidth",a),this.UpdateBorderWidth(a)))};this._IsExpand=null;this.IsExpand=function(a){if(void 0==a||null==a)return this._IsExpand;a!=this._IsExpand&&(this._IsExpand=a,!1==this.holdUpdateElement&&
(this.OnPropertyChanged("IsExpand",a),this.UpdateCue(a)))};this.flexyGanttExpanderCue=function(){if(this.options.Data.IsParentType()){var a=this.options.Data.HierarchicalItem;this.createExpanderCue(this.Cue);this.holdUpdateElement=!0;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"CanShowCue",this,"CueVisiblity",null,"OneWay");this.IsExpand(a.IsExpanded());this.CueVisiblity(a.CanShowCue());this.holdUpdateElement=!1}this.UpdateBorderWidth(this.ApplyWidth())};this.ApplyWidth=
function(){if(null!=this.options.Data.Level()&&null!=this.options.Data.IsParentType())return RadiantQ.Gantt.LevelToIndentWidth(this.options.Data.Level(),this.options.Data.IsParentType())};this.projectGanttexpanderCue=function(){this.createExpanderCue(this.Cue);var a=this.options.Data;new Binding(a,"IsExpanded",this,"IsExpand",null,"TwoWay");new Binding(a,"IsParent",this,"CueVisiblity",null,"OneWay");new Binding(a,"IndentWidth",this,"IndentWidth",null,"OneWay")};this.createExpanderCue=function(b){var c=
"rq-grid-expand-arrow ",d=null,d=a.Data;(d=null!=d.HierarchicalItem?d.HierarchicalItem.IsExpanded():d.IsExpanded)&&(c+="rq-grid-collapse-arrow");this.arrow=$('<div id="arrow" class="'+c+'"></div>');b.append(this.arrow);var e=this;b.click(function(a,b){a.stopPropagation();e.IsExpand=!e.IsExpand;return!1})};this.UpdateBorderWidth=function(a){this.border.width(a);var c=this.parents("td").width();this.CueVisiblity?this.css("width",c-a-17+"px"):this.css("width",c-a-4+"px")};this.UpdateCueVisiblity=function(a){!0==
a&&this.Cue.show();!1==a&&this.Cue.hide()};this.UpdateCue=function(a){this.arrow&&(a?this.arrow.addClass("rq-grid-collapse-arrow"):this.arrow.removeClass("rq-grid-collapse-arrow"))};this.OnPropertyChanged=function(a,c){this.PropertyChanged.raise(this,{PropertyName:a,value:c})};this._create();this.widget=function(){return this.parent()}};
var my=RadiantQ.Gantt,smartDateTimeText={options:{text:null,timeUnit:my.TimeScaleType.Days,name:"SmartDateTimeText"},_create:function(){this.element.text(this.options.text);this.refresh()},_init:function(){},_destroy:function(){this.element.empty()},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments);switch(a){case "text":this.element.text(this.options.text);break;case "timeUnit":this.refresh()}},refresh:function(){var a=this.options.timeUnit;if(null!=a){var b=a.TextFormat,
c=a.Tag,d=a.Width;if(b&&0!==b.length){var e=this.element,a=b.split("|");$.each(a,function(a,b){if(b&&0!==b.length)try{if(e.text(c.toString(b)),$(e).width()<d-6)return!1}catch(h){}})}}}};RadiantQ.Gantt.Widget.SmartDateTimeText=smartDateTimeText;
var RQStyle=RadiantQ.Gantt.DefaultStyles,scaleRendererBase={options:{name:"ScaleRendererBase",ViewStartTime:null,ViewEndTime:null,headerInfo:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,WorkTimeSchedule:null},_requiresTimeUnitText:!0,_floorToHour:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),0,0)},_floorToMinute:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0)},_floorWidth:function(a,
b){a+=b;var c=Math.floor(a);return{FlooredWidth:c,Residue:a-c}},UpdateTimeUnits:function(){this.options.timeUnits.length=0;var a=this.options;if(!(null==a.ViewStartTime||null==a.ViewEndTime||null==a.headerInfo||0<=a.ViewStartTime.compareTo(a.ViewEndTime))){var b=RadiantQ.Gantt,c=RadiantQ.Gantt.Utils,d=a.ViewStartTime.clone(),e=a.ViewEndTime.clone(),f=Date.CultureInfo.formatPatterns.shortDate,g=RQTimeSpan.Zero_M(),h=[],k=0,g=0,l=new Date;switch(a.headerInfo.Type){case b.TimeScaleType.Days:g=0;this.element.show();
for(l=d.clone();0>=l.compareTo(e);){var p=1,m=l.clone().clearTime();0>m.compareTo(l)&&(p=1-(new RQTimeSpan(l-m)).getTotalMinutes()/1440);try{var q={Value:k},n={Value:g};if(!1==this.AddTimeUnit(l,p,b.TimeScaleType.Days,h,b.TimeScaleType.Days,l.getDate(),l.toString(f),q,n))break;l=m.clone().addDays(1)}finally{k=q.Value,g=n.Value}}break;case b.TimeScaleType.Weeks:g=new RQTimeSpan(e.clone()-d.clone());e=g.getTotalDays();p=d.clone();this.element.show();for(g=0;0<e;){m=c.TimeComputingUtils.GetRemainingDaysInWeek(p);
p=p.clone().addDays(m-7);m=m>e?e:m;try{if(q={Value:k},n={Value:g},!1==this.AddTimeUnit(p,m,b.TimeScaleType.Days,h,b.TimeScaleType.Weeks,p.toString("MMMM, dd, yyyy"),p.toString(f)+" - "+p.clone().addDays(7).toString(f),q,n))break}finally{k=q.Value,g=n.Value}e-=m;p=p.clone().addDays(7)}break;case b.TimeScaleType.Months:g=new RQTimeSpan(e-d);e=g.getTotalDays();p=d.clone();this.element.show();for(g=0;0<e;){m=c.TimeComputingUtils.GetRemainingDaysInMonth(p);m=m>e?e:m;try{if(q={Value:k},n={Value:g},!1==
this.AddTimeUnit(p,m,b.TimeScaleType.Days,h,b.TimeScaleType.Months,p.toString("MMMM yyyy"),(new Date(p.getFullYear(),p.getMonth(),1)).toString(f)+" - "+(new Date(p.getFullYear(),p.getMonth()+1,0,23,59,59)).toString(f),q,n))break}finally{k=q.Value,g=n.Value}e-=m;p=c.TimeComputingUtils.GetStartOfNextMonth(p.clone())}break;case b.TimeScaleType.Years:g=new RQTimeSpan(e-d);e=g.getTotalDays();p=d.clone();this.element.show();for(g=0;0<e;){m=c.TimeComputingUtils.GetRemainingDaysInYear(p.clone());m=m>e?e:
m;try{if(q={Value:k},n={Value:g},!1==this.AddTimeUnit(p.clone(),m,b.TimeScaleType.Days,h,b.TimeScaleType.Years,p.toString("yyyy"),p.toString(f)+" - "+p.clone().addYears(1).addDays(-1).toString(f),q,n))break}finally{k=q.Value,g=n.Value}e-=m;p=c.TimeComputingUtils.GetStartOfNextYear(p.clone())}break;case b.TimeScaleType.Minutes:g=new RQTimeSpan(e-d);e=g.getTotalMinutes();this.element.show();for(c=g=0;c<e;c++)try{if(q={Value:k},n={Value:g},m=d.clone().addMinutes(c),!1==this.AddTimeUnit(m,1,b.TimeScaleType.Minutes,
h,b.TimeScaleType.Minutes,m.toString("mm"),m.toString(f)+" "+m.toString("htt"),q,n))break}finally{k=q.Value,g=n.Value}break;case b.TimeScaleType.Hours:this.element.show();g=0;for(l=d.clone();0>=l.compareTo(e);){p=1;l.getMinutes();0<l.getMinutes()&&(p=1-l.getMinutes()/60);try{q={Value:k};n={Value:g};if(!1==this.AddTimeUnit(l,p,b.TimeScaleType.Hours,h,b.TimeScaleType.Hours,l.toString("HH"),l.toString(f)+" "+l.toString("htt"),q,n))break;l=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),
0,0);l=l.clone().addHours(1)}finally{k=q.Value,g=n.Value}}break;case b.TimeScaleType.Custom:if(null==this.options.headerInfo.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in a TimeScaleHeaderDefinition of type TimeScaleType.Custom.";l=this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType;$(this.element).show();k=g=0;m=d.clone();d=new RadiantQ.Gantt.ProvideCustomTimeIntervalsEventArgs(m.clone(),e.clone());this.options.headerInfo.ProvideCustomTimeIntervals.raise(this,d);
0==d.TimeIntervals.length&&d.TimeIntervals.push(e.clone());d.TimeIntervals.splice(0,0,m.clone());for(c=0;c<d.TimeIntervals.length;c++){m=d.TimeIntervals[c];m=l<b.TimeScaleType.Hours?this._floorToMinute(m):m;a=c<d.TimeIntervals.length-1?d.TimeIntervals[c+1]:e.clone();a=l<b.TimeScaleType.Hours?rqTCUtils.GetTimeSpan(m,this._floorToMinute(a)):rqTCUtils.GetTimeSpan(m,a);if(a<RQTimeSpan.Zero_M())throw"Custom time interval entries are out of order.";l>b.TimeScaleType.Hours&&(l=b.TimeScaleType.Hours);a=l>=
b.TimeScaleType.Hours?a.getTotalHours():a.getTotalMinutes();try{q={Value:k},n={Value:g},p=this.AddTimeUnit(m,a,l,h,l,m.getDate().toString(),m.toString(f)+" "+m.toString("htt"),q,n)}finally{k=q.Value,g=n.Value}m=h[h.length-1];this.options.headerInfo.CustomTimeScaleTypeHint.EquivalentType>b.TimeScaleType.Days&&(m.IsWorkingTime=!0);if(!1==p)break}}this.options.timeUnits=h}},GetWorkTimeSchedule:function(){return this.options.WorkTimeSchedule},AddTimeUnit:function(a,b,c,d,e,f,g,h,k){var l=this.options,
p=RadiantQ.Gantt,m=RadiantQ.Gantt.Utils,q=l.headerInfo,n=null,r=null,t=null;this._requiresTimeUnitText&&q.ProvideCustomHeaderText.isSubscribed()&&(r=new RadiantQ.Gantt.ProvideCustomerHeaderTextEventArgs(a),q.ProvideCustomHeaderText.raise(q,r),n=r.Text,r=r.TooltipText);if(null==n)if(null==q._textFormat||""==q._textFormat)n=f;else if(-1!=q._textFormat.indexOf("|"))t=q._textFormat,n=" ";else try{n=a.toString(q.TextFormat)}catch(s){}null==r&&(r=g);f=new p.TimeUnit;f.Text=n;f.TextFormat=t;f.ToolTipText=
r;f.Type=e;b=this._floorWidth(m.TimeComputingUtils.ConvertToUnitsOfBaseType(q.BaseTimeScaleType,c,b)*l.BaseTimeUnitWidth,k.Value);f.Width=b.FlooredWidth;k.Value=b.Residue;f.IsWorkingTime=m.TimeComputingUtils.IsWorkingTime(a,e,this.GetWorkTimeSchedule());f.Tag=a.clone();d.push(f);a=l.ViewWidth;if(2==d.length&&d[0].Width<l.GanttChart.MinTimeUnitWidthForHeaderVisibility&&d[1].Width<l.GanttChart.MinTimeUnitWidthForHeaderVisibility)return $(this.element).hide(),!1;d=d[d.length-1];d.Width>a&&(d.Width=a);
h.Value+=d.Width;return h.Value>=a?(h=d.Width-(h.Value-a),0<h&&(d.Width=h),!1):!0},_create:function(){this._refresh()},_refresh:function(){var a=this.options;this.UpdateTimeUnits();this.element.empty().width(a.ViewWidth);for(var b=a.timeUnits.length,a=a.timeUnits,c=document.createDocumentFragment(),d=this.options.headerInfo.RenderCallBack.isSubscribed(),e=0;e<b;e++)this._renderTimeUnit(a[e],c,d);0!=c.childNodes.length&&this.element[0].appendChild(c)},_destroy:function(){this.element.empty()},_refreshWidth:function(a){$(this.element).width(a)},
_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);"ViewWidth"==a&&this._refreshWidth(b);this._refresh()}};RadiantQ.Gantt.Widget.ScaleRendererBase=scaleRendererBase;
var timeSpanHeader={options:{name:"TimeSpanHeader"},_renderTimeUnit:function(a,b,c){var d=$('<div class="rq-timeUnit-div '+window.radiantQclasses.headerClass+'" style="width: '+a.Width+'px;height:100%;" ></div>'),e=d[0];b.appendChild(e);var f=RQStyle.ZeroStyle;b=$("<table ></table>")[0];b.style.cssText=f;var g=b.insertRow(-1),h=g.insertCell(-1);g.style.cssText=f;h.style.cssText=f;h.align="center";h.vAlign="middle";h.width="100%";h.height="100%";f=$(h);f.attr({align:"center",vAlign:"middle",title:a.ToolTipText});
d.mouseenter(function(){a.IsHighlighted(!0);d.addClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});d.mouseleave(function(){a.IsHighlighted(!1);d.removeClass("rq-tsh-timeUnit-hover "+window.radiantQclasses.hoveringClass)});e.appendChild(b);f[this.getChildWidgetName("SmartDateTimeText")]({text:a.Text,timeUnit:a});c&&this.options.headerInfo.RenderCallBack.raise(this,{timeUnit:a,headerUnit:d})},_create:function(){RQStyle.init();this.element.height(this.options.headerInfo.HeaderHeight);
this.baseCreate.apply(this,arguments);var a=this.options;a.headerInfo.PropertyChanged.clear();a.headerInfo.PropertyChanged.subscribe(this.PropertyChange,this)},PropertyChange:function(a,b){"TextFormat"==b.PropertyName&&this._refresh()},UpdateTimeUnits:function(){var a=this.options,b=a.headerInfo;viewStartTime=a.ViewStartTime;viewEndTime=a.ViewEndTime;null!=b&&b.TimeUnitsCache.ClearTimeUnitsCacheForRange(viewStartTime,viewEndTime);this.ScaleRendererBaseUpdateTimeUnits();null!=b&&null!=a.timeUnits&&
0<a.timeUnits.length&&b.TimeUnitsCache.SetTimeUnitsCacheForRange(viewStartTime,viewEndTime,a.timeUnits)},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)}};RadiantQ.Gantt.Widget.TimeSpanHeader=timeSpanHeader;
var ganttChartScaleBackground={options:{TimeRangeHighlightBehavior:null,ChartElement:null,name:"GanttChartScaleBackground"},height:0,_create:function(){this.height=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();this.baseCreate.apply(this,arguments)},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(this.element.data("customID"),"").replace(/GanttChartBackgroundDiv/,"")+a},UpdateTimeUnits:function(){var a=this.options;
if(null!=a.headerInfo){var b=a.headerInfo.TimeUnitsCache.GetTimeUnitsCacheForRange(a.ViewStartTime,a.ViewEndTime);null!=b&&(a.timeUnits=b)}},_renderTimeUnit:function(a,b){var c=RadiantQ.Gantt.BottomTwoHeaderDefinitions.GetIndex(this.options.headerInfo),d=$('<div class=ui-GanttTimeUnitBackground-unit style="height: '+this.height+"px;z-index: "+c+';" ></div>');1==c&&d.css("margin-left","-1px");d[this.getChildWidgetName("GanttTimeUnitBackground")]({Width:a.Width,TimeRangeHighlightBehavior:this.options.TimeRangeHighlightBehavior,
IsWorkingTime:a.IsWorkingTime,NonWorkingTimeBackground:this.options.NonWorkingTimeBackground,WorkingTimeBackground:this.options.WorkingTimeBackground,Type:a.Type,Level:c,TimeUnit:a,ChartElement:this.options.ChartElement});b.appendChild(d[0])},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)}};RadiantQ.Gantt.Widget.GanttChartScaleBackground=ganttChartScaleBackground;
var ganttChartBackground={options:{name:"GanttChartBackground",WorkTimeSchedule:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BottomTwoHeaders:null,ViewStartTime:null,ViewEndTime:null,BaseTimeUnitWidth:25,BaseTimeScaleType:null,timeUnits:[],GanttChart:null,ViewWidth:null,TimeRangeHighlightBehavior:null},_create:function(){var a=this;this._refresh();var b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui.GanttChartBGRefreshUI",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options);
a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options)})},_createUniqueID:function(a){return this.element[0].id+"_"+a},_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){if(null!=this.options.BottomTwoHeaders){for(var a=document.createDocumentFragment(),b=this.element.parents("div.rq-ganttChart"),c=0;c<this.options.BottomTwoHeaders.length;c++){var d=$("<div class=ui-GanttChartScaleBackground id ="+
this._createUniqueID("ui-GanttChartScaleBackground"+c)+" ></div>").data("customID","_ui-GanttChartScaleBackground"+c);0==c&&d.addClass("ui-GanttChart-Background");d[this.getChildWidgetName("GanttChartScaleBackground")]({ViewStartTime:this.options.ViewStartTime.clone(),ViewEndTime:this.options.ViewEndTime.clone(),headerInfo:this.options.BottomTwoHeaders[c],BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,TimeRangeHighlightBehavior:this.options.TimeRangeHighlightBehavior,
GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,WorkTimeSchedule:this.options.WorkTimeSchedule,WorkingTimeBackground:this.options.WorkingTimeBackground,NonWorkingTimeBackground:this.options.NonWorkingTimeBackground,ChartElement:b});a.appendChild(d[0])}0!=a.childNodes.length&&this.element[0].appendChild(a)}},_createUniqueID:function(a){return this.element[0].id+"_"+a},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=
a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.BottomTwoHeaders=a.BottomTwoHeaders;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.NonWorkingTimeBackground=
a.NonWorkingTimeBackground;this.options.TimeRangeHighlightBehavior=a.TimeRangeHighlightBehavior},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments)},_destroy:function(){this.element.empty();var a=$(this.element).parents(".rq-ganttChart");$(a).unbind("ganttchartrefreshui.GanttChartBGRefreshUI")}};RadiantQ.Gantt.Widget.GanttChartBackground=ganttChartBackground;
var ganttTimeUnitBackground={options:{name:"GanttTimeUnitBackground",Width:null,IsWorkingTime:null,NonWorkingTimeBackground:null,WorkingTimeBackground:null,Type:null,Level:null,TimeUnit:null,TimeRangeHighlightBehavior:null,ChartElement:null},_create:function(){var a=this.options;$(this.element).width(a.Width);var b=this;this.options.ChartElement.bind("ganttcharttimerangehighlightbehaviorchanged",function(c,d){d.options.TimeRangeHighlightBehavior==RadiantQ.Gantt.TimeRangeHighlightBehavior.HighlightInChartOnHeaderMouseHover&&
a.TimeUnit.BindingObject(new Binding(a.TimeUnit,"IsHighlighted",b,"IsHighlighted",b.IsHighlightedConverter,null))});a.TimeRangeHighlightBehavior==RadiantQ.Gantt.TimeRangeHighlightBehavior.HighlightInChartOnHeaderMouseHover&&a.TimeUnit.BindingObject(new Binding(a.TimeUnit,"IsHighlighted",this,"IsHighlighted",this.IsHighlightedConverter,null));0==a.Level?a.IsWorkingTime?a.WorkingTimeBackground?this.element.css("background-color",a.WorkingTimeBackground):this.element.addClass("ui-WorkingTimeBackground"):
a.NonWorkingTimeBackground?this.element.css("background-color",a.NonWorkingTimeBackground):this.element.addClass("rq-gc-nonWorking-background "+window.radiantQclasses.highlightingClass):1==a.Level&&(this.element.addClass("rq-gc-timeunit-border ui-widget-content"),this.element.css("border-left-width","1px"),this.element.css("background","none"))},binding:null,_IsHighlighted:null,IsHighlighted:function(a){if(void 0==a)return this._IsHighlighted;this._IsHighlighted=a},IsHighlightedConverter:{Convert:function(a,
b,c){!0==a?(c.element.hasClass("rq-gc-nonWorking-background")&&c.element.removeClass(window.radiantQclasses.highlightingClass),1==c.options.Level&&c.element.css("background",""),c.element.addClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass)):(c.element.hasClass("rq-gc-nonWorking-background")&&c.element.addClass(window.radiantQclasses.highlightingClass),1==c.options.Level&&c.element.css("background","transparent"),c.element.removeClass("rq-Background-timeUnit-hover "+window.radiantQclasses.hoveringClass))}},
_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments)}};RadiantQ.Gantt.Widget.GanttTimeUnitBackground=ganttTimeUnitBackground;
var ganttChartCustomRangeBackground={options:{name:"GanttChartCustomRangeBackground",CustomChartBackgroundRanges:null},_create:function(){this.baseCreate.apply(this,arguments);var a=this,b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui.CustomBGRefreshUI",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options);a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){a._ConvertGanttChartOptionsToChatBGOptions(d.options)});null!=this.options.CustomChartBackgroundRanges&&
this.options.CustomChartBackgroundRanges.DiscreetCustomRanges.CollectionChanged.subscribe(function(){a._refresh()})},_refresh:function(){$(this.element).empty();$(this.element).width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=this.options,b=a.ViewStartTime.clone(),c=a.ViewEndTime.clone(),d=a.BaseTimeUnitWidth,e=a.BaseTimeScaleType;if(!(null==b||null==c||null==a.CustomChartBackgroundRanges||0<=b.compareTo(c))){for(var f=[],g=[],h=0;h<a.CustomChartBackgroundRanges.DiscreetCustomRanges.length;h++)g.push(a.CustomChartBackgroundRanges.DiscreetCustomRanges[h]);
var k=new RadiantQ.Gantt.CustomRangeInformationEventArgs(b,c);a.CustomChartBackgroundRanges.RaiseProvideRepeatingCustomRanges(k);a=RadiantQ.Gantt.Utils.TimeComputingUtils;for(h=0;h<k.CustomRanges.length;h++)g.push(k.CustomRanges[h]);for(h=0;h<g.length;h++)if(k=g[h],0<=k.StartTime.compareTo(b)&&0<c.compareTo(k.StartTime)||0<k.EndTime.compareTo(c)&&0<=c.compareTo(k.EndTime)){var l=a.GetTimeSpan(k.StartTime.clone(),k.EndTime.clone()),p=RadiantQ.Gantt.TimeScaleType.Hours,l=l.getTotalHours(),m=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,
p,l)*d,l=a.GetTimeSpan(b.clone(),k.StartTime.clone()),l=l.getTotalHours(),p=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToUnitsOfBaseType(e,p,l)*d;f.push(new RadiantQ.Gantt.CustomRangeTimeUnit(m,p,k))}b=document.createDocumentFragment();c=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();for(h=0;h<f.length;h++)this._renderCustomChartBackGround(f[h],-1,c,b);$(this.element).append(b)}},_renderCustomChartBackGround:function(a,b,c,d){b=$('<div class=ui-customBackgroundRange-unit style="width: '+
a.Width+"px;height: "+c+"px;margin-left: "+(a.CanvasLeft+b)+'px;" ></div>')[0];d.appendChild(b);a.Height=c;this.backGroundTemplate(a,b)},backGroundTemplate:function(a,b){$.tmpl(a.CustomRangeInfo.DataTemplate,a).appendTo(b)},_createUniqueID:function(a){return this.element[0].id+"_"+a},_getCustomIdSelector:function(a){return"#"+this.element[0].id+"_"+a},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(/rq-gc-customRange-background/g,"")+a},_setOption:function(a,
b){this.baseSetOption.apply(this,arguments)},_ConvertGanttChartOptionsToChatBGOptions:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=
a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_destroy:function(){var a=$(this.element).parents(".rq-ganttChart");$(a).unbind("ganttchartrefreshui.CustomBGRefreshUI")}};RadiantQ.Gantt.Widget.GanttChartCustomRangeBackground=ganttChartCustomRangeBackground;
var specialLines={options:{SpecialLineInfos:null,name:"SpecialLines"},height:0,_create:function(){this.baseCreate.apply(this,arguments);var a=this,b=$(this.element).parents(".rq-ganttChart");$(b).bind("ganttchartrefreshui.SplLinesRefreshUI",function(b,d){b.preventDefault();b.stopPropagation();a._ConvertGanttChartOptsToSpecialLineOpts(d.options);a._refresh()});$(b).bind("ganttchartoptionchanged",function(b,d){b.preventDefault();b.stopPropagation();a._ConvertGanttChartOptsToSpecialLineOpts(d.options)});
null!=this.options.SpecialLineInfos&&this.options.SpecialLineInfos.CollectionChanged.subscribe(function(){a._refresh()})},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(/SpecialLinesDiv/g,"")+a},_refresh:function(){this.element.empty().width(this.options.ViewWidth);this.UpdateTimeUnits()},UpdateTimeUnits:function(){var a=RadiantQ.Gantt.Utils.TimeComputingUtils,b=this.options,c=b.ViewStartTime.clone(),d=b.ViewEndTime.clone(),e=b.BaseTimeUnitWidth,
f=b.BaseTimeScaleType;if(!(null==c||null==d||null==b.SpecialLineInfos||0<=c.compareTo(d))){for(var d=[],g=0;g<b.SpecialLineInfos.length;g++){var h=b.SpecialLineInfos[g],k=a.GetTimeSpan(c,h.LineDateTime);if(!(k<RQTimeSpan.Zero_M())){var l=new RadiantQ.Gantt.TimeUnit;if(0>=c.compareTo(h.LineDateTime))switch(void 0==h.ToolTipText&&(h.ToolTipText=""),l.Tag=h,f){case ns_gantt.TimeScaleType.Minutes:l.Type=ns_gantt.TimeScaleType.Minutes;l.Tag=h;l.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Minutes,
k.getTotalMinutes())*e;d.push(l);break;case ns_gantt.TimeScaleType.Hours:l.Type=ns_gantt.TimeScaleType.Hours;l.Tag=h;l.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Hours,k.getTotalHours())*e;d.push(l);break;case ns_gantt.TimeScaleType.Days:l.Type=ns_gantt.TimeScaleType.Days;l.Tag=h;l.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Days,k.getTotalDays())*e;d.push(l);break;case ns_gantt.TimeScaleType.Weeks:l.Type=ns_gantt.TimeScaleType.Weeks;l.Tag=h;l.Width=a.ConvertToUnitsOfBaseType(f,
ns_gantt.TimeScaleType.Weeks,k.getTotalDays()/7)*e;d.push(l);break;case ns_gantt.TimeScaleType.Months:l.Type=ns_gantt.TimeScaleType.Months;l.Tag=h;var p=c,k=12*(h.LineDateTime.getFullYear()-p.getFullYear()),h=h.LineDateTime.getMonth()-p.getMonth(),k=0<h?k+h:k-(12-Math.Abs(h));l.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Days,k)*e;d.push(l);break;case ns_gantt.TimeScaleType.Years:l.Type=ns_gantt.TimeScaleType.Years,l.Tag=h,l.Width=a.ConvertToUnitsOfBaseType(f,ns_gantt.TimeScaleType.Weeks,
h.LineDateTime.getFullYear()-c.getFullYear())*e,d.push(l)}}}a=document.createDocumentFragment();b=$(this._getGanttChartDivsUniqueSelectorIdByID("rq-gc-chartArea-div")).height();for(g=0;g<d.length;g++)this._renderCustomChartBackGround(d[g],-1,b,a);$(this.element).append(a)}},_renderCustomChartBackGround:function(a,b,c,d){void 0==a.Tag.LineColor&&(a.Tag.LineColor="#C5C5C5");b=$('<div class=rq-gc-specialLine style="Background-color:'+a.Tag.LineColor+";width: 1px;height: "+c+"px;margin-left: "+(a.Width+
b)+'px;" title=""></div>');this.createToolTip(b,a);d.appendChild(b[0])},createToolTip:function(a,b){a.tooltip({track:!0,content:function(a){return"<div align='center'>"+b.Tag.ToolTipText+"</div>"}})},_ConvertGanttChartOptsToSpecialLineOpts:function(a){this.options.ViewStartTime=a.ComputedStartTime.clone();this.options.ViewEndTime=a.ComputedEndTime.clone();this.options.BaseTimeUnitWidth=a.BaseTimeUnitWidth;this.options.BaseTimeScaleType=a.BaseTimeScaleType;this.options.GanttChart={MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility};
this.options.ViewWidth=a.ViewWidth;this.options.WorkTimeSchedule=a.WorkTimeSchedule;this.options.WorkingTimeBackground=a.WorkingTimeBackground;this.options.WorkingTimeBackground=a.WorkingTimeBackground},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)},_destroy:function(){var a=$(this.element).parents(".rq-ganttChart");$(a).unbind("ganttchartrefreshui.SplLinesRefreshUI")}};RadiantQ.Gantt.Widget.SpecialLines=specialLines;
var scalePanelRendererBase={options:{ViewStartTime:null,ViewEndTime:null,name:"ScalePanelRendererBase"},_create:function(){},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments)}};RadiantQ.Gantt.Widget.ScalePanelRendererBase=scalePanelRendererBase;
var timeSpanHeaders={panningUtil:null,options:{TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:null,ResizeToFit:null,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,WorkTimeSchedule:null,TimeRangeHighlightBehavior:null,name:"TimeSpanHeaders"},_previousHeight:null,heightChangeListener:function(a){a!=
this._previousHeight&&(this._previousHeight=a,this.element.trigger("heightChanged"))},redraw:function(){this._renderTimeLineHeaders(this.options)},_create:function(){this.baseCreate.apply(this,arguments);var a=this;this.element.addClass("rq-tsh-div").data("TimeSpanHeaders",this);this._previousHeight=this.element.height();var b=$(this.element).parents(".rq-ganttChart");b.bind("ganttchartrefreshui.TimeSpanHeadersRefreshUI",function(b,d){b.preventDefault();b.stopPropagation();$.extend(a.options,d.options);
a._renderTimeLineHeaders(d.options)});b.bind("ganttchartoptionchanged",function(b,d){b.preventDefault();b.stopPropagation();$.extend(a.options,d.options)});$(this.element).parents("div").filter(".rq-ganttBase").bind("ganttbaseheadercollectionschanged",function(b,d){b.preventDefault();b.stopPropagation();$.extend(a.options,d.options);var e=d.value.items;if("insert"==d.event.type)for(var f=0;f<e.length;f++)a._insertTimeLineHeader(e[f],d.value.index,d.options);else"remove"==d.event.type&&a._removeTimeLineHeader(d.value.index);
a.heightChangeListener(a.element.height())});this.redraw()},widget:function(){return this.element},ShouldZoomWithLeftMouse:function(a){a=RadiantQ.Gantt.isModifierKeyIsPresed(a);return(this.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag&&!a},ShouldScrollWithLeftMouse:function(a){var b=RadiantQ.Gantt.isModifierKeyIsPresed(a);return(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag)==
RadiantQ.Gantt.ChartScrollOptions.LeftMouseButtonDownDrag&&!b||(this.options.ScrollOptions&RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag)==RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag&&a.ctrlKey},_renderTimeLineHeaders:function(a){var b=this;this.element[0].style.display="none";this._refreshWidth(this.options.ViewWidth);null!=this.options.TimeScaleHeaders&&$.map(this.options.TimeScaleHeaders,function(c,d){var e=b._addTimeLineHeader(c,a);b.element.append(e);return e});
this.heightChangeListener(this.element.height());this.element[0].style.display="block"},_refreshWidth:function(a){$(this.element).empty();$(this.element).width(a)},_addTimeLineHeader:function(a,b){return this._newTimeLine(a,b)},_insertTimeLineHeader:function(a,b,c){a=this._newTimeLine(a,c);$(".rq-tlh-div",this.element).eq(b).before(a)},_removeTimeLineHeader:function(a){$(".rq-tlh-div",this.element).eq(a).remove()},_newTimeLine:function(a,b){return $('<div class="rq-tlh-div" />')[this.getChildWidgetName("TimeSpanHeader")]({ViewStartTime:this.options.ComputedStartTime,
ViewEndTime:this.options.ComputedEndTime,headerInfo:a,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,WorkTimeSchedule:this.options.WorkTimeSchedule})},StartPanning:function(){function a(a,d){b._trigger("AnchorTimeChanged",this,b.panningUtil.CurAnchorTime)}null!=this.panningUtil&&this.panningUtil.AnchorTimeChanged.isSubscribed&&this.panningUtil.AnchorTimeChanged.unsubscribe(a);
this.panningUtil=new RadiantQ.Gantt.GanttChartPanningUtil(this.options.AnchorTime,this.options.BaseTimeScaleType,this.options.BaseTimeUnitWidth);this.panningUtil.AnchorTimeChanged.subscribe(a);var b=this},_getGanttChartDivsUniqueSelectorIdByID:function(a){return"#"+this.element[0].id.toString().replace(/timeSpanHeader/g,"")+a},ScrollBy:function(a){if(!1==this.options.ResizeToFit){var b=$(this._getGanttChartDivsUniqueSelectorIdByID("GanttChart")),c=$(".rq-gc-horizontalScrollBar",b.parent()),c=$(".rq-gc-chart-HScrollBar-content",
c).width()-c.width(),d=b.scrollLeft(),d=d+a;d<=c&&b.scrollLeft(d)}else null!=this.panningUtil?this.panningUtil.ApplyXChange(a):(a=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth),a=this.options.AnchorTime.addTimeSpan(a),self._trigger("AnchorTimeChanged",this,a))},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)},destroy:function(){this.element.empty();this.element.parents(".rq-ganttChart").unbind("ganttchartrefreshui.TimeSpanHeadersRefreshUI")}};
RadiantQ.Gantt.Widget.TimeSpanHeaders=timeSpanHeaders;
var rowbase={options:{filter:"tbody > tr",canhHighlightAdjacentElement:null,name:"rowbase"},_create:function(){this.options.canhHighlightAdjacentElement=!0},IsChart:function(a){return $(a).parents("table").hasClass("rq-gc-rowsParent-table")?!0:$(a).parents("table").hasClass("ui-grid-body-table")?!1:null},getParent:function(a){return this.IsChart(a)?$(a).parents(".rq-ganttChart")[0]:$(a).parents(".rq-FlexyTable")[0]},getAdjacentTR:function(a,b){if(a){var c=-1==a[0].rowIndex?a.index():a[0].rowIndex,
d=this.IsChart(a),e;!0==d?(d=$(".ui-grid-body-table",this.element)[0],void 0!=d.rows&&(e=d.rows[c])):!1==d&&null!=d&&(d=$(".rq-gc-rowsParent-table",this.element)[0])&&void 0!=d.rows&&(e=d.rows[c]);return $(e,this.element)}}};RadiantQ.Gantt.Widget.rowbase=rowbase;
var ganttRowselectable={options:{SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,IsFlexyGantt:!0,name:"GanttRowselectable"},selectEvent:"mousedown",selectedItems:new ObservableCollection,_create:function(){var a=this;this.selectedItems=new ObservableCollection;$(".ui-grid-body-table",this.element).addClass("ui-selectable");$(".rq-gc-rowsParent-table",this.element).addClass("ui-selectable");this.baseCreate.apply(this,arguments);this.element.data("GanttRowselectable",this);this.element.bind(this.selectEvent,
function(b){void 0!=RadiantQ.Gantt.RowDragDropTracker&&!1!=RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M()||a._mousedown(b)});var b=!0;this.element.bind("keydown",$.proxy(function(a){13===a.which&&!0==b&&(this._keydown(a),b=!1,a.stopPropagation())},this));$(this.document).bind("keyup",$.proxy(function(a){13===a.which&&(b=!0)},this));$(this.document).bind("keydown",$.proxy(function(a){13!==a.which||a.isPropagationStopped()||!0!=b||0!=this.mouseDownTarget.length&&this.mouseDownTarget[0]==this.element[0]&&
this._keydown(a)},this));this.mouseDownTarget=null;$(this.document).bind("mousedown",$.proxy(function(a){this.mouseDownTarget=$(a.target);this.mouseDownTarget.hasClass(".rq-ganttBase")||(this.mouseDownTarget=this.mouseDownTarget.parents(".rq-ganttBase"))},this));this.UpdateSource();$.observable(this.selectedItems).bind("insert remove replaceAll",function(b,d){a.UpdateSelection(b,d)})},getSource:function(){return this.options.IsFlexyGantt?this.element.FlexyGantt("option","FlatItemsSource"):this.element.GanttControl("option",
"FlatItemsSource")},UpdateSource:function(){var a=this,b=this.getSource();b&&b.CollectionChanged.subscribe(function(b,d){var e=d.items[0].IsSelected();"remove"===b.type&&!0==e&&a.selectedItems.remove(d.items[0])})},_mousedown:function(a){var b=$(a.target).closest("tr"),c=$(b.parents("table")[0]);if(!c)return!1;if(c.hasClass("ui-grid-body-table")||c.hasClass("rq-gc-rowsParent-table")){if(!a.ctrlKey&&0!=b.length||this.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single){if(1==this.selectedItems.length&&
this.selectedItems[0]==b[0]["data-grid-item"])return;this.removeAllHighlight()}else if(0!=b.length&&b.hasClass("rq-row-selected")&&3!==a.which)return this.selectedItems.remove(b[0]["data-grid-item"]),!1;this.hightlighRow(b,a)}return!1},_keydown:function(a){a=this.selectedItems.length;var b=null,c=this.options.IsFlexyGantt?this.element.data("FlexyGantt").options:this.element.data("GanttControl").options;0!=a&&(this.selectedItems.sort(function(a,b){return a.TableRow()&&a.TableRow().length&&b.TableRow()&&
b.TableRow().length?c.UseVirtualization?a.TableRow()[0]._displayIndex-b.TableRow()[0]._displayIndex:a.TableRow()[0].rowIndex-b.TableRow()[0].rowIndex:0}),b=this.selectedItems[a-1].TableRow()[0].nextElementSibling,this.selectingRowByEnter(this.selectedItems,b))},selectingRowByEnter:function(a,b){var c=$(b);if(null!=b){this.removeAllHighlight();this.hightlighRow(c);var d=this.element.find(".ui-grid-body").height();c.position().top>d&&(c[0].scrollIntoView(),c.focus())}else this.triggerEvent("onEnterKeyInLastRow")},
selectItemByitem:function(a){this.removeAllHighlight();this.hightlighRowByData(a)},UpdateSelection:function(a,b){var c=b.items[0];if(void 0==c.IsSelected())return!1;if("insert"===a.type){c.IsSelected(!0);var d=c.TableRow(),e=c.ChartRow();$("td",d).addClass("rq-row-selected-children");$("td",e).addClass("rq-row-selected-children");d=$("#arrow",d);0!=d.length&&d.addClass("ui-selected-arrow");d=$("div.label",e);0!=d.length&&d.addClass("ui-selected-label");d=$("div.rq-gc-taskbar",e);0!=d.length?d.addClass("ui-selected-bar"):
$("div.taskbar-style ",e).addClass("ui-selected-bar");d=$("div.rq-gc-parentBar-leftCue",e);0!=d.length&&d.addClass("ui-selected-parentLeftPoly");d=$("div.rq-gc-parentBar-rightCue",e);0!=d.length&&d.addClass("ui-selected-parentRightPoly");e=$("div.rq-gc-parentBar-middle",e);0!=e.length&&e.addClass("ui-selected-parentMiddleBar");c=new RadiantQ.Gantt.SelectionChanged({TableRow:c.TableRow(),ChartRow:c.ChartRow(),Data:b.items[0]},[]);this.triggerEvent("selectedChange",a,c)}else"remove"===a.type&&(c.IsSelected(!1),
d=c.TableRow(),e=c.ChartRow(),$("td",d).removeClass("rq-row-selected-children"),$("td",e).removeClass("rq-row-selected-children"),d=$("div#arrow",d),0!=d.length&&d.removeClass("ui-selected-arrow"),d=$("div.label",e),0!=d.length&&d.removeClass("ui-selected-label"),d=$("div.rq-gc-taskbar",e),0!=d.length?d.removeClass("ui-selected-bar"):$("div.taskbar-style ",e).removeClass("ui-selected-bar"),d=$("div.rq-gc-parentBar-leftCue",e),0!=d.length&&d.removeClass("ui-selected-parentLeftPoly"),d=$("div.rq-gc-parentBar-rightCue",
e),0!=d.length&&d.removeClass("ui-selected-parentRightPoly"),e=$("div.rq-gc-parentBar-middle",e),0!=e.length&&e.removeClass("ui-selected-parentMiddleBar"),c=new RadiantQ.Gantt.SelectionChanged([],{TableRow:c.TableRow(),ChartRow:c.ChartRow(),Data:b.items[0]}),this.triggerEvent("selectedChange",a,c))},IsTable:function(a){return a.parent().parent().is($(".ui-grid-body-table",this.element))},SelectedItems:function(){return this.selectedItems},hightlighRow:function(a){0!=a.length&&this.selectedItems.add(a[0]["data-grid-item"])},
hightlighRowByData:function(a){null!=a&&this.selectedItems.add(a)},removeAllHighlight:function(){for(var a=this.selectedItems.length,b=0;b<a;b++)this.selectedItems.remove(this.selectedItems[0])},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "Source":this.removeAllHighlight(),this.UpdateSource()}},destroy:function(){this.baseDestroy.apply(this,arguments);this.removeAllHighlight();this.element.unbind("mousedown")}};RadiantQ.Gantt.Widget.GanttRowselectable=ganttRowselectable;
var hoverable={options:{name:"hoverable"},currentData:null,currentTr:null,_create:function(){var a=this;this.baseCreate.apply(this,arguments);this.element.bind("mouseover",function(b){a._mousehover(b)});this.element.bind("mouseleave",function(b){a.removehighlight(b);return!1})},_mousehover:function(a){this.removehighlight();this.currentTr=$(a.target).closest("tr");0!=this.currentTr.length&&(this.currentData=this.currentTr[0]["data-grid-item"],null!=this.currentData&&this.currentData.IsMouseIn(!0));
return!1},removehighlight:function(){null!=this.currentData&&this.currentData.IsMouseIn(!1)},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.unbind("mouseover");this.element.unbind("mouseleave")}};RadiantQ.Gantt.Widget.hoverable=hoverable;
var ns_gantt=RadiantQ.Gantt,stElementInfocollection=[],rtElementInfocollection=[],rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils,taskbar={_taskbar:null,currentBlock:null,options:{name:"taskbar",StartTime:null,EndTime:null,Parent:null,Height:null,GanttChart:null,ApplyBarWidthOptimization:null,IsParentTypeRow:null,OverlappedTasksRenderingOptimization:null,ComputedStartTime:null,Data:null,PropertyName:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,
TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ParentTasksListProperty:null,DataSource:null,KnockoutObjectName:null,FlexyGantt:null,DragThumb:null,TimeIndicatorLineOption:null,ResizeThumb:null,StartResizeThumb:$()},isKOBinding:!1,HasChanged:!1,stSourceBinding:null,etSourceBinding:null,updateValues:function(){var a=this.options;if(null!=this.stSourceBinding){var b=this.getChildObject(a.Data,this.stSourceBinding);$.isFunction(b)?(b.subscribe(this.startTimeChanged.bind(this)),a.StartTime=
b()):a.StartTime=b.clone()}null!=this.etSourceBinding&&(b=this.getChildObject(a.Data,this.etSourceBinding),$.isFunction(b)?(b.subscribe(this.endTimeChanged.bind(this)),a.EndTime=b()):a.EndTime=b.clone())},getSchedule:function(){return this.options.Parent.element.WorkTimeSchedule_M()},startTimeChanged:function(a){var b=this.options.StartTime;this._setOption("StartTime",a);this._OnRecomputeLocation(this.element);var c={Name:this.options.Data.Name,originalStart:this.options.StartTime,originalEnd:this.options.EndTime,
originalWidth:parseInt($(this.element).css("width")),originalLeft:parseInt($(this.element).css("margin-left")),ProposedEnd:null,ProposedStart:null},c={element:this.element,taskStartAndEndTime:c,TaskItemControl:this};stElementInfocollection.push(c);rtElementInfocollection.push(c);this.options.Parent.element.UpdateItemForCue(this.options.Data,a,b)},endTimeChanged:function(a){var b=this.options;this._setOption("EndTime",a);this._OnRecomputeLocation(this.element);a={Name:b.Data.Name,originalStart:b.StartTime,
originalEnd:b.EndTime,originalWidth:parseInt($(this.element).css("width")),originalLeft:parseInt($(this.element).css("margin-left")),ProposedEnd:null,ProposedStart:null};a={element:this.element,taskStartAndEndTime:a,TaskItemControl:this};stElementInfocollection.push(a);rtElementInfocollection.push(a)},_create:function(){this._validateOptions();var a=this.element;a.data("TaskBar",this);this.element[0].DataContext=this.options.Data;var b=this;_taskbar=this;var c=this.options,d=c.GanttChart;if(null==
c.TaskStartTime)throw"TaskStartTime is not set.";if(null==c.TaskEndTime)throw"TaskEndTime is not set.";c.IsParentTypeRow?(this.stSourceBinding=c.ParentTaskStartTime,this.etSourceBinding=c.ParentTaskEndTime):(this.stSourceBinding=c.TaskStartTime,this.etSourceBinding=c.TaskEndTime);if($.isFunction(c.Data)){var e=c.Data();c.Data=e[0]}this.updateValues();var f=RadiantQ.FlexyGantt.TaskItemControl,e=f.MarginForBars,g=2*e,h=a[0].style.borderTopWidth,k=a[0].style.borderBottomWidth;a.hasClass("rq-gc-parentBar")&&
a.hasClass("parentBar-style")?(h="0px"==h||""==h?f.ParentBar_BorderTopWidth:parseInt(h),k="0px"==k||""==k?f.ParentBar_BorderBottomWidth:parseInt(taskbarDiv[0].style.borderBottomWidth)):(h="0px"==h||""==h?f.TaskBar_BorderTopWidth:parseInt(h),k="0px"==k||""==k?f.TaskBar_BorderBottomWidth:parseInt(k));f=0;void 0!=a.attr("heightSetBySrc")||isNaN(parseInt(a[0].style.height))?(f=parseInt(a.parent().parent()[0].style.height)-g-(h+k),a.attr("heightSetBySrc","true")):f=parseInt(a[0].style.height);a.css({height:f+
"px","margin-top":e+"px"});$(this.options.Parent.element.element).bind("heightChange",function(){b._OnRecomputeLocation(a);b.options.Parent.element.element[0]._isTriggered=!1});this.element.mouseover(function(){var a=$(this);b.options.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(a.find(".rq-gc-start-verticalLine").show(),a.find(".rq-gc-end-verticalLine").show());a.hasClass("rq-gc-parentBar")&&a.hasClass("parentBar-style")||a.addClass("rq-taskbar-shadow")});this.element.mouseout(function(){var a=
$(this);b.options.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(a.find(".rq-gc-start-verticalLine").hide(),a.find(".rq-gc-end-verticalLine").hide());a.hasClass("rq-gc-parentBar")&&a.hasClass("parentBar-style")||a.removeClass("rq-taskbar-shadow")});$(c.Parent.element.element).parents("div").filter(".rq-ganttChart");"ShowContextMenu"==d.options.TouchTapAction&&(this.element[0].addEventListener("touchstart",this._onTouchstart.bind(this),!1),this.element[0].addEventListener("touchend",
this._onTouchend.bind(this),!1),this.element[0].addEventListener("MSPointerDown",this._onTouchstart.bind(this),!1),this.element[0].addEventListener("MSPointerUp",this._onTouchend.bind(this),!1));e={Name:c.Data.Name,originalStart:this.options.StartTime,originalEnd:c.EndTime,originalWidth:parseInt(a.css("width")),originalLeft:parseInt(a.css("margin-left")),ProposedEnd:null,ProposedStart:null};e.HasChanged=this.HasChanged;this._OnRecomputeLocation(a);this.ApplyTooltipSettings(a,c);d.RefreshUIEvent.subscribe(this.OnChartRefreshUI,
this);$(this.options.Parent.element.options.Parent.element).parents("div").filter(".rq-ganttChart").bind("ganttcharttimeindicatorlineoptionchanged",function(a,b){this._OnRecomputeLocation(this.element)}.bind(this));void 0!=this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.subscribe(this.DataPropertyChangeFunction,this);$(".verticalLine:eq(0)",this.element).click(function(a){a.stopPropagation()});this.options.FlexyGantt.options&&(0<this.options.DragThumb.length&&a.shiftTracker(e,
this,this.DragEnd,this.options.DragThumb),(0<this.options.ResizeThumb.length||0<this.options.StartResizeThumb.length)&&a.resizeTracker(e,this,this.ResizeEnd,this.ResizeStart,this.options.ResizeThumb,this.options.StartResizeThumb))},getChildObject:function(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++)var f=c[e],d=d[f+"_M"]?d[f+"_M"]():d[f];return d},OnChartRefreshUI:function(a,b){var c=this.options;this._OnRecomputeLocation(this.element);taskStartAndEndTime={Name:c.Data.Name,originalStart:this.options.StartTime,
originalEnd:c.EndTime,originalWidth:parseInt(this.element.css("width")),originalLeft:parseInt(this.element.css("margin-left"))};for(var c=$(".resizer-style",this.element),d=0;d<c.length;d++)$(c[d]).hasClass("start-resizer-style")&&$(c[d]).hasClass("rq-gc-startTaskBarResizer")||$(c[d]).css("margin-left",taskStartAndEndTime.originalWidth-4)},tapDownX:null,tapDownY:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY},_onTouchend:function(a){var b=
a.changedTouches?a.changedTouches[0]:a;this.tapDownX==b.clientX&&this.tapDownY==b.clientY&&"mouse"!=a.pointerType&&4!=a.pointerType&&$(this.element).contextMenu({x:b.clientX,y:b.clientY})},_validateOptions:function(){var a=this.options;window.console&&(a.IsParentTypeRow?(a.ParentTaskStartTime&&void 0==a.Data[a.ParentTaskStartTime]&&console.error("Data at Row no:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.ParentTaskStartTime+'". Specify a correct ParentTaskStartTime value.'),
a.ParentTaskEndTime&&void 0==a.Data[a.ParentTaskEndTime]&&console.error("Data at Row no:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.ParentTaskEndTime+'". Specify a correct ParentTaskEndTime value.')):a.Data&&(a.TaskStartTime&&void 0==this.getChildObject(a.Data,a.TaskStartTime)&&console.error("Data at Row No:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.TaskStartTime+'". Specify a correct TaskStartTime value.'),
a.TaskEndTime||void 0!=this.getChildObject(a.Data,a.TaskEndTime)||console.error("Data at Row No:"+(a.Parent.element.options.Data.TableRow.rowIndex+1)+' does not have a property called "'+a.TaskEndTime+'". Specify a correct TaskEndTime value.')))},DataPropertyChangeFunction:function(a,b){this.options.DataSource.IsParentType()?b.PropertyName!=this.options.ParentTaskStartTime&&b.PropertyName!=this.options.ParentTaskEndTime||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this):"StartTime"!=b.PropertyName&&
"EndTime"!=b.PropertyName&&b.PropertyName!=this.options.TaskStartTime&&b.PropertyName!=this.options.TaskEndTime||RadiantQ.Gantt.Utils.DelayUpdateUtil.TryDelayedUpdate(this)},PartialUpdate:function(){this.options.Parent.element.RedrawTaskRow()},TotalUpdate:function(){this.options.Parent.element.RedrawTaskRow()},_destroy:function(){this.disposeBindings&&this.disposeBindings();this.options.GanttChart.RefreshUIEvent.unsubscribe(this.OnChartRefreshUI,this);this.options.Data.PropertyChanged&&this.options.Data.PropertyChanged.unsubscribe(this.DataPropertyChangeFunction,
this);if(this.options.Parent&&this.options.Parent.element){var a=this.options.Parent.element._getIntersectingBlock(this,this.options.Parent.element);null!=a&&this.options.Parent.element.RemoveEntity(a,this)}this.element.empty()},propertyChangeFuction:function(a,b){},DragEnd:function(a,b){if(!a.options.StartTime.equals(b.originalStart)||!a.options.EndTime.equals(b.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,
"DragEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,c);b.originalStart=c.StartTime;b.originalEnd=c.EndTime}a._setOption("StartTime",b.originalStart);a._setOption("EndTime",b.originalEnd);a.options.Parent.element.RedrawTaskRow()}},ResizeEnd:function(a,b){if(!a.options.EndTime.equals(b.originalEnd)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalStart,b.originalEnd,"ResizeEnd",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,
c);b.originalEnd=c.EndTime}a._setOption("EndTime",b.originalEnd);a.options.Parent.element.RedrawTaskRow()}},ResizeStart:function(a,b){if(!a.options.StartTime.equals(b.originalStart)){if(0<a.options.FlexyGantt.TaskTimeChanged.fn.length){var c=new TimesChangingEventArgs(a.options.Data,b.originalstart,b.originalEnd,"ResizeStart",a.options.DataSource);a.options.FlexyGantt.TaskTimeChanged.raise(this,c);b.originalStart=c.StartTime}a._setOption("StartTime",b.originalStart);a.options.Parent.element.RedrawTaskRow()}},
TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){a.attr("title","");this.LoadDefaultTooltipStyle();this.CreateTooltip(this,a);this.UpdateTooltipContent(this.options.Data)},closeToolTip:function(){},CreateTooltip:function(a,b){this.taskBarTooltip(a,b);var c=!1;$(b).hover(function(a){c=!0},function(){c=!1});$(b).mouseout(function(){c||$(".ui-tooltip").remove().removeAttr("aria-describedby")})},taskBarTooltip:function(a,b){$(b).tooltip({open:function(b,
d){b.currentTarget.isDragging?isDragging=b.currentTarget.isDragging:b.currentTarget.isResizing&&(isResizing=b.currentTarget.isResizing);b.currentTarget.uiTooltip=d.tooltip;a.uiTooltip=d.tooltip},isDragging:!1,isResizing:!1,content:function(b){if(this.isDragging||this.isResizing)return null;this.isDragging=this.isResizing=!1;if(!a.TooltipContent)return null;a.uiTooltip&&$(".ui-tooltip").remove().removeAttr("aria-describedby");return a.TooltipContent},position:{my:"left bottom",at:"top",offset:"10"},
track:!0})},UpdateTooltipContent:function(a){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var b={Name:a.Name,StartTime:a.ProposedStart,DataSource:this.options.Data,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged};if(a.Duration){if(0>a.Duration.days)return;b.Duration=a.Duration}this.toolTipTemplate(b)}else a[_taskbar.stSourceBinding]&&a[_taskbar.etSourceBinding]&&
this.options.TaskTooltipTemplate&&this.UpdatedTaskTemplate(a)},toolTipTemplate:function(a){this.options.MovingInfoPopup=$.template(null,this.options.MovingInfoPopup);this.options.ResizeInfoPopup=$.template(null,this.options.ResizeInfoPopup);this.DragTooltipContent=$('<div align="center" />').append($.tmpl(this.options.MovingInfoPopup,a));this.ResizeTooltipContent=$('<div align="center" />').append($.tmpl(this.options.ResizeInfoPopup,a))},UpdatedTaskTemplate:function(a){this.TooltipContent=$('<div class="TaskTooltip" />').append($.tmpl(this.options.TaskTooltipTemplate,
a,{isParentType:this.options.IsParentTypeRow,DataContext:this}))},LoadDefaultTooltipStyle:function(){$.isFunction(_taskbar.options.Data[_taskbar.stSourceBinding]);$.isFunction(_taskbar.options.Data[_taskbar.stSourceBinding]);this.popupStyle()},popupStyle:function(){_taskbar.options.MovingInfoPopup||(_taskbar.options.MovingInfoPopup="<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString} :</b></td><td> "+
_taskbar._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:</b> </td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");_taskbar.options.ResizeInfoPopup||(_taskbar.options.ResizeInfoPopup="<div><table class='rq-gc-taskbar-popup' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td> "+
_taskbar._MakeItBoldWhenActualDate("{{if Duration}}${$item.data.Duration.days_M()}d ${$item.data.Duration.hours_M()} h{{/if}}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString} :</b> </td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.StartTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+_taskbar._MakeItBoldWhenActualDate("${$item.data.EndTime.toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>")},
_MakeItBoldWhenActualDate:function(a){return"{{if HasChanged }}"+a+"{{else}}<b>"+a+"</b>{{/if}}"},LocationRecomputed:new ObjectEvent("LocationRecomputed"),_OnRecomputeLocation:function(a){var b=parseFloat(a.css("width")),c=parseFloat(a.css("margin-left")),d=this.options,e=this.options.GanttChart,f=e.options,g=f.BaseTimeScaleType,h=f.ComputedStartTime,k=f.BaseTimeUnitWidth,l=this.getSchedule();if(null!=this.options.GanttChart){var p=rqTCUtils.ConvertToUnitsOfBaseScaleType(g,h,d.StartTime,l)*k,m=0,
m=d.EndTime<d.StartTime?0:rqTCUtils.ConvertToUnitsOfBaseScaleType(g,d.StartTime,d.EndTime,l)*k,m=m-1;0>m&&(m=1);var q=p;0>q+m||q>f.ViewWidth||(f=this._GetBarRenderStartTime(d.StartTime),q=this._GetBarRenderStartTime(d.EndTime),(f!=d.StartTime||q!=d.EndTime)&&f<q&&(m=rqTCUtils.ConvertToUnitsOfBaseScaleType(g,f,q,l)*k,p=rqTCUtils.ConvertToUnitsOfBaseScaleType(g,h,f,l)*k));a.css("width",m+"px").css("margin-left",p+"px");this.options.OverlappedTasksRenderingOptimization!=RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight||
b==m&&c==p||(this.currentBlock=this.options.Parent.element._getIntersectingBlocks(this,this.options.Parent.element),this.options.Parent.element._blockIntact(this.currentBlock));0<this.LocationRecomputed.fn.length&&this.LocationRecomputed.raise(this);this.renderVerticalLine();b=this.element.attr("SizeChanged");window[b]&&window[b].call(this.element,this.options.Data,e);this.options.GanttChart.options.OnTaskBarLoad&&(e=this.options.GanttChart.options.OnTaskBarLoad,null!=e&&"function"==typeof e&&e.call(a,
this))}},renderVerticalLine:function(){var a=null,b={Data:this.options.Data,UseWidthForVerticalLines:!1,IsShifting:!1,UseWidthForTaskBar:!0};null!=this.options.GanttChart.options.ProvideWidthForMilestoneShape&&(a=this.options.GanttChart.options.ProvideWidthForMilestoneShape(this,b));null!=a&&!0==b.UseWidthForTaskBar&&(left-=a/2,width=a);var c=this.element,d=c.find("div.rq-gc-start-verticalLine"),e=c.find("div.rq-gc-end-verticalLine");if(0!=d.length||0!=e.length){var f=c.closest("tr");if(f.length){var g=
parseInt(c.css("margin-top"));c.height();var c=c.width(),f=f[0].offsetTop,h=0;!0==b.UseWidthForVerticalLines&&(h=a/2);a={height:f+g+"px","margin-left":h+"px","margin-top":-(f+g)+"px"};0!=d.length&&d.css(a);0!=e.length&&(!1==b.UseWidthForVerticalLines&&(a["margin-left"]=c+"px"),e.css(a))}}b=this.options.GanttChart.options.TimeIndicatorLineOption;(b&ns_gantt.TimeIndicatorLines.Always)!=ns_gantt.TimeIndicatorLines.Always||(b&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize?
(d.hide(),e.hide()):(d.show(),e.show())},_GetBarRenderStartTime:function(a){if(this.options.ApplyBarWidthOptimization){var b=this._ConvertXToTime(-10);if(a<b)return b}return a},_beginUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=this.options.Parent.element;this.currentBlock=b._getIntersectingBlock(a,b)}},_endUpdateOverlapTasks:function(a){if(this.options.OverlappedTasksRenderingOptimization==
RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){var b=this.options.Parent.element;null!=this.currentBlock&&(b._blockIntact([this.currentBlock]),this.currentBlock=null);a=b._getIntersectingBlocks(a);null!=a&&0<a.length&&b._blockIntact(a)}},_updateTaskItem:function(a,b,c,d){var e=this.element,f=RadiantQ.FlexyGantt.TaskItemControl,g=f.MarginForBars,h=$(e.parent().parent())[0];if(void 0!=h){var h=parseInt(h.style.height),g=2*g,k=e[0].style.borderTopWidth,l=0,l=e[0].style.borderBottomWidth;
e.hasClass("rq-gc-parentBar")&&e.hasClass("parentBar-style")?(k="0px"==k||""==k?f.ParentBar_BorderTopWidth:parseInt(k),f="0px"==l||""==l?f.ParentBar_BorderBottomWidth:parseInt(e[0].style.borderBottomWidth),l=(h-g-(k+f))/d):(e="0px"==k||""==k?f.TaskBar_BorderTopWidth:parseInt(k),f="0px"==l||""==l?f.TaskBar_BorderBottomWidth:parseInt(l),l=(h-g-(e+f))/d);void 0!=d&&(b=l);c?(a=0==a||void 0!=this.element.attr("heightSetBySrc")?a*b+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars:a*(b+2*RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+
2)+RadiantQ.FlexyGantt.TaskItemControl.MarginForBars,this.element.css("height",b+"px").css("margin-top",a+"px"),this.setOverlappingProperty(this.options.Data,!0)):(this.element.css("height",b+"px").css("margin-top",RadiantQ.FlexyGantt.TaskItemControl.MarginForBars+"px"),this.setOverlappingProperty(this.options.Data,!1))}},setOverlappingProperty:function(a,b){$.isFunction(a.IsOverlapping)?a.IsOverlapping(b):a.IsOverlapping=b},_ConvertXToTime:function(a){var b=this.options,c=b.GanttChart.options;return b.ComputedStartTime+
rqTCUtils.ConvertTimeUnitsToTimeSpan(c.BaseTimeScaleType,a/c.baseTimeUnitWidth)},_setOption:function(a,b){if("StartTime"==a||"EndTime"==a){var c;c="StartTime"==a?this.options.StartTime:this.options.EndTime;if(!c.equals(b)){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "StartTime":this._updateStartAndEnd("StartTime");this.options.Parent.element.UpdateItemForCue(this.options.Data,b,c);break;case "EndTime":this._updateStartAndEnd("EndTime");break;case "TimeIndicatorLineOption":this._OnRecomputeLocation(this.element)}this.UpdateTooltipContent(this.options.Data);
this.triggerEvent("startAndEndTimeChange",this,this.options.Data)}}},_updateStartAndEnd:function(a){switch(a){case "StartTime":this.options.StartTime&&(a=this.options.Data[this.stSourceBinding],$.isFunction(a)?a()!=this.options.StartTime&&a(this.options.StartTime.clone()):this.options.Data[this.stSourceBinding]=this.options.StartTime.clone());break;case "EndTime":this.options.EndTime&&(a=this.options.Data[this.etSourceBinding],$.isFunction(a)?a()!=this.options.EndTime&&a(this.options.EndTime.clone()):
this.options.Data[this.etSourceBinding]=this.options.EndTime.clone())}}};RadiantQ.Gantt.Widget.taskbar=taskbar;RadiantQ.FlexyGantt.ShiftTrackerGlobal={IncludeVerticalMovingSupport:!1,TrackingTaskItemControl:null,MinDeltaYValue:4,CurrentDropRow:null,CurrentStartRow:null,deltaX:null,deltaY:null,GetDropCueLocationIn:function(a){},BeginVerticalDrag:new ObjectEvent("BeginVerticalDrag"),VerticalDragOver:new ObjectEvent("VerticalDragOver"),VerticalDragDrop:new ObjectEvent("VerticalDragDrop")};
var verticalDragProperties={_autoScrollDownInterval:null,_autoScrollUpInterval:null,$selectedRow:null,IsVerticallyMoving:!1,_isEscKeyPressed:!1};
$.fn.shiftTracker=function(a,b,c,d){var e,f,g,h=this;this.widgetName="TaskItemControl";var k,l,p,m,q,n;stElementInfocollection.push({element:h,taskStartAndEndTime:a,TaskItemControl:b});var r=new ObjectEvent("DragComplet"),t=0,s=RadiantQ.FlexyGantt.ShiftTrackerGlobal,u=s.IncludeVerticalMovingSupport,w=s.BeginVerticalDrag,v=s.VerticalDragOver,x=s.VerticalDragDrop,y;b.IsVerticallyMoving=function(){return IsVerticallyMoving};var z=!1;h.dblclick(function(){A=0;clearTimeout(B)});var B=null,A=0,H=!1,C=this;
h.bind("mousedown."+this.widgetName,function(a){if(!$(a.target).hasClass("label")&&"collapse"!=d.css("visibility")){H=!1;document.mouseButtonPressed=!0;var b=a.screenX,c=a.screenY,e=_commonMouseDown.call(this,a,h,H);m=function(a){return _mouseMove(a,e,h,H)};q=function(a){document.mouseButtonPressed=!1;a.screenX==b&&a.screenY==c?(null!=B&&clearTimeout(B),A++,h.click(),B=setTimeout(function(){2<=A&&(h.dblclick(),A=0)},80),a=$(document),a.unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown"),
a.unbind("touchmove."+C.widgetName).unbind("touchend."+C.widgetName).unbind("keydown"),$("#clone").remove()):_mouseUp(a,e,h,H)};$(document).bind("mousemove."+C.widgetName,m).bind("mouseup."+C.widgetName,q)}}.bind(b));h.bind("touchstart."+this.widgetName,function(a){document.mouseButtonPressed=!0;if(!$(a.target).hasClass("label")){H=!0;a.stopPropagation();var b=_commonMouseDown.call(this,a,h,H);m=function(a){return _mouseMove(a,b,h,H)};q=function(a){document.mouseButtonPressed=!1;return _mouseUp(a,
b,h,H)};$(document).bind("touchmove."+C.widgetName,m).bind("touchend."+C.widgetName,q)}}.bind(b));var E=0;_commonMouseDown=function(a,b,c){u=s.IncludeVerticalMovingSupport;w=s.BeginVerticalDrag;v=s.VerticalDragOver;x=s.VerticalDragDrop;var e=a.srcElement;if(!$(e).hasClass("resizer-style")||!$(e).hasClass("rq-fg-gc-taskBarResizer")){var e=b[0].offsetWidth,f=b.height();n=d.clone();n[0].id="clone";n.addClass("taskclone rq-taskbar-clone");var g=!0,h=b.data("TaskBar");s.TrackingTaskItemControl=h;var k=
h.options.GanttChart.options.TimeIndicatorLineOption;if((k&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(k&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)$startVerticalLineClone=b.find("div.rq-gc-start-verticalLine").clone().show(),$endVerticalLineClone=b.find("div.rq-gc-end-verticalLine").clone().show(),k={Data:h.options.Data,UseWidthForVerticalLines:!1,IsShifting:!0,UseWidthForTaskBar:!0},h=h.options.GanttChart.options.ProvideWidthForMilestoneShape,
null!=h&&(n.css("width",e+"px"),h=h(this,k),null!=h&&(g=!1,E=0,!0==k.UseWidthForTaskBar&&(E=h/2,n.css("margin-left",-E+"px"),n.css("width",e+"px")),k.UseWidthForVerticalLines=!0,E=h/2,$startVerticalLineClone.css("margin-left",E+"px"),$endVerticalLineClone.css("margin-left",E+"px"))),n.append($startVerticalLineClone),n.append($endVerticalLineClone);!0==g&&n.css("width",e-2+"px");n.css("height",f-1+"px");n.appendTo(b);this.closeToolTip();_mouseClick(a,n,b,c);a.stopPropagation()}return n};_mouseClick=
function(c,d,e,f){var g;verticalDragProperties._isEscKeyPressed=!1;void 0!=c.originalEvent.touches||null!=c.originalEvent.touches?(s.deltaX=0,s.deltaY=0):(s.deltaX=void 0==c.offsetX?c.originalEvent.layerX:c.offsetX,s.deltaY=void 0==c.offsetY?c.originalEvent.layerY:c.offsetY);c||(c=window.event);c.which?g=3==c.which:c.button&&(g=2==c.button);if(!g){e[0].uiTooltip&&(e[0].isDragging=!0);g=_getDargMousePosition(c,d,e,f);verticalDragProperties.$selectedRow=$(c.target).closest("tr");k=g.x;l=g.y;p=d[0].offsetLeft;
for(d=0;d<stElementInfocollection.length;d++)stElementInfocollection[d].element==e&&(a=stElementInfocollection[d].taskStartAndEndTime,b=stElementInfocollection[d].TaskItemControl,b._beginUpdateOverlapTasks(b));a.ProposedStart=a.originalStart;a.ProposedEnd=a.originalEnd;a.OriginalStart=a.originalStart;a.OriginalEnd=a.originalEnd;a.originalLeft=parseFloat($(e).css("margin-left"));b.UpdateTooltipContent(a);s.CurrentStartRow=b.options.DataSource;$(this).GetDragOrResizeContent(b.DragTooltipContent,c,e,
f);$(document).bind("keydown",function(a){27==a.keyCode&&($(document).unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown"),$(this).RemoveDragOrResizeContent(e),$("#clone").remove(),verticalDragProperties._isEscKeyPressed=!0,a.cancel=!0,s.CurrentDropRow=null,_onVerticalDragDrop(a,!1),e[0].uiTooltip&&(e[0].isDragging=!1))})}};_mouseMove=function(c,d,h,k){verticalDragProperties.IsVerticallyMoving&&$("#clone").css("display","none");for(var l=0;l<stElementInfocollection.length;l++)stElementInfocollection[l].element==
h&&null!=stElementInfocollection[l].taskStartAndEndTime.originalStart&&(e=b.options.GanttChart.options.Parent.RoundUp(stElementInfocollection[l].taskStartAndEndTime.originalStart.clone()),f=b.options.GanttChart.options.Parent.RoundUp(stElementInfocollection[l].taskStartAndEndTime.originalEnd.clone()),g=stElementInfocollection[l].taskStartAndEndTime.originalLeft);e<=f&&(_updatePosition(c,d,h,k),b.UpdateTooltipContent(a),c=$(".dragPopup"),$(c).empty(),$(c).append(b.DragTooltipContent),$(c).css("visibility",
"visible"),h[0].uiTooltip&&h[0].uiTooltip.hide())};_mouseUp=function(d,e,f){clearAutoScrollTimers();null!=a.ProposedStart&&null!=a.ProposedEnd&&(f[0].uiTooltip&&(f[0].isDragging=!1),$(this).RemoveDragOrResizeContent(f),$(e).css("margin-left")&&(f=$(f).css("margin-left"),""==f&&(f=0),e=$(e).css("margin-left"),parseInt(e),parseInt(f)),a.originalStart=a.ProposedStart,a.originalEnd=a.ProposedEnd,a.OriginalStart=a.originalStart,a.OriginalEnd=a.originalEnd,b._endUpdateOverlapTasks(b),r.subscribe(c),r.raise(b,
a));_updateCurrentDropRow(d,_onVerticalDragDrop,!1);$(document).unbind("mousemove."+C.widgetName).unbind("mouseup."+C.widgetName).unbind("keydown");$(document).unbind("touchmove."+C.widgetName).unbind("touchend."+C.widgetName).unbind("keydown");$("#clone").remove()};_getDargMousePosition=function(a,b,c,d){c=b=0;if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)b=a.originalEvent.touches[0].pageX,c=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||
a.originalEvent.touches[0].clientY)b=a.originalEvent.touches[0].clientX,c=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)b=a.pageX,c=a.pageY;else if(a.clientX||a.clientY)b=a.clientX,c=a.clientY;return{x:b,y:c}};_mouseMovedTo=function(c,d,h){var k=null,k=b.getSchedule();t++;if(!(6>t&&u))if(y=c,!1==verticalDragProperties.IsVerticallyMoving&&!1==z&&(Math.abs(d)>=s.MinDeltaYValue&&u&&_canBeginVerticalDrag(h)?verticalDragProperties.IsVerticallyMoving=!0:4<=Math.abs(c)&&(z=!0)),clearAutoScrollTimers(),
c=verticalDragProperties.IsVerticallyMoving,s.GetDropCueLocationIn(h).Y<J+K/2&&c?_tableAutoScrollUp():s.GetDropCueLocationIn(h).Y>J+F[0].clientHeight-K/2&&c&&_tableAutoScrollDown(),c)verticalDragProperties._isEscKeyPressed||($("#clone").remove(),$(".dragPopup").remove(),_updateCurrentDropRow(h,_onVerticalDragOver,!0));else if(z){parseInt(n.css("height"));c=g+E;c=rqTCUtils.ConvertToEndTimeInBaseScaleType(b.options.GanttChart.options.BaseTimeScaleType,e.clone(),c/b.options.GanttChart.options.BaseTimeUnitWidth,
(c+y)/b.options.GanttChart.options.BaseTimeUnitWidth,k);var l=Date.today();d={Value:c};var l={Value:l},m=null==k?rqTCUtils.GetTimeSpan(e,f):k.GetEffort(e,f);b.options.FlexyGantt.ConvertToValidTimes(b.options.Data,c,m,d,l,"Move",h,b.element,k);c=d.Value;l=l.Value;a.ProposedStart=b.options.GanttChart.options.Parent.RoundUp(c);a.ProposedEnd=b.options.GanttChart.options.Parent.RoundUp(l);0==a.ProposedStart.compareTo(a.OriginalStart)&&0==a.ProposedEnd.compareTo(a.OriginalEnd)?a.HasChanged=!1:a.HasChanged=
!0}};_updatePosition=function(a,b,c,d){d=_getDargMousePosition(a,b,c,d);a.shouldSyncDragCue=!1;var e=verticalDragProperties.$selectedRow;e&&0!=e.length&&(a.row_index=e[0].rowIndex,-1==a.row_index&&(a.row_index=$("tr",$(c).closest("table")).index(e)),c=d.x-k+p,_mouseMovedTo(d.x-k,d.y-l,a),!0==a.shouldSyncDragCue||verticalDragProperties.IsVerticallyMoving||b.css("margin-left",c+"px"))};s.GetDropCueLocationIn=function(a){if(void 0!=a.originalEvent.touches&&null!=a.originalEvent.touches&&0<a.originalEvent.touches.length)if(a.originalEvent.touches[0].pageX||
a.originalEvent.touches[0].pageY)posx=a.originalEvent.touches[0].pageX,posy=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)posx=a.originalEvent.touches[0].clientX,posy=a.originalEvent.touches[0].clientY}else if(void 0!=a.originalEvent.changedTouches&&null!=a.originalEvent.changedTouches)if(a.originalEvent.changedTouches[0].pageX||a.originalEvent.changedTouches[0].pageY)posx=a.originalEvent.changedTouches[0].pageX,posy=a.originalEvent.changedTouches[0].pageY;
else{if(a.originalEvent.changedTouches[0].clientX||a.originalEvent.changedTouches[0].clientY)posx=a.originalEvent.changedTouches[0].clientX,posy=a.originalEvent.changedTouches[0].clientY}else if(a.pageX||a.pageY)posx=a.pageX,posy=a.pageY;else if(a.clientX||a.clientY)posx=a.clientX,posy=a.clientY;return{X:posx,Y:posy}};_updateCurrentDropRow=function(a,b,c){var d;d=void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches?$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,
a.originalEvent.changedTouches[0].clientY)).closest("td.FlexyChartRow"):void 0!=a.originalEvent.touches||null!=a.originalEvent.touches?$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("td.FlexyChartRow"):$(a.target).closest("td.FlexyChartRow");s.CurrentDropRow=0<d.length&&verticalDragProperties.IsVerticallyMoving?d.parent()[0]["data-grid-item"]:null;b(a,c)};_canBeginVerticalDrag=function(a){if(w){var b={};b.event=a;b.cancel=
!1;w.raise(this,b);return!1==b.cancel}return!0};_onVerticalDragOver=function(a,b){verticalDragProperties._isEscKeyPressed||(v&&v.raise(this,a),verticalDragProperties.IsVerticallyMoving=b)};_onVerticalDragDrop=function(a,b){x&&s.IncludeVerticalMovingSupport&&verticalDragProperties.IsVerticallyMoving&&x.raise(this,a);verticalDragProperties.IsVerticallyMoving=b};var I=C.data("TaskBar").options.FlexyGantt,F=I.element.getGridBody(),J=F.offset().top,K=I.options.RowHeight;_tableAutoScrollUp=function(){null==
verticalDragProperties._autoScrollUpInterval&&(verticalDragProperties._autoScrollUpInterval=setInterval(function(){0<100*F[0].scrollTop/(F[0].scrollHeight-F[0].clientHeight)?_autoScroll(-10):clearAutoScrollTimers()},0))};_tableAutoScrollDown=function(){null==verticalDragProperties._autoScrollDownInterval&&(verticalDragProperties._autoScrollDownInterval=setInterval(function(){F[0].scrollHeight==F[0].scrollTop+F[0].clientHeight?clearAutoScrollTimers():_autoScroll(10)},0))};_autoScroll=function(a){F.animate({scrollTop:F[0].scrollTop+
a},0)};clearAutoScrollTimers=function(){null!=verticalDragProperties._autoScrollUpInterval&&clearInterval(verticalDragProperties._autoScrollUpInterval);null!=verticalDragProperties._autoScrollDownInterval&&clearInterval(verticalDragProperties._autoScrollDownInterval);verticalDragProperties._autoScrollUpInterval=verticalDragProperties._autoScrollDownInterval=null};this[0].mouseMovedTo=_updatePosition;this[0].mouseClick=_mouseClick};$.fn.getGridBody=function(a){return $(".ui-grid-body",a)};
$.fn.resizeTracker=function(a,b,c,d,e,f){var g=this,h,k,l,p,m,q;rtElementInfocollection.push({element:g,taskStartAndEndTime:a,TaskItemControl:b});var n=new ObjectEvent("ResizeComplet");q=$("<div class='resizer-style rq-fg-gc-taskBarResizer'></div>");var r=$("<div class='start-resizer-style rq-gc-startTaskBarResizer resizer-style rq-fg-gc-taskBarResizer'></div>");q.css("height",$(g).css("height"));q.css("margin-left",parseInt($(g).css("width"))-4+"px");r.css("height",$(g).css("height"));var t=null,
s=null,u=$(g).find("div.parentMiddleBar-style");$(g).find("div.parentMiddleBar-style");0!=u.length?(0<f.length&&r.appendTo(u),0<e.length&&q.appendTo(u)):(0<f.length&&r.appendTo(g),0<e.length&&q.appendTo(g));0<e.length&&(q.bind("mousedown."+b.widgetName,function(a){var b=this;document.mouseButtonPressed=!0;var c=_commonResizerMouseDone.call(this,a,g,!1);l=function(a){return _resizerMouseMove.call(b,a,c,g)};p=function(a){document.mouseButtonPressed=!1;return _resizerMouseUp.call(b,a,c,g)};$(document).bind("mousemove."+
this.widgetName,l).bind("mouseup."+this.widgetName,p)}.bind(b)),q.bind("touchstart."+b.widgetName,function(a){document.mouseButtonPressed=!0;var b=_commonResizerMouseDone.call(this,a,g,!0);l=function(a){return _resizerMouseMove.call(this,a,b,g,!0)};p=function(a){document.mouseButtonPressed=!1;return _resizerMouseUp.call(this,a,b,g,!0)};$(document).bind("touchmove."+this.widgetName,l.bind(this)).bind("touchend."+this.widgetName,p.bind(this))}.bind(b)));0<f.length&&(r.bind("mousedown."+b.widgetName,
function(a){document.mouseButtonPressed=!0;var b=_commonResizerMouseDone.call(this,a,g,!1,!0);l=function(a){return _resizerMouseMove.call(this,a,b,g,null,!0)};p=function(a){document.mouseButtonPressed=!1;return _resizerMouseUp.call(this,a,b,g,null,!0)};$(document).bind("mousemove."+this.widgetName,l.bind(this)).bind("mouseup."+this.widgetName,p.bind(this))}.bind(b)),r.bind("touchstart."+b.widgetName,function(a){document.mouseButtonPressed=!0;var b=_commonResizerMouseDone.call(this,a,g,!0,!0);l=function(a){return _resizerMouseMove.call(this,
a,b,g,!0,!0)};p=function(a){document.mouseButtonPressed=!1;return _resizerMouseUp.call(this,a,b,g,!0,!0)};$(document).bind("touchmove."+this.widgetName,l.bind(this)).bind("touchend."+this.widgetName,p.bind(this))}.bind(b)));_commonResizerMouseDone=function(a,c,d,f){m=e.clone();var g=c.height(),h=c[0].offsetWidth,k=2;!0==f&&(k=5);m[0].id="clone";$(m).css("width",h-k+"px");$(m).addClass("taskclone rq-taskbar-clone");$(m).css("height",g-1+"px");m.appendTo(c);_resizerMouseClick.call(this,a,m,c,d);a.stopPropagation();
a=b.options.GanttChart.options.TimeIndicatorLineOption;if((a&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(a&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)t=c.find("div.rq-gc-start-verticalLine").clone().show(),s=c.find("div.rq-gc-end-verticalLine").clone().show(),m.append(t),m.append(s);return m};var w=0;_resizerMouseClick=function(c,d,e,f){this.closeToolTip();e[0].uiTooltip&&(e[0].isResizing=!0);h=_getMousePosition(c,d,e,f).x;k=parseFloat(e.css("width"));
w=parseFloat(e.css("margin-left"));for(d=0;d<rtElementInfocollection.length;d++)rtElementInfocollection[d].element==e&&(a=rtElementInfocollection[d].taskStartAndEndTime,b=rtElementInfocollection[d].TaskItemControl,b._beginUpdateOverlapTasks(b));a.ProposedStart=b.options.GanttChart.options.Parent.RoundUp(a.originalStart);a.ProposedEnd=b.options.GanttChart.options.Parent.RoundUp(a.originalEnd);a.OriginalStart=a.originalStart;a.OriginalEnd=a.originalEnd;a.OriginalDuration=rqTCUtils.GetTimeSpan(a.OriginalStart,
a.OriginalEnd);a.OriginalLeft=a.originalLeft=parseFloat(e.css("margin-left"));a.originalWidth=parseFloat(e.css("width"));a.OriginalWidth=a.originalWidth;this.ProposedDuration=a.OriginalDuration;b.UpdateTooltipContent(a);$(this).GetDragOrResizeContent(b.ResizeTooltipContent,c,e,f)};_resizerMouseMove=function(a,b,c,d,e){_updateWidth(a,b,c,d,e)};_resizerMouseUp=function(e,f,g,h,k){g[0].uiTooltip&&(g[0].isResizing=!1);$(this).RemoveDragOrResizeContent(g);$(f).css("width")&&$(g).css("width",$(f).css("width"));
$(".rq-taskbar-resizeThumb").remove();b._endUpdateOverlapTasks(b);!0==k?n.subscribe(d):n.subscribe(c);n.raise(b,a);a.OriginalEnd=a.originalEnd;a.OriginalDuration=this.ProposedDuration;a.OriginalStart=a.ProposedStart;b._OnRecomputeLocation(g);$(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown");$(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown")};_resizeTo=function(c,d,e,f){a.HasChanged=a.OriginalDuration==
this.ProposedDuration?!1:!0;c=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(b.options.GanttChart.options.BaseTimeScaleType,a.originalStart,a.originalLeft/b.options.GanttChart.options.BaseTimeUnitWidth,(a.originalLeft+(c+2))/b.options.GanttChart.options.BaseTimeUnitWidth,b.getSchedule());c=new RQTimeSpan(0,c,0,0);f=a.originalStart.clone();var g=f.clone();g.addHours(c.getTotalHours());var h={Value:f},g={Value:g};b.options.FlexyGantt.ConvertToValidTimes(b.options.Data,a.originalStart.clone(),
c,h,g,"ResizeAtEnd",d,e,b.getSchedule());g=g.Value;a.originalStart<g&&(a.ProposedStart=f,a.ProposedEnd=b.options.GanttChart.options.Parent.RoundUp(g.clone()),a.Duration=rqTCUtils.GetTimeSpan(a.originalStart,g),c=rqTCUtils.GetTimeSpan(a.originalStart,g),this.ProposedDuration=b.options.GanttChart.options.Parent.RoundUpDuration(c),a.Duration=this.ProposedDuration,a.originalEnd=b.options.GanttChart.options.Parent.RoundUp(a.ProposedEnd),b.UpdateTooltipContent(a));d=$(".dragPopup");$(d).empty();$(d).append(b.ResizeTooltipContent);
$(d).css("visibility","visible");e[0].uiTooltip&&e[0].uiTooltip.hide()};resizeStartTo=function(c,d,e){a.HasChanged=a.OriginalDuration==this.ProposedDuration?!1:!0;var f=rqTCUtils.ConvertToEndTimeInBaseScaleType(b.options.GanttChart.options.BaseTimeScaleType,a.originalStart,a.OriginalLeft/b.options.GanttChart.options.BaseTimeUnitWidth,c/b.options.GanttChart.options.BaseTimeUnitWidth,null);c=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(b.options.GanttChart.options.BaseTimeScaleType,f,c/b.options.GanttChart.options.BaseTimeUnitWidth,
(a.OriginalLeft+a.originalWidth)/b.options.GanttChart.options.BaseTimeUnitWidth,null);c=b.options.GanttChart.options.Parent.RoundUpDuration(new RQTimeSpan(0,c,0,0));f=a.originalEnd.clone().addTimeSpan(new RQTimeSpan(-c));computedEnd=a.originalEnd;b.options.FlexyGantt.ConvertToValidTimes(b.options.Data,f,c,f,computedEnd,"ResizeAtStart",d,e,b.getSchedule());f=f.Value;computedEnd=computedEnd.Value;c=new RQTimeSpan(a.originalEnd-f);a.ProposedStart=a.originalEnd.clone().addTimeSpan(new RQTimeSpan(-c));
a.originalStart=a.ProposedStart;this.ProposedDuration=a.ProposedDuration=c;a.Duration=c;b.UpdateTooltipContent(a);d=$(".dragPopup");$(d).empty();$(d).append(b.ResizeTooltipContent);$(d).css("visibility","visible");e[0].uiTooltip&&e[0].uiTooltip.hide()};_getMousePosition=function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)e=
a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}};_updateWidth=function(a,c,d,e,f){e=_getMousePosition(a,c,d,e);if(!0==f){f=e.x-h;e=k-f;1<e?c.css("width",e+"px"):c.css("width","0px");if(-1<e)c.css("margin-left",f+"px");else return!1;null!=s&&0<s.length&&(s[0].style["margin-left"]=c.css("width"));resizeStartTo(w+f,a,d)}else e=e.x-h+k,0<e?c.css("width",e+"px"):c.css("width",
"0px"),null!=s&&0<s.length&&(s[0].style["margin-left"]=c.css("width")),_resizeTo(e,a,d);$(document).bind("keydown",function(a){27==a.keyCode&&($(document).unbind("mousemove."+b.widgetName,l).unbind("mouseup."+b.widgetName,p).unbind("keydown"),$(this).RemoveDragOrResizeContent(d),$("#clone").remove(),d[0].uiTooltip&&(d[0].isResizing=!1))})}};
$.fn.GetDragOrResizeContent=function(a,b,c,d){$(".dragPopup").remove();var e=$('<div class="dragPopup" style="visibility: hidden; position: absolute;" />');if(a){$(e).append(a);var f=!1;$(e).mousemove(function(){void 0!=this.refreshPostion&&(this.refreshPostion(f),f=!f)})}$(c).parents("div").filter(".rq-gc-viewsContainer-div");var g=$(c).parents("div").filter(".rq-ganttBase"),h=$(".rq-gc-taskbar-popup",a);0==h.length&&(h=$(".draggingContent",a));$(g).append(e);$(c).css("z-index",15);e.css("z-index",
25);a=$(c).height()+2;!0==d?(e.css({left:b.originalEvent.touches[0].pageX,top:b.originalEvent.touches[0].pageY+a}),d=b.originalEvent.touches[0].pageX,b=b.originalEvent.touches[0].pageY):(e.css({left:b.pageX,top:b.pageY+a}),d=b.pageX,b=b.pageY);$(c).offset();c=h.outerWidth(!0);h=h.outerHeight(!0);g=$(window);g.width();0>g.scrollTop()+g.height()-(e.offset().top+h)&&e.css({top:b-h-a});h=e.offset().left+c-$(window).width();0<h?e.css({left:d-h}):-150<h&&e.css({left:d-150})};
$.fn.RemoveDragOrResizeContent=function(a){$(a).css("z-index",10);$(".dragPopup").remove()};
var tasksListControl={tasksCollection:null,currentUniqueTaskSuffix:0,blocks:[],ItemTemplate:null,options:{name:"TasksListControl",viewStartTime:null,viewEndTime:null,ViewWidth:null,TreeViewItem:null,Data:null,TasksListProperty:null,ParentTasksListProperty:null,GanttChart:null,TimeIndicatorLineOption:null,IsParentTypeRow:null,BaseTimeUnitWidth:null,OverlappedTasksRenderingOptimization:null,TaskTemplate:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,
RowCount:null,Parent:null,KnockoutObjectName:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,FlexyGantt:null,DragThumb:null,ResizeThumb:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},TasksList:null,BrowseToTaskCueLeft:null,BrowseToTaskCueRight:null,BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",BrowseToTaskCueRightVisibility:"none",_create:function(){this._schedule=null;this.element.data("TasksListControl",
this);this._validateOptions();this.refresh()},WorkTimeSchedule_M:function(a){if(null!=this._schedule)return this._schedule;if(a=this.options.GanttChart.options.RowRenderingScheduleBinding){var b=this.getNestedValue(this.options.Data._data,a.Property);this._schedule=a.Converter?a.Converter.Convert.call(this.options.Data,b,a.Property):b}else this._schedule=this.options.GanttChart.options.WorkTimeSchedule},getNestedValue:function(a,b){for(var c=b.split("."),d=0;d<c.length;d++)"undefined"!=typeof a&&
(a=a[c[d]+"_M"]?a[c[d]+"_M"]():a[c[d]]);return!0==$.isFunction(a)?a():a||""},refreshVerticalLine:function(){for(var a=0;a<this.TasksList.length;a++){var b=this.TasksList[a].data("TaskBar");b&&b.renderVerticalLine()}},_validateOptions:function(){var a=this.options;window.console&&(a.Data.IsParentType()?!a.ParentTasksListProperty||"string"==typeof a.ParentTasksListProperty&&void 0!=a.Data._data[a.ParentTasksListProperty]||console.error('Data does not have a property called "'+a.ParentTasksListProperty+
'". Specify a correct ParentTasksListProperty value.'):a.TasksListProperty&&("string"==typeof a.TasksListProperty&&void 0!=a.Data._data[a.TasksListProperty]||console.error('Data does not have a property called "'+a.TasksListProperty+'". Specify a correct TaskListProperty value.')))},refresh:function(){this.TasksList=[];var a=this.element;$(this.element).bind("heightChange",function(){});this.TaskListControl=$("<div style='height:100%;'></div>");a[0].appendChild(this.TaskListControl[0]);this.options.KnockoutObjectName=
eval(this.options.KnockoutObjectName);this._updateItemsSourceAndTemplates();this._drawTaskBar();this.OnApplyTemplate();this.options.GanttChart.ViewportTimeRangeChanged.subscribe(this._ganttChart_ViewportTimeRangeChanged,this)},OnApplyTemplate:function(){this.BrowseToTaskCueLeft=$(this.options.TaskBarBrowseToCueLeftTemplate).css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight=$(this.options.TaskBarBrowseToCueRightTemplate).css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility});0<this.BrowseToTaskCueLeft.length&&(this.BrowseToTaskCueLeft.bind("touchstart mousedown",this._browseToTaskCue_Click),this.BrowseToTaskCueLeft[0].tasksListControl=this,this.BrowseToTaskCueLeft.addClass("rq-gc-browseCue-left"),this.BrowseToTaskCueLeft[0].title=window.RadiantQ_ScrollToTask,$("div:eq(0)",this.element).append(this.BrowseToTaskCueLeft));0<this.BrowseToTaskCueRight.length&&(this.BrowseToTaskCueRight.bind("touchstart mousedown",this._browseToTaskCue_Click),
this.BrowseToTaskCueRight[0].tasksListControl=this,this.BrowseToTaskCueRight.addClass("rq-gc-browseCue-right"),this.BrowseToTaskCueRight[0].title=window.RadiantQ_ScrollToTask,$("div:eq(0)",this.element).append(this.BrowseToTaskCueRight));this._ganttChart_ViewportTimeRangeChanged(this,null);(this.options.TaskBarBrowseToCueLeftTemplate||this.options.TaskBarBrowseToCueRightTemplate)&&this.options.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,this)},_GanttChart_BeforeChartHZScroll:function(a,
b){this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":parseInt(this.BrowseToTaskCueLeft.css("margin-left"))+a});this.BrowseToTaskCueRight&&this.BrowseToTaskCueRight.css({"margin-left":parseInt(this.BrowseToTaskCueRight.css("margin-left"))+a})},_browseToTaskCue_Click:function(a){var b=this.tasksListControl;a=b.options.GanttChart;this==b.BrowseToTaskCueLeft[0]?(b=b._tracker.GetNextTaskStartTimeLeft(a.VisualStartTime),b==Date.MinValue?a._setOption("AnchorTime",a.VisualStartTime):a._setOption("AnchorTime",
b)):(b=b._tracker.GetNextTaskStartTimeRight(a.VisualEndTime),b==Date.MinValue?a._setOption("AnchorTime",a.VisualEndTime):a._setOption("AnchorTime",b));return!1},addToViewModel:function(a,b){this.options.KnockoutObjectName&&(this.options.KnockoutObjectName[a]=b)},applayBindings:function(a,b){b?ko.applyBindingsToDescendants(a,b):ko.applyBindingsToDescendants(a)},TaskCollectionChange:function(){},_drawTaskBar:function(){this._updateMaxOverlappingTasksCount();this._destory();var a=this.options;$.isFunction(this.tasksCollection)&&
(this.tasksCollection=this.tasksCollection());if(null!=this.ItemTemplate&&this.taskCollectionArray(this.tasksCollection))if(this.isTemplateDefined(this.tasksCollection,a))this._bindTaskCollectionChange(!0),this.tasksCollection.length&&this._createNewTaskbar();else{try{this.options.KnockoutObjectName&&this.addToViewModel("Row"+a.RowCount+"Task"+this.currentUniqueTaskSuffix,this.tasksCollection._data)}catch(b){}this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,"Row"+a.RowCount+"Task0");var c=
this.taskTemplate(this.tasksCollection._data);this.options.DragThumb=$(".rq-taskbar-dragThumb:eq(0)",c);0==this.options.DragThumb.length&&(this.options.DragThumb=$(".dragThumb:eq(0)",c));this.options.ResizeThumb=$(".rq-taskbar-resizeThumb:eq(0)",c);0==this.options.ResizeThumb.length&&(this.options.ResizeThumb=$(".resizeThumb:eq(0)",c));this.options.StartResizeThumb=$(".rq-gc-startTaskBarResizer:eq(0)",c);0==this.options.StartResizeThumb.length&&(this.options.StartResizeThumb=$(".start-resizeThumb:eq(0)",
c));if(0<this.options.DragThumb.length&&0<this.options.ResizeThumb.length)var d=null;d=c;d[0]&&($(d[0]).addClass("taskItemControl"),this.tasksCollection._data&&(this.tasksCollection._data.nodeType=function(){}),a=$(d[0])[this.getChildWidgetName("taskbar")]({baseTimeUnitWidth:40,GanttChart:a.GanttChart,Parent:{element:this},ApplyBarWidthOptimization:!0,IsParentTypeRow:a.Data.IsParentType(),BaseTimeUnitWidth:a.BaseTimeUnitWidth,OverlappedTasksRenderingOptimization:a.OverlappedTasksRenderingOptimization,
ComputedStartTime:a.GanttChart.options.ComputedStartTime,Data:this.tasksCollection._data,TaskStartTime:a.TaskStartTime,TimeIndicatorLineOption:a.TimeIndicatorLineOption,TaskEndTime:a.TaskEndTime,ParentTaskStartTime:a.ParentTaskStartTime,ParentTaskEndTime:a.ParentTaskEndTime,TaskTooltipTemplate:a.TaskTooltipTemplate,MovingInfoPopup:a.MovingInfoPopup,FlexyGantt:a.FlexyGantt,ResizeInfoPopup:a.ResizeInfoPopup,DataSource:a.Data,KnockoutObjectName:a.KnockoutObjectName,DragThumb:a.DragThumb,ResizeThumb:a.ResizeThumb,
StartResizeThumb:a.StartResizeThumb}),this.tasksCollection._data.nodeType=null,this.currentUniqueTaskSuffix++,this.TasksList.push(a))}this.options.GanttChart.options.Parent.RedrawChartRow=this.RedrawTaskRow},taskCollectionArray:function(a){return a._data||a instanceof Array?!0:!1},isTemplateDefined:function(a,b){return a instanceof Array&&(b.TasksListProperty||b.ParentTasksListProperty)?!0:!1},taskTemplate:function(a){this.ItemTemplate=$.template(this.ItemTemplate);return $.tmpl(this.ItemTemplate,
a).appendTo(this.TaskListControl[0])},_bindTaskCollectionChange:function(a){function b(a,b){a.type?c(a.type,b.items):"Add"==b.Action?c("insert",b.NewItems):"Remove"==b.Action&&c("remove",b.OldItems)}function c(a,b){"insert"==a&&d._createNewTaskbar(b);if("remove"==a)for(var c=0;c<b.length;c++){for(var h=b[c],k=[],l=0;l<d.blocks.length;l++){var p=d.blocks[l],m=p.entities.FirstOrDefaultEndity(h);if(null!=m&&(p.entities.remove(m),!k.containsValue(p))){k.push(p);break}}for(h=0;h<d.TasksList.length;h++)d.TasksList[h][0].DataContext==
b[c]&&(d.TasksList[h].remove(),d.TasksList.splice(h,1),h--);d.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&d._blockIntact(k)}try{d.options.KnockoutObjectName&&d.applayBindings(d.options.KnockoutObjectName)}catch(q){}d._updateBrowseToTaskCuesStates()}var d=this;if(null==this.onSourceUpdated||void 0==this.onSourceUpdated)this.onSourceUpdated=b;a?this.tasksCollection.CollectionChanged?this.tasksCollection.CollectionChanged.subscribe(this.onSourceUpdated):
$.observable(this.tasksCollection).bind("insert remove replaceAll",this.onSourceUpdated):this.tasksCollection.CollectionChanged?this.tasksCollection.CollectionChanged.unsubscribe(this.onSourceUpdated):$.observable(this.tasksCollection).unbind("insert remove replaceAll",this.onSourceUpdated)},RedrawTaskRow:function(){this._updateItemsSourceAndTemplates();this._bindTaskCollectionChange(!1);this.element.empty();this.TasksList=[];this.TaskListControl.empty();this._unsubscribeEvents();this.refresh();this.options.KnockoutObjectName&&
this.applayBindings(this.options.KnockoutObjectName,this.element[0])},_createNewTaskbar:function(a){a||(a=this.tasksCollection);var b=this.options,c=null,d=!1;for(task=0;task<a.length;task++){try{for(var e in this.options.KnockoutObjectName)if(0==e.indexOf("Row")&&this.options.KnockoutObjectName[e]===a[task]){c=e;d=!0;break}!1==d&&(c="Row"+b.RowCount+"Task"+this.currentUniqueTaskSuffix,this.addToViewModel(c,a[task]))}catch(f){}var g=this.ItemTemplate;this.ItemTemplate=this.ItemTemplate.replace(/RQDataContext/g,
c);var h=this.taskTemplate(a[task]);this.options.DragThumb=$(".rq-taskbar-dragThumb:eq(0)",h);0==this.options.DragThumb.length&&(this.options.DragThumb=$(".dragThumb:eq(0)",h));this.options.ResizeThumb=$(".rq-taskbar-resizeThumb:eq(0)",h);0==this.options.ResizeThumb.length&&(this.options.ResizeThumb=$(".resizeThumb:eq(0)",h));this.options.StartResizeThumb=$(".rq-gc-startTaskBarResizer:eq(0)",h);0==this.options.StartResizeThumb.length&&(this.options.StartResizeThumb=$(".start-resizeThumb:eq(0)",h));
0<this.options.DragThumb.length&&h[0].removeChild(this.options.DragThumb[0]);0<this.options.ResizeThumb.length&&h[0].removeChild(this.options.ResizeThumb[0]);0<this.options.StartResizeThumb.length&&this.options.StartResizeThumb[0].parentNode.removeChild(this.options.StartResizeThumb[0]);var k=null;if(k=h)h=!1,h="rq-gc-taskbar-label"==k.className,!1==h&&(h="label"==k.className),!1==h&&($(k).addClass("taskItemControl"),a[task].nodeType=function(){},k=$(k)[this.getChildWidgetName("taskbar")]({baseTimeUnitWidth:40,
GanttChart:b.GanttChart,Parent:{element:this},ApplyBarWidthOptimization:!0,OverlappedTasksRenderingOptimization:b.OverlappedTasksRenderingOptimization,ComputedStartTime:b.GanttChart.options.ComputedStartTime,Data:a[task],IsParentTypeRow:b.Data.IsParentType(),TaskStartTime:b.TaskStartTime,TaskEndTime:b.TaskEndTime,ParentTaskStartTime:b.ParentTaskStartTime,ParentTaskEndTime:b.ParentTaskEndTime,TaskTooltipTemplate:b.TaskTooltipTemplate,MovingInfoPopup:b.MovingInfoPopup,TimeIndicatorLineOption:b.TimeIndicatorLineOption,
FlexyGantt:b.FlexyGantt,ResizeInfoPopup:b.ResizeInfoPopup,DataSource:b.Data,KnockoutObjectName:b.KnockoutObjectName,DragThumb:b.DragThumb,ResizeThumb:b.ResizeThumb,StartResizeThumb:b.StartResizeThumb}),a[task].nodeType=null,this.TasksList.push(k),this.currentUniqueTaskSuffix++);this.ItemTemplate=g}null!=this._overlapTimer&&clearTimeout(this._overlapTimer);this._overlapTimer=setTimeout(function(){this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight&&
(this._destory(),this._processTasksListForOverlap())}.bind(this),0)},_overlapTimer:null,_processTasksListForOverlap:function(){if(this.TasksList.length){for(var a=0;a<this.TasksList.length;a++){var b=this.TasksList[a].data("TaskBar");b&&this._onNewEntityAdded(b)}this._computeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_computeIndicesAndHeight:function(){for(var a=0;a<this.blocks.length;a++)this.blocks[a].ComputeIndicesAndHeight()},_destroy:function(){this.element.empty();this._bindTaskCollectionChange(!1);
this.blocks=[]},_destory:function(){this.blocks=[]},_unsubscribeEvents:function(){this.options.GanttChart&&(this.options.GanttChart.ViewportTimeRangeChanged.unsubscribe(this._ganttChart_ViewportTimeRangeChanged,this),this.options.GanttChart.BeforeChartHZScroll.unsubscribe(this._GanttChart_BeforeChartHZScroll,this))},_updateItemsSourceAndTemplates:function(){var a=this.options;a.IsParentTypeRow=a.Data.IsParentType();this.ItemTemplate=a.IsParentTypeRow?a.ParentTaskTemplate:a.TaskTemplate;a.Data.IsParentType()?
null!=a.ParentTasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?this.tasksCollection=RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.ParentTasksListProperty],a.ParentTaskStartTime,a.ParentTaskEndTime):this.tasksCollection=a.Data._data[a.ParentTasksListProperty]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?this.tasksCollection=RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data,a.ParentTaskStartTime,a.ParentTaskEndTime):this.tasksCollection=a.Data:
null!=a.TasksListProperty?a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data._data[a.TasksListProperty],a.TaskStartTime,a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=a.Data._data[a.TasksListProperty]:a.FlexyGantt.UseTimeRangeFilteredTasksInRows()?(this.tasksCollection=new RadiantQ.FlexyGantt.TimeRangeFilteredItems(a.FlexyGantt,a.Data,a.TaskStartTime,
a.TaskEndTime),this.tasksCollection.CollectionChanged.subscribe(this._taskCollectionChange,this)):this.tasksCollection=this.tasksCollection=a.Data;this._initBrowseToCueTracker()},_taskCollectionChange:function(a,b){"insert"==a.type&&(this.tasksCollection=b.items,this._createNewTaskbar());if("remove"==a.type)for(var c=0;c<this.TasksList.length;c++)this.TasksList[c][0].DataContext==b.items[0]&&this.TasksList[c].remove();try{this.options.KnockoutObjectName&&this.applayBindings(this.options.KnockoutObjectName,
this.element[0])}catch(d){}},_updateMaxOverlappingTasksCount:function(){if(this.options.OverlappedTasksRenderingOptimization==RadiantQ.FlexyGantt.OverlappedTasksRenderingOptimization.ShrinkHeight){for(var a=1,b=0;b<this.blocks.length;b++)var c=this.blocks[b].GetRowCount(),a=c>a?c:a;this.options.Data&&(!1==this.options.IsPrinting?this.options.Data.MaxOverlappingBlocksRowCount(a):this._updateChartRowHeight(this.options.Data))}},_updateChartRowHeight:function(a,b){var c=$(a.TableRow()).height();this.element.height(c-
1);this.element.parent().height(c)},_onNewEntityAdded:function(a){var b=[];a.Height=parseInt(this.element[0].style.height);for(var c=0;c<this.blocks.length;c++)this.blocks[c].IsOverlapping(a,!0)&&b.push(this.blocks[c]);if(0==b.length)a=new OverlappingBlock(a),this.blocks.push(a);else if(1==b.length)b[0].AddEntity(a),a=b[0];else{a=new OverlappingBlock(a);for(c=0;c<b.length;c++){for(var d=b[c],e=0;e<d.entities.length;e++)a.AddEntity(d.entities[e]);this.blocks.removeByValue(d)}this.blocks.push(a)}return a},
_blockIntact:function(a){if(0<a.length){var b=[];a=[].concat(a);for(var c=[],d=0;d<a.length;d++){var e=a[d];this.blocks.removeByValue(e);for(var f=0;f<e.entities.length;f++){var g=e.entities[f];b.push(g);g=this._onNewEntityAdded(g);c.containsValue(g)||c.push(g)}}for(d=0;d<c.length;d++)c[d].ComputeIndicesAndHeight()}this._updateMaxOverlappingTasksCount()},_getIntersectingBlock:function(a,b){for(var c=null,d=0;d<this.blocks.length;d++)if(this.blocks[d].IsOverlapping(a,!1)){c=this.blocks[d];break}return c},
_getIntersectingBlocks:function(a){for(var b=[],c=0;c<this.blocks.length;c++)this.blocks[c].IsOverlapping(a,!1)&&b.push(this.blocks[c]);return b},RemoveEntity:function(a,b){var c=a.entities.removeByValue(b);0==a.entities.length&&this.RemoveBlock(a);return c},RemoveBlock:function(a){return this.blocks.removeByValue(a)},_setOption:function(a,b){switch(a){case "viewStartTime":case "viewEndTime":this._updateStartAndEnd()}this.widgetBaseSetOption.apply(this,arguments)},_updateStartAndEnd:function(){for(var a=
0;a<this.TasksList.length;a++)$(this.TasksList[a])[this.getChildWidgetName("taskbar")]({viewStartTime:this.options.viewStartTime,viewEndTime:this.options.viewEndTime})},_tracker:null,_cueTemplatePropertyChanged:function(a,b){a._initBrowseToCueTracker()},isArray:function(a){return a instanceof Array},_initBrowseToCueTracker:function(){var a=this.options.TasksListProperty;if(null!=this.options.TaskBarBrowseToCueLeftTemplate||null!=this.options.TaskBarBrowseToCueRightTemplate){null!=this._tracker&&this._tracker.Dispose();
var b=this.options.Data._data;this.options.IsParentTypeRow||null==a||(b=this.options.Data._data[a],b="function"==typeof b?b():b);b&&(!1==b instanceof RadiantQ.RQ_ObservableCollection&&(!1==this.isArray(this.tasksCollection)&&window.console&&(b=[b]),new RadiantQ.RQ_ObservableCollection(b)),a=this.options.IsParentTypeRow?this.options.ParentTaskStartTime:this.options.TaskStartTime,RadiantQ.FlexyGantt.TasksPositionTracker&&null!=a&&(this._tracker=new RadiantQ.FlexyGantt.TasksPositionTracker(this.options.FlexyGantt,
b,{Property:a})))}else null!=this._tracker&&this._tracker.Dispose()},_ganttChart_ViewportTimeRangeChanged:function(a,b){this.BrowseToCueLeft=this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._updateBrowseToTaskCuesStates()},_updateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueRightTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableBefore(this.options.GanttChart.VisualStartTime)?
"block":"none";this.BrowseToTaskCueRightVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&null!=this._tracker&&this._tracker.AreTasksAvailableAfter(this.options.GanttChart.VisualEndTime)?"block":"none";this.BrowseToTaskCueLeft&&this.BrowseToTaskCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.BrowseToTaskCueRight&&("block"==this.BrowseToTaskCueLeftVisibility&&(this.BrowseToCueRight=this.BrowseToCueRight-this.BrowseToCueLeft-30),this.BrowseToTaskCueRight.css({"margin-left":this.BrowseToCueRight,
display:this.BrowseToTaskCueRightVisibility}))},UpdateItemForCue:function(a,b,c){null!=this._tracker&&(this._tracker.UpdateTimes(b,c),this._updateBrowseToTaskCuesStates())}};RadiantQ.Gantt.Widget.TasksListControl=tasksListControl;
var rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils,ganttChart={DependencyViews:null,options:{name:"GanttChart",TimeRangeHighlightBehavior:null,BottomTwoHeaders:null,TimeScaleHeaders:null,ComputedStartTime:null,ComputedEndTime:null,TimeIndicatorLineOption:RadiantQ.Gantt.TimeIndicatorLines.None,ProvideWidthForMilestoneShape:null,BaseTimeUnitWidth:null,BaseTimeScaleType:null,AnchorTime:null,ViewWidth:2E3,ResizeToFit:!1,ZoomOptions:null,ScrollOptions:null,CustomChartBackgroundRanges:null,BaseTimeUnitWidthMinimum:null,
BaseTimeUnitWidthMaximum:null,MinTimeUnitWidthForHeaderVisibility:null,OverlappedTasksRenderingOptimization:null,TaskItemTemplate:null,ParentTaskItemTemplate:null,ProgressBarTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,TasksListProperty:null,ParentTasksListProperty:null,FlatItemsSource:null,RowHeight:null,TaskBarHeight:null,TaskTooltipTemplate:null,ConnectingInfoPopup:null,ResizeInfoPopup:null,
MovingInfoPopup:null,EnablePagerButtonLeft:!0,EnablePagerButtonRight:!0,BeforePagingGanttChart:null,SpecialLineInfos:null,Parent:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,GanttDependencyViews:null,WorkTimeSchedule:null,GanttType:null,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1,UseChartVirtualization:!1,OnTaskBarLoad:null,OnDependencyLineLoad:null,ShowContextMenuOnTouchTap:null,RowRenderingScheduleBinding:null},
_canUpdate:!0,lave:null,TaskOnMouseHover:null,CanUpdate:function(a,b){if(void 0==a)return this._canUpdate;a!=this._canUpdate&&(this._canUpdate=a)&&(this.UpdateGanttComponents(b),_canUpdate=!0)},OnAnchorTimeChanged:function(){this.triggerEvent("AnchorTimeChanged")},LoadingRow:function(a){this.element.trigger("LoadingRow",[a])},ViewableDependencyViews:[],RefreshUIEvent:new ObjectEvent("RefreshUIEvent"),TriggerRefreshUI:function(a){this.triggerEvent("RefreshUi",this,a);this.RefreshUIEvent.raise(this,
a)},UpdateGanttComponents:function(a){this.TriggerRefreshUI({options:this.options,isInit:!0,ForceToReDrawRows:a});a=this.options.Parent.GetGanttTable();a.showTableBody&&a.showTableBody()},BeginUpdate:function(){this.CanUpdate(!1)},EndUpdate:function(a){this.CanUpdate(!0,a)},_validateViewWidth:function(){if(!this.options.ResizeToFit&&(300>this.options.ViewWidth||12E3<this.options.ViewWidth))throw"GanttChart.ViewWidth has to be in the range 300 to 12000";},headerZoomTracker:null,headerScrollTracker:null,
VisualStartTime:null,VisualEndTime:null,ViewportTimeRangeChanged:null,BeforeChartHZScroll:null,_create:function(){this.RefreshUIEvent=new ObjectEvent("RefreshUIEvent");this.ViewportTimeRangeChanged=new ObjectEvent("ViewportTimeRangeChanged");this.BeforeChartHZScroll=new ObjectEvent("BeforeChartHZScroll");this.element.addClass("rq-ganttChart");var a=this.$GanttChart=$('<div id="'+this._createUniqueID("GanttChart")+'" class="rq-gc-topDiv '+window.radiantQclasses.chartBackground+'" style="height:100%; width:100%;"/>');
this.element.append(a);this.GanttChart=a;this.element.addClass("ui-widget-content");this.initialization();var b=this.$ChartArea=$('<div id="'+this._createUniqueID("rq-gc-chartArea")+'" class="rq-gc-chartArea" style="width:100%; height:100%;position:relative;"/>');this.element.data("GanttChart",this);a.append(b);var c=this.$TimeSpanHeader=$('<div id="'+this._createUniqueID("timeSpanHeader")+'" class="timeSpanHeader"/>');b.append(c);c=$('<div id="'+this._createUniqueID("rq-gc-chartArea-div")+'" class="rq-gc-chartArea-div" style="width:'+
this.options.ViewWidth+'px; height:100%;position:relative;"/>');b.append(c);b=this.$TaskBarContainer=$('<div id="'+this._createUniqueID("rq-gc-viewsContainer-div")+'" class="rq-gc-viewsContainer-div" style="width:100%;position:absolute;"/>');c.append(b);this.$GanttChartCustomRangeBackgroundDIV=$('<div id="'+this._createUniqueID("rq-gc-customRange-background")+'" class="rq-gc-customRange-background" style="position:absolute;"/>').appendTo(c);this.$GanttChartBackgroundDiv=$('<div id="'+this._createUniqueID("GanttChartBackgroundDiv")+
'" class="GanttChartBackgroundDiv" style="position:absolute;"/>').appendTo(c);this.$SpecialLinesDiv=$('<div id="'+this._createUniqueID("SpecialLinesDiv")+'" class="SpecialLinesDiv" style="z-index:100;position:absolute;"/>').appendTo(c);a.css("overflow","hidden");!1==this.options.IsPrinting&&this.ApplyDockPanelSettings(this.element);this.CanUpdate(!1);!1==this.options.IsPrinting&&this.options.Parent.OnChartTemplateApplied();this._createLave()},_createUniqueID:function(a){return this.element[0].id+
"_"+a},_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},ganttChart:null,refreshDockPanel:function(){var a=this,b=setInterval(function(){var c=a.element.width();a.HScrollBar.width(c);var d=$(".rq-gc-pager-left-Button",a.element),e=$(".rq-gc-pager-right-Button",a.element),d=d.outerWidth(!0)+e.outerWidth(!0);a.HScrollBar.width(c-d);$(".rq-gc-chart-HScrollBar-content",a.HScrollBar).width(a.options.ViewWidth-d);(a.VisualStartTime||a.options.ResizeToFit)&&a.ScrollViewerElement_LayoutUpdated();
clearInterval(b)},200)},_ganttChartEvents:function(){var a=this;$(window).resize(function(){a.refreshDockPanel()});var b=this.HScrollBar,c=this.$GanttChart,d=$(".rq-gc-pager-left-Button",this.HDockPanel),e=$(".rq-gc-pager-right-Button",this.HDockPanel),f=$(".rq-gc-pager-left-arrow",this.HDockPanel),g=$(".rq-gc-pager-right-arrow",this.HDockPanel);b.height();var h=!0;b.scroll(function(){var d=c.scrollLeft(),e=b.scrollLeft();d==e||1==b[0].offsetHeight&&!h||(a.BeforeChartHZScroll.raise(e-d),c.scrollLeft(b.scrollLeft()))});
c.scroll(function(){c.scrollLeft()==b.scrollLeft()||1==b[0].offsetHeight&&!h||(h=!1,b.scrollLeft(c.scrollLeft()));a.ScrollViewerElement_LayoutUpdated()});d.bind("touchstart",function(b){a.PagerLeftBtnOnMouseDown(a,f)});d.bind("touchEnd",function(b){a.PagerLeftBtnOnMouseUp(a,f)});d.mousedown(function(b){a.PagerLeftBtnOnMouseDown(a,f)});d.mouseup(function(b){a.PagerLeftBtnOnMouseUp(a,f)});d.click(function(){if(a.options.EnablePagerButtonLeft){var b=!1;null!=a.options.BeforePagingGanttChart&&(b=a.options.BeforePagingGanttChart("LeftPagerButton",
this));b||a.PageLeft()}});e.bind("touchstart",function(b){a.PagerRightBtnOnMouseDown(a,g)});e.bind("touchEnd",function(b){a.PagerRightBtnOnMouseUp(a,g)});e.mousedown(function(b){a.PagerRightBtnOnMouseDown(a,g)});e.mouseup(function(b){a.PagerRightBtnOnMouseUp(a,g)});e.click(function(){if(a.options.EnablePagerButtonRight){var b=!1;null!=a.options.BeforePagingGanttChart&&(b=a.options.BeforePagingGanttChart("RightPagerButton",this));b||a.PageRight()}});e.hover(function(){a.options.EnablePagerButtonRight&&
$(g[0]).addClass("rq-gc-pager-right-arrow-hover")},function(){$(g[0]).removeClass("rq-gc-pager-right-arrow-hover")});d.hover(function(){a.options.EnablePagerButtonLeft&&$(f[0]).addClass("rq-gc-pager-left-arrow-hover")},function(){$(f[0]).removeClass("rq-gc-pager-left-arrow-hover")})},PagerLeftBtnOnMouseDown:function(a,b){a.options.EnablePagerButtonLeft&&($(b[0]).removeClass("rq-gc-pager-left-arrow-hover"),$(b[0]).addClass("rq-gc-pager-left-arrow-click"))},PagerLeftBtnOnMouseUp:function(a,b){a.options.EnablePagerButtonLeft&&
($(b[0]).removeClass("rq-gc-pager-left-arrow-click"),$(b[0]).addClass("rq-gc-pager-left-arrow-hover"))},PagerRightBtnOnMouseDown:function(a,b){a.options.EnablePagerButtonRight&&($(b[0]).removeClass("rq-gc-pager-right-arrow-hover"),$(b[0]).addClass("rq-gc-pager-right-arrow-click"))},PagerRightBtnOnMouseUp:function(a,b){a.options.EnablePagerButtonRight&&($(b[0]).removeClass("rq-gc-pager-right-arrow-click"),$(b[0]).addClass("rq-gc-pager-right-arrow-hover"))},GetBarRenderStartTime:function(a){this.ApplyBarWidthOptimization=
!0;var b=this.ConvertXToTime(-10);return a.isLessThan(b)?b:a},GetBarRenderEndTime:function(a){this.ApplyBarWidthOptimization=!0;var b=this.ConvertXToTime(this.options.ViewWidth+10);return a.isGreaterThan(b)?b:a},ScrollViewerElement_LayoutUpdated:function(){var a=this.VisualStartTime,b=this.VisualEndTime;this._updateVisualStartAndEnd();a==this.VisualStartTime&&b==this.VisualEndTime||this.OnViewportTimeRangeChanged()},_updateVisualStartAndEnd:function(){if(!0==this.options.ResizeToFit)this.VisualStartTime=
this.options.ComputedStartTime,this.VisualEndTime=this.options.ComputedEndTime;else{var a=this.HScrollBar.scrollLeft();this.VisualStartTime=this.ConvertXToTime(a);this.VisualEndTime=this.ConvertXToTime(a+this.GanttChart[0].clientWidth)}},OnViewportTimeRangeChanged:function(){this.ViewportTimeRangeChanged&&0<this.ViewportTimeRangeChanged.fn.length&&this.ViewportTimeRangeChanged.raise(this)},SetStartTime:function(a){var b=this.options.ComputedStartTime;if(this._isTrySetEndTime||a!=b)b=rqTCUtils.GetTimeSpan(b,
this.options.AnchorTime),a=a.addTimeSpan(b),this._setOption("AnchorTime",a),baseUnitWidth=this.options.BaseTimeUnitWidth},ScrollToAnchorTime:function(){if(!1==this.options.IsPrinting){var a=this.HScrollBar,b=a[0],c=this.HScrollBar.width();a.scrollLeft((b.scrollWidth-c)/2+c/2-4)}},BringTimeIntoView:function(a){var b=this.GetCurrentLeftMostVisibleTime(),c=this.GetCurrentRightMostVisibleTime();if(0<a.compareTo(b)||0<c.compareTo(a))!1==this.options.ResizeToFit?this._setOption("AnchorTime",a):(b=0,null!=
this.options.BottomTwoHeaders&&(b=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.options.BottomTwoHeaders[0].Type,1)),a=a.addTimeSpan(b),this.SetStartTime(a))},TrySetEndTime:function(a){var b=this.options.ComputedStartTime,c=this.options.ComputedEndTime;if(a!=this.options.ComputedEndTime){if(a<b)throw"Specified endTime cannot be less that the current stat time of the chart view.";if(a>b){var d=$(this.element).parents().filter(".rq-ganttBase");!1==this.options.IsPrinting&&0==d.length&&window.console&&console.error&&
console.error("SetEndTime can be called only when GanttChart is inside a GanttBase instance.");var e=this.options.BaseTimeScaleType,c=rqTCUtils.ConvertTimeSpanToTimeUnits(e,rqTCUtils.GetTimeSpan(b,c)),e=rqTCUtils.ConvertTimeSpanToTimeUnits(e,rqTCUtils.GetTimeSpan(b,a));a=this.options.BaseTimeUnitWidth;c=c*a/e;c<this.options.BaseTimeUnitWidthMinimum&&(c=this.options.BaseTimeUnitWidthMinimum);c>this.options.BaseTimeUnitWidthMaximum&&(c=this.options.BaseTimeUnitWidthMaximum);!1==this.options.IsPrinting?
"ProjectGantt"==this.options.GanttType?d.data("GanttControl")._setOption("BaseTimeUnitWidth",c):d.data("FlexyGantt")._setOption("BaseTimeUnitWidth",c):this.options.BaseTimeUnitWidth=c;a!=c&&(this._isTrySetEndTime=!0,this.SetStartTime(b),this._isTrySetEndTime=!1)}}},ApplyDockPanelSettings:function(a){var b=this.options.ViewWidth,c=this.element.width(),d=$('<div class="rq-gc-dockPanel rq-gc-pager-container"><table><tr><td class="pagerBtnStyle rq-gc-pager-left-Button"><div class="rq-gc-pager-left-arrow"></div></td><td class="pagerBtnStyle rq-gc-scrollBarContainer" style="padding:0px !important;"><div class="rq-gc-horizontalScrollBar" style="float: left; width: '+
c+'px;"><div class="stretchDiv rq-gc-chart-HScrollBar-content" style="width: '+b+'px; height: 1px; margin-left:-2px;"></div></div></td><td class="pagerBtnStyle rq-gc-pager-right-Button"><div class="rq-gc-pager-right-arrow"></div></td></tr></table></div>'),e=$(".rq-gc-horizontalScrollBar",d),f=$(".rq-gc-pager-left-Button",d),g=$(".rq-gc-pager-right-Button",d);$(a).append(d);e.height();a=f.outerWidth(!0)+g.outerWidth(!0);e.css({width:c-a+"px"});$(".rq-gc-chart-HScrollBar-content",e).width(b-a);this.HDockPanel=
d;this.HScrollBar=e},initialization:function(){!0==this.options.ResizeToFit&&(this.options.ViewWidth=$(this.element).width());null==this.options.AnchorTime&&(this.options.AnchorTime=Date.today());this.options.ComputedStartTime=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this);this.options.ComputedEndTime=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this.headerZoomTracker=new RadiantQ.Gantt.TimeSpanHeaderZoomTracker;this.headerScrollTracker=new RadiantQ.Gantt.TimeSpanHeaderScrollTracker},
initializeGanttComponents:function(a){a=this.$ChartArea;$(a).height($(a).height()-20);!1==this.options.IsPrinting&&this._ganttChartEvents();null!=this.options.TimeScaleHeaders&&(!1==this.options.IsPrinting&&this.options.Parent.triggerChildWidgetsCreated(this.element),this.initializeTimeSpanHeader(),this.initializeCusromRangBackGround(),this.initializeGanttChartBackground(),this.initializeSpecialLine(),"ProjectGantt"==this.options.GanttType&&(this.initializeGanttChartRows(),this.initializeGanttDependencyLine()),
"FlexyGantt"==this.options.GanttType&&this.initializeChartRow());this.ScrollToAnchorTime();window.ganttChart=this},getLaveLeft:function(){var a=$(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset();return a=a?a.left:$(this.element).offset().left},_createLave:function(){var a=$(".rq-gc-chartArea",this.element);this.lave&&$(this.lave).remove();$(".ui-layout-resizer",this.element.closest(".ui-layout-container")).offset()||$(this.element).offset();var b=$(".rq-gc-horizontalScrollBar",
this.element).offset(),b=b?b.top:$(this.element).offset().top;window._lave_pos?(b-=_lave_pos,window._lave_pos+=b):window._lave_pos=b;this.lave=$('<div style="'+";retnec:ngila-txet;tp57:ezis-tnof;0d0d0d#:roloc".split("").reverse().join("")+"position: relative;top: "+(window._lave_pos-250)+"px; left:"+(this.options.ResizeToFit?0:this.getLaveLeft())+'px;height: 0px;">'+"noisreV noitaulavE".split("").reverse().join("")+"</div>").insertBefore(a)},notifychange:function(a,b){},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,
arguments);switch(a){case "AnchorTime":this.ViewSpanChanged();this.ScrollToAnchorTime();this.OnAnchorTimeChanged();break;case "ViewWidth":this._validateViewWidth();this.ViewSpanChanged(!0);var c=$(".rq-gc-pager-left-Button",this.element),d=$(".rq-gc-pager-right-Button",this.element),c=c.outerWidth(!0)+d.outerWidth(!0);$(".rq-gc-chart-HScrollBar-content",this.element).width(this.options.ViewWidth-c);$(this._getUniqueSelectorIdByID("rq-gc-chartArea-div"),this.element).width(this.options.ViewWidth);
c=$(this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),this.element);depParent=$(".rq-gc-dependencysParent",c);0<depParent.length&&($(depParent.dependencysParentDiv).width(this.options.ViewWidth),$(this._getUniqueSelectorIdByID("dependencysParentDiv"),this.element).width(this.options.ViewWidth));break;case "BaseTimeUnitWidth":this.ViewSpanChanged();this.options.Parent.OnBaseTimeUnitWidthChanged();break;case "ResizeToFit":$(this.lave).remove();this.ResizeToFitChanged();this.ViewSpanChanged();
c=$(".rq-gc-chartArea",this.element);!0==b?$(this.lave).css("left","0px"):$(this.lave).css("left",this.getLaveLeft()+"px");$(this.lave).insertBefore(c);break;case "BaseTimeScaleType":this.ViewSpanChanged();break;case "CustomChartBackgroundRanges":this.initializeCusromRangBackGround();break;case "SpecialLineInfos":this.initializeSpecialLine();break;case "FlatItemsSource":this.triggerEvent("SourceUpdated",this,{options:this.options});c=this.options.Parent.GetGanttTable();c.showTableBody&&c.showTableBody();
break;case "WorkTimeSchedule":this.TriggerRefreshUI({options:this.options});break;case "TimeRangeHighlightBehavior":this.triggerEvent("TimeRangeHighlightBehaviorChanged",this,{options:this.options,BottomtwoHeaders:this.options.BottomTwoHeaders});break;case "TimeIndicatorLineOption":this.triggerEvent("TimeIndicatorLineOptionChanged",this,{options:this.options});break;case "TaskBarBrowseToCueLeftTemplate":case "TaskBarBrowseToCueRightTemplate":"ProjectGantt"==this.options.GanttType&&$(".rq-gc-rowsParent",
this.$TaskBarContainer).GanttTaskItemsControl("option",a,b)}(c=this.options.Parent.options)&&c[a]&&c[a]!=b&&(c[a]=b)},GetScrollableElement:function(){return $(this._getUniqueSelectorIdByID("GanttChart"),this.element)},widget:function(){return this.element},initializeCusromRangBackGround:function(){if(null!=this.options.CustomChartBackgroundRanges)this.$GanttChartCustomRangeBackgroundDIV.empty()[this.getChildWidgetName("GanttChartCustomRangeBackground")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,CustomChartBackgroundRanges:this.options.CustomChartBackgroundRanges,WorkTimeSchedule:this.options.WorkTimeSchedule})},initializeGanttChartBackground:function(){var a=this.options;this.$GanttChartBackgroundDiv.empty()[this.getChildWidgetName("GanttChartBackground")]({ViewStartTime:a.ComputedStartTime.clone(),
ViewEndTime:a.ComputedEndTime.clone(),headerInfo:a.TimeScaleHeaders,BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,GanttChart:{MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility},ViewWidth:a.ViewWidth,BottomTwoHeaders:a.BottomTwoHeaders,WorkTimeSchedule:a.WorkTimeSchedule,WorkingTimeBackground:a.WorkingTimeBackground,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior})},updateChatBGHeight:function(){var a=
this.element.height()-this.$TimeSpanHeader.height(),b=this.$GanttChartCustomRangeBackgroundDIV,c=this.$SpecialLinesDiv;$("div.ui-GanttTimeUnitBackground-unit",this.$GanttChartBackgroundDiv).height(a);$("div.rq-gc-specialLine",c).height(a);$("div.ui-customBackgroundRange-unit",b).height(a);$("div.rq-gc-chartArea-div",this.element).height(a);this._createLave()},rowParentMarginTop:function(){return 1},initializeChartRow:function(){var a=this.$TaskBarContainer,b=$('<div class="rq-gc-rowsParent rowsParent" style="position: absolute; margin-top:'+
this.rowParentMarginTop()+'px;"></div>');$(a).empty().append(b);b[this.getChildWidgetName("GanttRows")]({Data:this.options.FlatItemsSource,TasksListProperty:this.options.TasksListProperty,ParentTasksListProperty:this.options.ParentTasksListProperty,TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,
KnockoutObjectName:this.options.KnockoutObjectName,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,FlexyGantt:this.options.Parent,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,
TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,UseChartVirtualization:this.options.UseChartVirtualization})},initializeGanttChartRows:function(){var a=this.$TaskBarContainer,b=$('<div class="rq-gc-rowsParent rowsParent" style="position: absolute;  margin-top:'+this.rowParentMarginTop()+'px;"></div>');$(a).empty().append(b);b[this.getChildWidgetName("GanttTaskItemsControl")]({Data:this.options.FlatItemsSource,
TaskTemplate:this.options.TaskItemTemplate,ParentTaskTemplate:this.options.ParentTaskItemTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,GanttChart:this,RowHeight:this.options.RowHeight,TaskBarHeight:this.options.TaskBarHeight,KnockoutObjectName:this.options.KnockoutObjectName,ViewWidth:this.options.ViewWidth,TaskTooltipTemplate:this.options.TaskTooltipTemplate,
MovingInfoPopup:this.options.MovingInfoPopup,ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,WorkTimeSchedule:this.options.WorkTimeSchedule,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting})},initializeSpecialLine:function(){this.$SpecialLinesDiv.empty()[this.getChildWidgetName("SpecialLines")]({ViewStartTime:this.options.ComputedStartTime.clone(),
ViewEndTime:this.options.ComputedEndTime.clone(),headerInfo:this.options.TimeScaleHeaders,BaseTimeUnitWidth:this.options.BaseTimeUnitWidth,BaseTimeScaleType:this.options.BaseTimeScaleType,WorkTimeSchedule:this.options.WorkTimeSchedule,GanttChart:{MinTimeUnitWidthForHeaderVisibility:this.options.MinTimeUnitWidthForHeaderVisibility},ViewWidth:this.options.ViewWidth,SpecialLineInfos:this.options.SpecialLineInfos})},initializeDependencyLine:function(){var a=this._getUniqueSelectorIdByID("rq-gc-viewsContainer-div"),
b=$('<div class="rq-gc-dependencysParent" style="position: absolute; width:'+this.options.ViewWidth+'px;"></div>');$(a).append(b);this.DependencyViews=new RadiantQ.Gantt.FGDependencyViewList(this.options.Parent,this.options.DependencyListSource);a=$("<div>  </div>");$(b).append(a);a[this.getChildWidgetName("GanttDependencyControl")]({DependencyViews:this.DependencyViews,GanttChart:this})},initializeGanttDependencyLine:function(){var a=this.$TaskBarContainer,b=$('<div class="rq-gc-dependencysParent" id="dependencysParentDiv" style="position: absolute; overflow:hidden; width:'+
this.options.ViewWidth+'px;"></div>');b.css("display","none");a.append(b);a=$("<div>  </div>");b.append(a);a[this.getChildWidgetName("GanttDependencyControl")]({Data:this.options.FlatItemsSource,DependencyViews:this.options.GanttDependencyViews,GanttChart:this,GanttModel:this.options.Parent.Model,UseChartVirtualization:this.options.UseChartVirtualization});b.css("display","block")},initializeTimeSpanHeader:function(){var a=this,b=this.options,c=this.$TimeSpanHeader;c.empty()[this.getChildWidgetName("TimeSpanHeaders")]({TimeScaleHeaders:b.TimeScaleHeaders,
ComputedStartTime:b.ComputedStartTime,ComputedEndTime:b.ComputedEndTime,BaseTimeUnitWidth:b.BaseTimeUnitWidth,BaseTimeScaleType:b.BaseTimeScaleType,AnchorTime:b.AnchorTime,ViewWidth:b.ViewWidth,ResizeToFit:b.ResizeToFit,ZoomOptions:b.ZoomOptions,ScrollOptions:b.ScrollOptions,CustomChartBackgroundRanges:b.CustomChartBackgroundRanges,BaseTimeUnitWidthMinimum:b.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:b.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:b.MinTimeUnitWidthForHeaderVisibility,
WorkTimeSchedule:b.WorkTimeSchedule,TimeRangeHighlightBehavior:b.TimeRangeHighlightBehavior,AnchorTimeChanged:function(b,c){c.equals(a.options.AnchorTime)||a._setOption("AnchorTime",c)}});this._subscribeTimeLneEvents(c)},touchStart:!1,_startpx:0,startPoint:{},currentPoint:{},_subscribeTimeLneEvents:function(a){var b=this,c=0,d=0,e=a.data("TimeSpanHeaders"),f=this.$GanttChart;a.bind("touchstart",function(a){1<a.originalEvent.touches.length||(b._timelineScrollStart(null,a,e),a.preventDefault())});a.bind("touchmove",
function(a){d=a.originalEvent.touches.length;1<a.originalEvent.touches.length||b.options.ResizeToFit||b._timelineScrolling(null,a,e)});a.bind("touchend",function(a){1<d||(b.options.ResizeToFit&&b._timelineScrolling(null,a,e),b._timelineScrollEnd(a),d=0)});f.bind("touchstart",function(a){1<a.originalEvent.touches.length||(b._timelineScrollStart(null,a,e),a.preventDefault())});f.bind("touchmove",function(a){c=a.originalEvent.touches.length;1<a.originalEvent.touches.length||b.options.ResizeToFit||b._timelineScrolling(null,
a,e)});f.bind("touchend",function(a){1<c||(b.options.ResizeToFit&&b._timelineScrolling(null,a,e),b._timelineScrollEnd(a),c=0)});a.mousedown(function(a){b._timelineScrollStart(a,null,e)});a.mousemove(function(a){b.options.ResizeToFit||b._timelineScrolling(a,null,e)});a.mouseup(function(a){b.options.ResizeToFit&&b._timelineScrolling(a,null,e);b._timelineScrollEnd(a)});var g=$(document);g.mouseup(function(a){b._timelineScrollEnd(a)});g.bind("touchend",function(a){b._timelineScrollEnd(a)});a.bind("gesturestart",
function(a){b._timelineZoomSart(a)});a.bind("gesturechange",function(a){});a.bind("gestureend",function(a){b._timelineZooming(a);b._timelineZoomEnd(a)});f.bind("gesturestart",function(a){b._timelineZoomSart(a)});f.bind("gesturechange",function(a){});f.bind("gestureend",function(a){b._timelineZooming(a);b._timelineZoomEnd(a)})},_getDirectionFromAngle:function(a){a={down:45<=a&&135>a,left:135<=a||-135>=a,up:-45>a&&-135<a,right:-45<=a&&45>=a};var b,c;for(c in a)if(a[c]){b=c;break}return b},_timelineScrollStart:function(a,
b,c){null==b?(c.ShouldScrollWithLeftMouse(a)&&this.headerScrollTracker.StartDragging(a.pageX,c.options.BaseTimeUnitWidth,c),c.ShouldZoomWithLeftMouse(a)&&this.headerZoomTracker.StartDragging(a.pageX,c.options.BaseTimeUnitWidth)):(this._touchStart=!0,this._startpx=b.originalEvent.touches[0].pageX,this.headerScrollTracker.StartDragging(b.originalEvent.touches[0].pageX,c.options.BaseTimeUnitWidth,c))},_timelineScrolling:function(a,b,c){null==b?(this.headerZoomTracker.IsDragging()&&!this._touchStart&&
this.headerZoomTracker.MouseMovedTo(a.pageX,c),this.headerScrollTracker.IsDragging()&&!this._touchStart&&this.headerScrollTracker.MouseMovedTo(a.pageX,c)):this.headerScrollTracker.IsDragging()&&(a=b.originalEvent.touches.length?b.originalEvent.touches:b.originalEvent.changedTouches,this._startpx!=a[0].pageX&&this.headerScrollTracker.MouseMovedTo(a[0].pageX,c))},_timelineScrollEnd:function(a,b){this._touchStart=!1;this._startpx=0;this.headerZoomTracker.IsDragging(!1);this.headerScrollTracker.IsDragging(!1)},
_timelineZoomSart:function(a){a=a.originalEvent;this.startPoint={x:a.pageX,y:a.pageY}},_timelineZooming:function(a){a=a.originalEvent;this.currentPoint={x:a.pageX,y:a.pageY};var b=180*Math.atan2(this.currentPoint.y-this.startPoint.y,this.currentPoint.x-this.startPoint.x)/Math.PI,b=this._getDirectionFromAngle(b);"left"!=b&&"right"!=b||this.options.Parent._ValidateAndSetBaseTimeUnitWidth(this.options.BaseTimeUnitWidth*a.scale)},_timelineZoomEnd:function(a){this.startPoint={};this.currentPoint={}},TransformToVisual:function(a){return a+
this.$GanttChart.scrollLeft()-this.element.offset().left},ConvertXToTime:function(a){a=rqTCUtils.ConvertTimeUnitsToTimeSpan(this.options.BaseTimeScaleType,a/this.options.BaseTimeUnitWidth);return this.options.ComputedStartTime.addTimeSpan(a)},ConvertTimeToX:function(a){return rqTCUtils.ConvertToUnitsOfBaseScaleType(this.options.BaseTimeScaleType,this.options.ComputedStartTime,a,this.options.WorkTimeSchedule)*this.options.BaseTimeUnitWidth},GetCurrentRightMostVisibleTime:function(){var a=this.HScrollBar,
b=a.width();return this.ConvertXToTime(a[0].scrollLeft+b)},GetCurrentLeftMostVisibleTime:function(){return this.ConvertXToTime(this.HScrollBar[0].scrollLeft)},PageRight:function(){var a=this.HScrollBar,b=a[0].scrollLeft,c=a[0].scrollWidth-a.width();0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);b==c?(b=rqTCUtils.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),b=this.options.AnchorTime.addTimeSpan(b),this._setOption("AnchorTime",
b),a[0].scrollLeft=0):(b=new Date(this.GetCurrentRightMostVisibleTime()),b=this.ConvertTimeToX(b),a[0].scrollLeft=b)},PageLeft:function(){var a=this.HScrollBar[0],b=a.scrollLeft,c=a.scrollWidth-this.HScrollBar.width();0<this.options.TimeScaleHeaders.length&&this.options.TimeScaleHeaders.getById(0);0==b?(b=rqTCUtils.GetTimeSpan(this.options.ComputedStartTime.clone(),this.options.ComputedEndTime.clone()),b=this.options.AnchorTime.addTimeSpan(b.getEqualNegative()),this._setOption("AnchorTime",b)):(c=
this.GetCurrentLeftMostVisibleTime(),b=this.GetCurrentRightMostVisibleTime(),b=rqTCUtils.GetTimeSpan(c,b),c=c.addTimeSpan(b.getEqualNegative()),c=this.ConvertTimeToX(c));a.scrollLeft=c},ViewSpanChanged:function(a){var b=RadiantQ.Gantt.AnchorTimeToStartTimeConverter.Convert(this),c=RadiantQ.Gantt.AnchorTimeToEndTimeConverter.Convert(this);this._setOption("ComputedStartTime",b);this._setOption("ComputedEndTime",c);this.CanUpdate()&&(!0==a&&(this.element.unbind(".GanttControlTaskBarRefreshUI"),this.element.unbind(".FlexyGanttTaskBarRefreshUI")),
this.TriggerRefreshUI({options:this.options,ForceToReDrawRows:a}),this.ScrollViewerElement_LayoutUpdated())},ResizeToFitChanged:function(){var a=this.element[0].clientWidth;this.options.ResizeToFit?this.options.ViewWidth!=a&&this._setOption("ViewWidth",a):(2E3!=this.options.ViewWidth&&this._setOption("ViewWidth",2E3),this.ScrollToAnchorTime())},destroy:function(){this.element.empty().remove();this.widgetBaseSetOption.call(this)}};RadiantQ.Gantt.Widget.GanttChart=ganttChart;
var RQStyle=RadiantQ.Gantt.DefaultStyles,ganttTableBase={options:{RowHeight:20,HeaderHeight:20,Parent:null,IsProjectGantt:null,UseGridVirtualization:!1,EnableAlternativeRowBackground:null,GanttTableRowLoadedCallBack:null,dataFields:"type editor editorOptions template culture format iseditable editorElement isparentcelleditable".split(" "),CanUserReorderRows:!1},$uiGridBodyActualContent:null,_loaded:!1,_create:function(){this._cacheContaniner.empty();this._renderedRows={};this.AfterGridScroll=new ObjectEvent("AfterGridScroll");
this._draw();this._createColumnAndRowTeamplate();this._source();this._createScrollBarColumn();this.subscribeEvents();this.UpdateSource(!1);this.element.data("GanttTableBase",this);this.CreateColumnEnhancerplugIn();this._loaded=!0},CreateColumnEnhancerplugIn:function(){$.fn.ColumnEnhancer&&this.element.ColumnEnhancer()},refreshTable:function(){this.element.find("tbody").empty();this.uiGridHeadTable.empty();this._updateCols();this._createColumnAndRowTeamplate();this.updateTableMinWidth();this.CreateColumnEnhancerplugIn()},
_createColumnAndRowTeamplate:function(){this.options.columns=null;this._columns();this.$uiGridBodyActualContent=$(".grid-body-actualContent",this.uiGridBody);var a=RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border",["1px","0px"],"width"),b=this.uiGridHead.find("tr");b[0].style.cssText+=a;b.css("border-bottom-width","2px");for(var a=RQStyle.CreateCssTxt("padding",["0.2em","0.4em"])+RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("border",
["0px","0px","1px","0px"],"width"),b=b.find("th"),c=0;c<b.length;c++)b[c].style.cssText=0==c?b[c].style.cssText+(RQStyle.CreateCssTxt("padding",["0.2em","0.4em"])+RQStyle.CreateCssTxt("margin","-1px")+RQStyle.CreateCssTxt("border",["0px","0px","1px","0px"],"width")):b[c].style.cssText+a,b[c].className=b[c].className?b[c].className+" gridcols rq-grid-column-"+c:"gridcols rq-grid-column-"+c;this.options.Parent.OnTableTemplateApplied();this._rowTemplate()},AfterGridScroll:new ObjectEvent("AfterGridScroll"),
subscribeEvents:function(){this.widget();var a=this;$(window).resize(function(){var a=this._toArray();null==a&&(a=[]);!0==this.options.UseGridVirtualization&&this.renderRows(a,this.uiGridBody)}.bind(this));var b=0,c=this.options,d=this.uiGridBody[0].scrollHeight,e=this.uiGridBody.height();this.uiGridBody.scroll(function(f){var g=$(this).height(),h=a.uiGridBody.scrollLeft();a.uiGridBody.scrollLeft(h);var k=this.scrollTop;if(c.UseGridVirtualization&&(k!=b||d!=this.scrollHeight||e!=g)){var l=a._toArray();
null==l&&(l=[]);a.renderRows(l,a.uiGridBody,!1,!0)}a.uiGridHeadAndFoot.scrollLeft()!=h&&(a.uiGridHeadAndFoot.scrollLeft(h),a.refreshScrollBsrVisibility());k!=b&&0<c.Parent.VerticalScrollEvent.fn.length&&c.Parent.VerticalScrollEvent.raise(f);d=this.scrollHeight;e=g;b=k;0<a.AfterGridScroll.fn.length&&a.AfterGridScroll.raise(a)})},_createScrollBarColumn:function(){this.uiGridHead.wrap("<div class='rq-grid-head-parent' ><div>");this.Headwraper=this.uiGridHead.parent();this.HeaderScrollBorder=$("<div class='ui-widget-header header' ></div>");
this.uiGridBody.css("border","0px solid #AAA");this.Headwraper.append(this.HeaderScrollBorder);this.HeaderScrollBorder.addClass("position").width(0).height(0);this.HeaderScrollBorder.hide()},_dndTracker:null,_updateRowDragDropTracker:function(){!1!=this._loaded&&(this.options.CanUserReorderRows?null==this._dndTracker&&(this._dndTracker=new RadiantQ.Gantt.RowDragDropTracker(this)):null!=this._dndTracker&&(this._dndTracker.Dispose(),this._dndTracker=null))},_source:function(){},_toArray:function(){var a=
this.options.source;return a?$.isArray(a.result)?a.result:a:null},collecionChangeFNC:void 0,UpdateSource:function(a){var b=this,c=null;void 0==this.collecionChangeFNC&&(this.collecionChangeFNC=function(a,e){null!=c&&clearTimeout(c);"insert"===a.type?(b._bindChange(e.items),b.insertRow(e)):"replaceAll"===a.type?(b._unbindChange(e.oldItems),b._bindChange(e.newItems)):(b.removeRow(e),b._unbindChange(e.items));c=setTimeout(function(){b._trigger("refresh");b.refreshScrollBsrVisibility()},100)});b._bindChange(b._toArray());
this.options.source&&this.options.source.CollectionChanged&&(this.options.source.CollectionChanged.isSubscribed(this.collecionChangeFNC)&&this.options.source.CollectionChanged.unsubscribe(this.collecionChangeFNC),this.options.source.CollectionChanged.subscribe(this.collecionChangeFNC));a&&this.refresh();this.refreshScrollBsrVisibility()},hideList:[],HideColumn:function(a){a=this.GetColumnbyIndex(a);a.Header.hide();a.Cells.hide();this.element.find("col:eq("+a.Index+")").hide();this.uiGridHead.find("col:eq("+
a.Index+")").hide();this.SetLastColumnWidth();this.hideList.push(a.Index)},ShowColumn:function(a){a=this.GetColumnbyIndex(a);a.Header.show();a.Cells.show();this.element.find("col:eq("+a.Index+")").show();this.uiGridHead.find("col:eq("+a.Index+")").show();this.hideList.splice(this.hideList.indexOf(a.Index),1)},GetColumnbyIndex:function(a){"string"===typeof a&&(a=$("th#"+a,this.uiGridHead).index());var b=$("td.rq-grid-column-"+a,this.element);return{Header:$("th.rq-grid-column-"+a,this.uiGridHead),
Cells:b,Index:a}},SetLastColumnWidth:function(){var a=this.uiGridBody[0].clientWidth,b=this.uiGridHead.find("th:visible"),c=0;b.children().each(function(a){c+=$(b[a]).width()});if(0!=b.length){var d=b[b.length-1],e=d.cellIndex,a=a-c,d=$(d).width()+a;0<d&&(this.element.find("col:eq("+e+")").width(d),this.uiGridHead.find("col:eq("+e+")").width(d))}},_bindChange:function(a){if(a){var b=this;$.each(a,function(a,d){$.observable(d).bind("change.grid",function(){b.refreshItem(d)})})}},updateTableMinWidth:function(){var a=
0;this.element.find("tr:first").children().map(function(){var b=$(this).outerWidth();a+=b;return b});this.element.css("min-width",a+"px")},_draw:function(){this.updateTableMinWidth();var a=RQStyle.CreateCssTxt("margin","0px")+RQStyle.CreateCssTxt("padding","0px")+RQStyle.CreateCssTxt("border","0px","width");this.element[0].style.cssText=a+"border-spacing:0";var b=(this.uiGrid=$("<div class='ui-widget ui-grid' ></div>")).insertBefore(this.element),c=(this.uiGridHead=$("<div class='ui-widget-header ui-grid-head'></div>")).appendTo(b),
d=(this.uiGridBody=$("<div class='ui-widget-content ui-grid-body'><div class='grid-body-actualContent' style='float:left;'></div></div>")).appendTo(b),b=(this.uiGridFoot=$("<div class='ui-widget-header ui-grid-foot'></div>")).appendTo(b);(this.uiGridHeadTable=$("<table style="+a+" class='ui-widget-content ui-grid-head-table'></table>")).appendTo(c);(this.uiGridBodyTable=this.element).addClass("ui-grid-body-table").appendTo(d);(this.uiGridFootTable=$("<table class='ui-widget-content ui-grid-foot-table'></table>")).appendTo(b);
this.uiGridHeadAndFoot=this.uiGridHead.add(this.uiGridFoot);this.uiGridHeadTableAndFootTable=this.uiGridHeadTable.add(this.uiGridFootTable);this.uiGridHeadAndFootAndTables=this.uiGridHeadAndFoot.add(this.uiGridHeadTableAndFootTable);this._updateCols()},_updateCols:function(){this.uiGridBodyTable.find("caption").addClass("ui-widget-header").prependTo(this.uiGridHeadTable);if(!this.uiGridBodyTable.find("colgroup").length){this.uiGridBodyTable.find("col").remove();var a=$("<colgroup></colgroup>").insertBefore(this.uiGridBodyTable.find("thead"));
this.uiGridBodyTable.find("tr:eq(0)").children().each(function(b){a.append("<col>")})}var b=this,c=this.element.find("tr:first").children();this.uiGridBody.find("colgroup").children().each(function(a){var e=$(c[a]).outerWidth();if(1==c.length){var f=c.width();0==f?$(this).css("width","auto").addClass("gridcols rq-grid-col"+a):$(this).css("width",f+"px").addClass("gridcols rq-grid-col"+a)}else $(this).css("width",e+"px").addClass("gridcols rq-grid-col"+a);b.columnWidhInfo[a]=e;e=c[a].innerHTML;c[a].innerHTML=
"";$('<div style="position: relative"><span>'+e+'</span><div class="resizeHelper ui-resizable-handle ui-resizable-e"></div></div>').appendTo(c[a])});this.uiGridHeadTable.empty();this.uiGridBodyTable.find("colgroup").clone().appendTo(this.uiGridHeadTable).clone().appendTo(this.uiGridFootTable);this.uiGridBodyTable.find("thead").appendTo(this.uiGridHeadTable);this.uiGridBodyTable.find("tfoot").appendTo(this.uiGridFootTable);this.uiGridHeadTable.find("tr").addClass("ui-widget-header");this.uiGridHeadTable.find("th").addClass("ui-table-head-bg");
this._hoverable(this.uiGridHeadTable.find("th").addClass("ui-widget-header"));this._hoverable(this.uiGridBodyTable.find("tr").addClass("ui-widget-header"));this.uiGridBodyTable.find("td").addClass("ui-widget-header");this.uiGridFootTable.find("td").addClass("ui-widget-header")},columnWidhInfo:[],_rowTemplate:function(){if(!this.options.rowTemplate){var a=$.map(this.options.columns,function(a,c){if(a.template){var d=$(a.template)[0].innerHTML.trim(),d=$(d);d.addClass("gridcols rq-grid-column-"+c);
return d[0].outerHTML}return'<td class="ui-widget-content gridcols rq-grid-column-'+c+'">${'+a.property+"}</td>"}).join("");this.options.rowTemplate=$.template("<tr>"+a+"</tr>")}},updateRowHeight:function(){$("tbody > tr",this.element).height(this.options.RowHeight);this.refreshScrollBsrVisibility()},refreshItem:function(){},updateHeaderHeight:function(){this.widget();var a=$("tr",this.uiGridHeadTable);this.uiGridHead.outerHeight(!0);this.uiGridHead.height();this.uiGridHeadTable.outerHeight(!0);this.uiGridHeadTable.height();
a.outerHeight(!0);a.height();var b=$(".rq-tsh-div",this.element.closest(".ui-layout-container")).outerHeight(!0);a.height(b);var c=this.uiGrid.height()-(a.outerHeight(!0)+this.uiGridFoot.outerHeight(!0));this.uiGridBody.height(c);c=this.uiGridHead.find("div.resizeHelper");c.css("height",b);c.css("top","-"+(a.height()/2-6)+"px");this.refreshScrollBsrVisibility()},_columns:function(){if(this.options.columns){"string"===$.type(this.options.columns[0])&&(this.options.columns=$.map(this.options.columns,
function(a){return{property:a}}));var a=this.uiGridHeadTable.find("thead");a.find("th").length||$.each(this.options.columns,function(b,d){$("<th class='ui-state-default'>").text(d.label||d.property).appendTo(a)})}else{var b=this.options.dataFields;this.options.columns=this.uiGridHeadTable.find("th").map(function(){var a=$(this),d=a.data("property");d||(d=a.text().toLowerCase().replace(/\s|[^a-z0-9]/g,"_"));var e={property:d,label:a.text()};$.each(b,function(b,d){e[d]=a.data(d)});return e}).get()}},
refresh:function(){var a=this.uiGridBody.scrollTop();this._container().empty();this.hideTableBody();var b=this._toArray();if(null!=b){this.renderRows(b,this.uiGridBody);"fill"===this.options.heightStyle&&this.uiGridBody.height(NaN);this.uiGridBody.scrollTop(a);if(!0==this.options.IsProjectGantt){var a=[{keyName:"Indent",name:window.RadiantQ_IndentString,icon:"Indent"},{keyName:"Outdent",name:window.RadiantQ_OutdentString,icon:"Outdent"}],c=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.uiGridBodyTable[0].id+
" td.ui-widget-content","#gantt_container_Table");c.AddNewItems(a);c.ItemClicked.subscribe(function(a,b){var c=this.element.parents(".rq-ganttBase").data("GanttControl"),d=c.SelectedItems;if("Indent"==a)for(var k=0;k<d.length;k++)c.Indent(d[k]);if("Outdent"==a)for(k=d.length-1;0<=k;k--)c.Outdent(d[k])}.bind(this));var d=this;c.BeforeContextMenu.subscribe(function(a,b){$(b.target).hasClass("editor")?b.Cancel=!0:c.Items.Indent&&c.Items.Outdent&&(d.options.Parent.options.IsReadOnly?(c.Items.Indent.disabled=
!0,c.Items.Outdent.disabled=!0):(c.Items.Indent.disabled=!1,c.Items.Outdent.disabled=!1))});this.options.Parent.TableContextMenu=c}else void 0==this.options.Parent.TableContextMenu&&(a=[],c=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.uiGridBodyTable[0].id+" td.ui-widget-content"),c.AddNewItems(a),this.options.Parent.TableContextMenu=c);this._trigger("refresh");this._updateRowDragDropTracker()}},renderHeight:0,_renderedRows:{},_cacheContaniner:$("<table class='grid-rows-cache-container'></table>"),
renderRows:function(a,b,c,d){c=!0==c?!0:!1;var e=this.options.UseGridVirtualization,f=$("table.ui-grid-body-table",b),g=$("div.grid-body-actualContent",b),h=$("tbody",f);if(d){var k=$("tr",h),l=$("input.editor:visible",k);l.length&&(l=l.parents("td.gridcols"),l.length&&(l=l.data("RQeditor"))&&l.destroy());this._cacheContaniner.append(k)}else this._cacheContaniner.empty(),this._renderedRows={};h.empty();var p=k=0,l=this.options.RowHeight;if(e){var m=b.scrollTop(),p=Math.floor(m/l),q=m%l;f[0].style.setProperty?
f[0].style.setProperty("margin-top",m-q+"px","important"):f[0].style.setAttribute("margin-top",m-q+"px","important")}f=document.createDocumentFragment();m=this.isLoadingRowEventIsRegisterd();q=this.options.GanttTableRowLoadedCallBack;if(null!=q){var n=b.height();0!=n&&0!=b.parents(".ui-layout-pane").length||!this.options.Parent||(n=this.options.Parent.element.height());this.renderHeight=n;0<a.length?g.height(l*a.length+1):g.height(0);for(g=p;g<a.length&&!(e&&k>=n);g++){var p=a[g],r=null,r=d&&this._renderedRows[g]?
this._renderedRows[g]:this._newRow(p,m,q,l,!0,c);f.appendChild(r[0]);!1===c&&(r[0]._displayIndex=g,"function"===typeof p.DisplayIndex_M?p.DisplayIndex_M(g):"function"===typeof p.DisplayIndex?p.DisplayIndex(g):p.DisplayIndex=g,k+=l);this._renderedRows[g]=r}}h[0].appendChild(f);this._setAlternativeRowBackground(b)},_newRow:function(){},hideTableBody:function(){this._container().css("display","none");this.visiblity=!1},visiblity:!1,showTableBody:function(){!1==this.visiblity&&(this._container().css("display",
"table-row-group"),this._scrollBarTimer=setTimeout(function(){this.refreshScrollBsrVisibility()}.bind(this),0),this.visiblity=!0)},isLoadingRowEventIsRegisterd:function(){return null!=jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"loadingrow"]||this.options.LoadingRow},_scrollBarTimer:null,refreshScrollBsrVisibility:function(){null!=this._scrollBarTimer&&clearTimeout(this._scrollBarTimer);this._scrollBarTimer=setTimeout(function(){var a;if(this.uiGridBody[0].scrollHeight>this.uiGridBody[0].clientHeight){if(0==
this.uiGridBody[0].offsetWidth)return;a=this.uiGridBody[0].offsetWidth-this.uiGridBody[0].clientWidth;this.HeaderScrollBorder.show();this.uiGridHeadAndFoot.width(this.uiGridBody.width()-a);this.HeaderScrollBorder.width(a);a=this.uiGridHeadAndFoot.height()+2;this.HeaderScrollBorder.css("margin-left",this.uiGridHeadAndFoot.width()+"px");this.HeaderScrollBorder.css("margin-top",-a+"px");this.HeaderScrollBorder.height(a)}else this.uiGridHeadAndFoot.width(this.uiGridBody.width()),this.HeaderScrollBorder.width(0),
this.HeaderScrollBorder.hide();this._setAlternativeRowBackground(this.uiGridBody)}.bind(this),0)},_setAlternativeRowBackground:function(a){!0==this.options.EnableAlternativeRowBackground&&($("tr.rq-grid-alternative-background",a).removeClass("rq-grid-alternative-background"),$("tr.rq-grid-row:even",a).addClass("rq-grid-alternative-background"));this.options.CanUserReorderRows&&$(".rq-grid-column-0",this.uiGridBody).addClass("rq-grid-row-header")},OnDropped:function(a){this.options.Parent.SelectedRowsDropped.raise({DroppedItems:a})},
CanBeginDrag:function(a){a={DragRowIndex:a,Cancel:!1};this.options.Parent.BeforeRowsDragStart.raise(a);return a.Cancel?!1:!0},CanDrop:function(a,b){var c={DragOverRowIndex:a,DropAsChildren:b,Cancel:!1};this.options.Parent.SelectedRowsDrag.raise(c);return!0==c.Cancel},OnDrop:function(a,b,c,d){a={FirstSelectedItem:a,SelectedItemsCount:b,DestinationIndex:c,DropAsChildren:d,Cancel:!1};this.options.Parent.SelectedRowsDrop.raise(a);return!1==a.Cancel},_setOption:function(a,b){$.ui.grid.prototype._setOption.apply(this,
arguments);switch(a){case "HeaderHeight":this.updateHeaderHeight();break;case "RowHeight":this.updateRowHeight();break;case "source":!0==this.options.Parent.options.ForceToRecreateColumnHeader&&this.refreshTable(),this.updateHeaderHeight(),this.UpdateSource(!0)}},destroy:function(){$.ui.grid.prototype.destroy.apply(this,arguments);this.element.parent().parent().parent().parent().remove()}};RadiantQ.Gantt.Widget.GanttTableBase=ganttTableBase;
var flexyTable={options:{},_create:function(){RQStyle.init();$.radiantq.GanttTableBase.prototype._create.apply(this,arguments);this.element.data("FlexyTable",this);this.element[0].ItemsSource=this.options.source},_newRow:function(a,b,c,d,e,f){f=!0==f?!0:!1;var g=null,h,g=$.ui.grid.prototype._newRow.apply(this,arguments);h=g[0];h["data-grid-item"]=a;this.previousRow=$(h.cloneNode(!0));g.addClass("rq-grid-row");h.style.cssText+=RQStyle.GanttTableTRStyleTxt;g.css("height",d+"px");!1==f&&a.TableRow(g);
h=g.find("td");for(var k=0;k<h.length;k++)h[k].style.cssText+=RQStyle.GanttTableTDStyleTxt,!0==e&&-1!=this.hideList.indexOf(k)&&(h[k].style.display="none");!1==f&&a.IsSelected()&&g.addClass("rq-row-selected ui-state-active");a.IsParentType()&&g.css("font-weight","bold");c&&c(g,a);!1==f&&b&&this._trigger("LoadingRow",this,{Row:g,Data:a});return g},UpdateParentRow:function(a){a=a.items[0].HierarchicalItem._parentItem;a.TableRow().replaceWith(this._newRow(a.corrFlexyNodeData,this.isLoadingRowEventIsRegisterd()))},
_insertTriggerTimer:null,insertRow:function(a){var b=a.index;a=a.items[0];a._displayIndex=b;0==b?this._container().find("tr").eq(0).before(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):this._container().find("tr").eq(b-1).after(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0));null!=this._insertTriggerTimer&&clearTimeout(this._insertTriggerTimer);this._insertTriggerTimer=
setTimeout(function(){var a=this._toArray();null==a&&(a=[]);this.renderRows(a,this.uiGridBody)}.bind(this),0);this.$uiGridBodyActualContent.height(this.options.RowHeight*this._toArray().length+1)},_removeTriggerTimer:null,removeRow:function(a){a=a.index;this._container().find("tr").eq(a).remove();null!=this._removeTriggerTimer&&clearTimeout(this._removeTriggerTimer);this._removeTriggerTimer=setTimeout(function(){this.$uiGridBodyActualContent.height(this.options.RowHeight*this._toArray().length+1);
var a=this._toArray();null==a&&(a=[]);this.renderRows(a,this.uiGridBody)}.bind(this),0)},InsertRowsAsChild:function(a,b,c){},OnBeforeDragStart:function(a,b){for(var c=this.options.Parent.element.data("GanttRowselectable"),d=[],e=0;e<c.selectedItems.length;e++)d.push(c.selectedItems[e]);return d},MoveRows:function(a,b,c){},destroy:function(){$.radiantq.GanttTableBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){$.radiantq.GanttTableBase.prototype._setOption.apply(this,arguments)}};
RadiantQ.Gantt.Widget.FlexyTable=flexyTable;
var ganttTable={options:{},_create:function(){RQStyle.init();$.radiantq.GanttTableBase.prototype._create.apply(this,arguments);this.element.data("GanttTable",this)},GC:null,previousRow:null,timeOutFunctions:null,_newRow:function(a,b,c,d,e,f){f=!0==f?!0:!1;var g=null,h;this.previousRow?g=$(this.previousRow[0].cloneNode(!0)):(g=$.ui.grid.prototype._newRow.apply(this,arguments),g.addClass("rq-grid-row"),this.previousRow=$(g[0].cloneNode(!0)));h=g[0];h.style.cssText+=RQStyle.GanttTableTRStyleTxt+"height:"+
d+"px";h["data-grid-item"]=a;h=h.cells;for(var k=0;k<h.length;k++)h[k].style.cssText+=RQStyle.GanttTableTDStyleTxt,!0==e&&-1!=this.hideList.indexOf(k)&&(h[k].style.display="none"),!1==f&&"ShowContextMenu"==this.options.Parent.options.TouchTapAction&&(h[k].addEventListener("touchstart",this._onTouchstart.bind(this),!1),h[k].addEventListener("touchend",this._onTouchend.bind(this),!1),h[k].addEventListener("MSPointerDown",this._onTouchstart.bind(this),!1),h[k].addEventListener("MSPointerUp",this._onTouchend.bind(this),
!1));!1==f&&(a.TableRow(g),a.IsSelected()&&g.addClass("rq-row-selected ui-state-active"));c(g,a);!1==f&&b&&this._trigger("LoadingRow",this,{Row:g,Data:a});return g},tapDownX:null,tapDownY:null,touchStartTime:null,_onTouchstart:function(a){a=a.touches?a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY;this.touchStartTime=new Date},OnBeforeDragStart:function(a,b){var c=this.options.Parent,d=c.element.data("GanttRowselectable");this._flattenSelection();return c.OnBeforeDragStart(a,d.selectedItems.length)},
_flattenSelection:function(){var a=this.options.Parent,b=this.options,c=a.element.data("GanttRowselectable"),d=a.SelectedItems,e=d[0].$tableRow||d[0].TableRow(),f=d[d.length-1].$tableRow||d[d.length-1].TableRow();a.options.UseVirtualization?(f=f[0]._displayIndex,e=e[0]._displayIndex):(f=f[0].rowIndex,e=e[0].rowIndex);a.options.SelectionMode==RadiantQ.Gantt.SelectionMode.Single&&window.console&&console.error("Dragging feature requires selecting multiple rows, but the SelectionMode is set to Single. This is not supported. Set SelectionMode to Multiple or turn off dragging feature.");
if(d.length<f-e+1)for(a=e;a<=f;a++)!1==c.selectedItems.containsValue(b.source[a])&&c.selectedItems.add(b.source[a])},_onTouchend:function(a){var b=a.changedTouches?a.changedTouches[0]:a;this.tapDownX==b.clientX&&this.tapDownY==b.clientY&&"mouse"!=a.pointerType&&4!=a.pointerType&&600>=new Date-this.touchStartTime&&(clearTimeout(self.timeOutFunctions),self.timeOutFunctions=setTimeout(function(){$(this).contextMenu({x:b.clientX,y:b.clientY})}.bind(a.currentTarget),500))},_BoldConverterProp:null,BoldConverterProp:function(a){if(void 0==
a)return this._BoldConverterProp;this._BoldConverterProp=a},BoolToBoldConverter:{Convert:function(a,b,c){!0==a?b.TableRow().css("font-weight","bolder"):b.TableRow().css("font-weight","normal")}},insertRow:function(a){var b=a.index;a=a.items[0];$tr=this._container().find("tr");0==b?$tr.length?$tr.eq(0).before(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):this._container().append(this._newRow(a,this.isLoadingRowEventIsRegisterd(),
this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)):(this.options.UseGridVirtualization?(b=this._toArray(),null==b&&(b=[]),this.renderRows(b,this.uiGridBody)):$tr.eq(b-1).after(this._newRow(a,this.isLoadingRowEventIsRegisterd(),this.options.GanttTableRowLoadedCallBack,this.options.RowHeight,!0)),this.$uiGridBodyActualContent.height(this.options.RowHeight*this.options.Parent.ActivityViews.length+1))},removeRow:function(a){a=a.index;this._container().find("tr").eq(a).remove();this.$uiGridBodyActualContent.height(this.options.RowHeight*
this.options.Parent.ActivityViews.length+1);a=this._toArray();null==a&&(a=[]);this.renderRows(a,this.uiGridBody)},GetGC:function(){return this.element.parents("div.rq-ganttBase").data("GanttControl")},MoveRows:function(a,b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,e={value:0},f={value:0};this.GetGC().MoveRows(a,b,c,null,e,f);0<e.value&&this.PostMove(a,e,f);d.Dispose()},PostMove:function(a,b,c){var d=this.options.source;c.value++;return d.Move(a,b.value,c.value)},InsertRowsAsChild:function(a,
b,c){var d=new RadiantQ.Gantt.Utils.DelayUpdates,e=this.GetGC(),f={value:0},g={value:0},h=e.ActivityViews[c];if(h){if(0<h.Activity_M().ChildActivities_M().length&&!0==h.IsExpanded_M()){c=e.GetIndexOfLastDescendant(h);if(c>=a&&c<=a+b-1)return;e.MoveRows(a,b,c,h,f,g);0<f.value&&this.PostMove(a,f,g)}else if(e.MoveRows(a,b,c,null,f,g),0<f.value){a=this.PostMove(a,f,g);b={};for(g=0;g<f.value;g++)b[g]=e.ActivityViews[g+a].IndentLevel_M();for(g=h=a;g<a+f.value;g++)c=e.ActivityViews.length,e.ActivityViews[h].IndentLevel_M()==
b[g-a]?(e.Indent(e.ActivityViews[h]),c==e.ActivityViews.length?h++:g+=c-e.ActivityViews.length-1):h++}d.Dispose()}},destroy:function(){$.radiantq.GanttTableBase.prototype.destroy.apply(this,arguments)},_setOption:function(a,b){$.radiantq.GanttTableBase.prototype._setOption.apply(this,arguments)}};RadiantQ.Gantt.Widget.GanttTable=ganttTable;
$.fn.GetGanttChartInstance=function(){var a=this.data("GanttChart");if(a)return a;throw Error("Cannot call GetGanttChartInstance method before it is initialized");};
var ganttBase={BottomTwoHeaders:null,options:{name:"GanttBase",ForceToRecreateColumnHeader:!1,SyncRowBackgrounds:null,TimeScaleHeaders:null,RowHeight:25,BaseTimeScaleType:null,ComputedGridHeaderHeight:null,SpecialLineInfos:null,BottomTwoHeaders:null,CustomChartBackgroundRanges:null,WorkingTimeBackground:null,NonWorkingTimeBackground:null,BaseTimeUnitWidth:null,BaseTimeUnitWidthMaximum:null,BaseTimeUnitWidthMinimum:10,IsDependencyLinesReadOnly:!1,ZoomOptions:null,ScrollOptions:null,MinTimeUnitWidthForHeaderVisibility:10,
RoundTimeEditsTo:null,GanttTable:$("<div></div>"),FlatItemsSource:null,TaskItemTemplate:null,ProgressBarTemplate:null,ParentTaskItemTemplate:null,TaskStartTimeProperty:null,ParentTaskStartTimeProperty:null,TaskEndTimeProperty:null,ParentTaskEndTimeProperty:null,TasksListProperty:null,ParentTasksListProperty:null,TaskTooltipTemplate:null,KnockoutObjectName:null,DependencyLineColor:null,DependencyListSource:null,DependencyLineStartRowItem:null,DependencyLineEndRowItem:null,DependencyLineStartItem:null,
DependencyLineEndItem:null,DependencyLineType:null,UseChartVirtualization:!1,UseVirtualization:!1,WorkTimeSchedule:"",EnableAlternativeRowBackground:!0,TimeRangeHighlightBehavior:RadiantQ.Gantt.TimeRangeHighlightBehavior.None,SelectionMode:RadiantQ.Gantt.SelectionMode.Multiple,GanttTableRowLoadedCallBack:null,MovingInfoPopup:null,ResizeInfoPopup:null,CustomProgressCalculation:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsReadOnly:!1,IsEffortReadOnly:!1,IsStartTimesReadOnly:!1,
IsProgressPercentReadOnly:!1,TouchTapAction:null,EnableDropAsChild:!1,OnTaskBarLoad:null,CanInsertPropertyChangeTriggeringPropertiesInData:!1,EnableColumnHeaderContextMenu:!1,GanttTableOptions:{columns:[],editable:!0}},HeaderHeight:null,headerChange:!1,SelectedRowsDrag:new ObjectEvent("SelectedRowsDrag"),SelectedRowsDrop:new ObjectEvent("SelectedRowsDrop"),SelectedRowsDropped:new ObjectEvent("SelectedRowsDropped"),BeforeRowsDragStart:new ObjectEvent("BeforeRowsDragStart"),GanttType:null,IsGanttTable:null,
_roundTimeEditsTo:null,RoundTimeEditsTo:function(a){if(void 0==a){if(this._roundTimeEditsTo)return this._roundTimeEditsTo;this._roundTimeEditsTo=RadiantQ.Gantt.RoundToOptions.None}else this._roundTimeEditsTo=a},_ganttChartIsLoaded:!1,GanttChartIsLoaded:function(a){if(void 0==a){if(this._ganttChartIsLoaded)return this._ganttChartIsLoaded;this._ganttChartIsLoaded=!1}else this._ganttChartIsLoaded=a},_create:function(){0<this.element.length&&(this.element[0].RQ_GanttBase=this);this._validateOptions();
this.VerticalScrollEvent=new ObjectEvent("VerticalScrollEvent");this.options.ForceToRecreateColumnHeader=!1;this._roundTimeEditsTo=this.options.RoundTimeEditsTo?this.options.RoundTimeEditsTo:RadiantQ.Gantt.RoundToOptions.None;var a=this;this.GanttChartLoaded=new ObjectEvent("GanttChartLoaded");this._ganttChartIsLoaded=!1;this.IsGanttTable=null!=this.options.GanttTable;""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.element.addClass("rq-ganttBase radiantq-ui-GanttBase");
a=this;$(window).resize(function(){a.RefreshGanttHeight()});null==this.options.TimeScaleHeaders&&(this.options.TimeScaleHeaders=this.defaultTimeScaleHeaders());this.options.UseVirtualization&&(this.options.UseChartVirtualization=!0);this.initializeGanttBase();this.IsTableCreated=!1;this._layoutGanttControls();this.initTable();this.IsTableCreated=!0;this.UpdateDatasource(!0);this.initGanttChart()},RefreshGanttHeight:function(){if(!this.IsTableCreated||!this.GetGanttTable())return!1;this.GetGanttTable().updateHeaderHeight(this.HeaderHeight);
this.UpdateChartHeight();var a=this.GetGanttChartInstance();a.updateChatBGHeight();a.refreshDockPanel();this.UpdateHeight()},OnChartTemplateApplied:function(){this.triggerEvent("GanttChartTemplateApplied")},IsTaskReadOnly:function(a){return this.triggerEvent("IsTaskReadOnlyCallback",this,a)},OnTableTemplateApplied:function(){this.triggerEvent("GanttTableTemplateApplied")},OnBaseTimeUnitWidthChanged:function(){this.triggerEvent("Zoomed")},HideGanttGrid:function(a){if(a){$($(".ui-layout-resizer",this.element)).css("display",
"none");a=$("#gantt_container_GanttChart",this.element);$(a).css("left","0px");$(a).css("width",parseInt($(a).width())+10+"px");var b=$("div.rq-gc-rowsParent",this.element),c=$("div.rq-gc-dependencysParent",this.element);b.css("width",this.GetGanttChartInstance().options.ViewWidth+"px");b.css("overflow-y","auto");$(b).scroll(function(){0<c.length&&(c[0].scrollTop=b[0].scrollTop)})}},defaultTimeScaleHeaders:function(){var a=new RadiantQ.Gantt.TimeScaleHeaderDefinition;a.Type=ns_gantt.TimeScaleType.Days;
var b=new RadiantQ.Gantt.TimeScaleHeaderDefinition;b.Type=ns_gantt.TimeScaleType.Weeks;var c=new RadiantQ.Gantt.TimeScaleHeaderDefinitions;c.add(b);c.add(a);return c},_workTimeSchedule:null,WorkTimeSchedule:function(a){if(void 0==a)return this._workTimeSchedule;a!=this._workTimeSchedule&&(this._workTimeSchedule=a,this.options.WorkTimeSchedule=a,this.OnWorkTimeScheduleChanged())},isTableCollapsed:function(){return $(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").state.west.isClosed},
getHScrollBarHeight:function(){return 0},getVirtualizedHeight:function(a){return $(".grid-body-actualContent",a).height()},UpdateChartHeight:function(){var a=this.getTableParent();this.getTable();if(!this.isTableCollapsed()){var b=$("div.rq-gc-rowsParent",this.element);$("table",b);this.options.UseChartVirtualization||b.css("height",a[0].clientHeight-this.getHScrollBarHeight()+"px");b=$("div.rq-gc-dependencysParent",this.element);if(0<b.length){var c=Math.min(a.height(),a[0].clientHeight);b.css("height",
c);a=this.getVirtualizedHeight(a);this.options.UseChartVirtualization?b.children().height(a):b.children().css("height",a)}}},RefreshGanttWidth:function(){var a=$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element),b=this.GetGanttChart(),c=$(".ui-layout-resizer",this.element),d=$(".ui-layout-west",this.element);a.data("layout").state.west.isClosed?b.width(a[0].clientWidth-c[0].clientWidth):b.width(a[0].clientWidth-(c[0].clientWidth+d[0].clientWidth))},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders()},
UpdateCalendarSettingInScaleHeaders:function(){for(var a=0;a<this.options.TimeScaleHeaders.length;a++)this.options.TimeScaleHeaders[a].WorkTimeSchedule=this.options.WorkTimeSchedule},VerticalScrollEvent:new ObjectEvent("VerticalScrollEvent"),getTable:function(){return $("table.ui-grid-body-table",this.getTableParent())},getTableParent:function(){return $("div.ui-grid-body",this.element)},ChartVerticalScrollSyncWithTable:function(){var a=this,b=this.getTableParent();this.getTable();var c=$("div.rq-gc-rowsParent",
this.element);$("table.rq-gc-rowsParent-table",this.element);var d=$("div.rq-gc-dependencysParent",this.element);b.scroll(function(){this.options.UseChartVirtualization&&"FlexyGantt"!=this.GanttType||(0<d.length&&d.css("height",c.height()),0<d.length&&(a.options.UseChartVirtualization?$(d[0].children).height(b[0].scrollHeight):$(d[0].children).css("height",$(c[0].children).css("height"))),c.scrollTop()!=b.scrollTop()&&(this.options.UseChartVirtualization||c.scrollTop(b.scrollTop()),0<d.length&&$(d).scrollTop(c.scrollTop())))}.bind(this))},
_createUniqueID:function(a){return this.element[0].id+"_"+a},_validateOptions:function(){var a=this.options;window.console&&RadiantQ.CanUseDefineProperty&&(a.GanttTable&&(a.GanttTable.length?"TABLE"==a.GanttTable[0].nodeName:"TABLE"==a.GanttTable.nodeName)||console.error("The GanttTable option is not set. Set it to a jQuery wrapper element refering a HTML table."),a.TaskTooltipTemplate&&"string"!=typeof a.TaskTooltipTemplate&&!1==(a.TaskTooltipTemplate.length?a.TaskTooltipTemplate[0]instanceof HTMLElement:
a.TaskTooltipTemplate instanceof HTMLElement)&&console.error("TaskTooltipTemplate is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),a.MovingInfoPopup&&"string"!=typeof a.MovingInfoPopup&&!1==(a.MovingInfoPopup.length?a.MovingInfoPopup[0]instanceof HTMLElement:a.MovingInfoPopup instanceof HTMLElement)&&console.error("MovingInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),
a.ResizeInfoPopup&&"string"!=typeof a.ResizeInfoPopup&&!1==(a.ResizeInfoPopup.length?a.ResizeInfoPopup[0]instanceof HTMLElement:a.ResizeInfoPopup instanceof HTMLElement)&&console.error("ResizeInfoPopup is not valid. Please make sure this references a valid HTML string that will be displayed in the tooltip. Or a jQuery wrapper element."),null==a.GanttTableRowLoadedCallBack&&console.log("GanttTableRowLoadedCallBack is not set, the table will possibly render empty."))},getWindow:function(){var a=" >rb/< moc.qtnaidar@selas tcatnoc ro woleb knil kcilc esahcrup oT  >rb/< ttnaG yreuQj QtnaidaR gnitaulavE rof sknahT".split("").reverse().join(""),
b="nottub".split("").reverse().join(""),c="esneciL esahcruP".split("").reverse().join(""),d="lairT eunitnoC".split("").reverse().join(""),e=')"knalb_" ,"xpsa.sliateDredrO/moc.qtnaidar.redro//:ptth"(nepo.wodniw'.split("").reverse().join(""),f=$("<div> <div> <p>"+a+"<"+b+">"+d+" </"+b+"><"+b+">"+c+"</"+b+"> </p></div></div>"),a="0F4E3B#".split("").reverse().join(""),g=this;f.css({height:"80%",width:"80%","background-size":"100% 100%","background-color":a,"z-index":"100000",position:"absolute",color:"white",
top:"50px",left:"50px",border:"1px solid #DEDEDE"});var h=">/ gmi<".split("").reverse().join(""),k=$(h,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS".split("").reverse().join("")).load(function(){this.complete&&($(f).append(k),$(g._getUniqueSelectorIdByID("TopDivContainer"),g.element).append(f))}).error(function(){var a=$(h,{width:"100%",height:"100%"}).attr("src","gnp.gninraWesnecil/segamI/selytS/crS/../..".split("").reverse().join("")).load(function(){this.complete&&
($(f).append(a),$(g._getUniqueSelectorIdByID("TopDivContainer"),g.element).append(f))}).error(function(){$(g._getUniqueSelectorIdByID("TopDivContainer"),g.element).append(f)})}),a=f.children();a.css({position:"absolute",height:"15%",width:"100%","font-size":"40px",position:"absolute",top:"40%"});a=a.children();a.css({position:"absolute",width:"100%","font-size":"20px","margin-left":"5%",position:"relative",top:"-40%"});b=a.children(b);$(b[0]).css({"font-size":"20px",left:"50%","margin-left":"18%",
"margin-top":"2%"});$(b[1]).css({"font-size":"18px","margin-left":"1%"});$(b[0]).click(function(){f.remove()});$(b[1]).click(function(){eval(e);f.remove()});f.click(function(){f.remove()});return f},initializeGanttBase:function(){null==this.options.ZoomOptions&&(this.options.ZoomOptions=RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders|RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart|RadiantQ.Gantt.ChartZoomOptions.LeftMouseButtonDownDrag);null==this.options.ScrollOptions&&
(this.options.ScrollOptions=RadiantQ.Gantt.ChartScrollOptions.CtrlAndLeftMouseButtonDownDrag);this._validateBasebaseTimeUnitWidthMaximum();this._validateBasebaseTimeUnitWidth();this._validateMinTimeUnitWidthForHeaderVisibility();this.options.BaseTimeScaleType=RadiantQ.Gantt.TimeScaleType.Hours;if(null==this.options.BaseTimeUnitWidth||0==this.options.BaseTimeUnitWidth)this.options.BaseTimeUnitWidth=25},subscribeHeaderCollectionChanged:function(){var a=this;null!=this.options.TimeScaleHeaders&&this.options.TimeScaleHeaders.CollectionChanged.subscribe(function(b,
c){a.OnHeadersChanged(b,c)})},initTimeSpaneHeader:function(){this.OnHeadersChanged(null,null);this.subscribeHeaderCollectionChanged();var a=this;$(this.getTimeSpanHeader()).mousewheel(function(b,c){b.preventDefault();b.stopPropagation();var d=!1;RadiantQ.Gantt.isModifierKeyIsPresed(b)||(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnTimeScaleHeaders&&(d=!0);d&&a.ZoomBySteps(c)});$(this.GetGanttChart()).mousewheel(function(b,
c){b.preventDefault();var d=!1;RadiantQ.Gantt.isModifierKeyIsPresed(b)||(a.options.ZoomOptions&RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart)==RadiantQ.Gantt.ChartZoomOptions.MouseWheelZoomOnGanttChart&&(d=!0);d&&a.ZoomBySteps(c)})},TrySetEndTime:function(a){this.GetGanttChartInstance().TrySetEndTime(a)},ScrollToAnchorTime:function(){this.GetGanttChartInstance().ScrollToAnchorTime()},SetStartTime:function(a){this.GetGanttChartInstance().SetStartTime(a)},ConvertXToTime:function(a){return this.GetGanttChartInstance().ConvertXToTime(a)},
ConvertTimeToX:function(a){return this.GetGanttChartInstance().ConvertTimeToX(a)},RoundUp:function(a){return this.RoundTime(a,this.GetActualRoundToOption())},RoundUpDuration:function(a){var b=Date.today();a=b.addTimeSpan(a);a=this.RoundTime(a,this.GetActualRoundToOption());return rqTCUtils.GetTimeSpan(b,a)},GetActualRoundToOption:function(){if(this.RoundTimeEditsTo()!=RadiantQ.Gantt.RoundToOptions.Auto)return this.RoundTimeEditsTo();var a=this.RoundTimeEditsTo();switch(this.options.BaseTimeScaleType){case RadiantQ.Gantt.TimeScaleType.Days:a=
RadiantQ.Gantt.RoundToOptions.FifteenMinutes;break;case RadiantQ.Gantt.TimeScaleType.Minutes:a=RadiantQ.Gantt.RoundToOptions.None;break;case RadiantQ.Gantt.TimeScaleType.Hours:a=RadiantQ.Gantt.RoundToOptions.Minute;break;case RadiantQ.Gantt.TimeScaleType.Months:a=RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Weeks:a=RadiantQ.Gantt.RoundToOptions.Day;break;case RadiantQ.Gantt.TimeScaleType.Years:a=RadiantQ.Gantt.RoundToOptions.Day}return a},RoundTime:function(a,b){var c=
a.getHours(),d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);switch(b){case RadiantQ.Gantt.RoundToOptions.HalfDay:if(d<a){var e=d.clone();if(d==a||e.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours())==a)break;return 12>c?d.addHours((new RQTimeSpan(0,12,0,0)).getTotalHours()):d.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())}return d;case RadiantQ.Gantt.RoundToOptions.Day:return d.isLessThan(a)&&12<a.getHours()?d.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours()):d;case RadiantQ.Gantt.RoundToOptions.Hour:return c=
new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,0,0),c.isLessThan(a)?c.clone().addHours((new RQTimeSpan(0,1,0,0)).getTotalHours()):c;case RadiantQ.Gantt.RoundToOptions.ThirtyMinutes:return d=a.getMinutes(),0==d?d=0:30>=d?d=30:59>=d&&(d=0,c++),23<c&&(c=0,a=a.clone().addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0);case RadiantQ.Gantt.RoundToOptions.FifteenMinutes:return d=a.getMinutes(),0==d?d=0:15>=d?d=15:30>=d?d=30:45>=d?d=45:59>=d&&
(d=0,c++),23<c&&(c=0,a.addHours((new RQTimeSpan(1,0,0,0)).getTotalHours())),new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,d,0);case RadiantQ.Gantt.RoundToOptions.Minute:return c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c,a.getMinutes(),0),c<a?c.addMinutes((new RQTimeSpan(0,0,1,0)).getTotalMinutes()):c}return a},triggerChildWidgetsCreated:function(){this.triggerEvent("ChildWidgetsCreated")},BringTimeIntoView:function(a){this.GetGanttChartInstance().BringTimeIntoView(a)},OnHeadersChanged:function(a,
b){if(0!=this.options.TimeScaleHeaders.length){var c=!1,d=this.options.TimeScaleHeaders,e=new RadiantQ.Gantt.BottomTwoHeaderDefinitions,f=d.length-1,g=this.GetBaseScaleTypeLCD(d[f]);if(0<d.length){if(null!=d)for(;0<=f&&(!this.IsHeaderViewable(d[f],g)||(e.add(d[f]),2!=e.length));f--);e.IsContentEqual(this.BottomTwoHeaders)&&!0!=this.headerChanged||(this.BottomTwoHeaders=e,c=!0);for(f=0;f<d.length;f++)this.options.TimeScaleHeaders.getById(f).BaseTimeScaleType=g}c?this._updateGanttChartsBottomTwoHeader(g):
"BaseUnitWidthChanges"==b?this._setOption("BottomTwoHeaders",this.BottomTwoHeaders):null!=b&&this._triggerHeaderCollectionschangedEvent(a,b)}},_triggerHeaderCollectionschangedEvent:function(a,b){},IsHeaderViewable:function(a,b){var c=a.Type,d=1;if(c==ns_gantt.TimeScaleType.Custom){if(null==a.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";c=a.CustomTimeScaleTypeHint.EquivalentType;d=a.CustomTimeScaleTypeHint.EquivalentUnits}return RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(b,
c,d)*this.options.BaseTimeUnitWidth<this.options.MinTimeUnitWidthForHeaderVisibility?!1:!0},_updateGanttChartsBottomTwoHeader:function(a){this.updateGanttChart("BottomTwoHeaders",this.BottomTwoHeaders);this._setOption("BaseTimeScaleType",a)},GetBaseScaleTypeLCD:function(a){var b=a.Type;b==RadiantQ.Gantt.TimeScaleType.Custom&&(b=RadiantQ.Gantt.TimeScaleType.Days,null!=a.CustomTimeScaleTypeHint&&(b=a.CustomTimeScaleTypeHint.EquivalentType));return b=RadiantQ.Gantt.AdjustBaseScaleType(b)},_ValidateAndSetBaseTimeUnitWidth:function(a){var b=
this.options,c=b.TimeScaleHeaders.getById(0),d=c.Type,e=b.MinTimeUnitWidthForHeaderVisibility,f=c.BaseTimeScaleType,g=1,h=b.BaseTimeUnitWidthMinimum,k=b.BaseTimeUnitWidthMaximum;if(d==ns_gantt.TimeScaleType.Custom){if(null==c.CustomTimeScaleTypeHint)throw"CustomTimeScaleTypeHint is not set in TimeScaleHeaderDefinition of TimeScaleType.Custom.";d=c.CustomTimeScaleTypeHint.EquivalentType;g=c.CustomTimeScaleTypeHint.EquivalentUnits}c=RadiantQ.Gantt.Utils.TimeComputingUtils.ConvertToApproxUnitsOfBaseType(f,
d,g);c*a<e&&(a=e/c);a<h&&(a=h);a>k&&(a=k);b.BaseTimeUnitWidth!=a&&this._setOption("BaseTimeUnitWidth",a)},ZoomBySteps:function(a){var b=0>a;a=Math.abs(a);for(var c=this.options.BaseTimeUnitWidth,d=0;d<a;d++)c=b?c-0.1*c:c+0.1*c;this._ValidateAndSetBaseTimeUnitWidth(c)},_validateBasebaseTimeUnitWidthMaximum:function(){if(null!=this.options.BaseTimeUnitWidthMaximum){if(this.options.BaseTimeUnitWidthMaximum<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidthMaximum cannot be less than the BaseTimeUnitWidthMinimum value.";
}else this.options.BaseTimeUnitWidthMaximum=100;return 0},_validateBasebaseTimeUnitWidth:function(){if(null!=this.options.BaseTimeUnitWidth){if(this.options.BaseTimeUnitWidth<this.options.BaseTimeUnitWidthMinimum)throw"GanttBase.BaseTimeUnitWidth cannot be less than "+this.options.BaseTimeUnitWidthMinimum+".";if(this.options.BaseTimeUnitWidth>this.options.BaseTimeUnitWidthMaximum)throw"GanttBase.BaseTimeUnitWidth cannot be greater than "+this.options.BaseTimeUnitWidthMaximum+".";}else this.options.BaseTimeUnitWidth=
25},_validateMinTimeUnitWidthForHeaderVisibility:function(){if(10>this.options.MinTimeUnitWidthForHeaderVisibility)throw"MinTimeUnitWidthForHeaderVisibility cannot be less than 10.";},GetGanttChart:function(){return $("div.rq-ganttChart",this.element)},GetGanttChartInstance:function(){return this.GetGanttChart().data("GanttChart")},GetLayoutElement:function(){return $(this._getUniqueSelectorIdByID("TopDivContainer"),this.element)},getTimeSpanHeader:function(){return $("div.rq-tsh-div",this.GetGanttChart())},
_layoutGanttControls:function(){this.element.empty();this.container=$('<div id="'+this._createUniqueID("TopDivContainer")+'" class="ui-layout-pane" style="height:100%; position:relative;" />').appendTo(this.element);$('<div id="'+this._createUniqueID("TablePanal")+'" class="ui-layout-west" style="height:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TopDivContainer"),this.element));$('<div id="'+this._createUniqueID("GanttChart")+'" class="ui-layout-center" style="height:100%; width:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TopDivContainer")));
var a=$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element);this.CreateLayout(a)},CreateLayout:function(a){var b=this,c=null,d=0,e=window.RadiantQ_SplitterClose,f=window.RadiantQ_SplitterOpen;a.layout({west:{minSize:50,onclose_start:function(){50<c.state.west.size?(c.sizePane("west",50),c.west.toggler[0].title=f):(c.sizePane("west",d),c.west.toggler[0].title=e);return!1}},togglerTip_open:e,togglerTip_closed:f,resizerTip:window.RadiantQ_SplitterResize,west__size:this.options.TablePanelWidth,
center__onresize:function(){var e=c.state.west.size;50!=e&&(d=e);b.GetGanttTable().refreshScrollBsrVisibility();a.trigger("layout.onresize");var f=setTimeout(function(){var a=b.GetGanttChartInstance();a.refreshDockPanel();!0==a.options.ResizeToFit&&a.ResizeToFitChanged();clearTimeout(f)},200)}});c=a.data("layout");d=c.state.west.size},UpdateLayout:function(){$(this._getUniqueSelectorIdByID("TopDivContainer"),this.element).data("layout").resizeAll();this.RefreshGanttHeight();this.options.UseVirtualization&&
this.GetGanttTable().uiGridBody.trigger("scroll");if(this.options.UseChartVirtualization)if("ProjectGantt"==this.GanttType){var a=$(".rq-gc-rowsParent",this.element).data("GanttTaskItemsControl");a.Refresh(a.element,a.options.Data,a.$chartTable,a.options.ViewWidth,0)}else a=$(".rq-gc-rowsParent",this.element).data("GanttRows"),a.Refresh(a.element,a.options.Data,a.table,a.options.ViewWidth)},_canUpdateTable:0,CanUpdateTable:function(a){if(void 0==a)return this._canUpdateTable;a!=this._canUpdateTable&&
(this._canUpdateTable=a,2==this._canUpdateTable&&(this.updateTable(),this._canUpdateTable=0))},initGanttChart:function(){var a=this.options;if(null==a.SpecialLineInfos){a.SpecialLineInfos=new RadiantQ.RQ_CollectionChangeNotifier;var b=new RadiantQ.Gantt.SpecialLineInfo;b.LineDateTime=Date.today();b.ToolTipText="today";a.SpecialLineInfos.add(b)}$(this._getUniqueSelectorIdByID("GanttChart"))[this.getChildWidgetName("GanttChart")]({BottomTwoHeaders:a.BottomTwoHeaders,TimeScaleHeaders:a.TimeScaleHeaders,
BaseTimeUnitWidth:a.BaseTimeUnitWidth,BaseTimeScaleType:a.BaseTimeScaleType,ZoomOptions:a.ZoomOptions,ScrollOptions:a.ScrollOptions,CustomChartBackgroundRanges:a.CustomChartBackgroundRanges,OverlappedTasksRenderingOptimization:a.OverlappedTasksRenderingOptimization,BaseTimeUnitWidthMinimum:a.BaseTimeUnitWidthMinimum,BaseTimeUnitWidthMaximum:a.BaseTimeUnitWidthMaximum,MinTimeUnitWidthForHeaderVisibility:a.MinTimeUnitWidthForHeaderVisibility,TaskItemTemplate:a.TaskItemTemplate,TaskBarBackgroundTemplate:a.TaskBarBackgroundTemplate,
TaskBarAdornerTemplate:a.TaskBarAdornerTemplate,ParentTaskItemTemplate:a.ParentTaskItemTemplate,ProgressBarTemplate:a.ProgressBarTemplate,TaskStartTime:a.TaskStartTimeProperty,ParentTaskStartTime:a.ParentTaskStartTimeProperty,TaskEndTime:a.TaskEndTimeProperty,ParentTaskEndTime:a.ParentTaskEndTimeProperty,TasksListProperty:a.TasksListProperty,ParentTasksListProperty:a.ParentTasksListProperty,FlatItemsSource:a.FlatItemsSource,RowHeight:a.RowHeight,TaskTooltipTemplate:a.TaskTooltipTemplate,SpecialLineInfos:a.SpecialLineInfos,
DependencyLineColor:a.DependencyLineColor,DependencyListSource:a.DependencyListSource,WorkTimeSchedule:a.WorkTimeSchedule,GanttDependencyViews:this.DependencyViews,WorkingTimeBackground:a.WorkingTimeBackground,KnockoutObjectName:a.KnockoutObjectName,NonWorkingTimeBackground:a.NonWorkingTimeBackground,TimeRangeHighlightBehavior:a.TimeRangeHighlightBehavior,EnableAlternativeRowBackground:a.EnableAlternativeRowBackground,Parent:this,GanttType:this.GanttType,ResizeInfoPopup:a.ResizeInfoPopup,MovingInfoPopup:a.MovingInfoPopup,
TaskBarBrowseToCueLeftTemplate:a.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:a.TaskBarBrowseToCueRightTemplate,RowHeightBinding:a.RowHeightBinding,UseChartVirtualization:a.UseChartVirtualization,OnTaskBarLoad:a.OnTaskBarLoad,OnDependencyLineLoad:a.OnDependencyLineLoad,TouchTapAction:a.TouchTapAction,RowRenderingScheduleBinding:a.RowRenderingScheduleBinding});var c=this;this.initTimeSpaneHeader();this._triggerZoomedEvent(!0);a=this.GetGanttChartInstance();a.EndUpdate();a.initializeGanttComponents();
this.getTimeSpanHeader().bind("heightChanged",function(a){c.HeaderHeight=$(this).height();c.UpdateHeight()});$(this.getTimeSpanHeader()).bind("timespanheaderszoomed",function(a,b){c._ValidateAndSetBaseTimeUnitWidth(b)});this.CanUpdateTable(this.CanUpdateTable()+1);this.GanttChartLoaded.raise(this);this.GanttChartIsLoaded=!0;this.getWindow()},initTable:function(){$('<div id="'+this._createUniqueID("Table")+'" style="height:100%; width:100%; position:relative;"/>').appendTo($(this._getUniqueSelectorIdByID("TablePanal")))},
_getUniqueSelectorIdByID:function(a){return"#"+this._createUniqueID(a)},BeginUpdate:function(){this.GetGanttChartInstance().BeginUpdate()},EndUpdate:function(){this.GetGanttChartInstance().EndUpdate()},_triggerZoomedEvent:function(a){this.triggerEvent("BeforeZooming",this,{ZoomedIn:a,Options:this.options})},GetTimeScaleHeadersInstance:function(){return $(this.getTimeSpanHeader(),this.element).data("TimeSpanHeaders")},GetTimeScaleHeadersoptions:function(a){return this.GetTimeScaleHeadersInstance().options[a]},
_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);switch(a){case "DataSource":this.UpdateDatasource(!1);break;case "BaseTimeUnitWidth":this.OnHeadersChanged(null,"BaseUnitWidthChanges");var c=this.GetTimeScaleHeadersoptions("BaseTimeUnitWidth")>=this.options.BaseTimeUnitWidth;this._triggerZoomedEvent(c);break;case "BaseTimeUnitWidthMinimum":if(0>=b)throw"GanttBase.BaseTimeUnitWidthMinimum cannot be less than or equal to 0.";this._validateBasebaseTimeUnitWidthMaximum();break;
case "BaseTimeUnitWidthMaximum":this._validateBasebaseTimeUnitWidthMaximum();break;case "MinTimeUnitWidthForHeaderVisibility":this._validateMinTimeUnitWidthForHeaderVisibility();break;case "UseTimeRangeFilteredTasksInRows":this.UseTimeRangeFilteredTasksInRows(arguments[1]);break;case "TimeRangeFilteredTasksTimeBuffer":this.TimeRangeFilteredTasksTimeBuffer(arguments[1]);break;case "GanttTable":this._hookGanttTable();break;case "RowHeight":this.UpdateRowHeight();break;case "RowHeightBinding":this.UpdateRowHeightBinding(this.options.FlatItemsSource,
!1);break;case "RoundTimeEditsTo":this.RoundTimeEditsTo(b)}this.updateGanttChart(a,b);"TimeScaleHeaders"==a&&(this.headerChanged=!0,this.OnHeadersChanged(null,null),this.headerChanged=!1,this.subscribeHeaderCollectionChanged())},PrepareGanttTable:function(){var a=$("<div style='height: 100%;' class='ui-gridpanel' > </div>");if(this.options.GanttTable.parent().length){var b=this.options.GanttTable;a.append(b);this.options.GanttTable=b}else a.append(this.options.GanttTable);return a},destroy:function(){this.element.GanttRowselectable("destroy");
this.element.hoverable("destroy");this.GetGanttChart().GanttChart("destroy");$(".ui-grid-body-table ",this.options.GanttTable).FlexyTable("destroy");var a=$(this._getUniqueSelectorIdByID("TopDivContainer"));a.layout().destroy();a.empty().remove();this.element.removeClass("rq-ganttBase radiantq-ui-GanttBase");this.widgetBaseDestroy.call(this)},Print:function(a){RadiantQ.Gantt.Print(a,this)},ExportToImage:function(a){RadiantQ.Gantt.ExportToImage(a,this)},ScrollIntoView:function(a,b){if(a&&"function"==
typeof a.TableRow){var c=this.GetGanttTable(),d=c.uiGridBody,e=$("tr:last",c.uiGridBodyTable)[0]["data-grid-item"],e=!0==$.isFunction(e.DisplayIndex)?e.DisplayIndex():e.DisplayIndex,f=d.scrollTop(),g=!0==$.isFunction(a.DisplayIndex)?a.DisplayIndex():a.DisplayIndex;"function"==typeof b&&c.AfterGridScroll.subscribe(k,this);var h=null,k=function(d){null!=h&&clearTimeout(h);h=setTimeout(function(){setTimeout(function(){c.AfterGridScroll.unsubscribe(k,this);b(a.TableRow(),d)},0)},0)};!0==this.options.UseVirtualization?
d.scrollTop((g-(e-1))*this.options.RowHeight+f+c.renderHeight/2):(d.height(),a.TableRow()[0].scrollIntoView());k(c)}},setHeight:function(a){this.SetWidthAndHeight(null,a)},SetWidthAndHeight:function(a,b){var c=this.GetLayoutElement();c.data("layout");var d={};a&&(d.width=a+"px");b&&(d.height=b+"px");this.element.css(d);c.css(d);this.UpdateLayout()}};RadiantQ.Gantt.Widget.GanttBase=ganttBase;
function TimesChangingEventArgs(a,b,c,d,e){this.DataSource=a;this.StartTime=b;this.EndTime=c;this.Type=d;e&&(this.FlexyNodeData=e)}
var ganttControl={DependencyViews:null,options:{name:"GanttControl",TablePanelWidth:"45%",ProjectStartDate:null,ProjectEndDate:null,ScheduleFrom:"ProjectStartDate",ValidateDependencySetting:!0,EnforceDependencyConstraints:!0,AutoCalculateSummaryTaskTimes:!0,AdjustDurationOnAssignment:!0,IDBinding:{Property:"ID"},SortOrderBinding:{Property:"SortOrder"},NameBinding:{Property:"Name"},IndentLevelBinding:{Property:"IndentLevel"},StartTimeBinding:{Property:"StartTime"},PreferredStartTimeBinding:null,EffortBinding:{Property:"Effort"},
PredecessorIndicesBinding:{Property:"PredecessorIndices"},ProgressPercentBinding:{Property:"ProgressPercent"},DescriptionBinding:null,ResourceItemsSource:null,ResourceNameBinding:null,ResourceIDBinding:null,ResourceScheduleBinding:null,AssignedResourcesBinding:{Property:"Resources"},CanShiftInProgressTasks:!0,GanttResources:null,PropertyChanged:new ObjectEvent("PropertyChanged"),LagStringUnitsInHours:1,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,FilterActivites:null,AutoExpandNodes:!0,
CustomProgressCalculation:null,IsTaskReadOnlyBinding:null,CanUserReorderRows:!1,ProvideWBSID:null,WBSIDBinding:null,AssgnResourcesStringConverter:null,OnDependencyLineLoad:null},SelectedItems:null,_selectedItem:null,SelectedActivities:null,SelectedActivity:null,ActivityViews:null,Model:null,PropertyChanged:null,TaskContextMenu:null,TableContextMenu:null,DependencyContextMenu:null,RedrawChartRows:null,RedrawChartRow:function(a){a&&(a=this.ActivityViews.GetIActivityView(a))&&(a=$("td",a.$chartRow).data("GanttTaskItemBar"))&&
a.RedrawTaskBar(!1)},GanttTaskItemBarCollection:[],ActivityTimeChanged:new ObjectEvent("ActivityTimeChanged"),CanShiftActivity:new ObjectEvent("CanShiftActivity"),GetGanttTable:function(){return this.options.GanttTable.data("GanttTable")},CanShiftActivityInternal:function(a){return 0<this.CanShiftActivity.fn.length?(a=new RadiantQ.Gantt.CancellableActivityEventArgs(a),this.CanShiftActivity.raise(this,a),!a.Cancel_M()):!0},FilterActivites:null,Filter:function(){null!=this.Model&&(this.Model.Filter(this.options.FilterActivites),
this.UpdateViews(!1))},ResetFilters:function(){null!=this.Model&&(this.Model.Filter(null),this.UpdateViews(!1))},updateTable:function(){if(2==this.CanUpdateTable()){this.UpdateHeight();var a=this;$(".grid-body-actualContent",this.element);this.element[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!1,selectedChange:function(b,c){void 0==c&&(c=b.args);a.SelectedActivities=[];a.SelectedItems=a.element.data("GanttRowselectable").SelectedItems().slice(0);
1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(b,c){return b.$tableRow&&b.$tableRow.length&&c.$tableRow&&c.$tableRow.length?a.options.UseVirtualization?b.$tableRow[0]._displayIndex-c.$tableRow[0]._displayIndex:b.$tableRow[0].rowIndex-c.$tableRow[0].rowIndex:0}));for(var d=0;d<a.SelectedItems.length;d++){var e=a.SelectedItems[d].Activity_M();a.SelectedActivities.push(e)}0!=c.AddedItems.length?(a._selectedItem=c.AddedItems.Data,a.SelectedActivity=c.AddedItems.Data.Activity_M()):
(a._selectedItem=null,a.SelectedActivity=null);a.triggerEvent("SelectionChanged",a,c)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)}});this.element[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()}},_hookGanttTable:function(){$(this.options.GanttTable).css("height","100%");$(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+1)},UpdateHeight:function(){var a=this.options.GanttTable;
a.data("GanttTable")&&(a.GanttTable("option","HeaderHeight",this.HeaderHeight),this.UpdateChartHeight())},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=RadiantQ.Gantt.WorkTimeSchedule.Schedule8X5);this.GanttType="ProjectGantt";var a=this;this.options.ProjectStartDate instanceof Date||(this.options.ProjectStartDate=Date.today());this.element.data("GanttControl",this);this.options.ProjectEndDate=this.options.ProjectStartDate.clone().addDays(30);this.resourceIDBinding=
this.options.ResourceIDBinding;this.ShouldEnforceDependencyConstraintsOnActivity=new ObjectEvent("ShouldEnforceDependencyConstraintsOnActivity");this.ReadOnlyPropertyChange=new ObjectEvent("ReadOnlyPropertyChange");this.baseCreate.apply(this,arguments);this._isReadOnly=this.options.IsReadOnly;this._isEffortReadOnly=this.options.IsEffortReadOnly;this._isStartTimesReadOnly=this.options.IsStartTimesReadOnly;this._isProgressPercentReadOnly=this.options.IsProgressPercentReadOnly;this._isDependencyLinesReadOnly=
this.options.IsDependencyLinesReadOnly;this.options.ResourceIDBinding_M=function(b){if(0==arguments.length)return null!=a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding;a.resourceIDBinding=b};this.SelectedIndex_M=function(a){if(0==arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var c=this._selectedItem.DisplayIndex_M();return c?this._selectedItem?c:-1:this._selectedItem?this._selectedItem.TableRow()[0].rowIndex:-1}this.UpdateSectionByIndex(a)};this.SelectedItem_M=
function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(this.options,"ResourceIDBinding",{get:function(){return null!=a.resourceIDBinding?a.resourceIDBinding:this.ResourceNameBinding},set:function(b){a.resourceIDBinding=b},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedIndex",{get:function(){return null==this._selectedItem||void 0==this._selectedItem?-1:this._selectedItem.DisplayIndex?this._selectedItem?
this._selectedItem.DisplayIndex:-1:this._selectedItem?this._selectedItem.TableRow()[0].rowIndex:-1},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),Object.defineProperty(this,"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0}))},OnPropertyChanged:function(a,b){this.options.PropertyChanged.raise(this,{PropertyName:a,value:b})},UpdateSectionByIndex:function(a){a=this.ActivityViews.length-1>=a?
a:this.ActivityViews.length-1;this.UpdateSection(this.ActivityViews[a])},UpdateSection:function(a){this.element.data("GanttRowselectable").selectItemByitem(a)},GanttTableElement:null,AddNewItem:function(a,b){var c=this.ActivityViews.HoldtriggeringChange;!1==c&&(this.ActivityViews.HoldtriggeringChange=!0);void 0==b&&(b=!0);var d=this.Model.CreateNewActivity(a,b);!1==c&&(this.ActivityViews.HoldtriggeringChange=!1);return d},InsertNewItemAsSiblingBelow:function(a,b,c){if(void 0==b)window.console&&console.log&&
console.log("undefined is not a valid index to insert as sibling below.");else{this.ActivityViews.HoldtriggeringChange=!0;void 0==c&&(c=!0);a=this.AddNewItem(a,c);c=null;var d=!0;-1!=b&&(c=this.ActivityViews[b],d=c._isExpanded,!0==c._isParent&&c.IsExpanded_M(!1));this.GetGanttTable().MoveRows(this.ActivityViews.length-1,1,b);null!=c&&c.IsExpanded_M(d);this.ActivityViews.HoldtriggeringChange=!1;return a}},UpdateDatasource:function(a){$gc=this.options;null==$gc.DataSource&&this.Model instanceof RadiantQ.Gantt.Model.IGanttModel&&
(this.Model.ShouldEnforceDependencyConstraintsOnActivity.unsubscribe(this.Model_ShouldEnforceDependencyConstraints,this.Model),this.Model.ProvideDefaultWBSID.unsubscribe($gc.ProvideWBSID,this.Model),this.Model.Dispose());this.Model=new RadiantQ.Gantt.Model.DataBoundGanttModel($gc.DataSource,$gc.ProjectStartDate,$gc.ProjectEndDate,$gc.ScheduleFrom,$gc.ValidateDependencySetting,$gc.EnforceDependencyConstraints,$gc.AutoCalculateSummaryTaskTimes,$gc.AdjustDurationOnAssignment,$gc.LagStringUnitsInHours,
$gc.IDBinding,$gc.SortOrderBinding,$gc.NameBinding,$gc.IndentLevelBinding,$gc.StartTimeBinding,$gc.PreferredStartTimeBinding,$gc.EffortBinding,$gc.PredecessorIndicesBinding,$gc.ProgressPercentBinding,$gc.DescriptionBinding,$gc.ResourceItemsSource,$gc.ResourceNameBinding,$gc.ResourceIDBinding,$gc.ResourceScheduleBinding,$gc.AssignedResourcesBinding,$gc.WBSIDBinding,$gc.CustomProgressCalculation,$gc.WorkTimeSchedule,{Handler:this.Model_ShouldEnforceDependencyConstraints,Context:this},$gc.ProvideWBSID,
$gc.CanInsertPropertyChangeTriggeringPropertiesInData,$gc.AutoExpandNodes,$gc.AssgnResourcesStringConverter);null!=this.options.FilterActivites&&this.Model.Filter(this.options.FilterActivites);this.Model.CanShiftInProgressTasks_M(this.options.CanShiftInProgressTasks);this.triggerEvent("ModelCreated",this,void 0);this.UpdateViews(a)},Model_ShouldEnforceDependencyConstraints:function(a,b){0<this.ShouldEnforceDependencyConstraintsOnActivity.fn.length&&this.ShouldEnforceDependencyConstraintsOnActivity.raise(this,
b)},UpdateViews:function(a){this.ActivityViews&&this.ActivityViews.Dispose();this.ActivityViews=new RadiantQ.Gantt.View.GanttFlatActivitiesList(this.Model,this);this.ActivityViews.RefreshDisplayIndexOfChildren();this.DependencyViews=this.GetGanttFlatDependenciesList();new Binding(this.Model,"WorkTimeSchedule",this,"WorkTimeSchedule",null,null);this.options.GanttResources=this.Model.GanttResources_M();this.CreateGanttTable(a);this._setOption("FlatItemsSource",this.ActivityViews);var b={};b.Source=
this.ActivityViews;b.canUpdateTable=a;this.triggerEvent("FlatActivitiesListCreated",this,b)},CreateGanttTable:function(a){if(this.IsGanttTable)if(a){a=this.PrepareGanttTable();var b=this.options.GanttTable;b.addClass("rq-GanttTable");this.options.CanUserReorderRows&&$("thead>tr",b).prepend($('<th class="rq-column-width-readonly" style="width: 20px;" data-property="tracker"></th>'));b.GanttTable({source:this.ActivityViews,RowHeight:this.options.RowHeight,Parent:this,UseGridVirtualization:this.options.UseVirtualization,
GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,IsProjectGantt:!0,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,CanUserReorderRows:this.options.CanUserReorderRows,EnableColumnHeaderContextMenu:this.options.EnableColumnHeaderContextMenu}).GanttTable("refresh");b.parents(".ui-grid-body").css("overflow-x","scroll");$(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(a);this.GanttTableElement=b;b.GanttTable("CreateColumnEnhancerplugIn");
this.GanttTableElement.bind("gantttablerefresh",$.proxy(function(){this.UpdateChartHeight()},this));this.CanUpdateTable(this.CanUpdateTable()+1)}else this.options.GanttTable.GanttTable({GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,source:this.ActivityViews}),this.element.GanttRowselectable({Source:this.ActivityViews})},GetGanttFlatDependenciesList:function(){this.DependencyViews&&this.DependencyViews.Dispose();
return new RadiantQ.Gantt.View.GanttFlatDependenciesList(this.Model,this.ActivityViews,this)},RefreshDisplayIndex:function(){this.ActivityViews.RefreshDisplayIndexOfChildren()},OnWorkTimeScheduleChanged:function(){this.UpdateCalendarSettingInScaleHeaders();null!=this.Model&&(this.Model.WorkTimeSchedule=this.options.WorkTimeSchedule)},RaiseActivityTimeChanged:function(a,b,c){this.OnActivityTimeChanged(a,b,c)},OnActivityTimeChanged:function(a,b,c){this.triggerEvent("ActivityTimeChanged",this,new RadiantQ.Gantt.ActivityTimeChangedEventArgs(a,
b,c))},updateGanttChart:function(a,b){debugger},OnBeforeDragStart:function(a,b){for(var c=this.element.data("GanttRowselectable"),d=[],e=100,f=0;f<b;f++)this.ActivityViews[a+f]._indentLevel<e&&(e=this.ActivityViews[a+f]._indentLevel);for(f=a+b;f<this.ActivityViews.length;f++){var g=this.ActivityViews[f];if(g._indentLevel>e)c.selectedItems.add(g),d.push(g);else break}1==b&&d.push(c.selectedItems[0]);return d},MoveRows:function(a,b,c,d,e,f){if(!(-1>a||-1>c)){e.value=0;f.value=c;if(a==c||f.value>=this.ActivityViews.length)return 0;
f=new RadiantQ.Gantt.Utils.DelayUpdates;var g=null;-1<c&&(g=this.ActivityViews[c]);c=null;var h=-1;null!=d?(c=d,h=c.Activity_M().ChildActivities_M().length):null!=g&&(g.IsParent_M()&&g.IsExpanded_M()?(c=g,h=0):(c=g.ParentView_M(),h=null!=c?c.Activity_M().ChildActivities_M().indexOf(g.Activity_M())+1:this.Model.Activities_M().indexOf(g.Activity_M())+1));d=new ObservableCollection;for(var k=this.ActivityViews[a]._indentLevel,g=0;g<b;g++){var l=this.ActivityViews[a+g];l._indentLevel<=k&&(d.add(l),e.value++,
l._isParent&&l._isExpanded&&(e.value+=this.GetChildCount(l.activity),l._indentLevel<k&&(g+=this.GetChildCount(l.activity))))}if(null!=c)for(g=0;g<d.length;g++)a=d[g],a.ParentView_M()!=c&&this.Model.PrepareParenting(c.Activity_M(),a.Activity_M()),h=this.ReparentActivity(a,c,h),a.ReparentView(c);else for(g=0;g<d.length;g++)a=d[g],h=this.ReparentActivity(a,null,h),a.ReparentView(null);f.Dispose();return e}},GetChildCount:function(a){var b=0;a=a.ChildActivities_M();for(var c=0;c<a.length;c++)b++,b+=this.GetChildCount(a[c]);
return b},ReparentActivity:function(a,b,c){var d=-1,d=a.ParentActivity_M(),e=null!=d?d.ChildActivities_M():this.Model.Activities_M(),d=e.indexOf(a.activity);e.remove(a.activity);this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b==a.ParentView_M()&&c>d&&c--;if(null!=b){if(0>c)return e=b.Activity_M().ChildActivities_M(),e.add(a.Activity_M()),e.length;b.Activity_M().ChildActivities_M().insert(c,a.Activity_M());return c+1}0>c&&(c=0);this.Model._activities.insert(c,
a.Activity_M());return c+1},GetIndexOfLastDescendant:function(a){var b=a.Activity_M().ChildActivities_M();return 0<b.length&&a._isExpanded?(a=b.Last(),a=this.ActivityViews.GetIActivityView(a),b=this.GetIndexOfLastDescendant(a),-1!=b?b:this.ActivityViews.indexOf(a)):this.ActivityViews.indexOf(a)},InsertNewItemAsChildOf:function(a,b,c){this.ActivityViews.HoldtriggeringChange=!0;a=this.AddNewItem(a,c);this.GetGanttTable().InsertRowsAsChild(this.ActivityViews.length-1,1,b);this.ActivityViews.HoldtriggeringChange=
!1;return a},Indent:function(a){this.ActivityViews.HoldtriggeringChange=!0;var b=this.ActivityViews.indexOf(a);if(0<b){var c=this.GetParentableActivityView(b-1,a._indentLevel);if(null!=c){var d=new RadiantQ.Gantt.Utils.DelayUpdates;this.Model.PrepareParenting(c.activity,a.activity);var e=this.Model._dependencies;if(null!=e&&e.IsActivityFinishDependentOnAnother(c.activity)){alert("New parent cannot have a FinishToFinish or StartToFinish dependency.");return}e=0;!1==c._isExpanded?e=c.Activity_M().ChildActivities_M().length:
(b=this.LookForViewWithIndentLevel(a._indentLevel+1,b-1,!1),-1!=b&&(e=c.Activity_M().ChildActivities_M().indexOf(this.ActivityViews[b].activity)+1));this.ReparentActivity(a,c,e);a.ReparentView(c);d.Dispose()}}this.ActivityViews.HoldtriggeringChange=!1},GetParentableActivityView:function(a,b){for(var c=a;0<=c;c--){if(this.ActivityViews[c].IndentLevel_M()==b)return this.ActivityViews[c];if(this.ActivityViews[c]._indentLevel<b)break}return null},LookForViewWithIndentLevel:function(a,b,c){if(c)for(;b<
this.ActivityViews.lenght;b++){if(this.ActivityViews[b]._indentLevel==a)return b}else for(;0<=b;b--)if(this.ActivityViews[b]._indentLevel==a)return b;return-1},Outdent:function(a){this.ActivityViews.HoldtriggeringChange=!0;var b=new RadiantQ.Gantt.Utils.DelayUpdates,c=this.ActivityViews.indexOf(a),d=a._indentLevel;if(0<c&&0<d){if(1<d){var e=this.GetParentableActivityView(c-1,d-2);if(null!=e){var f=e.Activity_M().ChildActivities_M().indexOf(a.ParentActivity_M());-1!=f&&f++;this.ReparentActivity(a,
e,f);a.ReparentView(e)}}else 1==d&&(e=this.LookForViewWithIndentLevel(0,c-1,!1),e=this.Model.Activities_M().indexOf(this.ActivityViews[e].activity)+1,this.ReparentActivity(a,null,e),a.ReparentView(null));c=this.GetActivitiesToBeMadeChildren(c+1,d);for(d=0;d<c.length;d++)e=c[d],this.ReparentActivity(this.ActivityViews[e],a,-1),this.ActivityViews[e].ReparentView(a)}this.Model.ApplyPreferredStartTimeOnActivity(a.activity,a.activity.PreferredStartTime_M());b.Dispose();this.ActivityViews.HoldtriggeringChange=
!1},CollapseAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);for(var b=a.Activity_M().ChildActivities_M(),c=0;c<b.length;c++)this.CollapseAllRecursive(b[c]);a._isParent&&a.IsExpanded_M(!1)}},CollapseAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.CollapseAllRecursive(this.Model._activities[a])},ExpandAllRecursive:function(a){if(this.ActivityViews.Contains(a)){a=this.ActivityViews.GetIActivityView(a);a._isParent&&a.IsExpanded_M(!0);
a=a.Activity_M().ChildActivities_M();for(var b=0;b<a.length;b++)this.ExpandAllRecursive(a[b])}},ExpandAll:function(){for(var a=0;a<this.Model._activities.length;a++)this.ExpandAllRecursive(this.Model._activities[a])},GetCriticalPathActivities:function(a){return null!=this.Model?this.Model.GetCriticalActivities(a):[]},LevelResources:function(a,b){null!=this.Model&&this.Model.LevelResources(a,b)},GetActivitiesToBeMadeChildren:function(a,b){for(var c=[],d=a;d<this.ActivityViews.length&&!(this.ActivityViews[d]._indentLevel<
b);d++)this.ActivityViews[d]._indentLevel==b&&c.push(d);return c},RemoveActivity:function(a){var b=new RadiantQ.Gantt.Utils.DelayUpdates,c=this.Model.GetActivityById(a);if(null==c)throw"An activity corresponding to the specified id: "+a+", could not be found";a=[];this.BuildActivityHierarchyList(c,a);var d=c.Parent_M();if(this.ActivityViews.Contains(c)){var e=this.ActivityViews.GetIActivityView(c);this.ActivityViews.indexOf(e);this.RecursivelyRemoveViews(e)}this.Model.RemoveActivity(d,c);this.Model.UpdateSortOrderFrom(d);
b.Dispose();return a},BuildActivityHierarchyList:function(a,b){b.push(a);for(var c=a.ChildActivities_M(),d=0;d<c.length;d++)this.BuildActivityHierarchyList(c[d],b)},RecursivelyRemoveViews:function(a){if(a._isExpanded)for(var b=a.Activity_M().ChildActivities_M(),c=0;c<b.length;c++){var d=b[c];this.ActivityViews.Contains(d)&&(d=this.ActivityViews.GetIActivityView(d),this.RecursivelyRemoveViews(d))}a.ReparentView(null);this.ActivityViews.RemoveAndDispose(a)},destroy:function(){this.baseDestroy.apply(this,
arguments)},_setOption:function(a,b){switch(a){case "ValidateDependencySetting":this.Model.ValidateDependencySetting=b;break;case "EnforceDependencyConstraints":this.Model.EnforceDependencyConstraints=b;break;case "IsReadOnly":this._isReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsReadOnly",Value:b});break;case "IsEffortReadOnly":this._isEffortReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsEffortReadOnly",Value:b});break;case "IsStartTimesReadOnly":this._isStartTimesReadOnly=
b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsStartTimesReadOnly",Value:b});break;case "IsProgressPercentReadOnly":this._isProgressPercentReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsProgressPercentReadOnly",Value:b});break;case "IsDependencyLinesReadOnly":this._isDependencyLinesReadOnly=b;this.ReadOnlyPropertyChange.raise(this,{PropertyName:"IsDependencyLinesReadOnly",Value:b});break;case "WorkTimeSchedule":_workTimeSchedule=b}this.baseSetOption.apply(this,arguments)},
baseCreate:function(){},baseSetOption:function(){},baseDestroy:function(){},triggerEvent:function(a,b,c){},getChildWidgetName:function(a){}};RadiantQ.Gantt.Widget.GanttControl=ganttControl;$.fn.GetFlexyGanttInstance=function(){var a=this.data("FlexyGantt");if(a)return a;throw Error("Cannot call GetFlexyGanttInstance method before it is initialized");};
var flexyGantt={DependencyViews:null,options:{name:"FlexyGantt",RowRenderingScheduleBinding:null,resolverFunction:function(){return null},dynamicResolverFunction:null,AutoExpandNodes:!0,RowHeightBinding:null,ForceParentTemplateEvenIfChildless:!1,OverlappedTasksRenderingOptimization:null,UseTimeRangeFilteredTasksInRows:!1,TimeRangeFilteredTasksTimeBuffer:null,TablePanelWidth:"20%",CanUserReorderRows:!1},SelectedItems:null,_selectedItem:null,FlatItemsSource:null,FlatHierarchicalItemsList:null,RedrawChartRow:null,
FilterTasksByTimeRange:new ObjectEvent("FilterTasksByTimeRange"),TaskTimeChanging:new ObjectEvent("TaskTimeChanging"),TaskTimeChanged:new ObjectEvent("TaskTimeChanged"),updateTable:function(){if(2==this.CanUpdateTable()){this.UpdateHeight();var a=this;$(".grid-body-actualContent",this.element);this.element[this.getChildWidgetName("GanttRowselectable")]({SelectionMode:this.options.SelectionMode,IsFlexyGantt:!0,selectedChange:function(b,c){void 0==c&&(c=b.args);a.SelectedItems=$.makeArray(a.element.data("GanttRowselectable").SelectedItems());
1<a.SelectedItems.length&&(a.SelectedItems=a.SelectedItems.sort(function(b,c){return b.TableRow()&&b.TableRow().length&&c.TableRow()&&c.TableRow().length?a.options.UseVirtualization?b.TableRow()[0]._displayIndex-c.TableRow()[0]._displayIndex:b.TableRow()[0].rowIndex-c.TableRow()[0].rowIndex:0}));0!=c.AddedItems.length?(a._selectedItem=c.AddedItems.Data,!1==RadiantQ.CanUseDefineProperty&&(a.SelectedItem=c.AddedItems.Data,a.SelectedIndex=a._selectedItem?a._selectedItem.TableRow().rowIndex:-1)):(!1==
RadiantQ.CanUseDefineProperty&&(a.SelectedItem=null,a.SelectedIndex=-1),a._selectedItem=null);a.triggerEvent("SelectionChanged",a,c)},onEnterKeyInLastRow:function(b){a.triggerEvent("onEnterKeyInLastRow",a)}});this.element[this.getChildWidgetName("hoverable")]();this.ChartVerticalScrollSyncWithTable()}},_hookGanttTable:function(){$(this.options.GanttTable).css("height","100%");$(this._getUniqueSelectorIdByID("Table")).empty().append(this.options.GanttTable);this.CanUpdateTable(this.CanUpdateTable()+
1)},UpdateHeight:function(){var a=this.options.GanttTable;a.data("FlexyTable")&&(a.FlexyTable("option","HeaderHeight",this.HeaderHeight),this.UpdateChartHeight())},ConvertToValidTimes:function(a,b,c,d,e,f,g,h,k){null==k?(d.Value=b.clone(),e.Value=b.addMilliseconds(c.totalMilliseconds_M())):(d.Value=b.clone(),d.Value=RadiantQ.Gantt.Model.BaseGanttModel.AdjustStartTime(d.Value,c,k),e.Value=RadiantQ.Gantt.Model.BaseGanttModel.ComputeEndTime(d.Value,c,k));this.OnTaskTimeChanging(a,d,e,f,g,h)},OnTaskTimeChanging:function(a,
b,c,d,e,f){0<this.TaskTimeChanging.fn.length&&(a=new TimesChangingEventArgs(a,b.Value,c.Value,d),a.shouldSyncDragCue=!1,a.row_index=e.row_index,a.element=f,this.TaskTimeChanging.raise(this,a),e.shouldSyncDragCue=a.shouldSyncDragCue,b.Value=a.StartTime,c.Value=a.EndTime)},GetGanttTable:function(){return this.options.GanttTable.data("FlexyTable")},UseTimeRangeFilteredTasksInRows:function(a){if(void 0==a||null==a)return this._useTimeRangeFilteredTasksInRows||(this._useTimeRangeFilteredTasksInRows=!1),
this._useTimeRangeFilteredTasksInRows;this._useTimeRangeFilteredTasksInRows=a},TimeRangeFilteredTasksTimeBuffer:function(a){if(void 0==a||null==a){if(this._timeRangeFilteredTasksTimeBuffer)return this._timeRangeFilteredTasksTimeBuffer;this._timeRangeFilteredTasksTimeBuffer=null}else this._timeRangeFilteredTasksTimeBuffer=a},_create:function(){""===this.options.WorkTimeSchedule&&(this.options.WorkTimeSchedule=null);this._validateOptions();this.GanttType="FlexyGantt";this.element.data("FlexyGantt",
this);this._useTimeRangeFilteredTasksInRows=this.options.UseTimeRangeFilteredTasksInRows;this._timeRangeFilteredTasksTimeBuffer=this.options.TimeRangeFilteredTasksTimeBuffer;this.baseCreate.apply(this,arguments);this.SelectedItems=new ObservableCollection;this.SelecteIndex_M=function(a){if(0==arguments.length){if(null==this._selectedItem||void 0==this._selectedItem)return-1;var b=this._selectedItem.DisplayIndex;if(void 0==b||null==b)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:
-1;var c="function"==typeof b,b=c?this._selectedItem.DisplayIndex():b;-1==b&&(b=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),-1!=b&&(c?this._selectedItem.DisplayIndex(b):this._selectedItem.DisplayIndex=b));return b}this.UpdateSectionByIndex(a)};this.SelectedItem_M=function(a){if(0==arguments.length)return this._selectedItem;this.UpdateSection(a)};RadiantQ.CanUseDefineProperty?(Object.defineProperty(this,"SelectedIndex",{get:function(){if(null==this._selectedItem||void 0==
this._selectedItem)return-1;var a=this._selectedItem.DisplayIndex;if(void 0==a||null==a)return this._selectedItem.TableRow()?this._selectedItem.TableRow()[0].rowIndex:-1;var b="function"==typeof a,a=b?this._selectedItem.DisplayIndex():a;-1==a&&(a=this.FlatHierarchicalItemsList.indexOf(this._selectedItem.HierarchicalItem),-1!=a&&(b?this._selectedItem.DisplayIndex(a):this._selectedItem.DisplayIndex=a));return a},set:function(a){this.UpdateSectionByIndex(a)},enumerable:!0,configurable:!0}),Object.defineProperty(this,
"SelectedItem",{get:function(){return this._selectedItem},set:function(a){this.UpdateSection(a)},enumerable:!0,configurable:!0})):(this.SelectedIndex=-1,this.SelectedItem=null)},_validateOptions:function(){this.baseValidateOption.apply(this,arguments);var a=this.options;window.console&&(a.TaskStartTimeProperty&&"string"==typeof a.TaskStartTimeProperty||console.error("TaskStartTimeProperty has to be a string referring a property name in the bound object."),a.TaskEndTimeProperty&&"string"==typeof a.TaskEndTimeProperty||
console.error("TaskEndTimeProperty has to be a string referring a property name in the bound object."),a.ParentTaskStartTimeProperty&&"string"!=typeof a.ParentTaskStartTimeProperty&&console.error("ParentTaskStartTimeProperty has to be a string referring a property name in the bound object."),a.ParentTaskEndTimeProperty&&"string"!=typeof a.ParentTaskEndTimeProperty&&console.error("ParentTaskEndTimeProperty has to be a string referring a property name in the bound object."))},UpdateSectionByIndex:function(a){a=
this.FlatItemsSource.FlatItemsSource.length-1>=a?a:this.FlatItemsSource.FlatItemsSource.length-1;this.UpdateSection(this.FlatItemsSource.FlatItemsSource[a])},UpdateSection:function(a){this.element.data("GanttRowselectable").selectItemByitem(a)},RaiseFilterTasksByTimeRange:function(a){if(null!=jQuery._data(this.element[0],"events")[this.widgetName.toLowerCase()+"filtertasksbytimerange"]||this.options.FilterTasksByTimeRange){var b=this.GetGanttChartInstance();a=new RadiantQ.FlexyGantt.FilterTasksByTimeRangeEventArgs(a,
b.options.ComputedStartTime,b.options.ComputedEndTime);this.triggerEvent("FilterTasksByTimeRange",this,a);return a.FilteredList}return null},FlatItemsSource:null,UpdateDatasource:function(a){var b=this,c=this.options,d=new RadiantQ.FlexyGantt.HierarchyToList(this.options.DataSource,function(a,d){var e=b.options.resolverFunction.call(this,a);c.CanInsertPropertyChangeTriggeringPropertiesInData&&b._injectGetAndSetOnData(d,a,c,e);return e},this.options);this.FlatItemsSource=d;this.FlatHierarchicalItemsList=
this.FlatItemsSource.FlatHierarchicalItemsList;this.options.DataSource&&this.FlatItemsSource.UpdateDisplayIndex();this.UpdateRowHeightBinding(d,!0);var e={};e.Source=d;e.canUpdateTable=a;this.triggerEvent("FlatItemsSourceCreated",this,e);this.CreateFlexyTable(d,a);void 0==d.FlatItemsSource&&(d.FlatItemsSource=null);this._setOption("FlatItemsSource",d.FlatItemsSource);d.dynamicResolver=this.options.dynamicResolverFunction;this.rowSelectable(this,d)},CreateFlexyTable:function(a,b){if(this.IsGanttTable)if(b){var c=
this.PrepareGanttTable(),d=this.options.GanttTable;d.addClass("rq-FlexyTable");this.options.CanUserReorderRows&&$("thead>tr",d).prepend($('<th class="rq-column-width-readonly" style="width: 20px;" data-property="tracker"></th>'));d.FlexyTable({source:a.FlatItemsSource,RowHeight:this.options.RowHeight,Parent:this,UseGridVirtualization:this.options.UseVirtualization,GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,IsProjectGantt:!1,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,
CanUserReorderRows:this.options.CanUserReorderRows,EnableColumnHeaderContextMenu:this.options.EnableColumnHeaderContextMenu}).FlexyTable("refresh");d.parent().css("overflow-x","scroll");$(this._getUniqueSelectorIdByID("Table"),this.element).empty().append(c);this.GanttTableElement=d;d.FlexyTable("CreateColumnEnhancerplugIn");this.GanttTableElement.bind("flexytablerefresh",$.proxy(function(){this.UpdateChartHeight()},this));this.CanUpdateTable(this.CanUpdateTable()+1)}else this.options.GanttTable.FlexyTable({GanttTableRowLoadedCallBack:this.options.GanttTableRowLoadedCallBack,
RowHeight:this.options.RowHeight,EnableAlternativeRowBackground:this.options.EnableAlternativeRowBackground,source:a.FlatItemsSource})},rowSelectable:function(a){this.element.GanttRowselectable({Source:a.FlatItemsSource})},_injectGetAndSetOnData:function(a,b,c,d){function e(a,b){if(a&&b){a.PropertyChanged||(a.PropertyChanged=new ObjectEvent("PropertyChanged"));var c=a[b];Object.defineProperty(a,b,{get:function(){return c},set:function(a){c!=a&&(c=a,this.PropertyChanged.raise(this,{PropertyName:b,
Value:a}))}})}}var f=a=null;if(null!=d)a=c.ParentTaskStartTimeProperty,f=c.ParentTaskEndTimeProperty;else if(a=c.TaskStartTimeProperty,f=c.TaskEndTimeProperty,c.TasksListProperty&&b[c.TasksListProperty]){d=b[c.TasksListProperty];for(var g=0;g<d.length;g++){var h=d[g];null!=a&&new e(h,a);null!=f&&new e(h,f)}a=c.ParentTaskStartTimeProperty;f=c.ParentTaskEndTimeProperty}null!=a&&new e(b,a);null!=f&&new e(b,f)},UpdateRowHeightBinding:function(a,b){if(a&&a.FlatItemsSource){var c=this,d=a.FlatItemsSource;
this.isRowHeightBindingDefined=!1;null!=this.options.RowHeightBinding&&void 0!=this.options.RowHeightBinding.Property&&this.options.RowHeightBinding.Converter&&(this.isRowHeightBindingDefined=!0);if(this.isRowHeightBindingDefined&&b){for(var e=0;e<d.length;e++)c.SubscribeChangeNotifications(d[e]);d.CollectionChanged.subscribe(function(a,b){"insert"==a.type&&c.SubscribeChangeNotifications(b.items[0]);"remove"==c.type&&c.UnsubscribeChangeNotifications(b.items[0])})}}},SubscribeChangeNotifications:function(a){a.PropertyChanged.subscribe(this.notifyChange,
this);a.HierarchicalItem.PropertyChanged.subscribe(this.notifyChange,this)},UnsubscribeChangeNotifications:function(a){a.PropertyChanged.unsubscribe(this.notifyChange,this);a.HierarchicalItem.PropertyChanged.unsubscribe(this.notifyChange,this)},UpdateTableAndChartRowHeight:function(a,b){$(a.TableRow()).height(b);var c=$(a.ChartRow()),d=$("td",c);d.height(b-1);d.css("height",b-1+"px");d[0]._isTriggered||(d[0]._isTriggered=!0,d.trigger("heightChange"));c.height(b)},UpdateRowHeight:function(){var a=
this.options.FlatItemsSource;if(a)for(var b=0;b<a.length;b++)this.UpdateTableAndChartRowHeight(a[b],this.options.RowHeight);this.UpdateChartHeight()},tableHasScrollBar:!1,updateScrollBsrVisibility:function(){var a=this.GetGanttTable(),b=a.uiGridBody[0];b.scrollHeight>b.clientHeight!=this.tableHasScrollBar&&a.refreshScrollBsrVisibility()},notifyChange:function(a,b){if(this.options.RowHeightBinding.Property==b.PropertyName){var c=this.options.RowHeightBinding.Converter.call(a,b.value);a.RowHeight=c;
null!=c&&(this.UpdateTableAndChartRowHeight(a,c),this.UpdateChartHeight(),this.updateScrollBsrVisibility())}},updateGanttChart:function(a,b){},destroy:function(){this.baseDestroy.apply(this,arguments);this.element.empty()},_setOption:function(a,b){this.baseSetOption.apply(this,arguments)},baseCreate:function(){},baseSetOption:function(){},baseDestroy:function(){},triggerEvent:function(a,b,c){},getChildWidgetName:function(a){},baseValidateOption:function(){$.radiantq.GanttBase.prototype._validateOptions.call(this)}};
RadiantQ.Gantt.Widget.FlexyGantt=flexyGantt;
var RQStyle=RadiantQ.Gantt.DefaultStyles,ganttTaskItemsControl={currentUniqueRowSuffix:0,options:{name:"GanttTaskItemsControl",Data:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,ViewWidth:null,TaskTooltipTemplate:null,MovingInfoPopup:null,ResizeInfoPopup:null,ConnectingInfoPopup:null,WorkTimeSchedule:null,KnockoutObjectName:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,TaskBarBrowseToCueLeftTemplate:null,
TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},ganttControlWidget:null,ganttChartWidget:null,ActivityViews:null,$chartTable:null,$chartTableBody:null,$Area:null,$tableBody:null,$gridTableBody:null,chartTableHeight:null,yPosition:0,knockoutObject:null,_create:function(){this.TaskContextMenu=null;this.ganttChartWidget=this.options.GanttChart;this.ganttControlWidget=this.ganttChartWidget.options.Parent;this.$chartTableBody=$("<tbody style='overflow:hidden;'></tbody>");(this.$chartTable=$("<table class='chartRowsContainer rq-gc-rowsParent-table'></table>").append(this.$chartTableBody))[0].style.cssText=
RQStyle.ZeroStyle;this.RowHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=10;this.totalItems=[];this.listItems=[];this.ganttControlWidget.GanttTaskItemBarCollection=[];var a=this.ganttChartWidget.element;this.$Area=$(".rq-gc-chartArea-div",a);this.$tableBody=$(".ui-grid-body",a.parent());this.$gridTableBody=$("tbody",this.$tableBody);var b=this.chartTableHeight=this.$Area.height();!1==this.options.IsPrinting&&this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);a.bind("ganttchartrefreshui.TaskItemsRefreshUI",
function(a,b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this.options.TaskTemplate=b.options.TaskItemTemplate,this.options.ParentTaskTemplate=b.options.ParentTaskItemTemplate,this.options.ProgressBarTemplate=b.options.ProgressBarTemplate,this.ganttControlWidget.GanttTaskItemBarCollection=[],!0==b.ForceToReDrawRows&&(this.element.empty(),this._cachedRowCont.empty(),this._cachedRows={},this._renderBars(b)))}.bind(this));var c={};c.options={FlatItemsSource:this.options.Data,
ViewWidth:this.options.ViewWidth};this._renderBars(c);a.bind("ganttchartsourceupdated",function(a,b){this.$chartTableBody.empty();this._cachedRowCont.empty();this._cachedRows={};this.options.TaskTemplate=b.options.TaskItemTemplate;this.options.ParentTaskTemplate=b.options.ParentTaskItemTemplate;this.options.ProgressBarTemplate=b.options.ProgressBarTemplate;this.options.Data=b.options.FlatItemsSource;this.options.Data.CollectionChanged.subscribe(this._bindCollectionChanged,this);this.$dependencyDiv=
null;this._renderBars(b)}.bind(this));!1==this.options.IsPrinting&&(timer=null,$(window).resize(function(){null!=timer&&clearTimeout(timer);b=this.$Area.height();!0==this._areBarsRendered&&(timer=setTimeout(function(){this.ganttChartWidget.options.UseChartVirtualization&&null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,b)}.bind(this),0))}.bind(this)));if(!1==this.options.IsPrinting){var d=null;this.ganttControlWidget.VerticalScrollEvent.subscribe(function(a){this.ganttControlWidget.options.UseChartVirtualization&&
(null!=d&&clearTimeout(d),d=setTimeout(function(){null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),0))},this)}this._createTaskContextMenu();this.ganttControlWidget.RedrawChartRows=function(){null!=this.options.Data&&this.Refresh(this.element,this.options.Data,this.$chartTable,this.options.ViewWidth,this.$Area.height(),!0)}.bind(this);this.element.data("GanttTaskItemsControl",this)},_createTaskItemBar:function(a,
b,c,d){a[this.getChildWidgetName("GanttTaskItemBar")]({ActivityView:b,GanttChart:this.options.GanttChart,WorkTimeSchedule:this.options.WorkTimeSchedule,TaskBarHeight:this.options.TaskBarHeight,TaskTemplate:this.options.TaskTemplate,ProgressBarTemplate:this.options.ProgressBarTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,TaskBarBackgroundTemplate:this.options.TaskBarBackgroundTemplate,TaskBarAdornerTemplate:this.options.TaskBarAdornerTemplate,TaskTooltipTemplate:this.options.TaskTooltipTemplate,
MovingInfoPopup:this.options.MovingInfoPopup,ResizeInfoPopup:this.options.ResizeInfoPopup,ConnectingInfoPopup:this.options.ConnectingInfoPopup,RowCount:this.currentUniqueRowSuffix,KnockoutObjectName:this.options.KnockoutObjectName,Parent:this,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting});this.ganttChartWidget.LoadingRow({Row:c,Data:b})},_timer:null,_bindCollectionChanged:function(a,
b){null!=this._timer&&clearTimeout(this._timer);if("insert"==a.type)if(this.ganttChartWidget.options.UseChartVirtualization)this._timer=setTimeout(function(){this.Refresh(this.element,a.target,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),0);else{this.InsertRow(this.element,b,this.$chartTable,this.options.ViewWidth);this.knockoutObject=eval(this.options.KnockoutObjectName);try{this.options.KnockoutObjectName&&ko.applyBindingsToDescendants(this.knockoutObject,this.$chartTable[0].rows[b.index])}catch(c){window.console&&
console.error(c+" :Error while inserting "+b.index)}}"remove"==a.type&&(this.ganttChartWidget.options.UseChartVirtualization?this._timer=setTimeout(function(){this.Refresh(this.element,a.target,this.$chartTable,this.options.ViewWidth,this.$Area.height())}.bind(this),0):this.RemoveRow(b,this.$chartTable))},_areBarsRendered:!1,_renderBars:function(a){this._areBarsRendered=!0;null!=a.options.FlatItemsSource&&(this.ActivityViews=a.options.FlatItemsSource,this.Refresh(this.element,a.options.FlatItemsSource,
this.$chartTable,a.options.ViewWidth,this.$Area.height()))},_cachedRows:{},_cachedRowCont:$("<div id='cache'></div>"),_getVirtualizedTask:function(a,b){var c=this.ActivityViews._dictActivityVsView[a];if(this._cachedRows[a])return c.ChartRow(this._cachedRows[a]),this._cachedRows[a];var d=$("<tr VirtualizationID="+a+"></tr>"),e=$("<td id='ChartRow'/>");d.css("height",this.RowHeight);var f=d.height();e.css("height",f);d.append(e);!1==this.options.IsPrinting&&c.ChartRow(d);this._createTaskItemBar(e,this.ActivityViews._dictActivityVsView[a],
d,null);e.width(b);!1==this.options.IsPrinting&&c.IsSelected()&&e.addClass("rq-row-selected");return this._cachedRows[a]=d},$dependencyDiv:null,getGridParent:function(){return $(".ui-grid-body",this.ganttChartWidget.element.parent())},getGridTBodyParent:function(a){return $("tbody",a)},Refresh:function(a,b,c,d,e,f){this.options.GanttChart.ViewableDependencyViews=[];var g=this.$Area.height();0==this.$tableBody.length&&(this.$tableBody=this.getGridParent());0==this.$gridTableBody.length&&(this.$gridTableBody=
this.getGridTBodyParent(this.$tableBody));!1==this.options.IsPrinting&&0<this.$gridTableBody.height()&&(g=this.ganttControlWidget.options.UseVirtualization?Math.min(g,this.$gridTableBody.height()):Math.min(g,this.$gridTableBody.height(),this.$tableBody[0].clientHeight));c.css("height","auto");a.append(c);if(null==this.$dependencyDiv||0==this.$dependencyDiv.length)this.$dependencyDiv=$("div.rq-gc-dependencysParent",this.$Area);e=this.$tableBody.scrollTop();if(!0==this.ganttChartWidget.options.UseChartVirtualization){this._cachedRowCont.append(this.$chartTableBody.children());
!0==f&&(this._cachedRowCont.empty(),this._cachedRows={});a=Math.floor(e/this.RowHeight);f=0;var h=e%this.RowHeight;for(c[0].style.setProperty?c[0].style.setProperty("margin-top",-h+"px","important"):c[0].style.setAttribute("margin-top",-h+"px","important");f*this.RowHeight<g;){h=a+f;if(h>=b.length)break;var h=b[h],k=h.activity.ID_M(),l=!1;this._cachedRows[k]&&(l=!0);k=this._getVirtualizedTask(k,d);k[0]["data-grid-item"]=h;c.append(k);l&&$("#ChartRow",k).data().GanttTaskItemBar&&$("#ChartRow",k).data().GanttTaskItemBar._OnRecomputeLocation();
f++;this._updateViewableDependencyViews(h)}}else{this.$chartTableBody.empty();for(f=0;f<b.length;f++)h=b[f],this._updateViewableDependencyViews(h),g=$("<tr></tr>"),h=$("<td id='ChartRow'/>"),g.css("height",this.options.RowHeight),l=g.height(),h.height(l),g.append(h),!1==this.options.IsPrinting&&b[f].ChartRow(g),c.append(g),this._createTaskItemBar(h,b[f],g,null),g[0]["data-grid-item"]=b[f],this.currentUniqueRowSuffix++,h.width(d),!1==this.options.IsPrinting&&b[f].IsSelected()&&h.addClass("rq-row-selected");
a.scrollTop(e)}c.width(d);this.$dependencyDiv.scrollTop(e);this._enableAlternativeRowBackground()},_enableAlternativeRowBackground:function(){!0==this.options.EnableAlternativeRowBackground&&($("td",this.$chartTable).removeClass("rq-grid-alternative-background"),$("td",this.$chartTable).addClass(function(){var a=$(this);if(!0==(0==$(a.parent()[0]["data-grid-item"].TableRow()).index()%2))return"rq-grid-alternative-background"}))},_createTaskContextMenu:function(){var a="#"+this.ganttChartWidget.$GanttChart[0].id,
b=[{keyName:"ConvertToMilestone",name:window.RadiantQ_ConvertToMilestoneString,icon:"Convert to Milestone"}],c=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(a+" .rq-gc-taskbar, "+a+" .taskbar-style, "+a+" .rq-gc-commonTaskbar","#gantt_container_GanttChart");c.AddNewItems(b);c.ItemClicked.subscribe(function(a,b){var c=$(b[0].parentElement).data();"ConvertToMilestone"==a&&null!=c&&c.GanttTaskItemBar.options.ActivityView.ConvertToMilestone(c.GanttTaskItemBar.options.ActivityView.Activity_M())});c.BeforeContextMenu.subscribe(function(a,
b){c.Items.ConvertToMilestone&&(c.Items.ConvertToMilestone.disabled=this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);var b=[{keyName:"ConverToNormalTask",name:window.RadiantQ_ConvertToNormalTaskString,icon:"Convert to normal Task"}],d=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(".rq-gc-milestoneBar",".chartRowsContainer");d.AddNewItems(b);d.ItemClicked.subscribe(function(a,b){var c=$(b[0].parentElement).data();"ConverToNormalTask"==a&&c.GanttTaskItemBar.options.ActivityView.ConvertToNormalTask(c.GanttTaskItemBar.options.ActivityView.Activity_M(),
c.GanttTaskItemBar.options.GanttChart.options)});d.BeforeContextMenu.subscribe(function(a,b){d.Items.ConverToNormalTask&&(d.Items.ConverToNormalTask.disabled=this.ganttControlWidget.options.IsReadOnly||this.ganttControlWidget.options.IsEffortReadOnly?!0:!1)},this);this.ganttControlWidget.TaskContextMenu=c},getItemAtIndex:function(a,b,c){if(0<=a&&a<this.options.Data.length){var d=a.toString();if(null===this.listItems[d]||void 0===this.listItems[d]||null===this.listItems[b[a].Activity_M().ID_M()-1]||
void 0===this.listItems[b[a].Activity_M().ID_M()-1]&&this.listItems[d].attr("VirtualizationID")!=b[a].Activity_M().ID_M()){var e=$("<tr VirtualizationID="+b[a].Activity_M().ID_M()+">  </tr>"),f=$("<td id='ChartRow'/>");e.css("height",25);var g=e.height();f.css("height",g);e.append(f);!1==this.options.IsPrinting&&b[a].ChartRow(e);this._createTaskItemBar(f,b[a],e,null);this.currentUniqueRowSuffix++;f.width(c);!1==this.options.IsPrinting&&b[a].IsSelected()&&f.addClass("rq-row-selected");null===this.listItems[d]||
void 0===this.listItems[d]?this.listItems[d]=e:this.listItems[b[a].Activity_M().ID_M()-1]=e}else e=this.listItems[d].attr("VirtualizationID")!=b[a].Activity_M().ID_M()?this.listItems[b[a].Activity_M().ID_M()-1]:this.listItems[a],!1==this.options.IsPrinting&&b[a].ChartRow(e);e.attr("list-index",a);return e}},cleanupListItems:function(a){for(var b,c,d=0;d<this.totalItems.length;d++)b=this.totalItems[d],c=b.attr("list-index"),void 0!==this.processedItems[c]&&this.processedItems[c].attr("VirtualizationID")==
b.attr("VirtualizationID")||b.detach();b=[];if(this.processedItems)for(c in this.processedItems)b.push(this.processedItems[c]);this.totalItems=b;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,b,c,d){for(a=0;a<b.items.length;a++){var e=b.items[a],f=$("<tr></tr>"),g=$("<td id='ChartRow' />");f.css("height",this.options.RowHeight);var h=f.height();g.css("height",h);this._createTaskItemBar(g,b.items[a],f,b.index);f.append(g);this.currentUniqueRowSuffix++;e.ChartRow(f);h=c.find("tr");0==b.index?
h.length?h.eq(0).before(f[0]):c.append(f):h.eq(b.index-1).after(f[0]);f[0]["data-grid-item"]=e;g.width(d);!1==this.options.IsPrinting&&e.IsSelected()&&g.addClass("rq-row-selected");this._updateViewableDependencyViews(e)}this._enableAlternativeRowBackground()},RemoveRow:function(a,b){b.find("tr").eq(a.index);b.find("tr").eq(a.index).remove();this._enableAlternativeRowBackground();this.ActivityViews[a.index]&&delete this._cachedRows[this.ActivityViews[a.index].activity.ID_M()]},_updateViewableDependencyViews:function(a){var b=
this.options.GanttChart,c=b.options.Parent;if(c.DependencyViews&&(a=c.DependencyViews._depViewByActivity[a.Activity_M().ID_M()]))for(c=0;c<a.length;c++){var d=a[c];d&&-1==b.ViewableDependencyViews.indexOf(d)&&b.ViewableDependencyViews.push(d)}},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,arguments);$("td.rq-gc-row ",this.$chartTableBody).GanttTaskItemBar("option",a,b)},_destroy:function(){this.ganttChartWidget.element.unbind("ganttchartrefreshui.TaskItemsRefreshUI");this._cachedRows=
{};this._cachedRowCont=$("<div id='cache'></div>");this.element.empty()}};RadiantQ.Gantt.Widget.GanttTaskItemsControl=ganttTaskItemsControl;ns_gantt=RadiantQ.Gantt;TimeComputingUtils=rqTCUtils=RadiantQ.Gantt.Utils.TimeComputingUtils;
var isShiftOrResize=!1,ganttTaskItemBar={options:{name:"GanttTaskItemBar",ActivityView:null,GanttChart:null,WorkTimeSchedule:null,TaskBarHeight:null,TaskTemplate:null,ProgressBarTemplate:null,ParentTaskTemplate:null,TaskBarBackgroundTemplate:null,TaskBarAdornerTemplate:null,Data:null,ProgressTemplate:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,ConnectingInfoPopup:null,IsParentTypeRow:null,RowCount:null,KnockoutObjectName:null,Parent:null,TaskBarBrowseToCueLeftTemplate:null,
TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},StartTime:function(){return this.Activity.StartTime_M()},EndTime:function(){return this.Activity.EndTime_M()},Effort:function(){return this.Activity.Effort_M()},IsParent:function(){return this.ActivityView.IsParent_M()},IsExpanded:function(){return this.ActivityView.IsExpanded_M()},IsMilestone:function(){return this.Activity.IsMilestone_M()},IsRegularTask:function(){return this.ActivityView.IsRegularTask_M()},ProgressPercent:function(){return this.Activity.ProgressPercent_M()},
ProgressEndTime:function(){return this.Activity.ProgressEndTime_M()},WorkTimeSchedule:function(){return this.GanttControl.options.WorkTimeSchedule},OriginalLeft:0,OriginalWidth:0,ActivityView:null,Activity:null,IsTemplateApplied:!1,taskStartAndEndTime:{},GanttControl:null,GanttChart:null,GanttChartRows:null,GanttTaskItemsControl:null,TaskBarRectangle:null,ProgressBarRectangle:null,MileStoneBar:null,ParentBar:null,PropertyChanged:new ObjectEvent("PropertyChanged"),HasChanged:!1,TaskItemsControl:null,
_create:function(a){var b=this.options;this.TaskItemsControl=b.Parent;this.GanttChart=b.GanttChart;this.GanttControl=this.GanttChart.options.Parent;this.ActivityView=b.ActivityView;this.Activity=this.ActivityView.activity;this.KnockoutObject=eval(b.KnockoutObjectName);this.element.data("GanttTaskItemBar",this);this.element.addClass("rq-gc-row");this.ActivityView.PropertyChanged.subscribe(this._actView_PropertyChanged,this);this.Activity.PropertyChanged.subscribe(this._activity_PropertyChanged,this);
this.Activity._assignments.CollectionChanged.subscribe(this._activity_Assignments_CollectionChanged,this);b.IsPrinting||this.GanttControl.ReadOnlyPropertyChange.subscribe(this.ReadOnlyStateChangedCallback,this);try{this.KnockoutObject&&(this.KnockoutObject["Task"+b.RowCount]=this.Activity.DataSource_M())}catch(c){}this._renderElementsFromTemplate();this.element.append(this.TaskBarRectangle);this._listenForMouseEnterAndLeave();this._listenForShiftAndResizeTracker();"ShowContextMenu"==this.GanttChart.options.TouchTapAction&&
this._listenForTouchTap();this.UpdateResourceText();this._loadBrowseToCue();this.ApplyTooltipSettings(this.TaskBarRectangle,b.Data);this.ApplyTooltipSettings(this.ParentBar,b.Data);this.ApplyTooltipSettings(this.MileStoneBar,b.Data);this._loadAdornerAndBgTemplate();this.taskStartAndEndTime={Name:this.options.ActivityView.activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),
ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};this.IsTemplateApplied=!0;a||this._OnRecomputeLocation();b.GanttChart.RefreshUIEvent.subscribe(this.OnChartRefreshUI,this);this._GanttChart_ViewportTimeRangeChanged(this,null);this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTaskItemControls.push(this),this.GanttChart._diryTaskItemByActs[this.Activity.id]=this);this.options.IsPrinting||(this.initValuesFromOptions(),this.UpdateThumbsReadOnlyStates())},OnChartRefreshUI:function(a,
b){"ProjectGantt"==b.options.GanttType&&(this.options.WorkTimeSchedule=b.options.WorkTimeSchedule,this._OnRecomputeLocation(),this._removeTooltip(this.TaskBarRectangle),this._removeTooltip(this.ParentBar),this._removeTooltip(this.MileStoneBar))},RedrawTaskBar:function(a){this._destroy();this._create(a);this.KnockoutObject&&ko.applyBindingsToDescendants(this.KnockoutObject,this.element[0])},KnockoutObject:null,ViewStartTime:function(){return this.GanttChart.options.ComputedStartTime},ViewEndTime:function(){return this.GanttChart.options.ComputedEndTime},
ViewWidth:function(){return this.GanttChart.options.ViewWidth},_OnRecomputeLocation:function(){if(null!=this.ActivityView&&!0!=this.StartTime().isGreaterThan(this.EndTime())&&!1!=this.IsTemplateApplied){var a=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),this.StartTime(),this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth,b=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
this.StartTime(),this.EndTime(),this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth;this.OriginalLeft=a;this.OriginalWidth=b;null!=this.ParentBar&&this.ParentBar.css("display","none");null!=this.MileStoneBar&&this.MileStoneBar.css("display","none");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");if(this.IsParent()||this.IsMilestone()){this.CanvasLeft=a-7;if(this.IsParent()){25>b?this.ParentBar.css("width","45px"):this.ParentBar.css("width",
b+20+"px");this.ParentBar.css({"margin-left":a-10+"px","margin-top":"2px"});this.BarPolygon=this.ParentBar;this.BarWidth=b;this.OriginalCompletedWidth=this.CompletedWidth=0;this.ParentBar&&this.element.append(this.ParentBar);var c=$("div.label",this.ParentBar);0==c.length&&(c=$("div.rq-gc-taskbar-label",this.ParentBar));this.ParentBar&&0<c.length&&c.css("margin-left","30px")}else{this.MileStoneBar.css("width","17px");var d=this.MileStoneBar.outerWidth();this.MileStoneBar.css("margin-left",a-d/2-1+
"px");this.MileStoneBar.css("margin-top","4px");this.BarPolygon=this.MileStoneBar;this.BarWidth=14;this.OriginalCompletedWidth=this.CompletedWidth=0;this.MileStoneBar&&this.element.append(this.MileStoneBar)}null!=this.BarPolygon&&this.BarPolygon.css("display","block");null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","none");null!=this.ProgressPercentResizeThumb&&this.ProgressPercentResizeThumb.hide()}else this.CanvasLeft=a,this.BarWidth=b,null!=this.ParentBar&&this.ParentBar.css("display",
"none"),null!=this.MileStoneBar&&this.MileStoneBar.css("display","none"),null!=this.TaskBarRectangle&&this.TaskBarRectangle.css("display","block"),this._UpdateProgressBarPosition(a);this.CanvasRight=this.CanvasLeft+this.BarWidth;this.TaskBarRectangle.css("width",b+"px");this.TaskBarRectangle.css("margin-left",a+"px");this.TaskBarRectangle.css("margin-top","3px");this.ProgressBarRectangle.width(this.CompletedWidth-1);this.ProgressBarRectangle.css("border-width","1px");this.ProgressBarRectangle.css("border-style",
"solid");0==this.CompletedWidth&&this.ProgressBarRectangle.css("border-width","0px");a=this.TaskBarRectangle.height();this.ProgressBarRectangle.css("margin-top",a/2-2.5+"px");this._loadAdornerAndBgTemplate();this._drawVerticalLines(d);this._updateTaskBarLabel();this._UpdateBrowseToTaskCuesStates();d=this.GanttChart.options.OnTaskBarLoad;null!=d&&"function"==typeof d&&d.call(this.TaskBarRectangle[0],this)}},_drawVerticalLines:function(a){var b=this.IsMilestone(),c=this.IsParent(),d=this.element,d=
this.TaskBarRectangle;!0==c&&(d=this.ParentBar);!0==b&&!1==c&&(b=!0,d=this.MileStoneBar);if(null!=d){var e=d.find("div.rq-gc-start-verticalLine"),f=d.find("div.rq-gc-end-verticalLine");if(0!=e.length||0!=f.length){var g=d.closest("tr");if(g.length){var h=parseInt(d.css("margin-top"));d.height();d=d.width();g=g[0].offsetTop;h={height:g+h+"px","margin-left":"0px","margin-top":-(g+h)+"px"};taskbarwidth=d;!0==b&&!1==c&&(taskbarwidth=a/2,h["margin-left"]=taskbarwidth+"px");0!=e.length&&e.css(h);0!=f.length&&
(h["margin-left"]=taskbarwidth+"px",f.css(h));a=this.options.GanttChart.options.TimeIndicatorLineOption;(a&ns_gantt.TimeIndicatorLines.Always)!=ns_gantt.TimeIndicatorLines.Always||(a&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize?(e.hide(),f.hide()):(e.show(),f.show())}}}},_actView_PropertyChanged:function(a,b){"IsReadOnly"==b.PropertyName&&this.ReadOnlyStateChangedCallback(a,b)},UpdateUI:function(){var a=this.GanttChart._dirtyTaskItemControls;this.GanttChart._dirtyTaskItemControls=
[];this.GanttChart._diryTaskItemByActs={};for(var b=0;b<a.length;b++)a[b]._OnRecomputeLocation();this.GanttChart._dirtyTasksTimer=null;this.GanttChart._dirtyTaskItemControls=[]},_isActivityPropertyChanged:!1,_$parentMiddleBar:null,_activity_PropertyChanged:function(a,b){this._isActivityPropertyChanged=!0;void 0===this.GanttChart._dirtyTaskItemControls&&(this.GanttChart._dirtyTasksTimer=null,this.GanttChart._dirtyTaskItemControls=[],this.GanttChart._diryTaskItemByActs={});null==this._$parentMiddleBar&&
(this._$parentMiddleBar=$(".rq-gc-parentBar-middle",this.ParentBar));0==this._$parentMiddleBar.length&&(this._$parentMiddleBar=$(".parentMiddleBar-style",this.ParentBar));"IsExpanded"==b.PropertyName&&(!1==b.value?this._$parentMiddleBar.addClass("rq-gc-Parentbar-collapsed"):this._$parentMiddleBar.removeClass("rq-gc-Parentbar-collapsed"));var c=this.Activity.ID_M();void 0===this.GanttChart._diryTaskItemByActs[c]&&this.GanttChart._dirtyTaskItemControls.push(this);this.GanttChart._diryTaskItemByActs[c]=
this;c=this.GanttChart._dirtyTasksTimer;null!=c&&clearTimeout(c);this.GanttChart._dirtyTasksTimer=setTimeout(function(){this.UpdateUI()}.bind(this),0)},_AdjustOrigionalLeftAndWidth:function(){if(0>this.OriginalLeft+this.OriginalWidth||this.OriginalLeft>this.ViewWidth())left=-10,width=0;else{var a=this.GanttChart.GetBarRenderStartTime(this.StartTime()),b=this.GanttChart.GetBarRenderEndTime(this.EndTime());!1!=a.equals(this.StartTime())&&!1!=b.equals(this.EndTime())||!a.isLessThan(b)||(width=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,
a,b,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth,left=TimeComputingUtils.ConvertToUnitsOfBaseScaleType(this.GanttChart.options.BaseTimeScaleType,this.ViewStartTime(),a,this.GanttChart.options.WorkTimeSchedule)*this.GanttChart.options.BaseTimeUnitWidth)}},_UpdateProgressBarPosition:function(a){var b=this.OriginalWidth*this.ProgressPercent()/100;0==this.BarWidth?this.OriginalCompletedWidth=this.CompletedWidth=0:0>b?this.OriginalCompletedWidth=this.CompletedWidth=
0:(this.OriginalCompletedWidth=b,b-=a-this.OriginalLeft,0>b&&(b=0),b>this.BarWidth&&(b=this.BarWidth),this.CompletedWidth=b);this.ProgressPercentResizeThumb=$("div.rq-gc-progressbar-resizer",this.element);0==this.ProgressPercentResizeThumb.length&&(this.ProgressPercentResizeThumb=$("div.ui-progress-resizer",this.element));this.ProgressPercentResizeThumb.mouseover(this.TaskBarMouseHover.bind(this));this.ProgressPercentResizeThumb.mouseleave(this.TaskBarMouseLeave.bind(this));null!=this.ProgressPercentResizeThumb&&
(10<this.BarWidth?(this.ProgressPercentResizeThumb.show(),this.ProgressPercentResizeThumb.css("margin-left",this.CanvasLeft+this.CompletedWidth),this.ProgressPercentResizeThumb.css("height",$(this.TaskBarRectangle).css("height"))):this.ProgressPercentResizeThumb.hide())},$newLabel:null,_updateTaskBarLabel:function(){var a=this.options,b=$("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==b.length&&(b=$("div.label",this.TaskBarRectangle));this.LabelTmpl&&!this.KnockoutObject&&(this.newLabel(a),0<
this.$newLabel.length&&this.$newLabel.text()&&(this.$newLabel.text(),this.$newLabel.css("margin-left",this.TaskBarRectangle.width()+12+"px")),b.replaceWith(this.$newLabel));this.TaskBarRectangle&&0<b.length&&b.css("margin-left",this.TaskBarRectangle.width()+12+"px")},newLabel:function(a){this.$newLabel=$.tmpl(this.LabelTmpl,a.ActivityView.Activity_M())},UpdateResourceText:function(a){if(0<this.Activity._assignments.length){var b=$("div#GanttTaskBarLabel",this.TaskBarRectangle);!0==this.IsParent()&&
(b=$("div#GanttTaskBarLabel",this.ParentBar));if(b.length){var c=RadiantQ.Gantt.ValueConverters.ConverterUtils.GetResourcesText(this.Activity._assignments,!1,!0);b[0].innerHTML=c;b[0].style.fontSize="12px";!1==this.ActivityView.IsParent?b.css("margin-right",-(12*b[0].innerHTML.length/2+5)+"px"):b.css("margin-left","30px")}}!0==a&&0==this.Activity._assignments.length&&($("div#GanttTaskBarLabel",this.TaskBarRectangle).html(""),$("div#GanttTaskBarLabel",this.ParentBar).html(""))},_listenForShiftAndResizeTracker:function(){!1!=
this.options.IsPrinting||this.IsReadOnly||this.TaskReadOnly||(this.TaskBarRectangle.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.ganttResizeTracker(this,this.ResizeEnd),this.ParentBar.ganttShiftTracker(this,this.DragEnd),this.MileStoneBar.ganttShiftTracker(this,this.DragEnd),this.TaskBarRectangle.css("cursor","move"))},CanShiftTask:function(a){return a.GanttControl.CanShiftActivityInternal(a.Activity)},DragEnd:function(a,b){if(!this.StartTime().equals(this.taskStartAndEndTime.ProposedStart)||
!this.EndTime().equals(this.taskStartAndEndTime.ProposedEnd))if(this.Activity.PreferredStartTime_M(this.taskStartAndEndTime.ProposedStart),this.Activity.StartTime_M(this.taskStartAndEndTime.ProposedStart),this.ProgressEndTime(this.Activity.ProgressEndTime_M()),0<this.GanttControl.ActivityTimeChanged.fn.length){var c=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"DragEnd");this.GanttControl.ActivityTimeChanged.raise(this,c)}this._isActivityPropertyChanged=
!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},ResizeEnd:function(a,b,c){b.forProgressBar.isTrue||(this.Activity.PreferredStartTime_M(this.Activity.StartTime_M()),this.Activity.EndTime_M(this.taskStartAndEndTime.OriginalEnd),0<this.GanttControl.ActivityTimeChanged.fn.length&&(a=new TimesChangingEventArgs(this.Activity,this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.OriginalEnd,"ResizeEnd"),this.GanttControl.ActivityTimeChanged.raise(this,a)));this._isActivityPropertyChanged=
!1;this.TaskBarRectangle.removeClass("rq-taskbar-shadow")},_listenForTouchTap:function(){this.TaskBarRectangle[0].addEventListener("touchstart",this._onTouchstart.bind(this),!1);this.TaskBarRectangle[0].addEventListener("touchend",this._onTouchend.bind(this),!1);this.TaskBarRectangle[0].addEventListener("MSPointerDown",this._onTouchstart.bind(this),!1);this.TaskBarRectangle[0].addEventListener("MSPointerUp",this._onTouchend.bind(this),!1)},tapDownX:null,tapDownY:null,_onTouchstart:function(a){a=a.touches?
a.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY},_onTouchend:function(a){var b=a.changedTouches?a.changedTouches[0]:a;this.tapDownX==b.clientX&&this.tapDownY==b.clientY&&"mouse"!=a.pointerType&&4!=a.pointerType&&$(this.TaskBarRectangle).contextMenu({x:b.clientX,y:b.clientY})},_listenForMouseEnterAndLeave:function(){this.TaskBarRectangle.mouseover(this.TaskBarMouseHover.bind(this));this.ParentBar.mouseover(this.TaskBarMouseHover.bind(this));this.MileStoneBar.mouseover(this.TaskBarMouseHover.bind(this));
this.TaskBarRectangle.mouseleave(this.TaskBarMouseLeave.bind(this));this.ParentBar.mouseleave(this.TaskBarMouseLeave.bind(this));this.MileStoneBar.mouseleave(this.TaskBarMouseLeave.bind(this))},TaskBarMouseHover:function(a,b){this.GanttChart.TaskOnMouseHover=this.ActivityView;var c=this.IsMilestone(),d=this.IsParent(),e=this.TaskBarRectangle;!0==d&&(e=this.ParentBar);!0==c&&!1==d&&(e=this.MileStoneBar);!1==c&&!1==d&&e.addClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==
ns_gantt.TimeIndicatorLines.OnHover&&(e.find("div.rq-gc-start-verticalLine").show(),e.find("div.rq-gc-end-verticalLine").show())},TaskBarMouseLeave:function(a,b){var c=this.IsMilestone(),d=this.IsParent(),e=this.TaskBarRectangle;!0==d&&(e=this.ParentBar);!0==c&&!1==d&&(e=this.MileStoneBar);!1==c&&!1==d&&e.removeClass("rq-taskbar-shadow");this.GanttChart.options.TimeIndicatorLineOption==ns_gantt.TimeIndicatorLines.OnHover&&(e.find("div.rq-gc-start-verticalLine").hide(),e.find("div.rq-gc-end-verticalLine").hide());
this.GanttChart.TaskOnMouseHover=null},_updateElementsFromTemplate:function(){var a=this.TaskBarRectangle,b=this.MileStoneBar,c=this.ParentBar;this._renderElementsFromTemplate();a.replaceWith(this.TaskBarRectangle);b.replaceWith(this.MileStoneBar);c.replaceWith(this.ParentBar)},_renderElementsFromTemplate:function(){var a=this.options;this.renderTemplate(a);a.TaskBarHeight?(this.TaskBarRectangle.css("height",a.TaskBarHeight+"px"),this.ParentBar.css("height",a.TaskBarHeight+"px"),this.MileStoneBar.css("height",
a.TaskBarHeight+"px")):(this.taskHeight=this.element.height(),this.TaskBarRectangle.css("height",this.taskHeight-8+"px"),this.ParentBar.css("height",this.taskHeight-8+"px"),this.MileStoneBar.css("height",this.taskHeight-8+"px"));this.TaskBarRectangle.addClass("rq-gc-commonTaskbar");this.TaskBarRectangle.append(this.ProgressBarRectangle);this.element.css("position","absolute")},renderTemplate:function(a){a.TaskTemplate?(a.TaskTemplate=a.TaskTemplate.replace(/RQDataContext/g,["Task"+a.RowCount]),this.TaskBarRectangle=
$.tmpl(this.options.TaskTemplate,this.Activity)):this.TaskBarRectangle=$("<div class='rq-gc-taskbar "+window.radiantQclasses.defaultClass+"'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div>");a.ProgressBarTemplate?(a.ProgressBarTemplate=a.ProgressBarTemplate.replace(/RQDataContext/g,["Task"+a.RowCount]),this.ProgressBarRectangle=$.tmpl(a.ProgressBarTemplate,this.Activity)):this.ProgressBarRectangle=$("<div class='rq-gc-progressbar progressbarStyle'></div>");a.MileStoneTemplate?
(a.MileStoneTemplate=a.MileStoneTemplate.replace(/RQDataContext/g,["Task"+a.RowCount]),this.MileStoneBar=$.tmpl(a.MileStoneTemplate,this.Activity)):this.MileStoneBar=$("<div class='rq-gc-milestoneBar'><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>");a.ParentTaskTemplate?(a.ParentTaskTemplate=a.ParentTaskTemplate.replace(/RQDataContext/g,["Task"+a.RowCount]),this.ParentBar=$.tmpl(a.ParentTaskTemplate,this.Activity)):this.Activity.IsExpanded_M()?
this.ParentBar=$("<div  class='rq-gc-parentBar'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>"):this.ParentBar=$("<div  class='rq-gc-parentBar'><div class='rq-gc-parentBar-leftCue'></div><div class='rq-gc-parentBar-middle rq-gc-Parentbar-collapsed'></div><div class='rq-gc-parentBar-rightCue'><div id='GanttTaskBarLabel' class='rq-gc-taskbar-label'></div></div><div class='rq-gc-start-verticalLine' style='width:0px;'></div><div class='rq-gc-end-verticalLine' style='width:0px;'></div>")},
taskBarBackgroundElement:null,taskBarAdornerElement:null,_loadAdornerAndBgTemplate:function(){var a=this.options,b=this.IsParent();this.adornerAndBgTemplate(b,a);if(!this.KnockoutObject&&a.TaskTemplate){var b=a.TaskTemplate.indexOf("<div class='rq-gc-taskbar-label'>"),c=a.TaskTemplate.indexOf("</div>",b);this.LabelTmpl=a.TaskTemplate.slice(b,c)+"</div>"}a=$("div.rq-gc-taskbar-label",this.TaskBarRectangle);0==a.length&&(a=$("div.label",this.TaskBarRectangle));0<a.length&&a.css("margin-left",this.TaskBarRectangle.width()+
12+"px")},adornerAndBgTemplate:function(a,b){!1==a&&b.TaskBarBackgroundTemplate&&(null!=this.taskBarackgroundElement&&this.taskBarackgroundElement.remove(),this.taskBarackgroundElement=$.tmpl(this.options.TaskBarBackgroundTemplate,b),this.element.append(this.taskBarackgroundElement));!1==a&&b.TaskBarAdornerTemplate&&(null!=this.taskBarAdornerElement&&this.taskBarAdornerElement.remove(),this.taskBarAdornerElement=$.tmpl(b.TaskBarAdornerTemplate,b),this.element.append(this.taskBarAdornerElement.css({"z-index":"10"})))},
_activity_Assignments_CollectionChanged:function(){this.UpdateResourceText(!0)},BrowseToCueLeft:0,BrowseToCueRight:0,BrowseToTaskCueLeftVisibility:"none",BrowseToTaskCueRightVisibility:"none",_GanttChart_ViewportTimeRangeChanged:function(a,b){this.BrowseToCueLeft=this.options.GanttChart.options.ResizeToFit?0:this.options.GanttChart.GanttChart.scrollLeft();this.BrowseToCueRight=this.BrowseToCueLeft+this.options.GanttChart.GanttChart[0].clientWidth-30;this._UpdateBrowseToTaskCuesStates()},_GanttChart_BeforeChartHZScroll:function(a,
b){this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":parseInt(this.TaskBarBrowseToCueLeft.css("margin-left"))+a});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":parseInt(this.TaskBarBrowseToCueRight.css("margin-left"))+a})},_UpdateBrowseToTaskCuesStates:function(){this.BrowseToTaskCueLeftVisibility=null!=this.options.TaskBarBrowseToCueLeftTemplate&&this.EndTime()<this.options.GanttChart.VisualStartTime?"block":"none";this.BrowseToTaskCueRightVisibility=
null!=this.options.TaskBarBrowseToCueRightTemplate&&this.StartTime()>this.options.GanttChart.VisualEndTime?"block":"none";this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.css({"margin-left":this.BrowseToCueLeft,display:this.BrowseToTaskCueLeftVisibility});this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.css({"margin-left":this.BrowseToCueRight,display:this.BrowseToTaskCueRightVisibility})},_loadBrowseToCue:function(){var a=this.options;if(a.TaskBarBrowseToCueLeftTemplate||a.TaskBarBrowseToCueRightTemplate)this.GanttChart.ViewportTimeRangeChanged.subscribe(this._GanttChart_ViewportTimeRangeChanged,
this),this.GanttChart.BeforeChartHZScroll.subscribe(this._GanttChart_BeforeChartHZScroll,this);a.TaskBarBrowseToCueLeftTemplate&&this._createBrowseToCueLeft(a);a.TaskBarBrowseToCueRightTemplate&&this._createBrowseToCueRight(a)},_createBrowseToCueLeft:function(a){this.TaskBarBrowseToCueLeft=$(a.TaskBarBrowseToCueLeftTemplate);this.element.append(this.TaskBarBrowseToCueLeft);this.TaskBarBrowseToCueLeft[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueLeft[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueLeft.addClass("rq-gc-browseCue-left").bind("touchstart mousedown",
this.BrowseToTaskCue_Click.bind(this))},_createBrowseToCueRight:function(a){this.TaskBarBrowseToCueRight=$(a.TaskBarBrowseToCueRightTemplate);this.element.append(this.TaskBarBrowseToCueRight);this.TaskBarBrowseToCueRight[0].ganttTaskItemBar=this;this.TaskBarBrowseToCueRight[0].title=window.RadiantQ_ScrollToTask;this.TaskBarBrowseToCueRight.addClass("rq-gc-browseCue-right").bind("touchstart mousedown",this.BrowseToTaskCue_Click.bind(this))},BrowseToTaskCue_Click:function(a){a=this.StartTime();this.GanttChart._setOption("AnchorTime",
a);return!1},_BrowseToCueTemplateChanged:function(){this._GanttChart_ViewportTimeRangeChanged()},TooltipContent:null,DragTooltipContent:null,ResizeTooltipContent:null,ApplyTooltipSettings:function(a){$(a).attr("title","");this.LoadDefaultTooltipStyle();this.CreateTooltip(this,a);this.UpdateTooltipContent(this.options.ActivityView)},closeToolTip:function(){},CreateTooltip:function(a,b){$(b).tooltip({open:function(a,c){disableTooltip=b[0].disableTooltip;b[0].uiTooltip=c.tooltip;var f=c.tooltip.find("table.TaskTooltip");
0!=f.length&&(f=f.width(),c.tooltip.css("max-width",f+"px"),c.tooltip.css("width",f+"px"))},disableTooltip:!1,content:function(b){if(this.disableTooltip||isShiftOrResize)return null;this.disableTooltip=!1;a.TooltipContent=$('<div class="TaskTooltip" />').append($.tmpl(a.options.TaskTooltipTemplate,a.options.ActivityView.activity,{isParentType:c._isParent,DataContext:_self}));return a.TooltipContent},position:{my:"left top+15",at:"top",offset:"10"},track:!0});this.updateTooltip=function(a,b){"StartTime"!=
b.PropertyName&&"EndTime"!=b.PropertyName&&"ProgressPercent"!=b.PropertyName&&"ActivityName"!=b.PropertyName||!this.options.TaskTooltipTemplate||(this.TooltipContent=$('<div class="TaskTooltip" />').append($.tmpl(this.options.TaskTooltipTemplate,a,{isParentType:c.IsParent,DataContext:_self})))};var c=this.options.ActivityView;_self=this;$(b).hover(function(){},function(){_self._removeTooltip(this)});$(b).mousedown(function(){_self._removeTooltip(this)}).blur(function(){_self._removeTooltip(this)})},
_removeTooltip:function(a){if(a){var b="#"+$(a).attr("aria-describedby");$(b).remove();$(a).removeAttr("aria-describedby")}},UpdateTooltipContent:function(a){if(a.ProposedStart&&a.ProposedEnd){0==a.OriginalStart.compareTo(a.ProposedStart)&&0==a.OriginalEnd.compareTo(a.ProposedEnd)&&(a.HasChanged=!1);var b={Name:a.Name,StartTime:a.ProposedStart,EndTime:a.ProposedEnd,OriginalStart:a.OriginalStart,OriginalEnd:a.OriginalEnd,HasChanged:a.HasChanged,ProgressPercent:a.ProgressPercent};if(a.Duration){if(0>
a.Duration.days)return;b.Duration=a.Duration}this.createPopup(b)}},createPopup:function(a){!1==a instanceof RadiantQ.Gantt.Model.IActivity&&(a.StartTime_M=function(){return a.StartTime},a.EndTime_M=function(){return a.EndTime},a.Duration_M=function(){return a.Duration},a.ProgressPercent_M=function(){return a.ProgressPercent});this.DragTooltipContent=$('<div align="center" />').append($.tmpl(this.options.MovingInfoPopup,a));this.ResizeTooltipContent=$('<div align="center" />').append($.tmpl(this.options.ResizeInfoPopup,
a));this.ProgressResizeContent=$('<div align="center" />').append($.tmpl(this.options.ProgressTemplate,a))},ConnectingInfo:function(a){this.DepConnContent=$("<div />").append($.tmpl(this.options.ConnectingInfoPopup,a))},LoadDefaultTooltipStyle:function(){this.StartTime();this.EndTime();this.defaultTemplate()},defaultTemplate:function(){this.options.TaskTooltipTemplate||(this.options.TaskTooltipTemplate=$("<div><table class='TaskTooltip ui-widget-content' style='white-space:nowrap;border:none;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td><b>${RadiantQ_NameString}: </b>&nbsp;${this.data.ActivityName_M()}</td></tr><tr><td><b>${RadiantQ_StartString}: </b>&nbsp;${this.data.StartTime_M().toString('dd-MMM-yyyy')}</td><td><b>${RadiantQ_DurationString}: </b>${this.data.Duration_M().toString()} </td></tr><tr><td><b>${RadiantQ_FinishString}: </b>&nbsp;${this.data.EndTime_M().toString('dd-MMM-yyyy')}</td><td><b>${RadiantQ_ProgressString}: </b>${this.data.ProgressPercent_M()}%</td></tr></table></div>"));
this.options.MovingInfoPopup||(this.options.MovingInfoPopup="<div><table class='rq-gc-taskbar-popup ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_StartString}:&nbsp;&nbsp;&nbsp;</b></td><td> "+this._MakeItBoldWhenActualDate("${$item.data.StartTime_M().toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_FinishString}:&nbsp;</b> </td><td> "+this._MakeItBoldWhenActualDate("${$item.data.EndTime_M().toString('yyyy-MM-dd HH:mm')}")+
"</td></tr></table></div>");this.options.ResizeInfoPopup||(this.options.ResizeInfoPopup="<div><table class='rq-gc-taskbar-popup ui-widget-content' style='white-space:nowrap;'><tr><td colspan='2' align='center'><b>${RadiantQ_TaskString}</b></td></tr><tr><td style='float:right;'><b>${RadiantQ_DurationString} :</b></td><td>"+this._MakeItBoldWhenActualDate("{{if $item.data.Duration_M()}}${$item.data.Duration_M().days}d ${$item.data.Duration_M().hours_M()}h ${$item.data.Duration_M().minutes_M()}m{{/if}}")+
"</td></tr><tr><td style='float:right;'><b>${RadiantQ_StartTimeString}:</b> </td><td> "+this._MakeItBoldWhenActualDate("${$item.data.StartTime_M().toString('yyyy-MM-dd HH:mm')}")+"</td></tr><tr><td style='float:right;'><b>${RadiantQ_EndTimeString} :</b></td><td> "+this._MakeItBoldWhenActualDate("${$item.data.EndTime_M().toString('yyyy-MM-dd HH:mm')}")+"</td></tr></table></div>");this.options.ProgressTemplate||(this.options.ProgressTemplate="<div class='rq-gc-taskbar-popup ui-widget-content' style='width:140px;'><span><b>${RadiantQ_TaskString}</b></span><div><b>${RadiantQ_ProgressPercentString}: ${$item.data.ProgressPercent_M()}%</b> </div>");
this.options.ConnectingInfoPopup||(this.options.ConnectingInfoPopup="<div class='rq-gc-taskbar-popup ui-widget-content' style='width:190px;'><div align='center'><b>${RadiantQ_FinishToStartLinkString}</b></div><div><span><b>${RadiantQ_FromFinishOfString} : </b> ${ConnectingInfoFromTaskText}</span></div><div><span><b>${RadiantQ_ToStartOfString} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </b> ${ConnectingInfoToTaskText}</span></div></div>")},_MakeItBoldWhenActualDate:function(a){return"{{if HasChanged }}"+a+"{{else}}<b>"+
a+"</b>{{/if}}"},IsDepLinesReadOnly:!1,IsEffortReadOnly:!1,IsTaskReadOnly:!1,IsProgressPercentReadOnly:!1,IsStartTimesReadOnly:!1,IsReadOnly:!1,initValuesFromOptions:function(){var a=this.GanttControl.options;this.IsDepLinesReadOnly=a.IsDependencyLinesReadOnly;this.IsEffortReadOnly=a.IsEffortReadOnly;this.IsTaskReadOnly=this.ActivityView.IsReadOnly_M();this.IsProgressPercentReadOnly=a.IsProgressPercentReadOnly;this.IsStartTimesReadOnly=a.IsStartTimesReadOnly;this.IsReadOnly=a.IsReadOnly},ReadOnlyStateChangedCallback:function(a,
b){var c=void 0!=b.value?b.value:b.Value;"IsDependencyLinesReadOnly"==b.PropertyName?this.IsDepLinesReadOnly=c:"IsEffortReadOnly"==b.PropertyName?this.IsEffortReadOnly=c:"IsTaskReadOnly"==b.PropertyName?this.IsTaskReadOnly=c:"IsProgressPercentReadOnly"==b.PropertyName?this.IsProgressPercentReadOnly=c:"IsStartTimesReadOnly"==b.PropertyName?this.IsStartTimesReadOnly=c:"IsReadOnly"==b.PropertyName&&(this.IsReadOnly=c);this.UpdateThumbsReadOnlyStates()},UpdateThumbsReadOnlyStates:function(){var a=this.element,
b=$(".rq-gc-progressbar-resizer",a);0==b.length&&(b=$(".ui-progress-resizer",a));if(0!=b.length){var c=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsProgressPercentReadOnly;c?b.css("visibility","visible"):b.css("visibility","collapse")}b=$(".rq-pg-gc-taskBarResizer",a);0==b.length&&(b=$(".PGresizer-style",a));0!=b.length&&((c=!this.IsReadOnly&&!this.IsTaskReadOnly&&!this.IsEffortReadOnly)?b.css("display","block"):b.css("display","none"))},_setOption:function(a,b){this.widgetBaseSetOption.apply(this,
arguments);"TaskBarBrowseToCueLeftTemplate"==a?(this.TaskBarBrowseToCueLeft&&this.TaskBarBrowseToCueLeft.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged()):"TaskBarBrowseToCueRightTemplate"==a&&(this.TaskBarBrowseToCueRight&&this.TaskBarBrowseToCueRight.remove(),this._createBrowseToCueLeft(this.options),this._BrowseToCueTemplateChanged())},_destroy:function(){if(this.GanttChart._dirtyTaskItemControls&&this.GanttChart._diryTaskItemByActs[this.Activity.id]){var a=
this.GanttChart._dirtyTaskItemControls.indexOf(this);-1!=a&&(this.GanttChart._dirtyTaskItemControls.splice(a,1),delete this.GanttChart._diryTaskItemByActs[this.Activity.id])}this.options.GanttChart.RefreshUIEvent.unsubscribe(this.OnChartRefreshUI,this);this.element.empty();a=this.Activity;this.GanttChart.ViewportTimeRangeChanged.unsubscribe(this._GanttChart_ViewportTimeRangeChanged,this);a.PropertyChanged.unsubscribe(this._activity_PropertyChanged,this);a._assignments&&a._assignments.CollectionChanged.unsubscribe(this._activity_Assignments_CollectionChanged,
this);this.GanttControl.ReadOnlyPropertyChange&&this.GanttControl.ReadOnlyPropertyChange.unsubscribe(this._parent_ReadOnlyPropertyChanged,this);a.PropertyChanged.unsubscribe(this.updateTooltip,this)}};RadiantQ.Gantt.Widget.GanttTaskItemBar=ganttTaskItemBar;
$.fn.ganttShiftTracker=function(a,b){function c(a,b,c,d){!0==d&&(c.pageX=c.originalEvent.touches[0].pageX,c.pageY=c.originalEvent.touches[0].pageY);$DeplinkLine=$("#rq-gc-dependencyCue-parent",this.GanttChart.element);0==$("#rq-gc-dependencyCue-arrow",this.GanttChart.element).length&&$DeplinkLine.append("<div id='rq-gc-dependencyCue-arrow' class='rq-gc-dependencyCue-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-width:5px; border-top-style:solid; border-right:5px solid transparent; border-left:5px solid transparent; border-bottom-width:0px; margin-left:-4px;'</div>");
$DeplinkInnerLineArrow=$("#rq-gc-dependencyCue",this.GanttChart.element);if(0<$DeplinkLine.length){var e=b.parents("div.rq-ganttChart"),f=$(".ui-grid-body",e.parent()).scrollTop(),e=b.offset().left+$DeplinkLine[0].offsetLeft-b[0].offsetLeft;a=$DeplinkLine[0].offsetTop-(a*b[0].parentElement.offsetHeight+b[0].offsetTop)+f;f=b.offset().top+a;a=b=0;v?(a=e=0,!0==d?(e=c.originalEvent.touches[0].clientX,a=c.originalEvent.touches[0].clientY):(e=c.clientX,a=c.clientY),b=Math.sqrt((e-v.x)*(e-v.x)+(a-v.y)*(a-
v.y)),a=180/3.1415*Math.acos((a-v.y)/b),e>v.x&&(a*=-1)):(b=Math.sqrt((c.pageX-e)*(c.pageX-e)+(c.pageY-f)*(c.pageY-f)),a=180/3.1415*Math.acos((c.pageY-f)/b),c.pageX>e&&(a*=-1));$DeplinkInnerLineArrow.css({height:b-7,"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});$DeplinkLine.css({height:b-2,"-webkit-transform":"rotate("+
a+"deg)","-moz-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"});t=this.GanttChart.TaskOnMouseHover;e={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:""};null!=t&&t.Activity_M()!=this.Activity&&(!1==this.Activity.Model.CanAddNewDependency(this.Activity,t.Activity_M(),RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragOver)?
t=null:e={ConnectingInfoFromTaskText:this.Activity.ActivityName_M(),ConnectingInfoToTaskText:this.Activity!=t.Activity_M()?t.Activity_M().ActivityName_M():""});this.ConnectingInfo(e);var g=$(".dragPopup");g.empty();g.append(this.DepConnContent);!0==x&&(x=!1,c.originalEvent.touches&&(c.pageY=c.originalEvent.touches[0].pageY),g[0].refreshPostion=function(a){var b=$(".rq-gc-taskbar-popup",g).outerHeight(),e=c.pageY,e=a?e-(c.offsetY+b):e+c.offsetY;!0==d?g.css({left:c.originalEvent.touches[0].pageX,top:e}):
g.css({left:c.pageX,top:e})});g.css("visibility","visible")}}var d=this,e,f,g,h,k;new ObjectEvent("DragComplete");var l=0,p,m=!1,q=!1,n=!1,r,t=null,s=a.options.WorkTimeSchedule,u=null,w=null,v={x:0,y:0};d.bind("mousedown."+a.widgetName,function(a){document.mouseButtonPressed=!0;if(!this.IsReadOnly&&!this.IsTaskReadOnly&&!$(a.target).hasClass("label")){x=!0;var b=_ganttCommonMouseDown.call(this,a,d,!1);h=function(a){return _ganttMouseMove.call(this,a,b,d,!1)};k=function(a){document.mouseButtonPressed=
!1;return _ganttMouseUp.call(this,a,b,d,!1)};$(document).bind("mousemove."+this.widgetName,h.bind(this)).bind("mouseup."+this.widgetName,k.bind(this))}}.bind(a));d.bind("touchstart."+a.widgetName,function(a){if(!(this.IsReadOnly||this.IsTaskReadOnly&&this.IsStartTimesReadOnly&&this.IsDepLinesReadOnly||$(a.target).hasClass("label"))){a.stopPropagation();x=!0;var b=_ganttCommonMouseDown.call(this,a,d,!0);h=function(a){return _ganttMouseMove.call(this,a,b,d,!0)};k=function(a){return _ganttMouseUp.call(this,
a,b,d,!0)};$(document).bind("touchmove."+this.widgetName,h.bind(this)).bind("touchend."+this.widgetName,k.bind(this))}}.bind(a));_ganttCommonMouseDown=function(a,b,c){this.taskStartAndEndTime={Name:this.Activity.ActivityName_M(),OriginalStart:this.Activity.StartTime_M(),OriginalEnd:this.Activity.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};x=!0;var d=a.srcElement,e=b.closest("tr");
e.attr("list-index")||e.index();if(!d||!$(d).hasClass("rq-pg-gc-taskBarResizer")){$taskClone=$("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+"'></div>");var d=$("<div id='rq-gc-dependencyCue-parent' class='rq-gc-dependencyCue-parent "+window.radiantQclasses.defaultClass+"'><div id='rq-gc-dependencyCue' class='rq-gc-dependencyCue'></div></div>"),f=b.parents("div.rq-ganttChart");$(".ui-grid-body",f.parent()).scrollTop();e=b.parents("div.rq-ganttChart");a.offsetX=
a.clientX-b.offset().left;a.offsetY=a.clientY-b.offset().top;var f=$("div.rq-tsh-div",f).height(),g=b.height()/2,e=b.offset().top-e.offset().top-(f-g);d.css({top:e,left:a.offsetX+b[0].offsetLeft});f=b.offset();!0==c?(v={x:a.originalEvent.touches[0].clientX,y:a.originalEvent.touches[0].clientY},d.css({top:e,left:a.originalEvent.touches[0].pageX-f.left+b[0].offsetLeft})):v={x:a.clientX,y:a.clientY};$taskClone.css({width:b[0].offsetWidth-2+"px",height:b[0].offsetHeight-2+"px"});this.IsStartTimesReadOnly||
$taskClone.appendTo(b);n=!1==this.CanShiftTask(this);_ganttMouseClick.call(this,a,$taskClone,b,c,d);a=this.options.GanttChart.options.TimeIndicatorLineOption;if((a&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(a&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)u=b.find("div.rq-gc-start-verticalLine").clone().show(),w=b.find("div.rq-gc-end-verticalLine").clone().show(),$taskClone.append(u),$taskClone.append(w);return $taskClone}};_ganttMouseClick=
function(a,b,c,d,h){isShiftOrResize=!0;this.closeToolTip();c[0].uiTooltip&&(c[0].disableTooltip=!0);var k=_getGanttDragMousePosition(a,b,c,d);e=k.x;f=k.y;g=b[0].offsetLeft;c.addClass("rq-taskbar-shadow");b=this.GanttChart._getUniqueSelectorIdByID("rq-gc-viewsContainer-div");$(b).append(h);this.taskStartAndEndTime.OriginalStart=this.Activity.StartTime_M();this.taskStartAndEndTime.OriginalEnd=this.Activity.EndTime_M();s?(this.taskStartAndEndTime.ProposedStart=s.ConvertToNextWorkingTime(this.taskStartAndEndTime.OriginalStart),
this.taskStartAndEndTime.ProposedEnd=s.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort_M())):(this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalStart),this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(this.taskStartAndEndTime.OriginalEnd));this.UpdateTooltipContent(this.taskStartAndEndTime);c.GetDragOrResizeContent(this.DragTooltipContent,a,c,d)};_ganttMouseMove=function(a,b,c,d){c.addClass("rq-taskbar-shadow");if(!0==
d){var e=document.elementFromPoint(a.originalEvent.touches[0].pageX,a.originalEvent.touches[0].pageY);mouseHoverActivity=$(e).parents(".rq-gc-row ").data();this.GanttChart.TaskOnMouseHover=null!=mouseHoverActivity?mouseHoverActivity.GanttTaskItemBar.ActivityView:null}r={StartTime:this.taskStartAndEndTime.OriginalStart.clone(),EndTime:this.taskStartAndEndTime.OriginalEnd.clone(),CanvasLeft:this.OriginalLeft};r.StartTime<=r.EndTime&&(_ganttUpdatePosition.call(this,a,b,c,d),q&&(this.UpdateTooltipContent(this.taskStartAndEndTime),
a=$(".dragPopup"),a.empty(),a.append(this.DragTooltipContent),this.IsStartTimesReadOnly||a.css("visibility","visible")),c[0].uiTooltip&&c[0].uiTooltip.hide())};_ganttMouseUp=function(a,c,d,e){isShiftOrResize=!1;d.removeClass("rq-taskbar-shadow");null==this.taskStartAndEndTime.ProposedStart||null==this.taskStartAndEndTime.ProposedEnd||this.IsStartTimesReadOnly||(d[0].uiTooltip&&(d[0].disableTooltip=!1),this.Activity.PreferredStartTime_M(this.taskStartAndEndTime.ProposedStart),this.taskStartAndEndTime.OriginalStart=
this.taskStartAndEndTime.ProposedStart,this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd,"function"==typeof b&&b.call(this,this,this.taskStartAndEndTime));null!=t&&(this.Activity.Model.CanAddNewDependency(this.Activity,t.Activity_M(),RadiantQ.Gantt.Model.NewDependencyAddScenarioType.UserDragDrop)&&this.Activity.Model.CreateNewDependency(this.Activity,t.Activity_M()),t=null);d.RemoveDragOrResizeContent(d);$("#clone").remove();$("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove();
if(!0==m||this.IsDepLinesReadOnly)m=!1;!0==q&&(q=!1);!0==n&&(n=!1);v={x:0,y:0};this.UpdateTooltipContent(this.ActivityView);$(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown");$(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown")};_getGanttDragMousePosition=function(a,b,c,d){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var e=a.originalEvent.touches[0].pageX,f=a.originalEvent.touches[0].pageY;
else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)e=a.originalEvent.touches[0].clientX,f=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)e=a.pageX,f=a.pageY;else if(a.clientX||a.clientY)e=a.clientX,f=a.clientY;return{x:e,y:f}};var x=!1;_ganttMouseMovedTo=function(a,b,d,e,f){l++;if(!(6>l)&&null!=d[0].parentElement){var g=d.closest("tr"),h=g.attr("list-index");h||(h=g.index());p=a;!1==m&&!1==q&&(4<=Math.abs(b)&&!this.IsDepLinesReadOnly&&!this.GanttControl.options.IsReadOnly?
m=!0:4<=Math.abs(a)&&!0!=m&&!n&&!this.ActivityView._isParent&&!this.GanttControl.options.IsStartTimesReadOnly&&(q=!0));m?c.call(this,h,d,e,f):q&&(a=r.CanvasLeft,a=rqTCUtils.ConvertToEndTimeInBaseScaleType(this.GanttChart.options.BaseTimeScaleType,r.StartTime.clone(),a/this.GanttChart.options.BaseTimeUnitWidth,(a+p)/this.GanttChart.options.BaseTimeUnitWidth,this.GanttChart.options.WorkTimeSchedule),d=Date.today(),b={Value:a},d={Value:d},RadiantQ.FlexyGantt.ConvertToValidTimes(r.DataContext,a,rqTCUtils.GetTimeSpan(r.StartTime,
r.EndTime),b,d),a=b.Value,d=d.Value,s&&(a=s?s.ConvertToNextWorkingTime(a):a,d=s?s.GetEnd(this.taskStartAndEndTime.ProposedStart,this.Activity.Effort_M()):this.taskStartAndEndTime.ProposedStart.addTimeSpan(this.Activity.Effort_M())),this.taskStartAndEndTime.ProposedStart=this.GanttControl.RoundUp(a),this.taskStartAndEndTime.ProposedEnd=this.GanttControl.RoundUp(d),0==this.taskStartAndEndTime.ProposedStart.compareTo(this.taskStartAndEndTime.OriginalStart)&&0==this.taskStartAndEndTime.ProposedEnd.compareTo(this.taskStartAndEndTime.OriginalEnd)?
this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0)}};_ganttUpdatePosition=function(a,b,c,d){var l=_getGanttDragMousePosition(a,b,c,d),p=l.x-e+g;_ganttMouseMovedTo.call(this,l.x-e,l.y-f,c,a,d);!0==q&&$(b).css("margin-left",p+"px");$(document).bind("keydown",function(a){27==a.keyCode&&($(document).unbind("mousemove."+this.widgetName,h).unbind("mouseup."+this.widgetName,k).unbind("keydown"),$(this).RemoveDragOrResizeContent(c),isShiftOrResize=!1,c[0].uiTooltip&&(c[0].disableTooltip=
!1),$("#clone").remove(),$("#rq-gc-dependencyCue-parent",this.GanttChart.element).remove(),!0==m&&(m=!1),null!=t&&(t=null),!0==q&&(q=!1),!0==n&&(n=!1))}.bind(this))}};
$.fn.ganttResizeTracker=function(a,b){var c=this,d,e,f,g,h={isTrue:!1},k,l=new ObjectEvent("ResizeComplete");$ganttResizer=$("<div class='rq-pg-gc-taskBarResizer'></div>");$progressResizer=$("<div class='rq-gc-progressbar-resizer'></div>");$ganttResizer.css("height",c.css("height"));var p=c.find("div.rq-gc-parentBar-middle"),m=c.find("div.progressbarStyle");0==p.length&&(p=c.find("div.parentMiddleBar-style"));0==m.length&&(m=c.find("div.rq-gc-progressbar"));var q=null,n=null;$progressResizer.css("height",
4);0!=p.length?p.append($ganttResizer):c.append($ganttResizer);a.GanttControl.options.IsEffortReadOnly||$ganttResizer.css("display","none");p=!1;0<c.parent("div.rq-gc-progressbar-resizer").length?p=!0:0<c.parent("div.ui-progress-resizer").length&&(p=!0);m&&!1==p&&c.parent().append($progressResizer);$ganttResizer.bind("mousedown."+a.widgetName,function(b){document.mouseButtonPressed=!0;h={isTrue:!1};var d=_commonTaskMouseDown.call(this,b,c,h,!1);f=function(a){h={isTrue:!1};return _ganttResizerMouseMove.call(this,
a,d,c,!1,h)};g=function(a){document.mouseButtonPressed=!1;return _ganttResizerMouseUp.call(this,a,d,c,h,!1)};$(document).bind("mousemove."+a.widgetName,f.bind(this)).bind("mouseup."+a.widgetName,g.bind(this))}.bind(a));$ganttResizer.bind("touchstart."+a.widgetName,function(a){h={isTrue:!1};var b=_commonTaskMouseDown.call(this,a,c,h,!0);f=function(a){h={isTrue:!1};return _ganttResizerMouseMove.call(this,a,b,c,!0,h)};g=function(a){return _ganttResizerMouseUp.call(this,a,b,c,h,!0)};$(document).bind("touchmove."+
this.widgetName,f.bind(this)).bind("touchend."+this.widgetName,g.bind(this))}.bind(a));_commonTaskMouseDown=function(a,b,c,d){var e=this.options.ActivityView.Activity_M();this.taskStartAndEndTime={Name:e.ActivityName_M(),OriginalStart:e.StartTime_M(),OriginalEnd:e.EndTime_M(),originalWidth:this.TaskBarRectangle.width(),originalLeft:this.TaskBarRectangle.css("margin-left"),ProgressEndTime:null,ProposedEnd:null,ProposedStart:null};$taskClone=$("<div id='clone' class='taskclone rq-taskbar-clone "+window.radiantQclasses.defaultClass+
"'></div>");$taskClone.css({width:b[0].offsetWidth-2+"px",height:b[0].offsetHeight-3+"px"});!1==c.isTrue&&b.addClass("rq-taskbar-shadow");b.append($taskClone);_ganttResizerMouseClick.call(this,a,$taskClone,b,c,d);a.stopPropagation();a=this.GanttChart.options.TimeIndicatorLineOption;if((a&ns_gantt.TimeIndicatorLines.OnResize)==ns_gantt.TimeIndicatorLines.OnResize||(a&ns_gantt.TimeIndicatorLines.Always)==ns_gantt.TimeIndicatorLines.Always)q=b.find("div.rq-gc-start-verticalLine").clone().show(),n=b.find("div.rq-gc-end-verticalLine").clone().show(),
$taskClone.append(q),$taskClone.append(n);return $taskClone};$progressResizer.bind("mousedown."+a.widgetName,function(a){document.mouseButtonPressed=!0;var b=a.currentTarget;h={isTrue:!0};var d=_commonProgressMouseDone.call(this,a,c,m,h,!1);f=function(a){h={isTrue:!0};return _ganttResizerMouseMove.call(this,a,d,m,!1,h)};g=function(a){document.mouseButtonPressed=!1;h={isTrue:!0};return _ganttResizerMouseUp.call(this,a,d,m,h,!1,b)};$(document).bind("mousemove."+this.widgetName,f.bind(this)).bind("mouseup."+
this.widgetName,g.bind(this))}.bind(a));$progressResizer.bind("touchstart."+a.widgetName,function(a){var b=a.currentTarget;h={isTrue:!0};var d=_commonProgressMouseDone.call(this,a,c,m,h,!0);f=function(a){h={isTrue:!0};return _ganttResizerMouseMove.call(this,a,d,m,!0,h)};g=function(a){h={isTrue:!0};return _ganttResizerMouseUp.call(this,a,d,m,h,!0,b)};$(document).bind("touchmove."+this.widgetName,f.bind(this)).bind("touchend."+this.widgetName,g.bind(this))}.bind(a));_commonProgressMouseDone=function(a,
b,c,d,e){$progressClone=$("<div id='clone' class='taskclone rq-taskbar-clone  "+window.radiantQclasses.defaultClass+"'></div>");$progressClone.css({width:c[0].offsetWidth-2+"px",height:b[0].offsetHeight-3+"px"});b.append($progressClone);_ganttResizerMouseClick.call(this,a,$progressClone,c,d,e);a.stopPropagation();return $progressClone};_ganttResizerMouseClick=function(a,b,c,f,g){isShiftOrResize=!0;this.closeToolTip();c[0].uiTooltip&&(c[0].disableTooltip=!0);d=_getGanttMousePosition(a,b,c,g).x;e=b[0].offsetWidth;
this.taskStartAndEndTime.ProposedStart=this.taskStartAndEndTime.OriginalStart;this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime;k=this.Activity.ProgressPercent;this.taskStartAndEndTime.OriginalDuration=this.Activity.Duration_M();this.ProposedDuration=this.taskStartAndEndTime.OriginalDuration;b=c.closest(".rq-gc-taskbar");0==b.length&&(b=c.closest(".taskbar-style"));!0==f.isTrue?$(this).GetDragOrResizeContent(this.ProgressResizeContent,
a,b,g):$(this).GetDragOrResizeContent(this.ResizeTooltipContent,a,c,g)};_ganttResizerMouseMove=function(a,b,c,d,e){_ganttUpdateWidth.call(this,a,b,c,d,e)};_ganttResizerMouseUp=function(a,c,d,e,f,g){isShiftOrResize=document.mouseButtonPressed=!1;d[0].uiTooltip&&(d[0].disableTooltip=!1);$(this).RemoveDragOrResizeContent(d);$("#clone").remove();this.taskStartAndEndTime.OriginalEnd=this.taskStartAndEndTime.ProposedEnd?this.taskStartAndEndTime.ProposedEnd:this.taskStartAndEndTime.OriginalEnd;this.taskStartAndEndTime.OriginalDuration=
this.ProposedDuration;!0==e.isTrue&&(this.Activity.ProgressPercent_M(k),a=$(c).css("width"))&&(d.css({width:a}),0!=a&&d.css({"border-width":"1px"}),a=parseInt(d.parent().css("margin-left")),$(g).css("margin-left",a+parseInt(d.css("width"))+"px"));this.taskStartAndEndTime.ProgressEndTime=this.taskStartAndEndTime.ProgressEndTime>this.taskStartAndEndTime.OriginalEnd?this.taskStartAndEndTime.OriginalEnd:this.taskStartAndEndTime.ProgressEndTime;l.subscribe(b,this);l.raise(this,{taskStartAndEndTime:this.taskStartAndEndTime,
forProgressBar:e});this.UpdateTooltipContent(this.ActivityView);l.unsubscribe(b,this);d.removeClass("rq-taskbar-shadow");$(document).unbind("touchmove."+this.widgetName).unbind("touchend."+this.widgetName).unbind("keydown");$(document).unbind("mousemove."+this.widgetName).unbind("mouseup."+this.widgetName).unbind("keydown")};_ganttResizeTo=function(a,b,c,d,e){!1==e.isTrue&&c.addClass("rq-taskbar-shadow");b=this.options.WorkTimeSchedule;this.taskStartAndEndTime.OriginalDuration.equals(this.ProposedDuration)?
this.taskStartAndEndTime.HasChanged=!1:this.taskStartAndEndTime.HasChanged=!0;100<k?k=100:0>k&&(k=0);this.taskStartAndEndTime.ProgressPercent=k;a=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,this.taskStartAndEndTime.OriginalStart,this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+a)/this.GanttChart.options.BaseTimeUnitWidth,null);a=new RQTimeSpan(0,a,0,0,0);a=e.isTrue?a:this.GanttControl.RoundUpDuration(a);d=rqTCUtils.ConvertTimeSpanToTimeUnits(this.GanttChart.options.BaseTimeScaleType,
a)*this.GanttChart.options.BaseTimeUnitWidth;this.ProposedDuration=a;d=rqTCUtils.ConvertUnitsInBaseScaleTypeToDurationInHours(this.GanttChart.options.BaseTimeScaleType,this.taskStartAndEndTime.OriginalStart,this.OriginalLeft/this.GanttChart.options.BaseTimeUnitWidth,(this.OriginalLeft+d)/this.GanttChart.options.BaseTimeUnitWidth,b);new RQTimeSpan(0,d,0,0);d=RQTimeSpan.Zero_M();a<d&&(a=d);this.taskStartAndEndTime.ProposedEnd=this.taskStartAndEndTime.OriginalStart.clone().addTimeSpan(a);b&&(this.ProposedDuration=
b.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd),this.taskStartAndEndTime.ProposedEnd=b.GetEnd(this.taskStartAndEndTime.OriginalStart,this.ProposedDuration),this.ProposedDuration=b.GetEffort(this.taskStartAndEndTime.OriginalStart,this.taskStartAndEndTime.ProposedEnd));this.taskStartAndEndTime.Duration=this.ProposedDuration;this.UpdateTooltipContent(this.taskStartAndEndTime);b=$(".dragPopup");b.empty();!0==e.isTrue?b.append(this.ProgressResizeContent):b.append(this.ResizeTooltipContent);
b.css("visibility","visible");c[0].uiTooltip&&c[0].uiTooltip.hide()};_getGanttMousePosition=function(a,b,c,d,e){if(!0==d)if(a.originalEvent.touches[0].pageX||a.originalEvent.touches[0].pageY)var f=a.originalEvent.touches[0].pageX,g=a.originalEvent.touches[0].pageY;else{if(a.originalEvent.touches[0].clientX||a.originalEvent.touches[0].clientY)f=a.originalEvent.touches[0].clientX,g=a.originalEvent.touches[0].clientY}else if(a.pageX||a.pageY)f=a.pageX,g=a.pageY;else if(a.clientX||a.clientY)f=a.clientX,
g=a.clientY;return{x:f,y:g}};_ganttUpdateWidth=function(a,b,c,h,l){var m=_getGanttMousePosition(a,b,c,h,l).x-d+e;m>c[0].parentElement.offsetWidth?$(b).css("width",c[0].parentElement.offsetWidth-3+"px"):0<m?($(b).css("width",m+"px"),null!=n&&null!=n[0]&&(n[0].style["margin-left"]=m+"px")):($(b).css("width","0px"),n&&null!=n[0]&&(n[0].style["margin-left"]=m+"px"));!0==l.isTrue&&(k=Math.round(100*(m/c[0].parentElement.offsetWidth)));_ganttResizeTo.call(this,m,a,c,h,l);$(document).bind("keydown",function(a){27==
a.keyCode&&($(document).unbind("mousemove."+this.widgetName,f).unbind("mouseup."+this.widgetName,g).unbind("keydown"),$(document).unbind("touchmove."+this.widgetName,f).unbind("touchend."+this.widgetName,g).unbind("keydown"),isShiftOrResize=!1,c[0].uiTooltip&&(c[0].disableTooltip=!1),$(this).RemoveDragOrResizeContent(c),$("#clone").remove())}.bind(this))}};
var ganttDependencyControl={Visibility:null,options:{name:"GanttDependencyControl",Data:null,DependencyViews:null,UseChartVirtualization:!1,ToggleVisibilityForVirtualizationSetting:null,GanttChart:null,GanttModel:null},_create:function(){var a=this.element.parents("div.rq-ganttChart");a.bind("ganttchartrefreshui.DependenciesRefreshUI",function(a,b){this.options.GanttControl=this;this.element.empty();this.Refresh()}.bind(this));this.element.parents("div.rq-ganttBase");a.bind("ganttchartsourceupdated",
function(a,b){this.options.Data.CollectionChanged.unsubscribe(this.ActivityViewsCollectionChange,this);this.options.DependencyViews.CollectionChanged.unsubscribe(this.DependencyViewsColletionChange,this);this.element.empty();this.options.Data=b.options.FlatItemsSource;this.options.DependencyViews=this.options.GanttChart.options.Parent.DependencyViews;this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this);this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,
this);this.Refresh()}.bind(this));this.options.Data.CollectionChanged.subscribe(this.ActivityViewsCollectionChange,this);this.UpdateVisibility();this.Refresh();this.options.DependencyViews.CollectionChanged.subscribe(this.DependencyViewsColletionChange,this);var b=[{keyName:"Delete",name:window.RadiantQ_Delete,icon:"Delete"},{keyName:"ChangeToFinishToStart",name:window.RadiantQ_ChangeToFinishToStart,icon:"Change to Finish to Start"},{keyName:"ChangeToFinishToFinish",name:window.RadiantQ_ChangetoFinishtoFinish,
icon:"Change to Finish to Finish"},{keyName:"ChangeToStartToFinish",name:window.RadiantQ_ChangeToStartToFinish,icon:"Change to Start to Finish"},{keyName:"ChangeToStartToStart",name:window.RadiantQ_ChangeToStartToStart,icon:"Change to Start to Start"}],c=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("div#DependencyContainer div.rq-gc-dependencyLine, div.rq-gc-dependencyLine-arrow ",".rq-gc-dependencysParent");c.AddNewItems(b);c.ItemClicked.subscribe(this.itemClicked,this);c.BeforeContextMenu.subscribe(function(a,
b){var d=$(a[0].parentElement).data(),d=(d.GanttDependencyLine||d.radiantqGanttDependencyLine).options.DependencyView.DependencyType_M();this.hideDependencyMenuItem(c.Items.asArray,d)},this);this.options.GanttChart.options.Parent.DependencyContextMenu=c;a=this.getGanttTableParent(a);if(this.options.UseChartVirtualization&&!1==this.options.GanttChart.options.IsPrinting){var d=null;a.scroll(function(){null!=d&&clearTimeout(d);d=setTimeout(function(){null!=this.options.Data&&this.Refresh()}.bind(this),
0)}.bind(this))}},hideDependencyMenuItem:function(a,b){for(var c=0;c<a.length;c++)a[c].disabled=a[c].keyName=="ChangeTo"+b?!0:this.options.GanttChart.options.Parent.options.IsReadOnly||this.options.GanttChart.options.Parent.options.IsDependencyLinesReadOnly?!0:!1},getGanttTableParent:function(a){return $(".ui-grid-body",a.parent())},itemClicked:function(a,b){var c=$(b[0].parentElement).data(),c=c.GanttDependencyLine;switch(a){case "Delete":for(var d=0;d<c.options.Parent.options.DependencyViews.length;d++)if(c.options.Parent.options.DependencyViews[d].StartRowIndex_M()==
c.options.DependencyView.StartRowIndex_M()&&c.options.Parent.options.DependencyViews[d].EndRowIndex_M()==c.options.DependencyView.EndRowIndex_M()){var e=c.options.Parent.options.DependencyViews[d].Dependency,f=new RadiantQ.Gantt.Utils.DelayUpdates;e.Model._dependencies.remove(e);f.Dispose()}$(c.options.Parent.element).empty();c.options.Parent.Refresh();break;case "ChangeToFinishToStart":for(d=0;d<c.options.Parent.options.DependencyViews.length;d++)c.options.Parent.options.DependencyViews[d].StartRowIndex_M()==
c.options.DependencyView.StartRowIndex_M()&&c.options.Parent.options.DependencyViews[d].EndRowIndex_M()==c.options.DependencyView.EndRowIndex_M()&&(e=c.options.Parent.options.DependencyViews[d].Dependency,f=c.options.Parent.options.DependencyViews[d].Dependency.Model,f._dependencies.remove(c.options.Parent.options.DependencyViews[d].Dependency),f.CreateNewDependency(e._fromActivity,e._toActivity,"FinishToStart",e._lag));$(c.options.Parent.element).empty();c.options.Parent.Refresh();break;case "ChangeToFinishToFinish":for(d=
0;d<c.options.Parent.options.DependencyViews.length;d++)if(c.options.Parent.options.DependencyViews[d].StartRowIndex_M()==c.options.DependencyView.StartRowIndex_M()&&c.options.Parent.options.DependencyViews[d].EndRowIndex_M()==c.options.DependencyView.EndRowIndex_M()){e=c.options.Parent.options.DependencyViews[d].Dependency;f=c.options.Parent.options.DependencyViews[d].Dependency.Model;f._dependencies.remove(c.options.Parent.options.DependencyViews[d].Dependency);f.CreateNewDependency(e._fromActivity,
e._toActivity,"FinishToFinish",e._lag);break}$(c.options.Parent.element).empty();c.options.Parent.Refresh();break;case "ChangeToStartToStart":for(d=0;d<c.options.Parent.options.DependencyViews.length;d++)c.options.Parent.options.DependencyViews[d].StartRowIndex_M()==c.options.DependencyView.StartRowIndex_M()&&c.options.Parent.options.DependencyViews[d].EndRowIndex_M()==c.options.DependencyView.EndRowIndex_M()&&(e=c.options.Parent.options.DependencyViews[d].Dependency,f=c.options.Parent.options.DependencyViews[d].Dependency.Model,
f._dependencies.remove(c.options.Parent.options.DependencyViews[d].Dependency),f.CreateNewDependency(e._fromActivity,e._toActivity,"StartToStart",e._lag));$(c.options.Parent.element).empty();c.options.Parent.Refresh();break;case "ChangeToStartToFinish":for(d=0;d<c.options.Parent.options.DependencyViews.length;d++)c.options.Parent.options.DependencyViews[d].StartRowIndex_M()==c.options.DependencyView.StartRowIndex_M()&&c.options.Parent.options.DependencyViews[d].EndRowIndex_M()==c.options.DependencyView.EndRowIndex_M()&&
(e=c.options.Parent.options.DependencyViews[d].Dependency,f=c.options.Parent.options.DependencyViews[d].Dependency.Model,f._dependencies.remove(c.options.Parent.options.DependencyViews[d].Dependency),f.CreateNewDependency(e._fromActivity,e._toActivity,"StartToFinish",e._lag));$(c.options.Parent.element).empty();c.options.Parent.Refresh()}},timer:null,DependencyViewsColletionChange:function(a,b){if("remove"==a.type){var c=this.options.GanttChart.ViewableDependencyViews.indexOf(b.items[0]);-1!=c&&this.options.GanttChart.ViewableDependencyViews.splice(c,
1)}if("insert"==a.type)for(c=0;c<b.items.length;c++)this.options.GanttChart.ViewableDependencyViews.push(b.items[c]);null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},ActivityViewsCollectionChange:function(a,b){null!=this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.element.empty();this.Refresh()}.bind(this),0)},UpdateVisibility:function(){var a=this.options;this.Visibility=a.ToggleVisibilityForVirtualizationSetting?
a.UseChartVirtualization?"Collapsed":"Visible":a.UseChartVirtualization?"Visible":"Collapsed"},_refreshTimer:null,Refresh:function(){null!=this._refreshTimer&&clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){this.element.empty();var a=this.options,b=a.GanttChart.ViewableDependencyViews;if(0!=b.length)for(var c=0;c<b.length;c++)if(b[c].Visibility_M()){var d=$("<div id='DependencyContainer' style='position:absolute;'></div>");d[this.getChildWidgetName("GanttDependencyLine")]({DependencyView:b[c],
Visibility:"Visible",IsTemplateApplied:!0,GanttChart:a.GanttChart,StartTime:b[c].StartTime_M(),EndTime:b[c].EndTime_M(),Parent:this});d.children(":not(#depArrow)");d.hover(function(){$(this).children().addClass("dependencyShadow")});d.mouseleave(function(){$(this).children().removeClass("dependencyShadow")});this.element.append(d)}}.bind(this),0)},_destroy:function(){var a=this.eventNamespace;$.observable(this.options.Data).unbind(a);this.element.parents("div.rq-ganttChart").unbind("ganttchartrefreshui.DependenciesRefreshUI");
this.element.empty();this.options.Data.CollectionChanged.unsubscribe(this.ActivityViewsCollectionChange,this);this.options.DependencyViews.CollectionChanged.unsubscribe(this.DependencyViewsColletionChange,this)}};RadiantQ.Gantt.Widget.GanttDependencyControl=ganttDependencyControl;
var ganttDependencyLine={options:{name:"GanttDependencyLine",DependencyLineBarStroke:null,CustomColor:null,StartTime:null,EndTime:null,RowHeight:null,Visibility:null,PolylineGeometry:null,ArrowGeometry:null,HighlightEffect:null,IsTemplateApplied:null,DependencyView:null,GanttChart:null,DependencyTooltipTemplate:null,VirtualizationHeightOffset:null,Parent:null},_depStartTime:null,DepStartTime:function(a){if(void 0==a)return this._depStartTime;a!=this._depStartTime&&(this._depStartTime=a,this.OnPropertyChanged("StartTime",
a),this._onInit?this.element.empty():setTimeout(function(){this.element.empty()}.bind(this),0),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_depEndTime:null,DepEndTime:function(a){if(void 0==a)return this._depEndTime;a!=this._depEndTime&&(this._depEndTime=a,this.OnPropertyChanged("EndTime",a),this._onInit?this.element.empty():setTimeout(function(){this.element.empty()}.bind(this),0),!1==this.IsInit&&this.OnRecomputeLocation(this.element))},_create:function(){this.IsInit=this._onInit=
!0;var a=this.options;this.PropertyChanged=new ObjectEvent("PropertyChanged");this.element.data("GanttDependencyLine",this);this.StartTimeBinding=new Binding(a.DependencyView,"StartTime",this,"DepStartTime",null,RadiantQ.Gantt.BindingMode.TwoWay);this.EndTimeBinding=new Binding(a.DependencyView,"EndTime",this,"DepEndTime",null,RadiantQ.Gantt.BindingMode.TwoWay);null==a.VirtualizationHeightOffset&&(a.VirtualizationHeightOffset=0);a.DependencyView.PropertyChanged.subscribe(this.DependencyViewPropertyChange,
this);this.IsInit&&(this.IsInit=!1,this.OnRecomputeLocation(this.element));this._depRecomputeTimer=null;this._onInit=!1},OnPropertyChanged:function(a,b){this.PropertyChanged.raise(this,{PropertyName:a,value:b})},timer:null,DependencyViewPropertyChange:function(a,b){"Visibility"==b.PropertyName&&(this.options.Visibility=!0==b.value?"visible":"collapse",null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){this.element.empty();this.OnRecomputeLocation(this.element)}.bind(this),
0))},CreateTooltip:function(a,b){function c(a){if(a){var b="#"+$(a).attr("aria-describedby");$(b).remove();$(a).removeAttr("aria-describedby")}}b.attr("title","");var d=this,e=$(document);b.tooltip({content:function(a){return"<b>"+window.RadiantQ_TaskLinkString+":</b> "+d.options.DependencyView.DependencyType_M()+" <b>"+window.RadiantQ_LagString+":</b> "+d.options.DependencyView.Dependency.Lag_M().toString()+"<br/><b>"+window.RadiantQ_FromString+": &nbsp;</b><b>(ID "+d.options.DependencyView.StartActivity.id+
")</b> "+d.options.DependencyView.StartActivity.ActivityName_M()+"<br/><b>"+window.RadiantQ_ToXString+":  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b><b>(ID "+d.options.DependencyView.EndActivity.id+")</b> "+d.options.DependencyView.EndActivity.ActivityName_M()+""},open:function(a,b){document.mouseButtonPressed&&b.tooltip.remove();b.tooltip.addClass("dependencyLineTooltip");e.bind("mousedown.divEvents mouseup.divEvents",function(){b.tooltip.remove();e.unbind(".divEvents")})},close:function(){e.unbind(".divEvents")},
position:{my:"left top+15",at:"top",offset:"10"},track:!0});$(b).mousedown(function(){c(this)}).blur(function(){c(this)})},_depRecomputeTimer:null,OnRecomputeLocation:function(a){a=this.options;var b=a.DependencyView,c=a.GanttChart.options,d=this._depStartTime,e=this._depEndTime;if(null!=b&&"collapse"!=a.Visibility&&!1!=a.IsTemplateApplied&&null!=d&&null!=e&&c.ComputedStartTime!=c.ComputedEndTime&&(-1!=b.StartRowIndex_M()||-1!=b.EndRowIndex_M())&&b.StartRowIndex_M()!=b.EndRowIndex_M()){var f=b.ActivityViewsCollection._dictActivityVsView[b.StartActivity.ID_M()],
g=b.ActivityViewsCollection._dictActivityVsView[b.EndActivity.ID_M()],h;this.options.GanttChart.options.OnDependencyLineLoad&&(h=this.options.GanttChart.options.OnDependencyLineLoad);f&&g&&(this._onInit?(this._drawRelatedDepLine(f,g),null!=h&&"function"==typeof h&&h.call(this.element,this)):(null!=this._depRecomputeTimer&&clearTimeout(this._depRecomputeTimer),this._depRecomputeTimer=setTimeout(function(){this._drawRelatedDepLine(f,g);this._depRecomputeTimer=null;null!=h&&"function"==typeof h&&h.call(this.element,
this)}.bind(this),0)))}},_drawRelatedDepLine:function(a,b){var c=this.options,d=c.DependencyView,e=c.GanttChart.options,f=e.RowHeight,g=this.element,h=this._depStartTime,k=this._depEndTime,l=RadiantQ.Gantt.Utils.TimeComputingUtils,p=e.WorkTimeSchedule,m=d.StartRowIndex_M(),q=d.EndRowIndex_M(),n;null!=e.DependencyLineColor&&(n=e.DependencyLineColor);var r=a.ChartRow(),t=null==r?-1:r[0].rowIndex,r=b.ChartRow(),r=null==r?-1:r[0].rowIndex;if(-1!=t||-1!=r){if(-1==t)startX=c.GanttChart.ConvertTimeToX(h),
t=startY=m*f+f/2+c.VirtualizationHeightOffset,startY+=d.StartItemYPosAdjustment,endX=c.GanttChart.ConvertTimeToX(k),endY=t+(q-m)*f,endY+=d.EndItemYPosAdjustment,q=d.DependencyType_M(),q==RadiantQ.Gantt.DependencyType.FinishToFinish||q==RadiantQ.Gantt.DependencyType.StartToFinish?(q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:absolute; background-color:"+n+" !important;  border-bottom:3px solid transparent; margin-left:7px; height:1px; width:10px;'></div>"),
f=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"'style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+n+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-(f/4)+2)+"px; margin-left:1px;'></div> "),g.append(q),g.append(f),g.css({"margin-left":endX,"margin-top":endY+
"px"})):(q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; height:1px; width:10px;'></div>"),f=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:"+
n+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+(-(f/4)+1)+"px; margin-left:10px;'></div> "),g.append(q),g.append(f),g.css({"margin-left":endX-15,"margin-top":endY+"px"}));else if(-1==r)startX=c.GanttChart.ConvertTimeToX(h),t=startY=m*f+f/2+c.VirtualizationHeightOffset,startY+=d.StartItemYPosAdjustment,endX=c.GanttChart.ConvertTimeToX(k),endY=t+(q-m)*f,endY+=d.EndItemYPosAdjustment,m=Math.abs(endX-startX),m=10<m?m:10,q=d.DependencyType_M(),
q==RadiantQ.Gantt.DependencyType.StartToStart||q==RadiantQ.Gantt.DependencyType.StartToFinish?(q=$("<div class='rq-gc-dependency rq-gc-dependencyLine top "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent; margin-left:-10px; height:1px; width:10px;'></div>"),f=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"'style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+
n+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-Math.round(f/4)+2)+"px; margin-left:-15px;'></div> "),g.append(f),g.append(q)):(q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:0px;  width:"+m+"px; '></div>"),f=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+
window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:"+n+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+(-(f/4)+1)+"px; margin-left:"+m+"px;'></div> "),g.append(q),g.append(f)),g.css({"margin-left":startX+2+"px","margin-top":startY+"px"});else switch(d.DependencyType_M()){case RadiantQ.Gantt.DependencyType.FinishToFinish:startX=
l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,e.ComputedStartTime,h,p)*e.BaseTimeUnitWidth;t=startY=m*e.RowHeight+e.RowHeight/2+c.VirtualizationHeightOffset;startY+=d.StartItemYPosAdjustment;endX=startX+l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,h,k,p)*e.BaseTimeUnitWidth;endY=t+(q-m)*f;endY+=d.EndItemYPosAdjustment;startX>endX?(k=21,l=startX-endX,d=startX-endX+16,e=5,c=startX-endX+20,g.css("margin-left",endX)):(k=endX-startX+20,l=0,d=15,e=endX+5-startX,c=k-1,g.css("margin-left",startX));
startY>endY&&(h=startY,startY=endY,endY=h);m>q?(m=$("<div  class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent;  height:1px; margin-left:"+(l+2)+"px;  width:"+k+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-right:3px solid transparent; margin-top:-3px;  margin-left:"+
(c+2)+"px; width:1px; height:"+(endY-startY)+"px;'></div> "),h=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:absolute; background-color:"+n+" !important;  border-bottom:3px solid transparent;   margin-left:"+(e+2)+"px; height:1px; width:"+d+"px;'></div>"),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"'style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+
n+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-(f/4)+2)+"px; margin-left:"+(c-d-2)+"px;'></div> "),g.append(n),g.append(h),g.append(q),g.append(m)):(m=$("<div  class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+(l+2)+"px;  width:"+k+"px; '></div>"),
q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-right:3px solid transparent; margin-top:-3px;  margin-left:"+(c+2)+"px; width:1px; height:"+(endY-startY)+"px;'></div> "),h=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important;  border-bottom:3px solid transparent;  margin-left:"+
(e+2)+"px; height:1px; width:"+d+"px;'></div>"),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"'style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important; border-bottom:5px solid transparent !important;border-right-color:"+n+" !important; border-right-width:5px; border-right-style:solid;border-left-color:transparent !important;margin-top:"+(-(f/4)+1)+"px; margin-left:"+(c-d-2)+"px;'></div> "),
g.append(m),g.append(q),g.append(h),g.append(n));g.css("margin-top",startY+"px");break;case RadiantQ.Gantt.DependencyType.StartToStart:startX=l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,e.ComputedStartTime,h,p)*e.BaseTimeUnitWidth+1;t=startY=m*f+f/2+c.VirtualizationHeightOffset;startY+=d.StartItemYPosAdjustment;endX=startX+l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,h,k,p)*e.BaseTimeUnitWidth;endY=t+(q-m)*f;endY+=d.EndItemYPosAdjustment;startX>endX?(k=startX-endX+20,d=20,c=-5,e=endX):
(k=20,d=endX-startX+20,c=d-25,e=startX);startY>endY&&(h=startY,startY=endY,endY=h);m>q?(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine top "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px; width:"+k+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine mi "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+
n+" !important; border-right:3px solid transparent; margin-top:-3px;   margin-left:-20px; width:1px;  height:"+(endY-startY)+"px;'></div> "),h=$("<div class='rq-gc-dependency rq-gc-dependencyLine bot "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent;   margin-left:-20px; height:1px; width:"+d+"px;'></div>"),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+
"' style='z-index:2;  position:absolute; width:0; height:0; border-top:5px solid transparent !important;  border-bottom:5px solid transparent !important; border-left-color:"+n+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+(-(f/4)+2)+"px; margin-left:"+c+"px;'></div> "),g.append(n),g.append(h),g.append(q),g.append(m)):(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine top "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+
n+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px; width:"+k+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-right:3px solid transparent; margin-top:-3px;   margin-left:-20px; width:1px;  height:"+(endY-startY)+"px;'></div> "),h=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+
n+" !important; border-bottom:3px solid transparent;   margin-left:-20px; height:1px; width:"+d+"px;'></div>"),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0; border-top:5px solid transparent !important;  border-bottom:5px solid transparent !important; border-left-color:"+n+" !important; border-left-width:5px; border-left-style:solid;border-right-color:transparent !important; margin-top:"+
(-(f/4)+1)+"px; margin-left:"+c+"px;'></div> "),g.append(m),g.append(q),g.append(h),g.append(n));g.css({"margin-top":startY+"px","margin-left":e});break;case RadiantQ.Gantt.DependencyType.StartToFinish:startX=l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,e.ComputedStartTime,h,p)*e.BaseTimeUnitWidth+1;t=startY=m*f+f/2+c.VirtualizationHeightOffset;startY+=d.StartItemYPosAdjustment;endX=startX+l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,h,k,p)*e.BaseTimeUnitWidth;endY=t+(q-m)*f;endY+=d.EndItemYPosAdjustment;
startY>endY&&(h=startY,startY=endY,endY=h);startX>endX?m>q?(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; height:1px; width:"+(startX-endX)+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative; background-color:"+n+" !important; border-left:3px solid transparent;  width:1px;  height:"+
(endY-startY-f/2)+"px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2; margin-left:-4px; position:relative; width:0; height:0; border-top:none !important;  border-bottom-style:solid;  border-bottom:5px solid; border-bottom-color: "+n+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important;'></div> "),g.css("margin-left",endX+"px"),g.css("margin-top",startY+
(f/4+3)+"px"),g.append(n),g.append(q),g.append(m)):(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; height:1px; width:"+(startX-endX)+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative; background-color:"+n+" !important; border-left:3px solid transparent;  width:1px;  height:"+
(endY-startY-f/2+2)+"px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='width:0; height:0; z-index:2;  position:relative; border-top-color:"+n+" !important; border-top-width:5px; border-top-style:solid; border-bottom-width:0px !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:-4px; margin-top:-3px;'></div> "),g.css("margin-left",endX+"px"),g.css("margin-top",
startY+"px"),g.append(m),g.append(q),g.append(n)):m>q?(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent;  margin-left:-20px; height:1px; width:20px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-right:3px solid transparent;  margin-top:-3px; margin-left:-20px; width:1px; height:"+
(f/2-2)+"px;'></div> "),d=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px;  width:"+(endX-startX+41)+"px;'></div> "),c=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-right:3px solid transparent; margin-left:"+
(endX-startX+20)+"px; margin-top:-3px; width:1px; height:"+(endY-startY-f/2)+"px;'></div> "),e=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent;  margin-left:"+(endX-startX+5)+"px;  height:1px; width:16px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:absolute; width:0; height:0;  border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:transparent  !important; border-right-color:"+
n+" !important; border-right-width:5px; border-right-style:solid; margin-top:"+(-(f/4)+2)+"px; margin-left:"+(endX-startX+3)+"px;'></div> "),g.css("margin-left",startX+"px"),g.css("margin-top",startY+"px"),g.append(n),g.append(e),g.append(c),g.append(d),g.append(q),g.append(m)):(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent;  margin-left:-20px; height:1px; width:20px; '></div>"),
q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-right:3px solid transparent;  margin-top:-3px; margin-left:-20px; width:1px; height:"+f/2+"px;'></div> "),d=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; background-color:"+n+" !important; border-bottom:3px solid transparent; margin-left:-20px; height:1px;  width:"+
(endX-startX+41)+"px;'></div> "),c=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-right:3px solid transparent; margin-left:"+(endX-startX+20)+"px; margin-top:-3px; width:1px; height:"+(endY-startY-2-f/2)+"px;'></div> "),e=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+
n+" !important; border-bottom:3px solid transparent;  margin-left:"+(endX-startX+5)+"px;  height:1px; width:16px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0;  border-top:5px solid transparent !important; border-bottom:5px solid transparent !important; border-left-color:transparent  !important; border-right-color:"+n+" !important; border-right-width:5px; border-right-style:solid; margin-top:"+
(-(f/4)+2)+"px; margin-left:"+(endX-startX+3)+"px;'></div> "),g.css("margin-left",startX+"px"),g.css("margin-top",startY+"px"),g.append(m),g.append(q),g.append(d),g.append(c),g.append(e),g.append(n));break;default:startX=l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,e.ComputedStartTime,h,p)*e.BaseTimeUnitWidth,t=startY=m*f+f/2+c.VirtualizationHeightOffset,startY+=d.StartItemYPosAdjustment,endX=startX+l.ConvertToUnitsOfBaseScaleType(e.BaseTimeScaleType,h,k,p)*e.BaseTimeUnitWidth,endY=t+(q-m)*
f,endY+=d.EndItemYPosAdjustment,startY>endY&&(h=startY,startY=endY,endY=h),startX<=endX?(m>q?(m=endX-startX+5,e=endX-startX+4,q=endY-startY-3,c=endX-startX,!0==d.EndActivity.Effort_M().equals(RQTimeSpan.Zero_M())&&(m=endX-startX-1,e=endX-startX-2,q=endY-startY-4,c=endX-startX-6.5,m=0<m?m:5,e=0<e?e:5,c=0<c?c:1),m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2; position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; height:1px;  width:"+
m+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2; position:relative;  background-color:"+n+" !important; margin-top:-3px; border-right:3px solid transparent; width:1px; margin-left:"+e+"px;  height:"+(q-f/2)+"px;'></div>"),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0;border-bottom-color:"+n+
" !important; border-top:none !important; margin-top:3px; border-bottom-width:5px; border-bottom-style:solid; border-bottom:5px solid "+n+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+c+"px;'></div> "),g.css({"margin-left":startX+2+"px","margin-top":startY+(f/4+2)+"px"}),f=document.createDocumentFragment(),f.appendChild(n[0]),f.appendChild(q[0]),f.appendChild(m[0])):(m=endX-startX+5,e=endX-startX+4,q=endY-startY-3,c=endX-startX,
!0==d.EndActivity.Effort_M().equals(RQTimeSpan.Zero_M())&&(m=endX-startX-1,e=endX-startX-2,q=endY-startY-4,c=endX-startX-6.5,m=0<m?m:5,e=0<e?e:5,c=0<c?c:1),m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2; position:relative; margin-top:1px; background-color:"+n+" !important;   border-bottom:3px solid transparent; height:1px;  width:"+m+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+
"' style=' z-index:2;  position:relative; background-color:"+n+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+e+"px;  height:"+(q-f/2)+"px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0; border-top-color:"+n+" !important ; border-top-width:5px; border-top-style:solid; border-bottom-width:0px; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+
c+"px;'></div> "),g.css({"margin-left":startX+2+"px","margin-top":startY+"px"}),f=document.createDocumentFragment(),f.appendChild(m[0]),f.appendChild(q[0]),f.appendChild(n[0])),g[0].appendChild(f)):m>q?(m=$("<div  class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+(endX-startX)+"px;  width:"+(startX-endX)+"px; '></div>"),
q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative; background-color:"+n+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+(endX-startX)+"px;  height:"+(endY-startY-f/2)+"px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2; margin-left:-4px; position:relative; width:0; height:0; border-top:none !important;  border-bottom-style:solid;  border-bottom:5px solid; border-bottom-color: "+
n+" !important; border-right:5px solid transparent !important; border-left:5px solid transparent !important;  margin-left:"+(endX-(startX+4))+"px;'></div> "),g.css({"margin-left":startX+2+"px","margin-top":startY+(f/4+2)+"px"}),g.append(n),g.append(q),g.append(m)):(m=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative;  background-color:"+n+" !important; border-bottom:3px solid transparent; margin-top:-1px; height:1px; margin-left:"+
(endX-startX)+"px;  width:"+(startX-endX)+"px; '></div>"),q=$("<div class='rq-gc-dependency rq-gc-dependencyLine "+window.radiantQclasses.defaultClass+"' style=' z-index:2;  position:relative; background-color:"+n+" !important;  width:1px; border-right:3px solid transparent; margin-top:-3px; margin-left:"+(endX-startX)+"px;  height:"+(endY-startY-3-f/2)+"px;'></div> "),n=$("<div id='depArrow' class='rq-gc-dependency rq-gc-dependencyLine-arrow "+window.radiantQclasses.defaultClass+"' style='z-index:2;  position:relative; width:0; height:0; border-top-color:"+
n+" !important ; border-top-width:5px; border-top-style:solid; border-bottom-width:0px; border-right:5px solid transparent !important; border-left:5px solid transparent !important; margin-left:"+(endX-(startX+4))+"px;'></div> "),g.css({"margin-left":startX+2+"px","margin-top":startY+"px"}),g.append(m),g.append(q),g.append(n))}g=$(".rq-gc-dependency",g);this.CreateTooltip(this,g)}},_destroy:function(){this.StartTimeBinding&&this.StartTimeBinding.Dispose();this.EndTimeBinding&&this.EndTimeBinding.Dispose();
this.options.DependencyView.PropertyChanged.unsubscribe(this.DependencyViewPropertyChange,this)}};RadiantQ.Gantt.Widget.GanttDependencyLine=ganttDependencyLine;
var RQStyle=RadiantQ.Gantt.DefaultStyles,ganttRows={currentUniqueRowSuffix:0,options:{name:"GanttRows",Data:null,ParentTasksListProperty:null,TasksListProperty:null,Expand:null,TaskTemplate:null,OverlappedTasksRenderingOptimization:null,ParentTaskTemplate:null,TaskStartTime:null,ParentTaskStartTime:null,TaskEndTime:null,ParentTaskEndTime:null,GanttChart:null,RowHeight:null,TaskBarHeight:null,KnockoutObjectName:null,ViewWidth:null,TaskTooltipTemplate:null,ResizeInfoPopup:null,MovingInfoPopup:null,
FlexyGantt:null,TimeIndicatorLineOption:null,UseChartVirtualization:!1,EnableAlternativeRowBackground:null,TaskBarBrowseToCueLeftTemplate:null,TaskBarBrowseToCueRightTemplate:null,IsPrinting:!1},cachedTaskListControlInstance:[],CreateTaskListControl:function(a,b,c){a[this.getChildWidgetName("TasksListControl")]({Data:b,ParentTasksListProperty:this.options.ParentTasksListProperty,TasksListProperty:this.options.TasksListProperty,TaskTemplate:this.options.TaskTemplate,ParentTaskTemplate:this.options.ParentTaskTemplate,
OverlappedTasksRenderingOptimization:this.options.OverlappedTasksRenderingOptimization,TaskStartTime:this.options.TaskStartTime,ParentTaskStartTime:this.options.ParentTaskStartTime,TaskEndTime:this.options.TaskEndTime,ParentTaskEndTime:this.options.ParentTaskEndTime,RowCount:this.currentUniqueRowSuffix,GanttChart:this.options.GanttChart,Parent:this,KnockoutObjectName:this.options.KnockoutObjectName,TaskTooltipTemplate:this.options.TaskTooltipTemplate,ResizeInfoPopup:this.options.ResizeInfoPopup,MovingInfoPopup:this.options.MovingInfoPopup,
TaskBarHeight:this.options.TaskBarHeight,FlexyGantt:this.options.FlexyGantt,UseChartVirtualization:this.options.UseChartVirtualization,TaskBarBrowseToCueLeftTemplate:this.options.TaskBarBrowseToCueLeftTemplate,TaskBarBrowseToCueRightTemplate:this.options.TaskBarBrowseToCueRightTemplate,IsPrinting:this.options.IsPrinting,TimeIndicatorLineOption:this.options.TimeIndicatorLineOption});this.cachedTaskListControlInstance.push(a.data("TasksListControl"));this.options.GanttChart.LoadingRow({Row:c,Data:b})},
$Area:null,$tableBody:null,getGanttTableParent:function(a){return $(".ui-grid-body",a.parent())},_create:function(){RQStyle.init();var a=this;this.itemHeight=this.options.RowHeight;this.SCROLLBAR_MIN_SIZE=10;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this._cachedRowCont=$("<div id='cache'></div>");this._cachedRows={};this.$chartTableBody=$("<tbody style='overflow:hidden;'></tbody>");var b=$("<table class='chartRowsContainer rq-gc-rowsParent-table'></table").append(this.$chartTableBody);
this.table=b;b[0].style.cssText=RQStyle.ZeroStyle;b[0].style.height=null;var c=eval(this.options.KnockoutObjectName),d=this.element.parents("div").filter(".rq-ganttChart");this.$Area=$(".rq-gc-chartArea-div",d);this.$tableBody=this.getGanttTableParent(d);var e=this.$Area.height();this.bindDataCollectionChanged=function(){a.options.Data&&a.options.Data.CollectionChanged.subscribe(function(d,e){"insert"==d.type&&a.InsertRow(a.element,e,b,a.options.ViewWidth);"remove"==d.type&&a.RemoveRow(e,b);c&&a.applayBindings(c,
a.element[0])})};this.bindDataCollectionChanged();null!=a.options.Data&&(a.Refresh(a.element,a.options.Data,b,a.options.ViewWidth,e),this._enableAlternativeRowBackground());$(d).bind("ganttchartsourceupdated",function(a,b){$.extend(this.options,b.options);this.options.Data=b.options.FlatItemsSource;this.options.ParentTaskTemplate=b.options.ParentTaskItemTemplate;this.options.TaskTemplate=b.options.TaskItemTemplate;this.VirtualizationID=0;this.totalItems=[];this.listItems=[];this._destroy();this.bindDataCollectionChanged();
this.renderBars(b)}.bind(this));$(d).bind("ganttchartrefreshui.RowsRefreshUI",function(b,c){!0==a.options.GanttChart.options.ResizeToFit&&(width=a.options.GanttChart.element.width(),a.$chartTableBody.width(width));!0==c.ForceToReDrawRows&&(this._cachedRowCont.empty(),this._cachedRows={},a.renderBars(c))}.bind(this));$(window).resize(function(){e=$(".rq-gc-chartArea-div",d).height();a.options.UseChartVirtualization&&(null!=a.options.Data&&a.Refresh(a.element,a.options.Data,b,a.options.ViewWidth,e),
a._enableAlternativeRowBackground())});!1==this.options.IsPrinting&&this.options.FlexyGantt.VerticalScrollEvent.subscribe(function(){this.options.UseChartVirtualization&&(null!=this.options.Data&&this.Refresh(this.element,this.options.Data,b,this.options.ViewWidth,e),this._enableAlternativeRowBackground())},this);this.renderBars=function(c){this.$chartTableBody.empty();null!=c.options.FlatItemsSource&&a.Refresh(a.element,c.options.FlatItemsSource,b,c.options.ViewWidth,e);a.knockoutObjectName&&a.applayBindings(a.knockoutObjectName,
a.element[0]);this._enableAlternativeRowBackground()};this.element.data("GanttRows",this)},applayBindings:function(a,b){ko.applyBindingsToDescendants(a,b)},_enableAlternativeRowBackground:function(){if(!0==this.options.EnableAlternativeRowBackground){var a=this;$("td",this.table).removeClass("rq-grid-alternative-background");$("td",this.table).addClass(function(){$(this);var b=!1;a.options.IsPrinting?b=0==this.parentElement.rowIndex%2:(b=this.parentElement["data-grid-item"].TableRow(),b=null==b?0==
this.parentElement.rowIndex%2:0==b.index()%2);if(!0==b)return"rq-grid-alternative-background"})}},_cachedRowCont:$("<div id='cache'></div>"),_cachedRows:{},getGanttTableHeight:function(){return $("div.grid-body-actualContent",this.$tableBody).height()},Refresh:function(a,b,c,d,e){this.cachedTaskListControlInstance=[];if(this.options.UseChartVirtualization){var f=this.$tableBody.scrollTop();this._cachedRowCont.append(this.$chartTableBody.children());e=this.$Area.height();var g=this.getGanttTableHeight();
e=Math.min(g,e);var g=Math.floor(f/this.itemHeight),h=0,f=f%this.itemHeight;c[0].style.setProperty?c[0].style.setProperty("margin-top",-f+"px","important"):c[0].style.setAttribute("margin-top",-f+"px","important");for(this.processedItems={};h*this.itemHeight<e;){f=Math.max(g+h,0);if(f>=b.length)break;var k=this.getItemAtIndex(f,b,d);k[0]["data-grid-item"]=b[f];this.totalItems.push(k);this.processedItems[f.toString()]=k;this.$chartTableBody.append(k);h++}this.cleanupListItems(!0)}else{e=document.createDocumentFragment();
for(g=0;g<b.length;g++)h=b[g],f=$("<tr style='height:"+this.options.RowHeight+"px;width:100%' > <td id='ChartRow' class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-1)+"px;width:100%;border-top-width: 0;border-right-width: 0;'> </td> </tr>"),k=f.find("td"),k[0].DataContext=h,!1==this.options.IsPrinting&&h.ChartRow(f),f[0]["data-grid-item"]=b[g],this.CreateTaskListControl(k,h,f),e.appendChild(f[0]),this.currentUniqueRowSuffix++,!1==this.options.IsPrinting&&h.IsSelected()&&f.addClass("rq-row-selected "+
window.radiantQclasses.selectionClass);this.$chartTableBody.append(e)}c.width(d);a.css("height","auto").append(c);c.css("height","auto");if(!this.options.UseChartVirtualization&&(a.css("height",this.$tableBody[0].clientHeight),this.options.TimeIndicatorLineOption))for(a=0;a<this.cachedTaskListControlInstance.length;a++)this.cachedTaskListControlInstance[a].refreshVerticalLine();a="#"+this.options.GanttChart.$GanttChart[0].id;a=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(a+" .rq-gc-taskbar, "+a+
" .taskbar-style",".chartRowsContainer");b=0==$("#"+this.options.GanttChart.$GanttChart[0].id+" .rq-fg-gc-row").length?new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.options.GanttChart.$GanttChart[0].id+" .FlexyChartRow",".chartRowsContainer"):new RadiantQ.Gantt.ContextMenuImpl.ContextMenu("#"+this.options.GanttChart.$GanttChart[0].id+" .rq-fg-gc-row",".chartRowsContainer");this.options.GanttChart.options.Parent.TaskContextMenu=a;this.options.GanttChart.options.Parent.RowContextMenu=b;this.options.KnockoutObjectName&&
(a=eval(this.options.KnockoutObjectName),this.applayBindings(a,this.element[0]));this._enableAlternativeRowBackground()},getItemAtIndex:function(a,b,c){if(0<=a&&a<this.options.Data.length){var d=this.options.Data[a],e,f=a.toString();if(void 0!=this._cachedRows[d._guid])e=this._cachedRows[d._guid];else{e=$("<tr style='height:"+this.options.RowHeight+"px;width:100%' > <td name="+b[a]._data.TName+" class='FlexyChartRow rq-fg-gc-row' style='height:"+this.options.RowHeight+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>");
var g=e.find("td");g.width(c);g[0].DataContext=b[a];!1==this.options.IsPrinting&&b[a].ChartRow(e);this.CreateTaskListControl(g,b[a],e);e[0]["data-grid-item"]=b[a];this.currentUniqueRowSuffix++;!1==this.options.IsPrinting&&b[a].IsSelected()&&e.addClass("rq-row-selected "+window.radiantQclasses.selectionClass);if(null===this.listItems[f]||void 0===this.listItems[f])this.listItems[f]=e;this._cachedRows[d._guid]=e}e.attr("list-index",a);return e}},cleanupListItems:function(a){var b,c=[];if(this.processedItems)for(b in this.processedItems)c.push(this.processedItems[b]);
this.totalItems=c;!0!==a&&this.ScrollBar.fadeTo(300,0)},InsertRow:function(a,b,c,d){for(a=0;a<b.items.length;a++){var e=null,e=$("<tr style='height:"+this.options.RowHeight+"px;width:100%' > <td class='FlexyChartRow rq-fg-gc-row' style='height:"+(this.options.RowHeight-1)+"px;width:100%;border-top-width: 0; border-right-width: 0;'> </td> </tr>"),f=e.find("td");f[0].DataContext=b.items[a];b.items[a].ChartRow(e);e[0]["data-grid-item"]=b.items[a];this.options.UseChartVirtualization?this.Refresh(this.element,
this.options.Data,c,this.options.ViewWidth):(this.CreateTaskListControl(f,b.items[a],e),0==b.index?c.find("tr").eq(0).before(e[0]):c.find("tr").eq(b.index-1).after(e[0]));f.width(d);this.currentUniqueRowSuffix++;!1==this.options.IsPrinting&&b.items[a].IsSelected()&&e.addClass("rq-row-selected "+window.radiantQclasses.selectionClass)}this._enableAlternativeRowBackground()},RemoveRow:function(a,b){if(this.options.UseChartVirtualization){this.listItems.splice(a.index,1);0<this.itemindex?this.totalItems.splice(a.index-
this.itemindex-1,1):this.totalItems.splice(a.index-this.itemindex,1);var c=a.items[0];this._cachedRows[c._guid]&&delete this._cachedRows[c._guid];this.Refresh(this.element,this.options.Data,b,this.options.ViewWidth)}else c=b.find("tr").eq(a.index),c.remove(),$(b).css("height",parseInt($(b).css("height"))-parseInt($(c).css("height")));this._enableAlternativeRowBackground()},_destroy:function(){var a=this.element.parents("div").filter(".rq-ganttChart");$(a).unbind("ganttchartrefreshui.RowsRefreshUI");
$.observable(this.options.Data).unbind(this.eventNamespace);this._cachedRows={};this._cachedRowCont.empty();this.element.empty()}};RadiantQ.Gantt.Widget.GanttRows=ganttRows;
var timespinner={options:{step:1,page:60,change:null,start:new Date,minuteincrement:30,current:null},TimeFormat:/^([0-9])(:[0-5]\d) [APap][mM]$/,_parse:function(a){if("string"===typeof a&&Number(a)===a){a=this.GetHourAndMinute(a);var b=this.options.start;return new Date(b.getFullYear(),b.getMonth(),b.getDate(),+a.hour,+a.minute,0,0)}return this.options.start},disable:function(a){a?(this.element.prop("disabled",a),this.buttons.button("disable")):(this.element.prop("disabled",a),this.buttons.button("enable"))},
_format:function(a){var b=Date.CultureInfo.formatPatterns.shortTime;this.options.current=a.toString(b);return(new Date(a)).toString(b)},_increment:function(a,b){this.options.start=a.addMinutes(this.options.minuteincrement*b);return this.options.start},_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(a=this._format(c)));this.element.val(a);this._refresh()},getTime:function(){return this.element.val().toString()},
getRoundDate:function(a){var b=this.GetHourAndMinute(this._format(this.options.start));return new Date(a.getFullYear(),a.getMonth(),a.getDate(),+b.hour,+b.minute,0,0)},setTime:function(a){this.options.start=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0,0);this._refresh();this._value(a)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);"string"===typeof c||-1==a&&0==c.totalMilliseconds||(c=this._increment(c,a));this.spinning&&!1===this._trigger("spin",
b,{value:c})||(this._value(c,!0),this.counter++)},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault();this.element.val()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.options.current=this.element.val()},blur:function(a){this._refresh();this.uiSpinner.removeClass("ui-state-active");var b=this.element.val(),c=!1;if(!0==this.TimeFormat.test(b)){var c=!0,d=this.GetHourAndMinute(b),e=this.options.start;this.options.start=new Date(e.getFullYear(),
e.getMonth(),e.getDate(),+d.hour,+d.minute,0,0)}!1==c&&this.element.val(this.options.current);this.options.current!==b&&this._trigger("change",a)}},GetHourAndMinute:function(a){var b=a.split(":");a=a.split(" ")[1];var c=b[1].split(" ");return a&&"PM"==a.toString()&&"12"!=b[0].toString()?{hour:(parseInt(b[0])+12).toString(),minute:c[0]}:{hour:b[0],minute:c[0]}},_destroy:function(){$.ui.spinner.prototype._destroy.apply(this,arguments);this._off(this._events)}};RadiantQ.Gantt.Widget.timespinner=timespinner;
var durationPicker={options:{minutes:30},TimeSapanWithDay:/^(\d*.\d{2}:\d{2}:\d{2})$/,TimeSapanWithoutday:/^(\d{2}:\d{2}:\d{2})$/,_create:function(){this.element.addClass("radiantq.DurationPicker");$.ui.spinner.prototype._create.apply(this,arguments)},_parse:function(a){return"string"===typeof a&&(this.TimeSapanWithDay.test(a)||this.TimeSapanWithoutday.test(a))?RQTimeSpan.parse(a):a},_increment:function(a,b){var c=RQTimeSpan.Zero_M();0==a&&(a=c);var d=a.addMinutes(this.options.minutes*b);return d<
c?c:d},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(a=this._format(c)));this.element.val(a);this._refresh()},GetDuration:function(){return this._parse(this.element.val())},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);"string"===typeof c||-1==a&&0==c.totalMilliseconds_M()||(c=this._increment(c,a));this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c,!0),this.counter++)},disable:function(a){a?(this.element.prop("disabled",a),this.buttons.button("disable")):
(this.element.prop("disabled",a),this.buttons.button("enable"))},_events:{click:function(a){""==this.element.val()&&this.element.val("00:00:00")},keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active");this.previous=this.element.val()},blur:function(a){this._refresh();this.uiSpinner.removeClass("ui-state-active");var b=this.element.val(),c=!1;!0==this.TimeSapanWithDay.test(b)&&!1==this.TimeSapanWithoutday.test(b)?
c=!0:!1==this.TimeSapanWithDay.test(b)&&!0==this.TimeSapanWithoutday.test(b)&&(c=!0);!1==c&&this.element.val(this.previous);this.previous!==b&&this._trigger("change",a)},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(a){a.preventDefault();this.document[0].activeElement!==
this.element[0]&&this.element.focus();!1!==this._start(a)&&this._repeat(null,$(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){if($(a.currentTarget).hasClass("ui-state-active")){if(!1===this._start(a))return!1;this._repeat(null,$(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)}},"mouseleave .ui-spinner-button":"_stop"},_format:function(a){return a.toString()}};RadiantQ.Gantt.Widget.DurationPicker=durationPicker;
var dateTimePicker={options:{setdate:null,dateformat:"mm-dd-yy",minuteincrement:30},wrapper:null,timePicker:null,_create:function(){var a=this;this.element.data("DateTimePicker",this);var b=null,c=0;this.element.addClass("datetimepicker");this.wrapper=$('<div class="datetimepicker wrapper" style="height:'+this.element.height()+'px"></div>');this.timePicker=$('<input id="time" class="spinner" value="00:00 AM"/>');this.element.wrap(this.wrapper);this.wrapper=this.element.parent();this.wrapper.append(this.timePicker);
var d=this.timePicker;this.element.datepicker({dateFormat:this.options.dateformat,onSelect:function(){b=c=$(this).datepicker("getDate")},beforeShow:function(b,c){$(document).bind("mousedown",$.proxy(a.docMouseDown,a));a.wasOpen=!0}}).on("change",function(a){RegExp(/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/).test(this.value)||($(this).datepicker("setDate",new Date(b)),a.preventDefault())});a=this;d.timespinner({start:new Date(0,0,0,0,0,0,0),minuteincrement:a.options.minuteincrement});this.RefreshWidthandHeight()},
docMouseDown:function(a){if(!0==this.wasOpen){var b=$(a.target).parents("div.datetimepicker"),c=!1;0!=b.length&&(c=b[0]==this.element.parent()[0]);!1==c&&$(a.target).parents(".ui-datepicker")[0]!==this.element.data("datepicker").dpDiv[0]&&(this.wrapper.change(),this.element.datepicker("hide"),$(document).unbind("mousedown",$.proxy(this.docMouseDown,this)),this.wasOpen=!1)}},wasOpen:!1,GetDate:function(){var a=this.element.datepicker("getDate");return this.timePicker.timespinner("getRoundDate",a)},
setDate:function(a){this.element.datepicker("setDate",new Date(a));this.timePicker.timespinner("setTime",new Date(a))},disable:function(a){this.element.prop("disabled",a);this.timePicker.timespinner("disable",a)},widget:function(){return this.element.parent()},RefreshWidthandHeight:function(){var a=this.element,b=this.timePicker.timespinner("widget");a.css({margin:"0px"});b.css("height",a.height()+(a.outerHeight()-a.height()-1)).removeClass("ui-corner-all");b.css({"margin-top":"0px","vertical-align":"top"});
this.wrapper.css("width",a.width()+"px");var c=b.find("input"),b=b.find("span");a.css("width","46%");var d=48*this.wrapper.width()/100;b.css({width:d+"px"});c.css({width:b.width(),margin:"0px","vertical-align":"top","font-size":a.css("font-size"),"font-family":a.css("font-family"),height:this.element.height()+2})},_destroy:function(){$.Widget.prototype._destroy.apply(this,arguments);$(document).unbind("mousedown",$.proxy(this.docMouseDown,this));this.element.unwrap();this.timePicker.remove()}};
RadiantQ.Gantt.Widget.DateTimePicker=dateTimePicker;$.fn.longPress=function(a,b){var c=null;this.bind("touchstart",function(d){c=setTimeout(function(){b.call(a,d)},600)});this.bind("touchmove",function(){clearTimeout(c)});this.bind("touchend",function(a){clearTimeout(c)})};var editor=$.ui.editor={};editor.editors={};
var rqeditor={options:{editor:null,editorOptions:null,context:null,cancel:null,submit:null,editorElement:null,items:null,property:null,editEvent:null},datePickerevents:function(a){this.wasOpen=!1;var b=this;a.bind("focusin.datePickerevents",function(){b.wasOpen=!0});a.bind("change.datePickerevents",function(){b.wasOpen=!1});var c=$(document);c.bind("mousedown.datePickerevents",$.proxy(function(b){!0==this.wasOpen&&$(b.target).parents(".ui-datepicker")[0]!==a.data("datepicker").dpDiv[0]&&b.target!==
a[0]&&(a.change(),this.wasOpen=!1)},this));c.bind("blur.datePickerevents",function(){a.datepicker("hide")})},unbindDatePickerevents:function(a){a.unbind("focusin.datePickerevents");a.unbind("change.datePickerevents");a=$(document);a.bind("mousedown.datePickerevents");a.bind("blur.datePickerevents")},_canBeginEdit:function(a,b,c){return"function"==typeof this.options.canBeginEdit?this.options.canBeginEdit(a,b,c):a.IsSelected()},refreshEdit:function(a,b){if(3!=a.which){var c=$(a.target),d=$(a.target).closest(this.options.items);
if(!0==c.hasClass("rq-grid-expand-arrow")||!0==c.hasClass("rq-grid-collapse-arrow"))return!1;this.editCell(d,b,a)}},editCell:function(a,b,c){a=a||null;b=b||!1;if(null!=a&&(a=$(a),a.hasClass("gridcols"))){var d=this.options.property,e=this.options.context.grid.options.columns[a[0].cellIndex];if(!1!=e.iseditable){var f=a.closest("tr")[0]["data-grid-item"];if(!0==f.IsParent&&("ActivityName"!=d&&"Assignments"!=d&&(void 0==e.isparentcelleditable||!1==e.isparentcelleditable)||!1==e.isparentcelleditable)||
!0==f.IsReadOnly&&"ActivityName"!=d)return!1;this.input.is(":visible")||!0!=this._canBeginEdit(f,c,{data:f,grid:this.grid,property:d,target:a})&&!0!=b||c&&c.ctrlKey||this.start(c)}}},_create:function(){this.inner=this.element.wrapInner("<div class='editor-wrapper'></div>").children();this.element.data("RQeditor",this);this.mouseDownCallBack=$.proxy(this.refreshEdit,this);this.element.bind(this.options.editEvent,this.mouseDownCallBack);this.element.longPress(this,this.refreshEdit);void 0==this.options.editorElement&&
(this.options.editorElement="input");this.input=this.inputWrapper=$("<"+this.options.editorElement+" class='editor'>");this.inputWrapper.appendTo(this.element);this.input.width(this.inner.width());this.options.editor in $.ui.editor.editors&&(this.inputWrapper=$.ui.editor.editors[this.options.editor](this.input,this.options.editorOptions));this.input.hasClass("hasDatepicker");this.input.hasClass("datetimepicker");this.input.hasClass("hasDatepicker")||this.input.hasClass("datetimepicker wrapper")},
focusin:function(a){a.preventDefault();a.stopPropagation();clearTimeout(this.timer);clearTimeout(this.Foucusouttimer);return!1},hasPopUp:function(a){var b=!1;if(a.hasClass("hasDatepicker")||a.hasClass("datetimepicker wrapper")||a.hasClass("ui-autocomplete-input"))b=!0;return b},focusout:function(a){a.stopPropagation();!1==this.hasPopUp(this.input)&&this.submit(a)},start:function(a){var b=this.input.hasClass("hasDatepicker"),c=this.input.hasClass("datetimepicker");!0==b&&!1==c&&this.datePickerevents(this.input);
!1!=this._trigger("beforeStart",a)?(this.inner.hide(),this.inputWrapper.show(),this._trigger("start",a)):this.cancel();setTimeout($.proxy(function(){!this.input.attr("readonly")&&this.input.is("input")?this.input.focus():(this.inputWrapper.focus(),this.inputWrapper.trigger("editStart"))},this),0);this.subscribeEvents()},change:function(a){this.submit(a)},keydown:function(a){a.keyCode!==$.ui.keyCode.ENTER&&a.keyCode!==$.ui.keyCode.NUMPAD_ENTER||a.preventDefault()},keyup:function(a){a.keyCode===$.ui.keyCode.ENTER||
a.keyCode===$.ui.keyCode.NUMPAD_ENTER?(this.submit(a),a=this.element.index(),this.element.parent("tr").next().find("td:nth-child("+(a+1)+")").trigger("mousedown",!0)):a.keyCode===$.ui.keyCode.ESCAPE&&this.cancel(a)},subscribeEvents:function(){this.focusCallBack=$.proxy(this.focusin,this);this.focusoutCallBack=$.proxy(this.focusout,this);this.changeCallBack=$.proxy(this.change,this);this.keydownCallBack=$.proxy(this.keydown,this);this.keyupCallBack=$.proxy(this.keyup,this);this.inputWrapper.bind("focusin",
this.focusCallBack);this.inputWrapper.bind("focusout",this.focusoutCallBack);this.inputWrapper.bind("change",this.changeCallBack);this.inputWrapper.bind("keydown",this.keydownCallBack);this.inputWrapper.bind("keyup",this.keyupCallBack)},unsubscribeEvents:function(){this.inputWrapper.unbind("focusin",this.focusCallBack);this.inputWrapper.unbind("focusout",this.focusoutCallBack);this.inputWrapper.unbind("change",this.changeCallBack);this.inputWrapper.unbind("keydown",this.keydownCallBack);this.inputWrapper.unbind("keyup",
this.keyupCallBack)},_hide:function(a){!0==this.input.is(":focus")&&this.input.blur();!0==this.input.hasClass("hasDatepicker")&&this.input.datepicker("hide");this.inputWrapper.hide();this.inner.show()},submit:function(a){var b=this.input.hasClass("hasDatepicker"),c=this.input.hasClass("datetimepicker");!0==b&&!1==c&&this.unbindDatePickerevents(this.input);!0==this.input.is(":visible")&&(b=this.input.val(),c={value:b},this._hide(),!1!==this._trigger("submit",a,c)&&this.inner.text(b));this.unsubscribeEvents()},
cancel:function(a){this._hide();this._trigger("cancel",a)},_setOption:function(a,b){var c=this.options[a];$.Widget.prototype._setOption.apply(this,arguments);"editEvent"==a&&(this._off(this.element,c),this.events={},this.events[this.options.editEvent]=this.refreshEdit,this._on(this.events))},destroy:function(){var a=this.input.hasClass("hasDatepicker"),b=this.input.hasClass("datetimepicker");!0==a&&!1==b&&this.unbindDatePickerevents(this.input);this.unsubscribeEvents();this.element.unbind(this.options.editEvent,
this.mouseDownCallBack);this._hide();this.input.remove();this.element.removeData("RQeditor");$.Widget.prototype.destroy.call(this)}};RadiantQ.Gantt.Widget.RQeditor=rqeditor;
var grideditor={options:{editor:function(a,b){return b.options.columns[a[0].cellIndex].editor},editorOptions:function(a,b){return b.options.columns[a[0].cellIndex].editorOptions},items:"td",editEvent:"mousedown"},grid:null,events:null,_create:function(){this.grid=this.element.data("GanttTable");null==this.grid&&(this.grid=this.element.data("FlexyTable"));$.radiantq.DateTimePicker||alert("Gantt supports DateTime editing, please include the DateTimePicker.js");var a=this.options.editEvent;this.events=
{};this.events[a]=this.refreshEdit;this.events.keydown=this.keyDownEvent;this._on(this.events);this.element.longPress(this,this.refreshEdit)},keyDownEvent:function(a){13==a.which&&a.preventDefault()},innerWidghts:[],_canBeginEdit:function(a,b,c){return"function"==typeof this.options.canBeginEdit?this.options.canBeginEdit(a,b,c):a.IsSelected()},refreshEdit:function(a,b){if(3!=a.which){var c=$(a.target);if(!0==c.hasClass("rq-grid-expand-arrow")||!0==c.hasClass("rq-grid-collapse-arrow"))return!1;c=c.closest(this.options.items);
if(!c.length)return!1;this.editCell(c,b,a)}},editCell:function(a,b,c){a=a||null;b=b||!1;if(null!=a){var d=$(a);if(d.hasClass("gridcols")){var e=this;a=this.grid.options.columns[d[0].cellIndex];if("_"!==a.property&&"tracker"!==a.property){var f=a.property;this.colInfo=a;if(!1!=a.iseditable){var g=d.closest("tr")[0]["data-grid-item"];if(!(!0!=this._canBeginEdit(g,c,{data:g,grid:this.grid,property:f,target:d})&&!b||c&&c.ctrlKey)){if(!0==g.IsParent&&("ActivityName"!=f&&"Assignments"!=f&&(void 0==a.isparentcelleditable||
!1==a.isparentcelleditable)||!1==a.isparentcelleditable)||!0==g.IsReadOnly&&"ActivityName"!=f)return!1;"ID"!=f&&"resource"!=f&&"id"!=f&&(d.length&&!d.data("RQeditor")?(d.RQeditor({editEvent:this.options.editEvent,editor:this.options.editor(d,this.grid),editorOptions:this.options.editorOptions(d,this.grid),editorElement:a.editorElement,context:this,items:this.options.items,property:f,canBeginEdit:this.options.canBeginEdit,beforeStart:function(a,b){var c=d.closest("tr")[0]["data-grid-item"];return e._trigger("beforeStart",
a,{data:c,grid:e.grid,property:e.grid.options.columns[d[0].cellIndex].property,target:d})},submit:function(a,b){var c=d.closest("tr")[0]["data-grid-item"],f=e.grid.options.columns[d[0].cellIndex].property,g=e.grid.options.columns[d[0].cellIndex].type;if(!1!==e._trigger("submit",a,{data:c,property:f,value:b.value})){var q=$("div.rq-grid-expander-text",this);if(0!=q.length)return q.html(b.value),!1;q=b.value.split("-");1<q.length&&(b.value=new Date(q[2],q[0],q[1],0,0,0,0));"Date"==g&&(b.value=Date.parse(b.value));
"DateTime"==g&&(q=$(a.currentTarget).find("input.editor"),b.value=q.data("DateTimePicker").GetDate());"TimeSpan"==g&&(b.value=RQTimeSpan.parse(b.value));"number"==g&&(isNaN(b.value)||-1==b.value.toString().indexOf(".")?(b.value=parseInt(b.value),isNaN(b.value)&&(b.value=0)):b.value=parseFloat(b.value));"StartTime"==f&&c.activity.PreferredStartTime_M(b.value);"Assignments"==f&&(g=$(a.currentTarget).find(".editor"),(g=g.data("radiantq-resourcePicker")||g.data("ResourcePicker"))?(q=g.selectedItems,!0==
g.IsChanged()&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments(q,c.activity.Assignments_M())):(g=$("option:selected",b.input).data("boundedObject"),null!=g&&RadiantQ.Gantt.ValueConverters.ConverterUtils.ConvertSelectedResourcesToAssignments([g],c.activity.Assignments_M())));"PredecessorIndexString"===f?e.setNestedValue(c,f,b.value):"Assignments"!=f&&e.setNestedValue(c.activity,f,b.value)}return!1},cancel:function(){e.grid.element.focus()},start:function(a,b){var c=
d.closest("tr")[0]["data-grid-item"],f=e.grid.options.columns[d[0].cellIndex].property,g=e.grid.options.columns[d[0].cellIndex].type,q=d.find(".editor");if(!1!==e._trigger("start",a,{data:c,grid:e.grid,property:f,input:q})){var n=e.getNestedValue(c.activity,f);if("Date"==g)q.datepicker("setDate",n);else if("DateTime"==g)q.DateTimePicker("setDate",n);else if("string"==$.type(n)&&"number"==g)""==n&&q.val(0);else if("Assignments"==f)if(q.data("ResourcePicker")){for(var n=[],r=c.activity.Assignments_M(),
f=0;f<r.length;f++)g=r[f],n.push(g._resource);q.ResourcePicker({source:c.activity.Model.GanttResources_M(),SelectedResources:n})}else{if("Assignments"==f)for(q.empty(),n=c.activity.Model.ResourceNameBinding.Property,c=c.activity.Model.GanttResources_M(),f=0;f<c.length;f++)g=c[f],r=$("<option>"+g._boundObj[n]+"</option>"),r.data("boundedObject",g),q.append(r)}else q.val(e.getNestedValue(c.activity,f))}}}),this.innerWidghts.push(d),d.data("RQeditor")&&d.data("RQeditor").start(c)):d.data("RQeditor").editCell(d,
b))}}}}}},getNestedValue:function(a,b){for(var c=b.split("."),d=0;d<c.length;d++)"undefined"!=typeof a&&(a=a[c[d]+"_M"]?a[c[d]+"_M"]():a[c[d]]);return!0==$.isFunction(a)?a():a||""},setNestedValue:function(a,b,c){b=b.split(".");previousLevel=b.length-1;for(var d=0;d<previousLevel;d++)"undefined"!=typeof a&&(a=a[b[d]+"_M"]?a[b[d]+"_M"]():a[b[d]]);if(!0==$.isFunction(a[b[previousLevel]]))a[b[previousLevel]](c);else if((a[b[previousLevel]+"_M"]?a[b[previousLevel]+"_M"]():a[b[previousLevel]])!=c)if(a[b[previousLevel]+
"_M"])a[b[previousLevel]+"_M"](c);else a[b[previousLevel]]=c},_setOption:function(a,b){var c=this.options[a];$.Widget.prototype._setOption.apply(this,arguments);"editEvent"==a&&(this._off(this.element,c),this.events={},this.events[this.options.editEvent]=this.refreshEdit,this._on(this.events));for(c=0;c<this.innerWidghts.length;c++){var d=this.innerWidghts[c];d.data("RQeditor")&&d.RQeditor({editEvent:this.options.editEvent})}},_destroy:function(){}};RadiantQ.Gantt.Widget.gridEditor=grideditor;
var resourcePicker={version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},SelectedResources:null,delay:0,source:null,minLength:0},_create:function(){this.element.attr("readonly",!0);this._draw();this._on(this._events);this._refresh();this.selectedItems=[];this.createAutoComplet();this.element.data("ResourcePicker",this);this.element.addClass("ResourcePicker");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},
selectedItems:null,changedItems:null,createAutoComplet:function(){var a=this;this.updateSelectedItem();this.options.close=function(b,c){var d=$(this);a.updateDispalyText(d)};this.element.autocomplete(this.options).data("ui-autocomplete")._renderItem=function(b,c){var d=$("<div class='rq-grid-resourcepicker-item' ></div>").data("item",c).appendTo(b),e=$("<input type='checkbox'/>");-1!=a.selectedItems.indexOf(c)&&(e[0].checked=!0);e.bind("change",a,a.selected);d.append(e).append(c.toString());return d};
this.element.data("ui-autocomplete")._normalize=function(a){return a}},disable:function(a){a?this.element.autocomplete("disable"):this.element.autocomplete("enable")},updateDispalyText:function(){for(var a=this.element,b=this.selectedItems,c="",d=0;d<b.length;d++)c+=b[d].toString()+",";a.val(c.replace(/\,$/,""))},updateSelectedItem:function(){var a=this.options.SelectedResources;if(null!=a)for(var b=0;b<a.length;b++)this.selectedItems.push(a[b]);this.updateDispalyText()},selected:function(a,b){var c=
a.data,d=$(this).closest(".rq-grid-resourcepicker-item").data("item"),e=-1,f=-1;!0==this.checked?(f=c.changedItems.indexOf(d),c.selectedItems.push(d),-1!=f?c.changedItems.splice(f,1):c.changedItems.push(d)):(e=a.data.selectedItems.indexOf(d),f=a.data.changedItems.indexOf(d),a.data.selectedItems.splice(e,1),-1!=f?a.data.changedItems.splice(f,1):a.data.changedItems.push(d));a.data.updateDispalyText()},IsChanged:function(){return 0<this.changedItems.length},close:function(){this.element.data().uiAutocomplete.close()},
wasOpen:null,_events:{"mousedown .ui-spinner-button":function(a){this.wasOpen=this.element.autocomplete("widget").is(":visible")},"click .ui-spinner-button":function(){var a=this.element;this.element.data();this.wasOpen?this.close():a.data().uiAutocomplete.search("")}},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append($(this._buttonHtml()).css("height","100%"));this.element.attr("role","spinbutton");
this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");var b=this;this.uiSpinner.bind("editStart",function(){b.triggerCloseAndChangeCallback||(b.triggerCloseAndChangeCallback=$.proxy(b.triggerCloseAndChange,b),b.document.bind("mousedown",b.triggerCloseAndChangeCallback))});this.options.disabled&&this.disable()},triggerCloseAndChange:function(a){var b=this.element.data().uiAutocomplete.menu.element[0];a.target===this.element[0]||a.target===b||$.contains(b,
a.target)||$.contains(this.uiSpinner[0],a.target)||(this.close(),this.triggerCloseAndChangeCallback&&(this.document.unbind("mousedown",this.triggerCloseAndChangeCallback),this.triggerCloseAndChangeCallback=null),this.element.change())},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},
_setOption:function(a,b){$.Widget.prototype._setOption.apply(this,arguments);switch(a){case "SelectedResources":this.updateSelectedItem();break;case "source":$.isArray(arguments[1]),array=arguments[1],source=function(a,b){b($.ui.autocomplete.filter(array,a.term))},this.element.autocomplete("option","source",source),this.changedItems=[],this.selectedItems=[]}},_refresh:function(){},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.uiSpinner.replaceWith(this.element)},widget:function(){return this.uiSpinner}};RadiantQ.Gantt.Widget.ResourcePicker=resourcePicker;
(function(){var a=null,b=null,c=!1,d=!1;RadiantQ.Gantt.RowDragDropTracker=function(e){var f=null,g=null,h=null,k=!1,l=!1,p=!1,m=!1,q=!1,n=null,r=!1,t=e,s=t.options.Parent,u=!1,w=null,v=t.element.data("GanttTableBase"),x=null,y=[],z=t.element;_enableDropAsChild=s.options.EnableDropAsChild;_destIndex=_topSelectedIndex=null;_isRowHeaderClicked=_inChildRows=_isInLastRow=!1;_isRowsDraggable=!0;_timer=null;this.Source=e;var B=null;z.bind("mousedown.popupHandler",function(a){!1==l&&_rowHeaderMouseDown(a)});
z.bind("touchstart.popupHandler",function(a){!1==l&&_rowHeaderMouseDown(a)});_rowHeaderMouseDown=function(a){$(a.target).hasClass("rq-grid-column-0")?(u||(u=!0,_createPopup()),_isRowHeaderClicked=!0):_isRowHeaderClicked=!1};s.element.bind("ganttcontrolselectionchanged.RowDragDropTracker",function(a,b){_initialize(a,b)});s.element.bind("flexyganttselectionchanged.RowDragDropTracker",function(a,b){_initialize(a,b)});_initialize=function(a,b){s.options.CanUserReorderRows&&!s._isReadOnly&&0!=t.element.width()&&
0!=t.element.height()&&(l||0==s.SelectedItems.length?null!=_timer&&clearTimeout(_timer):(null!=_timer&&clearTimeout(_timer),_timer=setTimeout(function(){_updatePopup(s.SelectedItems);null!=n&&$(n).unbind(".rowHeaderMouseEvents");null!=s.SelectedItems[0].TableRow()&&(n=s.SelectedItems[0].TableRow()[0].firstChild,$(n).bind("mouseenter.rowHeaderMouseEvents",function(){!1!=_isRowsDraggable&&(null!=_topSelectedIndex&&void 0!=_topSelectedIndex?l||f.css("display","block"):f.css("display","block"))}).bind("mouseleave.rowHeaderMouseEvents",
function(){f.css("display","none")}).dblclick(function(a){a.preventDefault();a.stopPropagation()}),0<s.SelectedItems.length&&_sourceSelectionChanged(null,s.SelectedItems))}.bind(this),0)))};_updatePopup=function(a){u||(u=!0,_createPopup())};_createPopup=function(){f=$('<div class="handleCue rq-dnd-handleCue"></div>');g=$('<div class="avoidCue rq-dnd-avoidCue" style="align:center; pointer-events:none;"></div>');$gridBody=$(".ui-grid-body",s.element);h=$('<div style="display:none; pointer-events:none; width:100%; border:1.2px solid black; position:absolute;"></div>');
$gridBody.prepend(h);$gridBody.append(g)};_sourceSelectionChanged=function(a,b){if(b&&!l){$(".ui-grid-body",s.element);y=b;var c=y[0].TableRow();_topSelectedIndex=s.options.UseVirtualization?c[0]["data-grid-item"].Activity_M()._displayIndex:c[0].rowIndex;-1!=_topSelectedIndex&&((_isRowsDraggable=_raiseCanDrag(_topSelectedIndex))&&_isRowHeaderClicked?f.css("display","block"):f.css("display","none"));$itempeer=B=c;$(n).append(f);f.unbind(".handleCueMouseDown");f.bind("mousedown.handleCueMouseDown",
function(a){_handleCueMouseDown(a)});f.bind("touchstart.handleCueMouseDown",function(a){_handleCueMouseDown(a)})}};_handleCueMouseDown=function(a){a=$itempeer.position().top;h.css("top",a);c=d=_isRowsDraggable=l=!0;x=s.element.data("GanttRowselectable");_raiseBeforeDragStart();z.bind("mouseenter.RowDragDropTracker",function(a){_isRowsDraggable&&(c=!0,g.css("display","none"),p?h.css("display","none"):h.css("display","block"))});z.bind("mouseleave.RowDragDropTracker",function(a){if(_isRowsDraggable){c=
!1;var b=$(a.target).closest("tr"),d=z[0].offsetTop+z.height();a.pageY>d||0==b.length?g.css({top:d}):g.css({top:b.position().top+4});h.css("display","none");g.css("display","block")}});z.bind("mousemove.RowDragDropTracker",function(a){_handleCueMouseMove(a)});z.bind("touchmove.RowDragDropTracker",function(a){_clearAutoScrollTimers();c=!0;var b;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches)b=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");
b.hasClass("rq-grid-row")?_handleCueMouseMove(a):(c=!1,g.css({top:B.position().top+4}),h.css("display","none"),g.css("display","block"));a.preventDefault();a.stopPropagation()});$(document).unbind(".RowDragDropTracker");$(document).bind("mouseup.RowDragDropTracker",function(a){l=!1;_clearAutoScrollTimers();_handleCueMouseUp()});$(document).bind("touchend.RowDragDropTracker",function(a){window.console&&console.log("end event");l=!1;_clearAutoScrollTimers();_handleCueMouseUp();c=!1});$(document).bind("keyup.RowDragDropTracker",
function(a){_clearAutoScrollTimers();_sourceKeyUp(a)});$(document).bind("keydown.RowDragDropTracker",function(a){_sourceKeyDown(a)})};_handleCueMouseMove=function(a){if(l&&_isRowsDraggable){var b=$(".ui-grid-body",s.element);b.prev();_clearAutoScrollTimers();var e=b.offset().top,f=s.options.RowHeight;(a.pageY||a.originalEvent.changedTouches[0].pageY)<e+f/2&&c?_autoScrollUp():(a.pageY||a.originalEvent.changedTouches[0].pageY)>e+b[0].clientHeight-f&&c&&_autoScrollDown();w=void 0!=a.originalEvent.changedTouches||
null!=a.originalEvent.changedTouches?B=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr"):$(a.target).closest("tr");null==w||void 0==w||0==w.length?d=!1:_destIndex=s.options.UseVirtualization?w[0]["data-grid-item"].Activity_M()._displayIndex:w[0].rowIndex;_getIsMousePositionInChildRows();_raiseToCheck(a)}};_getIsMousePositionInChildRows=function(){_inChildRows=!1;var a=_destIndex-_topSelectedIndex;s.SelectedItems.containsValue(null!=
s.ActivityViews&&void 0!=s.ActivityViews?s.ActivityViews[_destIndex]:s.FlatHierarchicalItemsList[_destIndex].corrFlexyNodeData)?_inChildRows=!0:a==s.SelectedItems.length&&(_enableDropAsChild&&m?_inChildRows=!0:_enableDropAsChild||q&&_isInLastRow||(_inChildRows=!0))};_raiseCanDrop=function(a,b){return v.CanDrop(a,b)};_raiseCanDrag=function(a){a=v.CanBeginDrag(a);!1==a?f.addClass("rq-prevent-dnd-handleCue"):f.removeClass("rq-prevent-dnd-handleCue");return a};_raiseBeforeDragStart=function(){v.OnBeforeDragStart(_topSelectedIndex,
y.length);!1==_raiseCanDrag(_topSelectedIndex)?(g.css("display","none"),h.css("display","none"),f.css("display","none"),l=_isRowsDraggable=d=!1):y=x.selectedItems.slice(0)};_raiseToCheck=function(a){if(null!=w&&void 0!=w&&0!=w.length){var b=s.options.RowHeight,c=w.position().top;if(void 0!=a.originalEvent.changedTouches||null!=a.originalEvent.changedTouches){var d=$(document.elementFromPoint(a.originalEvent.changedTouches[0].clientX,a.originalEvent.changedTouches[0].clientY)).closest("tr");a=a.originalEvent.changedTouches[0].pageY-
d.offset().top}else a=void 0==a.offsetY?a.pageY-$(a.target).offset().top:a.offsetY;d=b/4;m=a<=d;q=a>=3*d;r=a>d&&a<3*d;_raiseCanDrop(_destIndex,_enableDropAsChild&&r)||_destIndex==_topSelectedIndex||_inChildRows?(p=!0,g.css({top:w.position().top+4}),h.css("display","none"),g.css("display","block"),f.css("display","none")):(p=!1,h.css("display","block"),g.css("display","none"));a=w.next();_isInLastRow=!1;_enableDropAsChild?r?_verticalOffsetSet(c,"1.5px",b+"px"):m?_verticalOffsetSet(c,"1px","0px"):0<
a.length?_verticalOffsetSet(a.position().top,"1px","0px"):(_isInLastRow=!0,_verticalOffsetSet(w.position().top+b,"1px","0px")):0<a.length?_verticalOffsetSet(w.position().top,"1px","0px"):q?(_isInLastRow=!0,_verticalOffsetSet(w.position().top+b,"1px","0px")):0==a.length&&(_isInLastRow=!0,_verticalOffsetSet(w.position().top,"1px","0px"))}};_handleCueMouseUp=function(){if(null!=y&&null!=w){if(_checkDrop()||!_isRowsDraggable)return;if(c&&d){_destIndex=s.options.UseVirtualization?w[0]["data-grid-item"].Activity_M()._displayIndex:
w[0].rowIndex;q&&_enableDropAsChild&&(_destIndex+=1);_isInLastRow&&(_destIndex=null!=s.ActivityViews&&void 0!=s.ActivityViews?s.ActivityViews.length-1:s.FlatHierarchicalItemsList.length-1);_isInLastRow&&q&&(_destIndex=-1);var a=!1;r&&_enableDropAsChild&&(a=_checkIsSameParent(_topSelectedIndex,_destIndex));r&&_topSelectedIndex==_destIndex&&_enableDropAsChild&&(a=!0);var b=y.length,e=y.slice(0),k=v.OnDrop(_topSelectedIndex,b,_destIndex,_enableDropAsChild&&r);if(!a&&!p&&k&&0<=_topSelectedIndex&&!_inChildRows){_isInLastRow&&
q&&(_destIndex=null!=s.ActivityViews&&void 0!=s.ActivityViews?s.ActivityViews.length:s.FlatHierarchicalItemsList.length);!1!=_enableDropAsChild&&r?v.InsertRowsAsChild(_topSelectedIndex,b,_destIndex):v.MoveRows(_topSelectedIndex,b,_destIndex-1);for(a=0;a<b;a++)!1==x.selectedItems.containsValue(e[a])&&x.selectedItems.add(e[a]);v.OnDropped(y)}}g.css("display","none");h.css("display","none");f.css("display","none");y=[];w=null}d=_isRowHeaderClicked=!1;$(document).unbind(".RowDragDropTracker");z.unbind(".RowDragDropTracker")};
_verticalOffsetSet=function(a,b,c){h.css({top:a});h.height(c);h.css("border-width",b)};_checkDrop=function(){return k?(p=!0,l=d=!1,f.css("display","none"),g.css("display","none"),h.css("display","none"),z.unbind(".RowDragDropTracker"),$(document).unbind(".RowDragDropTracker"),!0):!1};_sourceKeyUp=function(a){27==a.keyCode&&(_checkDrop(),k=!1)};_sourceKeyDown=function(a){27==a.keyCode&&(p=k=!0)};_checkIsSameParent=function(a,b){var c=s.options.FlatItemsSource[a],d=s.options.FlatItemsSource[b];return"ProjectGantt"==
this.GanttType&&(parentActivityIndex=null!=c._parentView&&void 0!=c._parentView?c._parentView._activity._displayIndex:c._activity._displayIndex,d.activity._displayIndex==parentActivityIndex)?!0:!1};_autoScrollUp=function(){null==a&&(a=setInterval(function(){0<100*$gridBody[0].scrollTop/($gridBody[0].scrollHeight-$gridBody[0].clientHeight)?__autoScroll(-10):_clearAutoScrollTimers()},0))};_autoScrollDown=function(){null==b&&(b=setInterval(function(){$gridBody[0].scrollHeight==$gridBody[0].scrollTop+
$gridBody[0].clientHeight?_clearAutoScrollTimers():__autoScroll(10)},0))};__autoScroll=function(a){$gridBody.animate({scrollTop:$gridBody[0].scrollTop+a},0)};_clearAutoScrollTimers=function(){null!=a&&clearInterval(a);null!=b&&clearInterval(b);a=b=null};Dispose=function(){d=!1;p=!0;w=t=h=g=f=null;c=!1;_topSelectedIndex=null;l=!1;_clearAutoScrollTimers();null==n&&void 0==n||$(n).unbind(".rowHeaderMouseEvents");null==f&&void 0==f||f.unbind(".handleCueMouseDown");null==s&&void 0==s||s.element.unbind("ganttcontrolselectionchanged.RowDragDropTracker");
if(null!=z||void 0!=z)z.unbind(".popupHandler"),z.unbind(".RowDragDropTracker");$(document).unbind(".RowDragDropTracker")}};RadiantQ.Gantt.RowDragDropTracker.IsDragStarted_M=function(){return d};RadiantQ.CanUseDefineProperty&&Object.defineProperty(RadiantQ.Gantt.RowDragDropTracker,"IsDragStarted",{get:function(){return d}})})();
RadiantQ.Gantt.themes=function(){this.defaultClass="ui-state-default";this.headerClass="ui-widget-header";this.hoveringClass="ui-state-hover";this.selectionClass="ui-state-active";this.highlightingClass="ui-state-highlight";this.chartBackground=null};window.radiantQclasses=new RadiantQ.Gantt.themes;
(function(a){a.widget("radiantq.SmartDateTimeText",RadiantQ.Gantt.Widget.SmartDateTimeText);a.widget("radiantq.ScaleRendererBase",RadiantQ.Gantt.Widget.ScaleRendererBase);a.widget("radiantq.TimeSpanHeader",a.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeader);a.widget("radiantq.GanttChartScaleBackground",a.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.GanttChartScaleBackground);a.widget("radiantq.GanttChartBackground",RadiantQ.Gantt.Widget.GanttChartBackground);a.widget("radiantq.GanttTimeUnitBackground",
RadiantQ.Gantt.Widget.GanttTimeUnitBackground);a.widget("radiantq.GanttChartCustomRangeBackground",a.radiantq.GanttChartScaleBackground,RadiantQ.Gantt.Widget.GanttChartCustomRangeBackground);a.widget("radiantq.SpecialLines",a.radiantq.ScaleRendererBase,RadiantQ.Gantt.Widget.SpecialLines);a.widget("radiantq.ScalePanelRendererBase",RadiantQ.Gantt.Widget.ScalePanelRendererBase);a.widget("radiantq.TimeSpanHeaders",a.radiantq.ScalePanelRendererBase,RadiantQ.Gantt.Widget.TimeSpanHeaders);a.widget("radiantq.taskbar",
RadiantQ.Gantt.Widget.taskbar);a.widget("radiantq.TasksListControl",RadiantQ.Gantt.Widget.TasksListControl);a.widget("radiantq.GanttChart",RadiantQ.Gantt.Widget.GanttChart);a.widget("radiantq.GanttTableBase",a.ui.grid,RadiantQ.Gantt.Widget.GanttTableBase);a.widget("radiantq.FlexyTable",a.radiantq.GanttTableBase,RadiantQ.Gantt.Widget.FlexyTable);a.widget("radiantq.GanttTable",a.radiantq.GanttTableBase,RadiantQ.Gantt.Widget.GanttTable);a.widget("radiantq.GanttBase",RadiantQ.Gantt.Widget.GanttBase);
a.widget("radiantq.GanttControl",a.radiantq.GanttBase,RadiantQ.Gantt.Widget.GanttControl);a.widget("radiantq.FlexyGantt",a.radiantq.GanttBase,RadiantQ.Gantt.Widget.FlexyGantt);a.widget("radiantq.GanttTaskItemsControl",RadiantQ.Gantt.Widget.GanttTaskItemsControl);a.widget("radiantq.GanttTaskItemBar",RadiantQ.Gantt.Widget.GanttTaskItemBar);a.widget("radiantq.GanttDependencyControl",RadiantQ.Gantt.Widget.GanttDependencyControl);a.widget("radiantq.GanttDependencyLine",RadiantQ.Gantt.Widget.GanttDependencyLine);
a.widget("radiantq.GanttRows",RadiantQ.Gantt.Widget.GanttRows);a.widget("radiantq.rowbase",RadiantQ.Gantt.Widget.rowbase);a.widget("radiantq.GanttRowselectable",a.radiantq.rowbase,RadiantQ.Gantt.Widget.GanttRowselectable);a.widget("radiantq.hoverable",a.radiantq.rowbase,RadiantQ.Gantt.Widget.hoverable);a.widget("ui.timespinner",a.ui.spinner,RadiantQ.Gantt.Widget.timespinner);a.widget("radiatq.DurationPicker",a.ui.spinner,RadiantQ.Gantt.Widget.DurationPicker);a.widget("radiantq.DateTimePicker",RadiantQ.Gantt.Widget.DateTimePicker);
a.widget("radiantq.RQeditor",RadiantQ.Gantt.Widget.RQeditor);a.widget("radiantq.gridEditor",RadiantQ.Gantt.Widget.gridEditor);a.widget("radiantq.ResourcePicker",RadiantQ.Gantt.Widget.ResourcePicker);var b={triggerEvent:function(a,b,c){return this._trigger(a,b,c)},getChildWidgetName:function(a){return a},widgetBaseSetOption:function(){a.Widget.prototype._setOption.apply(this,arguments)},widgetBaseDestroy:function(){a.Widget.prototype.destroy.apply(this,arguments)}};a.extend(a.radiantq.GanttBase.prototype,
{_triggerHeaderCollectionschangedEvent:function(b,c){a.radiantq.GanttBase.prototype.element=this.element;a.radiantq.GanttBase.prototype._trigger("HeaderCollectionschanged",b,{event:b,value:c,options:this.options})}},b);var c={baseCreate:function(){a.radiantq.GanttBase.prototype._create.apply(this,arguments)},baseSetOption:function(){a.radiantq.GanttBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){a.radiantq.GanttBase.prototype.destroy.apply(this,arguments)}},d=a.extend({},c,
{updateGanttChart:function(a,b){var c=this.GetGanttChart();0!=c.length&&a in c.GanttChart("option")&&(c.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||c.GanttChart("option",a,b))}},b),c=a.extend({},c,{updateGanttChart:function(a,b){var c=this.GetGanttChart();if(0!=c.length){switch(a){case "FlatItemsSource":return c.GanttChart("option","FlatItemsSource",b);case "TaskStartTimeProperty":return c.GanttChart("option","TaskStartTime",b);case "ParentTaskStartTimeProperty":return c.GanttChart("option",
"ParentTaskStartTime",b);case "TaskEndTimeProperty":return c.GanttChart("option","TaskEndTime",b);case "ParentTaskEndTimeProperty":return c.GanttChart("option","ParentTaskEndTime",b)}a in c.GanttChart("option")&&(c.GanttChart("option",a)==b&&"BaseTimeScaleType"!=a||c.GanttChart("option",a,b))}}},b);a.extend(a.radiantq.GanttControl.prototype,d);a.extend(a.radiantq.FlexyGantt.prototype,c);a.extend(a.radiantq.GanttChart.prototype,b);a.extend(a.radiantq.rowbase.prototype,b);d=a.extend({baseCreate:function(){a.radiantq.rowbase.prototype._create.apply(this,
arguments)},baseSetOption:function(){a.radiantq.rowbase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){a.radiantq.rowbase.prototype.destroy.apply(this,arguments)}},b);a.extend(a.radiantq.hoverable.prototype,d);a.extend(a.radiantq.GanttRowselectable.prototype,d);a.extend(a.radiantq.GanttRows.prototype,b);a.extend(a.radiantq.GanttTaskItemBar.prototype,b);a.extend(a.radiantq.GanttTaskItemsControl.prototype,b);a.extend(a.radiantq.taskbar.prototype,b);a.extend(a.radiantq.TasksListControl.prototype,
b);a.extend(a.radiantq.ScaleRendererBase.prototype,b);a.extend(a.radiantq.ScalePanelRendererBase.prototype,b);d=a.extend({baseCreate:function(){a.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments)},baseSetOption:function(){a.radiantq.ScaleRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){a.radiantq.ScaleRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){a.radiantq.ScaleRendererBase.prototype.UpdateTimeUnits.apply(this,
arguments)}},b);a.extend(a.radiantq.TimeSpanHeader.prototype,d);c=a.extend({baseCreate:function(){a.radiantq.ScalePanelRendererBase.prototype._create.apply(this,arguments)},baseSetOption:function(){a.radiantq.ScalePanelRendererBase.prototype._setOption.apply(this,arguments)},baseDestroy:function(){a.radiantq.ScalePanelRendererBase.prototype.destroy.apply(this,arguments)},ScaleRendererBaseUpdateTimeUnits:function(){a.radiantq.ScalePanelRendererBase.prototype.UpdateTimeUnits.apply(this,arguments)}},
b);a.extend(a.radiantq.TimeSpanHeaders.prototype,c);a.extend(a.radiantq.GanttChartScaleBackground.prototype,d);a.extend(a.radiantq.GanttChartBackground.prototype,b);a.extend(a.radiantq.GanttTimeUnitBackground.prototype,b);a.extend(a.radiantq.GanttChartCustomRangeBackground.prototype,{baseCreate:function(){a.radiantq.ScaleRendererBase.prototype._create.apply(this,arguments)},baseSetOption:function(){a.radiantq.GanttChartScaleBackground.prototype._setOption.apply(this,arguments)},baseDestroy:function(){a.radiantq.GanttChartScaleBackground.prototype.destroy.apply(this,
arguments)}},b);a.extend(a.radiantq.SpecialLines.prototype,d);a.extend(a.radiantq.GanttDependencyControl.prototype,b)})(jQuery);RadiantQ.ProjectModel={};var projectModel=RadiantQ.ProjectModel;Function.prototype.extend=function(a){var b=a.prototype;a.prototype=Object.create?Object.create(this.prototype):Object(this.prototype);for(var c in b)a.prototype[c]=b[c];a.prototype.constructor=a;a.prototype.$parent=this.prototype;return a};projectModel.Utils=function(){projectModel.Utils=function(){};return projectModel.Utils}();
projectModel.Utils.toString=function(a){switch(a){case RadiantQ.Gantt.DependencyType.FinishToFinish:return"0";case RadiantQ.Gantt.DependencyType.FinishToStart:return"1";case RadiantQ.Gantt.DependencyType.StartToFinish:return"2";case RadiantQ.Gantt.DependencyType.StartToStart:return"3";default:return"1"}};
projectModel.Utils.effortToString=function(a){var b="";if(a>=RQTimeSpan.Zero_M())var b=b+"PT",c=parseInt(Math.floor(a.getTotalHours())),b=b+(c.toString()+"H"),b=b+(a.minutes_M().toString()+"M"),b=b+(a.seconds_M().toString()+"S");return b};projectModel.Utils.toLagString=function(a){return(10*a.getTotalMinutes()).toString()};projectModel.Utils.tenthOfAMinuteToHours=function(a){var b=0,b=parseFloat(a);return b/600};
projectModel.Utils.toDepType=function(a){switch(a.toString()){case "0":return RadiantQ.Gantt.DependencyType.FinishToFinish;case "1":return RadiantQ.Gantt.DependencyType.FinishToStart;case "2":return RadiantQ.Gantt.DependencyType.StartToFinish;case "3":return RadiantQ.Gantt.DependencyType.StartToStart;default:return RadiantQ.Gantt.DependencyType.FinishToStart}};projectModel.Utils.toTimeOfDay=function(a){a=a.split(":");return ts=new RQTimeSpan(0,parseInt(a[0]),parseInt(a[1]),parseInt(a[2]))};
projectModel.Utils.convertResourceTextToAssignments=function(a,b){var c=new projectModel.AssignmentsList;if(null!=a.AssignedResources&&""!=a.AssignedResources)for(var d=a.AssignedResources.split(","),e=0;e<d.length;e++){var f=d[e],g=f,h=100;-1!=g.indexOf("[")&&(h=RadiantQ.Gantt.ValueConverters.ConverterUtils.ParseAllocUnitsString(g.substring(f.indexOf("["))),g=f.substring(0,g.indexOf("[")),g=g.Trim());f=b.ResourceList.getResourceByName(g);null==f&&(g=parseInt(g),null!=g&&void 0!=g&&(f=b.ResourceList.getResourceByID(g)));
null!=f&&(0==c.getAssignmentByResourceID(f.ID).length?(g=b.createAssignment(),g.ResourceUID=f.ID,g.TaskUID=a.ID,g.AllocationUnits=parseInt(h),c.push(g)):c.push(c.getAssignmentByResourceID(f.ID)[0]))}return c};
(function(){var a=RadiantQ.ProjectModel,b=RadiantQ.Gantt;a.Project=function(b){this.usedtaskid=0;this._calendarCollection=new a.ProjectCalendarCollection;this.names=new a.XElementSubElementNames;this.names.IDField="UID";this.names.TaskNameField="Name";this.names.IndentLevelField="OutlineLevel";this.names.StartDateField="Start";this.names.EndDateField="Finish";this.names.EffortField="Work";this.names.DurationField="Duration";this.names.PredecessorIndicesField="PredecessorLink";this.names.PreferredStartTimeField=
"ConstraintDate";this.names.ProgressPercentField="PercentComplete";this.names.TypeField="Type";this.names.WBSField="WBS";this.projectElem=b;this.tasksElem=this.projectElem.Tasks;this.assgnsElem=this.projectElem.Assignments;this._resourcesElem=this.projectElem.Resources;this.doc=this.projectElem;this._baseCalendarID=parseInt(this.projectElem.CalendarUID);this.ReadWBSIDsAsManual=!0;b=this.tasksElem;void 0!=b.Task&&void 0==b.Task.length&&(this.projectElem.Tasks={},this.projectElem.Tasks.Task=[],this.projectElem.Tasks.Task.push(b.Task));
this.tasksElem=this.projectElem.Tasks;this._list=new a.ProjectTaskList(this);this._assgnList=new a.AssignmentsList;this._resList=new a.ResourceList;var d=this._list;if(void 0!=this.tasksElem.Task){b=0;for(var e=this.tasksElem.Task;b<e.length;b++){var f=e[b];0==b?this.topProjectTask=new a.TopProjectTask(f,this.names,this.projectElem,this):(f=new a.ProjectTask(f,this.names,this.projectElem,this),d.push(f),f.ID>this.usedtaskid&&(this.usedtaskid=f.ID))}}if(void 0!=this._resourcesElem)for(d=this._resourcesElem.Resource,
b=0;b<d.length;b++)e=new a.ProjectResource(d[b],this.doc),this._resList.push(e);if(void 0!=this.assgnsElem&&void 0!=this.assgnsElem.Assignment)for(d=this.assgnsElem.Assignment,b=0;b<d.length;b++)if(e=new a.ProjectAssignment(this,d[b],this.projectElem),f=e.TaskUID,-1!=f&&null!=this.Tasks.GetTaskByID(f)){var f=this.Tasks.GetTaskByID(f),g=e.ResourceUID;0>g||null==this.ResourceList.getResourceByID(g)||(f.AssignedResources=this._assgnList.addResourceString(f.AssignedResources,e),this._assgnList.push(e))}for(b=
0;b<this.Tasks.length;b++)this.Tasks[b].IsInit=!0;this.Tasks.CollectionChanged.subscribe(this.Tasks_CollectionChanged,this);this._assgnList.CollectionChanged.subscribe(this._assgnList_CollectionChanged,this);this._resList.CollectionChanged.subscribe(this.ResourceList_CollectionChanged,this);d=this.projectElem.Calendars.Calendar;for(b=0;b<d.length;b++)e=new a.ProjectCalendar(d[b]),this._calendarCollection.push(e);this._defaultElems={}};a.Project.prototype.getDefaultNode=function(a){var b;void 0!=this._defaultElems?
b=this._defaultElems[a]:this._defaultElems={};b||(this._defaultElems[a]="");return b};a.Project.prototype.Tasks_CollectionChanged=function(a,b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var f=b.NewItems[e],g=this.Tasks.indexOf(f);g!=this.Tasks.length-1&&0!=this.Tasks.length||-1!=this.tasksElem.Task.indexOf(f.Element)?-1==this.tasksElem.Task.indexOf(f.Element)&&this.tasksElem.Task.splice(g,0,f.Element):this.tasksElem.Task.push(f.Element)}else if("Remove"==b.Action)for(e=0;e<b.OldItems.length;e++)f=
this.tasksElem.Task.indexOf(b.OldItems[e].Element),0<=f&&this.tasksElem.Task.splice(f,1)};a.Project.prototype.ResourceList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var f=b.NewItems[e],g=this.ResourcesElem.indexOf(f);g!=this.ResourcesElem.length-1&&0!=this.ResourcesElem.length||-1!=this.ResourcesElem.Resource.indexOf(f.Element)?-1==this.ResourcesElem.Resource.indexOf(f.Element)&&this.ResourcesElem.Resource.splice(g,0,f.Element):this.ResourcesElem.Resource.push(f.Element)}else if("Remove"==
b.Action)for(e=0;e<b.OldItems.length;e++)f=this.ResourcesElem.Resource.indexOf(b.OldItems[e].Element),this.ResourcesElem.Resource.splice(f,1)};a.Project.prototype._assgnList_CollectionChanged=function(a,b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var f=b.NewItems[e],g=this._assgnList.indexOf(f);g!=this._assgnList.length-1&&0!=this._assgnList.length||-1!=this.assgnsElem.Assignments.indexOf(f.Element)?-1==this.assgnsElem.Assignments.indexOf(f.Element)&&this.assgnsElem.Assignments.splice(g,
0,f.Element):this.assgnsElem.Assignments.push(f.Element)}else if("Remove"==b.Action)for(e=0;e<b.OldItems.length;e++)g=this.assgnsElem.Assignments.indexOf(b.OldItems[e].Element),this.assgnsElem.Assignments.splice(g,1)};a.Project.prototype.getNextUsableID=function(){return++this.usedtaskid};a.Project.prototype.calculateTasksEndTime=function(){for(var a=this.Tasks,b=0;b<a.length;b++)a[b].EndDate=this.BaseCalendar.Schedule.GetEnd(a[b].StartDate,a[b].Effort)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.Project.prototype,
"ResourcesElem",{get:function(){null==this._resourcesElem&&(this._resourcesElem=null,this.projectElem.Add(this._resourcesElem));return this._resourcesElem},set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,"BaseCalendarID",{get:function(){return this._baseCalendarID},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,"TopProjectTask",{get:function(){return this.topProjectTask},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,
"Document",{get:function(){return this.doc},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,"BaseCalendar",{get:function(){return this._calendarCollection.getCalendarById(this.BaseCalendarID)},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,"Tasks",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(a.Project.prototype,"ResourceList",{get:function(){return this._resList},enumerable:!0,configurable:!0}));a.Project.prototype.initFrom=
function(a){this.ResourceList.Clear();for(var b=0;b<a.GanttResources.length;b++){var e=a.GanttResources[b],f=this.CreateResource();f.ID=this.GetResourceID(e.ResourceID);f.ResourceName=e.ResourceName;this.ResourceList.Add(f)}};a.Project.prototype.getResourceID=function(a){return this.tryParseInt(a,0)?void 0:this.ResourceList.length+1};a.Project.prototype.tryParseInt=function(a,b){var e=b;null!=a&&0<a.length&&NaN!=a&&(e=parseInt(a));return e};a.Project.prototype.createTask=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");
var a={},b=this.constructTask(a,this.names,this.projectElem);b.TaskName="New Task";b.StartDate=this.TopProjectTask.StartDate;b.Effort=RQTimeSpan.FromDays(1);b.ID=this.getNextUsableID();b.PreferredStartTime=this.TopProjectTask.StartDate;var e=Date.today().clone().toString("yyyy-MM-ddTHH:mm:ss");a.CreateDate=e;a.IsNull="0";b.IsInit=!0;return b};a.Project.prototype.constructTask=function(b,d,e){return new a.ProjectTask(b,this.names,e,this)};a.Project.prototype.createResource=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");
var b=this.projectElem.createElementNS(this.projectElem.documentElement.namespaceURI,"Resource");return new a.ProjectResource(b,this.doc)};a.Project.prototype.createAssignment=function(){if(null==this.tasksElem)throw new Exception("Project instance is not initialized with a proper XDocument.");var b=this.projectElem.createElementNS(this.projectElem.documentElement.namespaceURI,"Resource");return new a.ProjectAssignment(this,b,this.projectElem)};a.Project.prototype.saveTo=function(a){this.TopProjectTask.ValidateDates();
this.doc.Save(a)};a.Project.prototype.fromStream=function(a){a=XDocument.Load(a);if(null==a)throw new Exception("The stream passed into FromStream does not contain an Xml Document.");return new Project(a)};a.Project.prototype.validateAssignmentEntries=function(b){for(var d=this._assgnList.getAssignmentByTaskID(b.ID),e=a.Utils.convertResourceTextToAssignments(b,this),f=0;f<d.length;f++){var g=d[0],h=e.getAssignmentByResourceID(g.ResourceUID);0==h.Length?(g=this._assgnList.indexOf(g),this._assgnList.splice(g,
1)):(g.AllocationUnits=h[0].AllocationUnits,g=e.indexOf(g),e.splice(g,1))}for(f=0;f<e.length;f++)this._assgnList.push(e[0]);this.updateAssignmentWorks(b)};a.Project.prototype.updateAssignmentWorks=function(a){var b=a.RemainingWork;a=this._assgnList.getAssignmentByTaskID(a.ID);var e=RQTimeSpan.Zero,f;for(f in a){if(f.RemainingWork==RQTimeSpan.Zero){e=RQTimeSpan.Zero;break}e+=f.RemainingWork}if(e!=b){var g=0,h=RQTimeSpan.Zero;for(f in a){g++;var k=1/a.length;e>RQTimeSpan.Zero&&(k=f.RemainingWork.Ticks/
e.Ticks);f.RemainingWork=g==a.Length?b-h:RQTimeSpan.fromTicks(parseInt(b.Ticks*k));h+=f.RemainingWork}}};a.ProjectTask=function(a,b,e,f){this._project=null;this._id=0;this._duration=this._effort=this._endTime=this._startTime=this._taskName=null;this._sortOrder=0;this._preferredStartTime=null;this._indendLevel=0;this._predecessorIndices=this._type=null;this._progressPercent=0;this._WBS=this._description=this._assignedResources=null;this.IsInit=!1;this.SubElemNames=b;this.Element=a;this.PropertyChanged=
new ObjectEvent("PropertyChanged");this.SortOrderChanged=new ObjectEvent("SortOrderChanged");this.IsDirty=!1;if(a,b,f)this._project=f,this._doc=e,this._id=this.getIntDescendantValue(this.SubElemNames.IDField,0),this._taskName=this.getDescendantValue(this.SubElemNames.TaskNameField),this._startTime=this.getDateDescendantValue(this.SubElemNames.StartDateField),this._endTime=this.getDateDescendantValue(this.SubElemNames.EndDateField),this._effort=this.getTimeSpanDescendantValue(this.SubElemNames.EffortField),
this._duration=this.getTimeSpanDescendantValue(this.SubElemNames.DurationField),this._sortOrder=this.getIntDescendantValue(this.SubElemNames.SortOrderField,0),this._preferredStartTime=this.getDateDescendantValue(this.SubElemNames.PreferredStartTimeField),this._indendLevel=this.getIntDescendantValue(this.SubElemNames.IndentLevelField,0)-1,this._type=this.getIntDescendantValue(this.SubElemNames.TypeField,0),this._predecessorIndices=this.preparePredIndicesString(),this._progressPercent=this.getDoubleDescendantValue(this.SubElemNames.ProgressPercentField,
0),this._assignedResources=this.Element.AssignedResources,this._description=this.getDescendantValue(this.SubElemNames.DescriptionField),this._WBS=this.getDescendantValue(this.SubElemNames.WBSField)};a.ProjectTask.prototype.UpdateFinish=function(){this.EndDate=this.Project.BaseCalendar.Schedule.GetEnd(this.StartDate,this.Effort)};a.ProjectTask.prototype.onSortOrderChanged=function(a){null!=this.SortOrderChanged&&this.SortOrderChanged.raise(this,a)};RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ProjectTask.prototype,
"Project",{get:function(){return this._project},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"ID",{get:function(){return this._id},set:function(a){this._id!=a&&(this._id=a,this.Element[this.SubElemNames.IDField]=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"TaskName",{get:function(){return this._taskName},set:function(a){this._taskName!=a&&(this._taskName=a,this.Element[this.SubElemNames.TaskNameField]=
a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"StartDate",{get:function(){return this._startTime},set:function(a){this._startTime!=a&&(this._startTime=a,this.Element[this.SubElemNames.StartDateField]=a.toString("yyyy-MM-ddTHH:mm:ss"),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"EndDate",{get:function(){return this._endTime},set:function(a){this._endTime!=a&&(this._endTime=a,this.Element[this.SubElemNames.EndDateField]=
a.toString("yyyy-MM-ddTHH:mm:ss"),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"Effort",{get:function(){var a=this._effort;return a==RQTimeSpan.Zero?this.Duration:a},set:function(b){this._effort!=b&&(this._effort=b,this.Element[this.SubElemNames.EffortField]=a.Utils.effortToString(b).toString(),this.IsDirty=!0);this.Duration=b},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"Duration",{get:function(){return this._duration},
set:function(b){this._duration!=b&&(this._duration=b,this.Element[this.SubElemNames.DurationField]=a.Utils.effortToString(b).toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"SortOrder",{get:function(){return this._sortOrder},set:function(a){this._sortOrder!=a&&(this._sortOrder=a,this.Element[this.SubElemNames.SortOrderField]=a.toString(),this.onSortOrderChanged(a),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,
"WBS",{get:function(){return this.Project.ReadWBSIDsAsManual?"*"+this._WBS:this._WBS},set:function(a){a=this.stringTrimStart(a,"*");this._WBS!=a&&(this._WBS=a,this.Element[this.SubElemNames.WBSField]=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"PreferredStartTime",{get:function(){return 4==(null==this.Element.ConstraintType||void 0==this.Element.ConstraintType?0:this.Element.ConstraintType)?this._preferredStartTime:Date.today().clone()},
set:function(a){this._preferredStartTime!=a&&(this._preferredStartTime=a,this.Element[this.SubElemNames.PreferredStartTimeField]=a.toString("yyyy-MM-ddTHH:mm:ss"),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"IndentLevel",{get:function(){return this._indendLevel},set:function(a){this._indendLevel!=a&&(this._indendLevel=a,this.Element[this.SubElemNames.IndentLevelField]=(a+1).toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,
"Type",{get:function(){return this._type},set:function(a){this._type!=a&&(this._type=a,this.Element[this.SubElemNames.TypeField]=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"RemainingWork",{get:function(){return this.Effort-RQTimeSpan.fromTicks(parseFloat(this.Effort.Ticks*(this.ProgressPercent/100)))},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"PredecessorIndices",{get:function(){return this._predecessorIndices},
set:function(a){this._predecessorIndices!=a&&(this._predecessorIndices=a,this.updatePredIndicesString(a),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"ProgressPercent",{get:function(){return this._progressPercent},set:function(a){this._progressPercent!=a&&(this._progressPercent=a,this.Element[this.SubElemNames.ProgressPercentField]=a.toString(),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"AssignedResources",
{get:function(){var a=this._assignedResources;return null!=a&&void 0!=a?a:""},set:function(a){this._assignedResources!=a&&(this._assignedResources=a,null!=a&&(this.Element.AssignedResources=a.toString()),this.IsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectTask.prototype,"Description",{get:function(){return this._description},set:function(a){this._description!=a&&(this._description=a,this.Element[this.SubElemNames.DescriptionField]=a.toString(),this.IsDirty=!0)},enumerable:!0,
configurable:!0}));a.ProjectTask.prototype.stringTrimStart=function(a,b){if(!b)return a;for(var e=a;e.Substr(0,b.length)==b;)e=e.substr(b.length);return e};a.ProjectTask.prototype.preparePredIndicesString=function(){var c=this.Element[this.SubElemNames.PredecessorIndicesField],d="";if(void 0==c)return d;var d=d+c.PredecessorUID.toString(),e=b.DependencyType.FinishToStart,e=c.Type,e=a.Utils.toDepType(e.toString());switch(e){case b.DependencyType.FinishToFinish:d+="FF";break;case b.DependencyType.StartToFinish:d+=
"SF";break;case b.DependencyType.StartToStart:d+="SS"}e=0;e=c.LinkLag;e=a.Utils.tenthOfAMinuteToHours(e.toString());0<e?d+="+ "+e:0>e&&(d+="- "+-e);return d};a.ProjectTask.prototype.updatePredIndicesString=function(c){if(null!=c&&""!=c){var d=[],e=[],f=[],g=this._project.Tasks;b.Model.DataBoundGanttModel.ProcessPredecessorString(c,1,d,e,f,void 0);for(c=0;c<d.length;c++){var h=d[c];g.ContainsTask(h)&&(h=g.GetTaskByID(d[c]).ID);var k={};k.PredecessorUID=h;k.Type=a.Utils.toString(e[c]);k.LinkLag=a.Utils.toLagString(f[c]);
this.Element.PredecessorLink=k}}};a.ProjectTask.prototype.appendChildNode=function(a,b,e){a=this._doc.createElementNS(this._project.projectElem.documentElement.namespaceURI,a);var f=this._doc.createTextNode("");f.nodeValue=b;a.appendChild(f);b=this._doc.createTextNode("");e.appendChild(b);e.appendChild(a)};a.ProjectTask.prototype.ToString=function(){return"TaskName: "+this.TaskName+", ID: "+this.ID+", Start: "+this.StartDate+", End: "+this.EndDate};a.ProjectTask.prototype.getDescendantValue=function(a){if(null==
a)return null;a=this.Element[a];return null==a||void 0==a?"":a};a.ProjectTask.prototype.getIntDescendantValue=function(a,b){var e=this.Element[a];return null==a||null==e||void 0==e||null==e?b:parseInt(Math.floor(parseFloat(e)))};a.ProjectTask.prototype.getDoubleDescendantValue=function(a,b){var e=this.Element[a];return null==a||null==e||void 0==e?b:null==e?0:parseFloat(e)};a.ProjectTask.prototype.getDateDescendantValue=function(a){var b=Date.today().clone();a=this.Element[a];null!=a&&(b=new Date(a));
return b};a.ProjectTask.prototype.getTimeSpanDescendantValue=function(a){var b=this.Element[a];return null==a||null==b||void 0==b||null==b?RQTimeSpan.Zero:RQTimeSpan.parse(b)};a.ProjectTask.prototype.setDescendantValue=function(a,b){this.Element[a]=b.toString()};a.ProjectResource=function(){a.ProjectResource=function(a,b){this._element=a;this._doc=b;this._id=this.getID();this._resourceName=this.getResourceName()};return a.ProjectResource}();RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ProjectResource.prototype,
"ID",{get:function(){return this._id},set:function(a){if(this._id!=a){this._id=a;var b=this._element.UID;if(null==b||void 0==b)this.Element.UID=a.toString()}},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectResource.prototype,"ResourceName",{get:function(){return this._resourceName},set:function(a){if(this._resourceName!=a){this._resourceName=a;var b=this._element.Name;if(null==b||void 0==b)this.Element.Name=a.toString()}},enumerable:!0,configurable:!0}));a.ProjectResource.prototype.toString=
function(){return"Name: "+this.ResourceName+", ID:"+this.ID};a.ProjectResource.prototype.getID=function(){var a=this._element.UID;return null!=a&&void 0!=a?parseInt(a):0};a.ProjectResource.prototype.getResourceName=function(){var a=this._element.Name;return null!=a&&void 0!=a?a:""};a.ResourceList=function(){new RadiantQ.RQ_ObservableCollection(this);this.resourcesByID=new b.Dictionary;this.resourcesByName=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var e=
0;e<b.NewItems.length;e++){var f=b.NewItems[e];this.resourcesByID.Add(f.ID,f);this.resourcesByName.Add(f.ResourceName,f)}else if("Remove"==b.Action)for(e=0;e<b.OldItems.length;e++)f=b.OldItems[e],this.resourcesByID.Remove(f.ID),this.resourcesByName.Remove(f.ResourceName)}.bind(this))};a.ResourceList.prototype=[];a.ResourceList.prototype.getResourceByID=function(a){return this.resourcesByID.Contains(a)?this.resourcesByID[a]:null};a.ResourceList.prototype.getResourceByName=function(a){return this.resourcesByName.Contains(a)?
this.resourcesByName[a]:null};a.ProjectAssignment=NotifyPropertyChanged.extend(function(){a.ProjectAssignment=function(a,b,e){NotifyPropertyChanged.apply(this,arguments);this.Project=null;this.Project=a;this.Element=b;this._doc=e;this._taskUID=this.getTaskUID();this._resourceUID=this.getResourceUID();this._allocationUnits=this.getUnits();this._remainingWork=this.getRemainingWork()};return a.ProjectAssignment}());RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ProjectAssignment.prototype,"TaskUID",
{get:function(){return this._taskUID},set:function(a){this._taskUID!=a&&(this._taskUID=a,this.Element.TaskUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectAssignment.prototype,"ResourceUID",{get:function(){return this._resourceUID},set:function(a){this._resourceUID!=a&&(this._resourceUID=a,this.Element.ResourceUID=a.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectAssignment.prototype,"AllocationUnits",{get:function(){return this._allocationUnits},
set:function(a){this._allocationUnits!=a&&(this._allocationUnits=a,this.Element.Units=(a/100).toString())},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectAssignment.prototype,"RemainingWork",{get:function(){return this._remainingWork},set:function(a){this._remainingWork!=a&&(this._remainingWork=a,this.Element.RemainingWork=(a/100).toString())},enumerable:!0,configurable:!0}));a.ProjectAssignment.prototype.toString=function(){return"TaskID: "+this.TaskUID+", ResourceUID: "+this.ResourceUID};
a.ProjectAssignment.prototype.setDescendantValue=function(a,b){this.Element[a]=b.toString()};a.ProjectAssignment.prototype.getTaskUID=function(){var a=this.Element.TaskUID;return null!=a&&void 0!=a?parseInt(a):0};a.ProjectAssignment.prototype.getResourceUID=function(){var a=this.Element.ResourceUID;return null!=a&&void 0!=a?parseInt(a):0};a.ProjectAssignment.prototype.getUnits=function(){var a=this.Element.Units;return null!=a&&void 0!=a?parseInt(a):null};a.ProjectAssignment.prototype.getRemainingWork=
function(){var a=this.Element.RemainingWork;return null!=a&&void 0!=a?a:null};a.AssignmentsList=function(){new RadiantQ.RQ_ObservableCollection(this);this.assignmentsByTaskID=new b.Dictionary;this.assignmentsByResID=new b.Dictionary;this.CollectionChanged.subscribe(function(a){if("Add"==a.Action)for(var b in a.NewItems)!1==this.assignmentsByTaskID.ContainsKey(b.TaskUID)&&(this.assignmentsByTaskID[b.TaskUID]=[]),!1==this.assignmentsByResID.ContainsKey(b.ResourceUID)&&(this.assignmentsByResID[b.ResourceUID]=
[]),this.assignmentsByTaskID[b.TaskUID].Add(b),this.assignmentsByResID[b.ResourceUID].Add(b);else if("Remove"==a.Action)for(var e in a.OldItems)this.assignmentsByTaskID[e.TaskUID].Remove(e),this.assignmentsByResID[e.ResourceUID].Remove(e)})};a.AssignmentsList.prototype=[];a.AssignmentsList.prototype.getAssignmentByTaskID=function(b){return this.assignmentsByTaskID.Contains(b)?this.assignmentsByTaskID[b]:new a.AssignmentsList};a.AssignmentsList.prototype.getAssignmentByResourceID=function(b){return this.assignmentsByResID.Contains(b)?
this.assignmentsByResID[b]:new a.AssignmentsList};a.AssignmentsList.prototype.convertResourceToString=function(a){a=""+(a.Project.ResourceList.getResourceByID(a.ResourceUID).ResourceName+" "+this.allocationUnitText(a));return a=a.trimEnd()};a.AssignmentsList.prototype.addResourceString=function(a,b){var e=a;null!=e&&""!=e&&(e+=",");return e+=this.convertResourceToString(b)};a.AssignmentsList.prototype.allocationUnitText=function(a){return 100==a.AllocationUnits?"":"["+parseFloat(a.AllocationUnits).toString()+
"%]"};a.XElementSubElementNames=function(){this.WBSField=this.TypeField=this.SortOrderField=this.DescriptionField=this.AssignedResourcesField=this.ProgressPercentField=this.PreferredStartTimeField=this.DurationField=this.EffortField=this.EndDateField=this.PredecessorIndicesField=this.StartDateField=this.IndentLevelField=this.TaskNameField=this.IDField=null};a.ProjectTaskList=function(a){new RadiantQ.RQ_ObservableCollection(this);this.tasksByID=new b.Dictionary;this._project=a;this.CollectionChanged.subscribe(function(a,
b){if("Add"==b.Action)for(var c=0;c<b.NewItems.length;c++){var g=b.NewItems[c];g.SortOrderChanged.subscribe(this.item_SortOrderChanged,this);g.PropertyChanged.subscribe(this.item_PropertyChanged,this);this.tasksByID.Add(g.ID,g);this._project.TopProjectTask.IsDirty=!0}else if("Remove"==b.Action)for(c=0;c<b.OldItems.length;c++)g=b.OldItems[c],g.SortOrderChanged.unsubscribe(this.item_SortOrderChanged,this),g.PropertyChanged.unsubscribe(this.item_PropertyChanged,this),this.tasksByID.Remove(g.ID)},this)};
a.ProjectTaskList.prototype=[];a.ProjectTaskList.prototype.item_PropertyChanged=function(a,b){if("StartDate"==b.PropertyName||"EndDate"==b.PropertyName||"Effort"==b.PropertyName)this._project.TopProjectTask.IsDirty=!0;if("Effort"==b.PropertyName){var e=a;e.IsInit&&this._project.updateAssignmentWorks(e)}"AssignedResources"==b.PropertyName&&(e=a,e.IsInit&&this._project.validateAssignmentEntries(e))};a.ProjectTaskList.prototype.item_SortOrderChanged=function(a,b){var e=this.indexOf(a);e!=b&&(this.splice(e,
1),this.length<=b?this.push(a):this.splice(b,0,a))};a.ProjectTaskList.prototype.GetTaskByID=function(a){return this.tasksByID[a]};a.ProjectTaskList.prototype.ContainsTask=function(a){return this.tasksByID.Contains(a)};a.TopProjectTask=a.ProjectTask.extend(function(){a.TopProjectTask=function(a,b,e,f){this.$parent.constructor(a,b,e,f);this._validating=this.IsDirty=null};return a.TopProjectTask}());RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.TopProjectTask.prototype,"StartDate",{get:function(){this.IsDirty&&
this.validateDates();return this.$parent.StartDate},set:function(a){this.$parent.StartDate=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.TopProjectTask.prototype,"EndDate",{get:function(){this.IsDirty&&this.validateDates();return this.$parent.EndDate},set:function(a){this.$parent.EndDate=a},enumerable:!0,configurable:!0}));a.TopProjectTask.prototype.validateDates=function(){if(!this._validating)try{if(this._validating=!0,this.IsDirty){var a=this.$parent.StartDate,b=this.$parent.EndDate,
e;for(e in this.Project.Tasks)e.StartDate<a&&(a=e.StartDate),e.EndDate>b&&(b=e.EndDate);this.$parent.StartDate=a;this.$parent.EndDate=b;this.IsDirty=!1}}finally{this._validating=!1}};a.ProjectCalendarCollection=function(){new RadiantQ.RQ_ObservableCollection(this);this._dictCalendarsById=new b.Dictionary;this.CollectionChanged.subscribe(function(a,b){if("Add"==b.Action)for(var e=0;e<b.NewItems.length;e++){var f=b.NewItems[e];this._dictCalendarsById.Add(f.ID,f)}else if("Remove"==b.Action)for(e=0;e<
b.OldItems.length;e++)this._dictCalendarsById.Remove(b.OldItems[e].ID)},this)};a.ProjectCalendarCollection.prototype=[];a.ProjectCalendarCollection.prototype.getCalendarById=function(a){return!1==this._dictCalendarsById.Contains(a)?null:this._dictCalendarsById[a]};a.ProjectCalendar=function(c){this.base=b.Calendar;this.base();this._calendarElem=c;if(this.IsBaseCalendar){c=this._calendarElem.WeekDays.WeekDay;for(var d=[],e=0;e<c.length;e++){var f=new a.ProjectWeekDay(c[e]);d.push(f)}this.WeekDays=
d}c=this._calendarElem.UID;this.ID=null==c?-1:parseInt(c);this.Name="Calendar ID: "+this.ID};a.ProjectCalendar.prototype=new b.Calendar;RadiantQ.CanUseDefineProperty&&(Object.defineProperty(a.ProjectCalendar.prototype,"IsBaseCalendar",{get:function(){var a=this._calendarElem.IsBaseCalendar;return null==a?!0:0<parseInt(a)?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.ProjectCalendar.prototype,"BaseCalendarID",{get:function(){var a=this._calendarElem.BaseCalendarUID;return null==a?
-1:parseInt(a)},enumerable:!0,configurable:!0}));a.ProjectWeekDay=function(c){this.base=b.WeekDay;this.base();this._weekDay=null;this._weekDay=c;c=this._weekDay.DayWorking;this.IsWorkingDay=null==c?!0:c.textContent;c=this._weekDay.WorkingTimes;if(null!=c){c=c.WorkingTime;for(var d=RQTimeSpan.Zero,e=0;e<c.length;e++){var f=new a.ProjectWorkDayWorkingTime(c[e]);f.From==d&&f.From==f.To&&(f=new b.WorkDayWorkingTime(d,new RQTimeSpan(24,0,0)));this.WorkingTimes.push(f)}}};a.ProjectWeekDay.prototype=new b.WeekDay;
a.ProjectWorkDayWorkingTime=function(b){this.From=a.Utils.toTimeOfDay(b.FromTime.toString());this.To=a.Utils.toTimeOfDay(b.ToTime.toString())}})();
(function(a){var b=null,c=0;createSVG=function(a,c){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("version","1.1");f.setAttribute("viewBox","0 0 1 1");f.setAttribute("preserveAspectRatio","none");f.setAttribute("height","21px");void 0!=a.y2?(b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("x1",""+a.x1+"%"),b.setAttribute("y1",""+a.y1+"%"),b.setAttribute("x2",
""+a.x2+"%"),b.setAttribute("y2",""+a.y2+"%")):void 0==a.y2&&(b=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),b.setAttribute("id","gradient"),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("cx",""+a.x1+"%"),b.setAttribute("cy",""+a.y1+"%"),b.setAttribute("r",""+a.x2+"%"));for(var g=0;g<c.length;g++){var h=c[g],k=document.createElementNS("http://www.w3.org/2000/svg","stop"),l;for(l in h)h.hasOwnProperty(l)&&k.setAttribute(l,h[l]);b.appendChild(k)}f.appendChild(b);
g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.setAttribute("x","0");g.setAttribute("y","0");g.setAttribute("height","21px");g.setAttribute("width","100%");g.setAttribute("fill","url(#gradient)");f.appendChild(g);return f};getGradientImageURL=function(b,c){if(void 0===window.canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");else{var f=createSVG(b,c),f=(new XMLSerializer).serializeToString(f),g=a('<canvas id="canvas" style="display:none;"></canvas>');
canvg(g[0],f);return g[0].toDataURL()}};window.RadiantQ&&RadiantQ.Gantt&&(RadiantQ.Gantt.GetGradientImageURL=getGradientImageURL);setGradientAsBackground=function(b,c,f){c=getGradientImageURL(c,f);f=a("<style></style>");f.append(""+b+"{background-image:url("+c+") !important;}");a(document.head).append(f)};a.fn.setGradientAsBackground=function(b,e){if(0==a("script[src*=canvg]",document).length||void 0===canvg)window.console?console.error("canvg.js file is not found."):alert("canvg.js file is not found.");
else{var f=this.selector;if(""===f){var g="dynamicGradient"+c,f="."+g;this.addClass(g);c++}setGradientAsBackground(f,b,e)}}})(jQuery);
(function(a){a.fn.ColumnEnhancer=function(b){function c(a,b){var c=this.Column.index;!0==this.Context.hideList.containsValue(c)?this.Context.ShowColumn(c):this.Context.HideColumn(c)}function d(b,c,d,e,f,g){this.keyName=b.toString();this.name=c;this.icon=d;this.callback=a.proxy(e,{Context:f,Column:g});return this}var e=a(document),f=a.extend({minWidth:20,GetGridInstance:function(){return a(this).data("GanttTableBase")}},b),g,h,k,l=this;l.resizeStart=!1;mousedown=function(b){e.bind("mousemove.columnResizer",
a.proxy(mouseMove,this));e.bind("touchmove.columnResizer",a.proxy(mouseMove,this));b=b.originalEvent.touches?b.originalEvent.touches[0]:b;this.startX=b.clientX;var c=a(b.currentTarget).closest("th")[0].cellIndex+1;if(a(k[c-1]).hasClass("rq-column-width-readonly"))b.preventDefault();else{this.$colElementHeader=h.find("colgroup > col:nth-child("+c+")");this.$colElementBody=g.find("colgroup > col:nth-child("+c+")");b=p.uiGridHead.find("th:visible:last");var d=h.find("colgroup");this.lastColumnHeader=
a(d[0].children[b[0].cellIndex]);d=g.find("colgroup");this.lastColumnBody=a(d[0].children[b[0].cellIndex]);this.lastColumnHeaderWidth=parseInt(this.lastColumnHeader.get(0).style.width,10);this.lastColumnBodyWidth=parseInt(this.lastColumnBody.get(0).style.width,10);if(1>=k.length)this.colWidth=k.width();else{if(void 0==this.$colElementHeader.get(0))return;this.colWidth=parseInt(this.$colElementHeader.get(0).style.width,10)}this.resizeStart=!0;this.trigger("ColumnResizeStart",{tableHeadCol:this.$colElementHeader,
tableBodyCol:this.$colElementBody,index:c})}};mouseMove=function(b){if(this.resizeStart){b.preventDefault();b=b.originalEvent.touches?b.originalEvent.touches[0]:b;b=b.clientX-this.startX;this.lastColumnHeader.width(this.lastColumnHeaderWidth-b);this.lastColumnBody.width(this.lastColumnBodyWidth-b);var c=this.colWidth+b;this.$colElementHeader.width(c);this.$colElementBody.width(c);this.$colElementHeader.css("height","auto");this.$colElementBody.css("height","auto");0>b&&this.colWidth-f.minWidth<=-b&&
(this.$colElementHeader.width(f.minWidth),this.$colElementBody.width(f.minWidth));e.bind("keyup.columnResize",a.proxy(keyup,this))}};mouseup=function(a){l.resizeStart&&(this.trigger("ColumnResizeEnd",this),e.unbind("touchmove.columnResizer"),e.unbind("mousemove.columnResizer"),e.unbind("keyup.columnResize"),l.resizeStart=!1)};keyup=function(a){27==a.keyCode&&l.resizeStart&&(this.trigger("ColumnResizeEnd",this),e.unbind("mousemove.columnResizer"),e.unbind("touchmove.columnResizer"),e.unbind("keyup.columnResize"),
this.$colElementHeader.width(this.colWidth),this.$colElementBody.width(this.colWidth),l.resizeStart=!1)};_onTouchstart=function(a){a=a.originalEvent.touches?a.originalEvent.touches[0]:a;this.tapDownX=a.clientX;this.tapDownY=a.clientY;this.touchStartTime=new Date};_onTouchend=function(b){var c=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0]:b;this.tapDownX==c.clientX&&this.tapDownY==c.clientY&&"mouse"!=b.pointerType&&4!=b.pointerType&&200<=new Date-this.touchStartTime&&(clearTimeout(self.timeOutFunctions),
self.timeOutFunctions=setTimeout(function(){a(this).contextMenu({x:c.clientX,y:c.clientY})}.bind(b.currentTarget),300))};var p=f.GetGridInstance.call(this);h=p.uiGridHead.find("table");k=h.find("th");g=p.uiGridBody;b="#"+p.options.Parent.element[0].id;a(p.options.Parent.element[0].parentElement).addClass("ganttControl-parent");var m=new RadiantQ.Gantt.ContextMenuImpl.ContextMenu(b+" .rq-grid-head-parent",".ganttControl-parent");m.BeforeContextMenu.subscribe(function(a,b){0<m.Items.length&&(m.Items.asArray[0].disabled=
!0)});p.options.EnableColumnHeaderContextMenu&&(p.ColumnContextMenu=m);if(!0==p.options.EnableColumnHeaderContextMenu){b=p.ColumnContextMenu;for(var q=k.length,n=[],r=k.find("div").not(".resizeHelper"),t=0;t<q;t++){var s=a(r[t]).text(),s=d(t,s,s,c,p,{index:t,column:r[t]});n.push({keyName:s.keyName,name:s.name,icon:s.icon,callback:s.callback})}b.AddNewItems(n,!0)}b=k.not(".rq-column-width-readonly").find("div.resizeHelper");b.bind("mousedown",a.proxy(mousedown,this));b.bind("mouseup",a.proxy(mouseup,
this));e.bind("mouseup",a.proxy(mouseup,this));b.bind("touchstart",a.proxy(mousedown,this));b.bind("touchend",a.proxy(mouseup,this));k.bind("touchstart",_onTouchstart);k.bind("touchend",_onTouchend)}})(jQuery);
